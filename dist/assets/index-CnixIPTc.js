var KE=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var BO=KE((jE,fs)=>{function WE(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ch(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bx={exports:{}},bc={},Ux={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),qE=Symbol.for("react.portal"),YE=Symbol.for("react.fragment"),XE=Symbol.for("react.strict_mode"),QE=Symbol.for("react.profiler"),ZE=Symbol.for("react.provider"),JE=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),tw=Symbol.for("react.suspense"),rw=Symbol.for("react.memo"),nw=Symbol.for("react.lazy"),Yp=Symbol.iterator;function sw(r){return r===null||typeof r!="object"?null:(r=Yp&&r[Yp]||r["@@iterator"],typeof r=="function"?r:null)}var zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vx=Object.assign,Gx={};function Ci(r,e,t){this.props=r,this.context=e,this.refs=Gx,this.updater=t||zx}Ci.prototype.isReactComponent={};Ci.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Ci.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Hx(){}Hx.prototype=Ci.prototype;function uh(r,e,t){this.props=r,this.context=e,this.refs=Gx,this.updater=t||zx}var dh=uh.prototype=new Hx;dh.constructor=uh;Vx(dh,Ci.prototype);dh.isPureReactComponent=!0;var Xp=Array.isArray,Kx=Object.prototype.hasOwnProperty,fh={current:null},Wx={key:!0,ref:!0,__self:!0,__source:!0};function qx(r,e,t){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Kx.call(e,n)&&!Wx.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Wa,type:r,key:i,ref:a,props:s,_owner:fh.current}}function iw(r,e){return{$$typeof:Wa,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function hh(r){return typeof r=="object"&&r!==null&&r.$$typeof===Wa}function aw(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var Qp=/\/+/g;function nu(r,e){return typeof r=="object"&&r!==null&&r.key!=null?aw(""+r.key):e.toString(36)}function Zo(r,e,t,n,s){var i=typeof r;(i==="undefined"||i==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Wa:case qE:a=!0}}if(a)return a=r,s=s(a),r=n===""?"."+nu(a,0):n,Xp(s)?(t="",r!=null&&(t=r.replace(Qp,"$&/")+"/"),Zo(s,e,t,"",function(c){return c})):s!=null&&(hh(s)&&(s=iw(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Qp,"$&/")+"/")+r)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Xp(r))for(var o=0;o<r.length;o++){i=r[o];var l=n+nu(i,o);a+=Zo(i,e,t,l,s)}else if(l=sw(r),typeof l=="function")for(r=l.call(r),o=0;!(i=r.next()).done;)i=i.value,l=n+nu(i,o++),a+=Zo(i,e,t,l,s);else if(i==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fo(r,e,t){if(r==null)return r;var n=[],s=0;return Zo(r,n,"","",function(i){return e.call(t,i,s++)}),n}function ow(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var kt={current:null},Jo={transition:null},lw={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:fh};function Yx(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:fo,forEach:function(r,e,t){fo(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return fo(r,function(){e++}),e},toArray:function(r){return fo(r,function(e){return e})||[]},only:function(r){if(!hh(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ee.Component=Ci;Ee.Fragment=YE;Ee.Profiler=QE;Ee.PureComponent=uh;Ee.StrictMode=XE;Ee.Suspense=tw;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw;Ee.act=Yx;Ee.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Vx({},r.props),s=r.key,i=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=fh.current),e.key!==void 0&&(s=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(l in e)Kx.call(e,l)&&!Wx.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Wa,type:r.type,key:s,ref:i,props:n,_owner:a}};Ee.createContext=function(r){return r={$$typeof:JE,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:ZE,_context:r},r.Consumer=r};Ee.createElement=qx;Ee.createFactory=function(r){var e=qx.bind(null,r);return e.type=r,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(r){return{$$typeof:ew,render:r}};Ee.isValidElement=hh;Ee.lazy=function(r){return{$$typeof:nw,_payload:{_status:-1,_result:r},_init:ow}};Ee.memo=function(r,e){return{$$typeof:rw,type:r,compare:e===void 0?null:e}};Ee.startTransition=function(r){var e=Jo.transition;Jo.transition={};try{r()}finally{Jo.transition=e}};Ee.unstable_act=Yx;Ee.useCallback=function(r,e){return kt.current.useCallback(r,e)};Ee.useContext=function(r){return kt.current.useContext(r)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(r){return kt.current.useDeferredValue(r)};Ee.useEffect=function(r,e){return kt.current.useEffect(r,e)};Ee.useId=function(){return kt.current.useId()};Ee.useImperativeHandle=function(r,e,t){return kt.current.useImperativeHandle(r,e,t)};Ee.useInsertionEffect=function(r,e){return kt.current.useInsertionEffect(r,e)};Ee.useLayoutEffect=function(r,e){return kt.current.useLayoutEffect(r,e)};Ee.useMemo=function(r,e){return kt.current.useMemo(r,e)};Ee.useReducer=function(r,e,t){return kt.current.useReducer(r,e,t)};Ee.useRef=function(r){return kt.current.useRef(r)};Ee.useState=function(r){return kt.current.useState(r)};Ee.useSyncExternalStore=function(r,e,t){return kt.current.useSyncExternalStore(r,e,t)};Ee.useTransition=function(){return kt.current.useTransition()};Ee.version="18.3.1";Ux.exports=Ee;var D=Ux.exports;const Le=ch(D),cw=WE({__proto__:null,default:Le},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=D,dw=Symbol.for("react.element"),fw=Symbol.for("react.fragment"),hw=Object.prototype.hasOwnProperty,pw=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mw={key:!0,ref:!0,__self:!0,__source:!0};function Xx(r,e,t){var n,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)hw.call(e,n)&&!mw.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:dw,type:r,key:i,ref:a,props:s,_owner:pw.current}}bc.Fragment=fw;bc.jsx=Xx;bc.jsxs=Xx;Bx.exports=bc;var x=Bx.exports;const Qx=D.createContext(),gw=({children:r})=>{const[e,t]=D.useState(()=>{const s=localStorage.getItem("language");return s||"EN"});D.useEffect(()=>{localStorage.setItem("language",e)},[e]);const n=s=>{t(s)};return x.jsx(Qx.Provider,{value:{language:e,toggleLanguage:n},children:r})},dr=()=>D.useContext(Qx);var Zx={exports:{}},tr={},Jx={exports:{}},ev={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(P,F){var B=P.length;P.push(F);e:for(;0<B;){var $=B-1>>>1,G=P[$];if(0<s(G,F))P[$]=F,P[B]=G,B=$;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var F=P[0],B=P.pop();if(B!==F){P[0]=B;e:for(var $=0,G=P.length,Y=G>>>1;$<Y;){var ee=2*($+1)-1,te=P[ee],se=ee+1,we=P[se];if(0>s(te,B))se<G&&0>s(we,te)?(P[$]=we,P[se]=B,$=se):(P[$]=te,P[ee]=B,$=ee);else if(se<G&&0>s(we,B))P[$]=we,P[se]=B,$=se;else break e}}return F}function s(P,F){var B=P.sortIndex-F.sortIndex;return B!==0?B:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,f=3,p=!1,h=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var F=t(c);F!==null;){if(F.callback===null)n(c);else if(F.startTime<=P)n(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=t(c)}}function S(P){if(g=!1,v(P),!h)if(t(l)!==null)h=!0,O(E);else{var F=t(c);F!==null&&j(S,F.startTime-P)}}function E(P,F){h=!1,g&&(g=!1,b(I),I=-1),p=!0;var B=f;try{for(v(F),d=t(l);d!==null&&(!(d.expirationTime>F)||P&&!R());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var G=$(d.expirationTime<=F);F=r.unstable_now(),typeof G=="function"?d.callback=G:d===t(l)&&n(l),v(F)}else n(l);d=t(l)}if(d!==null)var Y=!0;else{var ee=t(c);ee!==null&&j(S,ee.startTime-F),Y=!1}return Y}finally{d=null,f=B,p=!1}}var C=!1,L=null,I=-1,T=5,w=-1;function R(){return!(r.unstable_now()-w<T)}function _(){if(L!==null){var P=r.unstable_now();w=P;var F=!0;try{F=L(!0,P)}finally{F?k():(C=!1,L=null)}}else C=!1}var k;if(typeof m=="function")k=function(){m(_)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,M=N.port2;N.port1.onmessage=_,k=function(){M.postMessage(null)}}else k=function(){y(_,0)};function O(P){L=P,C||(C=!0,k())}function j(P,F){I=y(function(){P(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_continueExecution=function(){h||p||(h=!0,O(E))},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(P){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var B=f;f=F;try{return P()}finally{f=B}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=f;f=P;try{return F()}finally{f=B}},r.unstable_scheduleCallback=function(P,F,B){var $=r.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?$+B:$):B=$,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,P={id:u++,callback:F,priorityLevel:P,startTime:B,expirationTime:G,sortIndex:-1},B>$?(P.sortIndex=B,e(c,P),t(l)===null&&P===t(c)&&(g?(b(I),I=-1):g=!0,j(S,B-$))):(P.sortIndex=G,e(l,P),h||p||(h=!0,O(E))),P},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(P){var F=f;return function(){var B=f;f=F;try{return P.apply(this,arguments)}finally{f=B}}}})(ev);Jx.exports=ev;var xw=Jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=D,er=xw;function q(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tv=new Set,xa={};function Ds(r,e){gi(r,e),gi(r+"Capture",e)}function gi(r,e){for(xa[r]=e,r=0;r<e.length;r++)tv.add(e[r])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vd=Object.prototype.hasOwnProperty,yw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zp={},Jp={};function bw(r){return vd.call(Jp,r)?!0:vd.call(Zp,r)?!1:yw.test(r)?Jp[r]=!0:(Zp[r]=!0,!1)}function Sw(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Ew(r,e,t,n){if(e===null||typeof e>"u"||Sw(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(r,e,t,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){xt[r]=new _t(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];xt[e]=new _t(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){xt[r]=new _t(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){xt[r]=new _t(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){xt[r]=new _t(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){xt[r]=new _t(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){xt[r]=new _t(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){xt[r]=new _t(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){xt[r]=new _t(r,5,!1,r.toLowerCase(),null,!1,!1)});var ph=/[\-:]([a-z])/g;function mh(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(ph,mh);xt[e]=new _t(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(ph,mh);xt[e]=new _t(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(ph,mh);xt[e]=new _t(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){xt[r]=new _t(r,1,!1,r.toLowerCase(),null,!1,!1)});xt.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){xt[r]=new _t(r,1,!1,r.toLowerCase(),null,!0,!0)});function gh(r,e,t,n){var s=xt.hasOwnProperty(e)?xt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ew(e,t,s,n)&&(t=null),n||s===null?bw(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):s.mustUseProperty?r[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?r.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var xn=vw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ho=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),xh=Symbol.for("react.strict_mode"),yd=Symbol.for("react.profiler"),rv=Symbol.for("react.provider"),nv=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),bd=Symbol.for("react.suspense"),Sd=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),sv=Symbol.for("react.offscreen"),em=Symbol.iterator;function Fi(r){return r===null||typeof r!="object"?null:(r=em&&r[em]||r["@@iterator"],typeof r=="function"?r:null)}var Xe=Object.assign,su;function Xi(r){if(su===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+r}var iu=!1;function au(r,e){if(!r||iu)return"";iu=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(r,[],e)}else{try{e.call()}catch(c){n=c}r.call(e.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=o);break}}}finally{iu=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Xi(r):""}function ww(r){switch(r.tag){case 5:return Xi(r.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 2:case 15:return r=au(r.type,!1),r;case 11:return r=au(r.type.render,!1),r;case 1:return r=au(r.type,!0),r;default:return""}}function Ed(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Gs:return"Fragment";case Vs:return"Portal";case yd:return"Profiler";case xh:return"StrictMode";case bd:return"Suspense";case Sd:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case nv:return(r.displayName||"Context")+".Consumer";case rv:return(r._context.displayName||"Context")+".Provider";case vh:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case yh:return e=r.displayName||null,e!==null?e:Ed(r.type)||"Memo";case In:e=r._payload,r=r._init;try{return Ed(r(e))}catch{}}return null}function Tw(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ed(e);case 8:return e===xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wn(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function iv(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Aw(r){var e=iv(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function po(r){r._valueTracker||(r._valueTracker=Aw(r))}function av(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=iv(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Tl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function wd(r,e){var t=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function tm(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Wn(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ov(r,e){e=e.checked,e!=null&&gh(r,"checked",e,!1)}function Td(r,e){ov(r,e);var t=Wn(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Ad(r,e.type,t):e.hasOwnProperty("defaultValue")&&Ad(r,e.type,Wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function rm(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Ad(r,e,t){(e!=="number"||Tl(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Qi=Array.isArray;function ni(r,e,t,n){if(r=r.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<r.length;t++)s=e.hasOwnProperty("$"+r[t].value),r[t].selected!==s&&(r[t].selected=s),s&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Wn(t),e=null,s=0;s<r.length;s++){if(r[s].value===t){r[s].selected=!0,n&&(r[s].defaultSelected=!0);return}e!==null||r[s].disabled||(e=r[s])}e!==null&&(e.selected=!0)}}function Id(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function nm(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(Qi(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:Wn(t)}}function lv(r,e){var t=Wn(e.value),n=Wn(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function sm(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function cv(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ld(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?cv(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var mo,uv=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,s)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function va(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iw=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(r){Iw.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),ra[e]=ra[r]})});function dv(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ra.hasOwnProperty(r)&&ra[r]?(""+e).trim():e+"px"}function fv(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=dv(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,s):r[t]=s}}var Lw=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cd(r,e){if(e){if(Lw[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Rd(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=null;function bh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _d=null,si=null,ii=null;function im(r){if(r=Xa(r)){if(typeof _d!="function")throw Error(q(280));var e=r.stateNode;e&&(e=Ac(e),_d(r.stateNode,r.type,e))}}function hv(r){si?ii?ii.push(r):ii=[r]:si=r}function pv(){if(si){var r=si,e=ii;if(ii=si=null,im(r),e)for(r=0;r<e.length;r++)im(e[r])}}function mv(r,e){return r(e)}function gv(){}var ou=!1;function xv(r,e,t){if(ou)return r(e,t);ou=!0;try{return mv(r,e,t)}finally{ou=!1,(si!==null||ii!==null)&&(gv(),pv())}}function ya(r,e){var t=r.stateNode;if(t===null)return null;var n=Ac(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var Pd=!1;if(un)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Pd=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Pd=!1}function Cw(r,e,t,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var na=!1,Al=null,Il=!1,Dd=null,Rw={onError:function(r){na=!0,Al=r}};function kw(r,e,t,n,s,i,a,o,l){na=!1,Al=null,Cw.apply(Rw,arguments)}function _w(r,e,t,n,s,i,a,o,l){if(kw.apply(this,arguments),na){if(na){var c=Al;na=!1,Al=null}else throw Error(q(198));Il||(Il=!0,Dd=c)}}function Ns(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function vv(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function am(r){if(Ns(r)!==r)throw Error(q(188))}function Pw(r){var e=r.alternate;if(!e){if(e=Ns(r),e===null)throw Error(q(188));return e!==r?null:r}for(var t=r,n=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return am(s),r;if(i===n)return am(s),e;i=i.sibling}throw Error(q(188))}if(t.return!==n.return)t=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a)throw Error(q(189))}}if(t.alternate!==n)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?r:e}function yv(r){return r=Pw(r),r!==null?bv(r):null}function bv(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=bv(r);if(e!==null)return e;r=r.sibling}return null}var Sv=er.unstable_scheduleCallback,om=er.unstable_cancelCallback,Dw=er.unstable_shouldYield,Nw=er.unstable_requestPaint,tt=er.unstable_now,Ow=er.unstable_getCurrentPriorityLevel,Sh=er.unstable_ImmediatePriority,Ev=er.unstable_UserBlockingPriority,Ll=er.unstable_NormalPriority,Mw=er.unstable_LowPriority,wv=er.unstable_IdlePriority,Sc=null,Ur=null;function Fw(r){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(Sc,r,void 0,(r.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:Bw,jw=Math.log,$w=Math.LN2;function Bw(r){return r>>>=0,r===0?32:31-(jw(r)/$w|0)|0}var go=64,xo=4194304;function Zi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Cl(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,s=r.suspendedLanes,i=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?n=Zi(o):(i&=a,i!==0&&(n=Zi(i)))}else a=t&~s,a!==0?n=Zi(a):i!==0&&(n=Zi(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-yr(e),s=1<<t,n|=r[t],e&=~s;return n}function Uw(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zw(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,s=r.expirationTimes,i=r.pendingLanes;0<i;){var a=31-yr(i),o=1<<a,l=s[a];l===-1?(!(o&t)||o&n)&&(s[a]=Uw(o,e)):l<=e&&(r.expiredLanes|=o),i&=~o}}function Nd(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Tv(){var r=go;return go<<=1,!(go&4194240)&&(go=64),r}function lu(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function qa(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-yr(e),r[e]=t}function Vw(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var s=31-yr(t),i=1<<s;e[s]=0,n[s]=-1,r[s]=-1,t&=~i}}function Eh(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-yr(t),s=1<<n;s&e|r[n]&e&&(r[n]|=e),t&=~s}}var Pe=0;function Av(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Iv,wh,Lv,Cv,Rv,Od=!1,vo=[],jn=null,$n=null,Bn=null,ba=new Map,Sa=new Map,_n=[],Gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lm(r,e){switch(r){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function $i(r,e,t,n,s,i){return r===null||r.nativeEvent!==i?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xa(e),e!==null&&wh(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),r)}function Hw(r,e,t,n,s){switch(e){case"focusin":return jn=$i(jn,r,e,t,n,s),!0;case"dragenter":return $n=$i($n,r,e,t,n,s),!0;case"mouseover":return Bn=$i(Bn,r,e,t,n,s),!0;case"pointerover":var i=s.pointerId;return ba.set(i,$i(ba.get(i)||null,r,e,t,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sa.set(i,$i(Sa.get(i)||null,r,e,t,n,s)),!0}return!1}function kv(r){var e=hs(r.target);if(e!==null){var t=Ns(e);if(t!==null){if(e=t.tag,e===13){if(e=vv(t),e!==null){r.blockedOn=e,Rv(r.priority,function(){Lv(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function el(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=Md(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);kd=n,t.target.dispatchEvent(n),kd=null}else return e=Xa(t),e!==null&&wh(e),r.blockedOn=t,!1;e.shift()}return!0}function cm(r,e,t){el(r)&&t.delete(e)}function Kw(){Od=!1,jn!==null&&el(jn)&&(jn=null),$n!==null&&el($n)&&($n=null),Bn!==null&&el(Bn)&&(Bn=null),ba.forEach(cm),Sa.forEach(cm)}function Bi(r,e){r.blockedOn===e&&(r.blockedOn=null,Od||(Od=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Kw)))}function Ea(r){function e(s){return Bi(s,r)}if(0<vo.length){Bi(vo[0],r);for(var t=1;t<vo.length;t++){var n=vo[t];n.blockedOn===r&&(n.blockedOn=null)}}for(jn!==null&&Bi(jn,r),$n!==null&&Bi($n,r),Bn!==null&&Bi(Bn,r),ba.forEach(e),Sa.forEach(e),t=0;t<_n.length;t++)n=_n[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<_n.length&&(t=_n[0],t.blockedOn===null);)kv(t),t.blockedOn===null&&_n.shift()}var ai=xn.ReactCurrentBatchConfig,Rl=!0;function Ww(r,e,t,n){var s=Pe,i=ai.transition;ai.transition=null;try{Pe=1,Th(r,e,t,n)}finally{Pe=s,ai.transition=i}}function qw(r,e,t,n){var s=Pe,i=ai.transition;ai.transition=null;try{Pe=4,Th(r,e,t,n)}finally{Pe=s,ai.transition=i}}function Th(r,e,t,n){if(Rl){var s=Md(r,e,t,n);if(s===null)vu(r,e,n,kl,t),lm(r,n);else if(Hw(s,r,e,t,n))n.stopPropagation();else if(lm(r,n),e&4&&-1<Gw.indexOf(r)){for(;s!==null;){var i=Xa(s);if(i!==null&&Iv(i),i=Md(r,e,t,n),i===null&&vu(r,e,n,kl,t),i===s)break;s=i}s!==null&&n.stopPropagation()}else vu(r,e,n,null,t)}}var kl=null;function Md(r,e,t,n){if(kl=null,r=bh(n),r=hs(r),r!==null)if(e=Ns(r),e===null)r=null;else if(t=e.tag,t===13){if(r=vv(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return kl=r,null}function _v(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ow()){case Sh:return 1;case Ev:return 4;case Ll:case Mw:return 16;case wv:return 536870912;default:return 16}default:return 16}}var Dn=null,Ah=null,tl=null;function Pv(){if(tl)return tl;var r,e=Ah,t=e.length,n,s="value"in Dn?Dn.value:Dn.textContent,i=s.length;for(r=0;r<t&&e[r]===s[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===s[i-n];n++);return tl=s.slice(r,1<n?1-n:void 0)}function rl(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function yo(){return!0}function um(){return!1}function rr(r){function e(t,n,s,i,a){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yo:um,this.isPropagationStopped=um,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ih=rr(Ri),Ya=Xe({},Ri,{view:0,detail:0}),Yw=rr(Ya),cu,uu,Ui,Ec=Xe({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ui&&(Ui&&r.type==="mousemove"?(cu=r.screenX-Ui.screenX,uu=r.screenY-Ui.screenY):uu=cu=0,Ui=r),cu)},movementY:function(r){return"movementY"in r?r.movementY:uu}}),dm=rr(Ec),Xw=Xe({},Ec,{dataTransfer:0}),Qw=rr(Xw),Zw=Xe({},Ya,{relatedTarget:0}),du=rr(Zw),Jw=Xe({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),eT=rr(Jw),tT=Xe({},Ri,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),rT=rr(tT),nT=Xe({},Ri,{data:0}),fm=rr(nT),sT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oT(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=aT[r])?!!e[r]:!1}function Lh(){return oT}var lT=Xe({},Ya,{key:function(r){if(r.key){var e=sT[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=rl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?iT[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lh,charCode:function(r){return r.type==="keypress"?rl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?rl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cT=rr(lT),uT=Xe({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hm=rr(uT),dT=Xe({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lh}),fT=rr(dT),hT=Xe({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),pT=rr(hT),mT=Xe({},Ec,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=rr(mT),xT=[9,13,27,32],Ch=un&&"CompositionEvent"in window,sa=null;un&&"documentMode"in document&&(sa=document.documentMode);var vT=un&&"TextEvent"in window&&!sa,Dv=un&&(!Ch||sa&&8<sa&&11>=sa),pm=" ",mm=!1;function Nv(r,e){switch(r){case"keyup":return xT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ov(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Hs=!1;function yT(r,e){switch(r){case"compositionend":return Ov(e);case"keypress":return e.which!==32?null:(mm=!0,pm);case"textInput":return r=e.data,r===pm&&mm?null:r;default:return null}}function bT(r,e){if(Hs)return r==="compositionend"||!Ch&&Nv(r,e)?(r=Pv(),tl=Ah=Dn=null,Hs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dv&&e.locale!=="ko"?null:e.data;default:return null}}var ST={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!ST[r.type]:e==="textarea"}function Mv(r,e,t,n){hv(n),e=_l(e,"onChange"),0<e.length&&(t=new Ih("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var ia=null,wa=null;function ET(r){Wv(r,0)}function wc(r){var e=qs(r);if(av(e))return r}function wT(r,e){if(r==="change")return e}var Fv=!1;if(un){var fu;if(un){var hu="oninput"in document;if(!hu){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),hu=typeof xm.oninput=="function"}fu=hu}else fu=!1;Fv=fu&&(!document.documentMode||9<document.documentMode)}function vm(){ia&&(ia.detachEvent("onpropertychange",jv),wa=ia=null)}function jv(r){if(r.propertyName==="value"&&wc(wa)){var e=[];Mv(e,wa,r,bh(r)),xv(ET,e)}}function TT(r,e,t){r==="focusin"?(vm(),ia=e,wa=t,ia.attachEvent("onpropertychange",jv)):r==="focusout"&&vm()}function AT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wc(wa)}function IT(r,e){if(r==="click")return wc(e)}function LT(r,e){if(r==="input"||r==="change")return wc(e)}function CT(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var wr=typeof Object.is=="function"?Object.is:CT;function Ta(r,e){if(wr(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!vd.call(e,s)||!wr(r[s],e[s]))return!1}return!0}function ym(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bm(r,e){var t=ym(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ym(t)}}function $v(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?$v(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function Bv(){for(var r=window,e=Tl();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Tl(r.document)}return e}function Rh(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function RT(r){var e=Bv(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&$v(t.ownerDocument.documentElement,t)){if(n!==null&&Rh(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var s=t.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!r.extend&&i>n&&(s=n,n=i,i=s),s=bm(t,i);var a=bm(t,n);s&&a&&(r.rangeCount!==1||r.anchorNode!==s.node||r.anchorOffset!==s.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),r.removeAllRanges(),i>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var kT=un&&"documentMode"in document&&11>=document.documentMode,Ks=null,Fd=null,aa=null,jd=!1;function Sm(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jd||Ks==null||Ks!==Tl(n)||(n=Ks,"selectionStart"in n&&Rh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),aa&&Ta(aa,n)||(aa=n,n=_l(Fd,"onSelect"),0<n.length&&(e=new Ih("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Ks)))}function bo(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Ws={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionend:bo("Transition","TransitionEnd")},pu={},Uv={};un&&(Uv=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Tc(r){if(pu[r])return pu[r];if(!Ws[r])return r;var e=Ws[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in Uv)return pu[r]=e[t];return r}var zv=Tc("animationend"),Vv=Tc("animationiteration"),Gv=Tc("animationstart"),Hv=Tc("transitionend"),Kv=new Map,Em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(r,e){Kv.set(r,e),Ds(e,[r])}for(var mu=0;mu<Em.length;mu++){var gu=Em[mu],_T=gu.toLowerCase(),PT=gu[0].toUpperCase()+gu.slice(1);ts(_T,"on"+PT)}ts(zv,"onAnimationEnd");ts(Vv,"onAnimationIteration");ts(Gv,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(Hv,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ji));function wm(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,_w(n,e,void 0,r),r.currentTarget=null}function Wv(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;wm(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;wm(s,o,c),i=l}}}if(Il)throw r=Dd,Il=!1,Dd=null,r}function ze(r,e){var t=e[Vd];t===void 0&&(t=e[Vd]=new Set);var n=r+"__bubble";t.has(n)||(qv(e,r,2,!1),t.add(n))}function xu(r,e,t){var n=0;e&&(n|=4),qv(t,r,n,e)}var So="_reactListening"+Math.random().toString(36).slice(2);function Aa(r){if(!r[So]){r[So]=!0,tv.forEach(function(t){t!=="selectionchange"&&(DT.has(t)||xu(t,!1,r),xu(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[So]||(e[So]=!0,xu("selectionchange",!1,e))}}function qv(r,e,t,n){switch(_v(e)){case 1:var s=Ww;break;case 4:s=qw;break;default:s=Th}t=s.bind(null,e,t,r),s=void 0,!Pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?r.addEventListener(e,t,{capture:!0,passive:s}):r.addEventListener(e,t,!0):s!==void 0?r.addEventListener(e,t,{passive:s}):r.addEventListener(e,t,!1)}function vu(r,e,t,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=hs(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}xv(function(){var c=i,u=bh(t),d=[];e:{var f=Kv.get(r);if(f!==void 0){var p=Ih,h=r;switch(r){case"keypress":if(rl(t)===0)break e;case"keydown":case"keyup":p=cT;break;case"focusin":h="focus",p=du;break;case"focusout":h="blur",p=du;break;case"beforeblur":case"afterblur":p=du;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fT;break;case zv:case Vv:case Gv:p=eT;break;case Hv:p=pT;break;case"scroll":p=Yw;break;case"wheel":p=gT;break;case"copy":case"cut":case"paste":p=rT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hm}var g=(e&4)!==0,y=!g&&r==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var m=c,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,b!==null&&(S=ya(m,b),S!=null&&g.push(Ia(m,S,v)))),y)break;m=m.return}0<g.length&&(f=new p(f,h,null,t,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",f&&t!==kd&&(h=t.relatedTarget||t.fromElement)&&(hs(h)||h[dn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=t.relatedTarget||t.toElement,p=c,h=h?hs(h):null,h!==null&&(y=Ns(h),h!==y||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(g=dm,S="onMouseLeave",b="onMouseEnter",m="mouse",(r==="pointerout"||r==="pointerover")&&(g=hm,S="onPointerLeave",b="onPointerEnter",m="pointer"),y=p==null?f:qs(p),v=h==null?f:qs(h),f=new g(S,m+"leave",p,t,u),f.target=y,f.relatedTarget=v,S=null,hs(u)===c&&(g=new g(b,m+"enter",h,t,u),g.target=v,g.relatedTarget=y,S=g),y=S,p&&h)t:{for(g=p,b=h,m=0,v=g;v;v=Fs(v))m++;for(v=0,S=b;S;S=Fs(S))v++;for(;0<m-v;)g=Fs(g),m--;for(;0<v-m;)b=Fs(b),v--;for(;m--;){if(g===b||b!==null&&g===b.alternate)break t;g=Fs(g),b=Fs(b)}g=null}else g=null;p!==null&&Tm(d,f,p,g,!1),h!==null&&y!==null&&Tm(d,y,h,g,!0)}}e:{if(f=c?qs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=wT;else if(gm(f))if(Fv)E=LT;else{E=AT;var C=TT}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=IT);if(E&&(E=E(r,c))){Mv(d,E,t,u);break e}C&&C(r,f,c),r==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Ad(f,"number",f.value)}switch(C=c?qs(c):window,r){case"focusin":(gm(C)||C.contentEditable==="true")&&(Ks=C,Fd=c,aa=null);break;case"focusout":aa=Fd=Ks=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Sm(d,t,u);break;case"selectionchange":if(kT)break;case"keydown":case"keyup":Sm(d,t,u)}var L;if(Ch)e:{switch(r){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Hs?Nv(r,t)&&(I="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(Dv&&t.locale!=="ko"&&(Hs||I!=="onCompositionStart"?I==="onCompositionEnd"&&Hs&&(L=Pv()):(Dn=u,Ah="value"in Dn?Dn.value:Dn.textContent,Hs=!0)),C=_l(c,I),0<C.length&&(I=new fm(I,r,null,t,u),d.push({event:I,listeners:C}),L?I.data=L:(L=Ov(t),L!==null&&(I.data=L)))),(L=vT?yT(r,t):bT(r,t))&&(c=_l(c,"onBeforeInput"),0<c.length&&(u=new fm("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=L))}Wv(d,e)})}function Ia(r,e,t){return{instance:r,listener:e,currentTarget:t}}function _l(r,e){for(var t=e+"Capture",n=[];r!==null;){var s=r,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ya(r,t),i!=null&&n.unshift(Ia(r,i,s)),i=ya(r,e),i!=null&&n.push(Ia(r,i,s))),r=r.return}return n}function Fs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Tm(r,e,t,n,s){for(var i=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=ya(t,i),l!=null&&a.unshift(Ia(t,l,o))):s||(l=ya(t,i),l!=null&&a.push(Ia(t,l,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var NT=/\r\n?/g,OT=/\u0000|\uFFFD/g;function Am(r){return(typeof r=="string"?r:""+r).replace(NT,`
`).replace(OT,"")}function Eo(r,e,t){if(e=Am(e),Am(r)!==e&&t)throw Error(q(425))}function Pl(){}var $d=null,Bd=null;function Ud(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,MT=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,FT=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(r){return Im.resolve(null).then(r).catch(jT)}:zd;function jT(r){setTimeout(function(){throw r})}function yu(r,e){var t=e,n=0;do{var s=t.nextSibling;if(r.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){r.removeChild(s),Ea(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);Ea(e)}function Un(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function Lm(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var ki=Math.random().toString(36).slice(2),Or="__reactFiber$"+ki,La="__reactProps$"+ki,dn="__reactContainer$"+ki,Vd="__reactEvents$"+ki,$T="__reactListeners$"+ki,BT="__reactHandles$"+ki;function hs(r){var e=r[Or];if(e)return e;for(var t=r.parentNode;t;){if(e=t[dn]||t[Or]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=Lm(r);r!==null;){if(t=r[Or])return t;r=Lm(r)}return e}r=t,t=r.parentNode}return null}function Xa(r){return r=r[Or]||r[dn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function qs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(q(33))}function Ac(r){return r[La]||null}var Gd=[],Ys=-1;function rs(r){return{current:r}}function Ve(r){0>Ys||(r.current=Gd[Ys],Gd[Ys]=null,Ys--)}function Be(r,e){Ys++,Gd[Ys]=r.current,r.current=e}var qn={},Et=rs(qn),jt=rs(!1),ws=qn;function xi(r,e){var t=r.type.contextTypes;if(!t)return qn;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=s),s}function $t(r){return r=r.childContextTypes,r!=null}function Dl(){Ve(jt),Ve(Et)}function Cm(r,e,t){if(Et.current!==qn)throw Error(q(168));Be(Et,e),Be(jt,t)}function Yv(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(q(108,Tw(r)||"Unknown",s));return Xe({},t,n)}function Nl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||qn,ws=Et.current,Be(Et,r),Be(jt,jt.current),!0}function Rm(r,e,t){var n=r.stateNode;if(!n)throw Error(q(169));t?(r=Yv(r,e,ws),n.__reactInternalMemoizedMergedChildContext=r,Ve(jt),Ve(Et),Be(Et,r)):Ve(jt),Be(jt,t)}var sn=null,Ic=!1,bu=!1;function Xv(r){sn===null?sn=[r]:sn.push(r)}function UT(r){Ic=!0,Xv(r)}function ns(){if(!bu&&sn!==null){bu=!0;var r=0,e=Pe;try{var t=sn;for(Pe=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}sn=null,Ic=!1}catch(s){throw sn!==null&&(sn=sn.slice(r+1)),Sv(Sh,ns),s}finally{Pe=e,bu=!1}}return null}var Xs=[],Qs=0,Ol=null,Ml=0,sr=[],ir=0,Ts=null,on=1,ln="";function cs(r,e){Xs[Qs++]=Ml,Xs[Qs++]=Ol,Ol=r,Ml=e}function Qv(r,e,t){sr[ir++]=on,sr[ir++]=ln,sr[ir++]=Ts,Ts=r;var n=on;r=ln;var s=32-yr(n)-1;n&=~(1<<s),t+=1;var i=32-yr(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,on=1<<32-yr(e)+s|t<<s|n,ln=i+r}else on=1<<i|t<<s|n,ln=r}function kh(r){r.return!==null&&(cs(r,1),Qv(r,1,0))}function _h(r){for(;r===Ol;)Ol=Xs[--Qs],Xs[Qs]=null,Ml=Xs[--Qs],Xs[Qs]=null;for(;r===Ts;)Ts=sr[--ir],sr[ir]=null,ln=sr[--ir],sr[ir]=null,on=sr[--ir],sr[ir]=null}var Zt=null,Qt=null,He=!1,vr=null;function Zv(r,e){var t=ar(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function km(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Zt=r,Qt=Un(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Zt=r,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ts!==null?{id:on,overflow:ln}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ar(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Zt=r,Qt=null,!0):!1;default:return!1}}function Hd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Kd(r){if(He){var e=Qt;if(e){var t=e;if(!km(r,e)){if(Hd(r))throw Error(q(418));e=Un(t.nextSibling);var n=Zt;e&&km(r,e)?Zv(n,t):(r.flags=r.flags&-4097|2,He=!1,Zt=r)}}else{if(Hd(r))throw Error(q(418));r.flags=r.flags&-4097|2,He=!1,Zt=r}}}function _m(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Zt=r}function wo(r){if(r!==Zt)return!1;if(!He)return _m(r),He=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Ud(r.type,r.memoizedProps)),e&&(e=Qt)){if(Hd(r))throw Jv(),Error(q(418));for(;e;)Zv(r,e),e=Un(e.nextSibling)}if(_m(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(q(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Qt=Un(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Qt=null}}else Qt=Zt?Un(r.stateNode.nextSibling):null;return!0}function Jv(){for(var r=Qt;r;)r=Un(r.nextSibling)}function vi(){Qt=Zt=null,He=!1}function Ph(r){vr===null?vr=[r]:vr.push(r)}var zT=xn.ReactCurrentBatchConfig;function zi(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var n=t.stateNode}if(!n)throw Error(q(147,r));var s=n,i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof r!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,r))}return r}function To(r,e){throw r=Object.prototype.toString.call(e),Error(q(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function Pm(r){var e=r._init;return e(r._payload)}function ey(r){function e(b,m){if(r){var v=b.deletions;v===null?(b.deletions=[m],b.flags|=16):v.push(m)}}function t(b,m){if(!r)return null;for(;m!==null;)e(b,m),m=m.sibling;return null}function n(b,m){for(b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function s(b,m){return b=Hn(b,m),b.index=0,b.sibling=null,b}function i(b,m,v){return b.index=v,r?(v=b.alternate,v!==null?(v=v.index,v<m?(b.flags|=2,m):v):(b.flags|=2,m)):(b.flags|=1048576,m)}function a(b){return r&&b.alternate===null&&(b.flags|=2),b}function o(b,m,v,S){return m===null||m.tag!==6?(m=Lu(v,b.mode,S),m.return=b,m):(m=s(m,v),m.return=b,m)}function l(b,m,v,S){var E=v.type;return E===Gs?u(b,m,v.props.children,S,v.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===In&&Pm(E)===m.type)?(S=s(m,v.props),S.ref=zi(b,m,v),S.return=b,S):(S=cl(v.type,v.key,v.props,null,b.mode,S),S.ref=zi(b,m,v),S.return=b,S)}function c(b,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Cu(v,b.mode,S),m.return=b,m):(m=s(m,v.children||[]),m.return=b,m)}function u(b,m,v,S,E){return m===null||m.tag!==7?(m=ys(v,b.mode,S,E),m.return=b,m):(m=s(m,v),m.return=b,m)}function d(b,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Lu(""+m,b.mode,v),m.return=b,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ho:return v=cl(m.type,m.key,m.props,null,b.mode,v),v.ref=zi(b,null,m),v.return=b,v;case Vs:return m=Cu(m,b.mode,v),m.return=b,m;case In:var S=m._init;return d(b,S(m._payload),v)}if(Qi(m)||Fi(m))return m=ys(m,b.mode,v,null),m.return=b,m;To(b,m)}return null}function f(b,m,v,S){var E=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:o(b,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ho:return v.key===E?l(b,m,v,S):null;case Vs:return v.key===E?c(b,m,v,S):null;case In:return E=v._init,f(b,m,E(v._payload),S)}if(Qi(v)||Fi(v))return E!==null?null:u(b,m,v,S,null);To(b,v)}return null}function p(b,m,v,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(v)||null,o(m,b,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ho:return b=b.get(S.key===null?v:S.key)||null,l(m,b,S,E);case Vs:return b=b.get(S.key===null?v:S.key)||null,c(m,b,S,E);case In:var C=S._init;return p(b,m,v,C(S._payload),E)}if(Qi(S)||Fi(S))return b=b.get(v)||null,u(m,b,S,E,null);To(m,S)}return null}function h(b,m,v,S){for(var E=null,C=null,L=m,I=m=0,T=null;L!==null&&I<v.length;I++){L.index>I?(T=L,L=null):T=L.sibling;var w=f(b,L,v[I],S);if(w===null){L===null&&(L=T);break}r&&L&&w.alternate===null&&e(b,L),m=i(w,m,I),C===null?E=w:C.sibling=w,C=w,L=T}if(I===v.length)return t(b,L),He&&cs(b,I),E;if(L===null){for(;I<v.length;I++)L=d(b,v[I],S),L!==null&&(m=i(L,m,I),C===null?E=L:C.sibling=L,C=L);return He&&cs(b,I),E}for(L=n(b,L);I<v.length;I++)T=p(L,b,I,v[I],S),T!==null&&(r&&T.alternate!==null&&L.delete(T.key===null?I:T.key),m=i(T,m,I),C===null?E=T:C.sibling=T,C=T);return r&&L.forEach(function(R){return e(b,R)}),He&&cs(b,I),E}function g(b,m,v,S){var E=Fi(v);if(typeof E!="function")throw Error(q(150));if(v=E.call(v),v==null)throw Error(q(151));for(var C=E=null,L=m,I=m=0,T=null,w=v.next();L!==null&&!w.done;I++,w=v.next()){L.index>I?(T=L,L=null):T=L.sibling;var R=f(b,L,w.value,S);if(R===null){L===null&&(L=T);break}r&&L&&R.alternate===null&&e(b,L),m=i(R,m,I),C===null?E=R:C.sibling=R,C=R,L=T}if(w.done)return t(b,L),He&&cs(b,I),E;if(L===null){for(;!w.done;I++,w=v.next())w=d(b,w.value,S),w!==null&&(m=i(w,m,I),C===null?E=w:C.sibling=w,C=w);return He&&cs(b,I),E}for(L=n(b,L);!w.done;I++,w=v.next())w=p(L,b,I,w.value,S),w!==null&&(r&&w.alternate!==null&&L.delete(w.key===null?I:w.key),m=i(w,m,I),C===null?E=w:C.sibling=w,C=w);return r&&L.forEach(function(_){return e(b,_)}),He&&cs(b,I),E}function y(b,m,v,S){if(typeof v=="object"&&v!==null&&v.type===Gs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ho:e:{for(var E=v.key,C=m;C!==null;){if(C.key===E){if(E=v.type,E===Gs){if(C.tag===7){t(b,C.sibling),m=s(C,v.props.children),m.return=b,b=m;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===In&&Pm(E)===C.type){t(b,C.sibling),m=s(C,v.props),m.ref=zi(b,C,v),m.return=b,b=m;break e}t(b,C);break}else e(b,C);C=C.sibling}v.type===Gs?(m=ys(v.props.children,b.mode,S,v.key),m.return=b,b=m):(S=cl(v.type,v.key,v.props,null,b.mode,S),S.ref=zi(b,m,v),S.return=b,b=S)}return a(b);case Vs:e:{for(C=v.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){t(b,m.sibling),m=s(m,v.children||[]),m.return=b,b=m;break e}else{t(b,m);break}else e(b,m);m=m.sibling}m=Cu(v,b.mode,S),m.return=b,b=m}return a(b);case In:return C=v._init,y(b,m,C(v._payload),S)}if(Qi(v))return h(b,m,v,S);if(Fi(v))return g(b,m,v,S);To(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(t(b,m.sibling),m=s(m,v),m.return=b,b=m):(t(b,m),m=Lu(v,b.mode,S),m.return=b,b=m),a(b)):t(b,m)}return y}var yi=ey(!0),ty=ey(!1),Fl=rs(null),jl=null,Zs=null,Dh=null;function Nh(){Dh=Zs=jl=null}function Oh(r){var e=Fl.current;Ve(Fl),r._currentValue=e}function Wd(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function oi(r,e){jl=r,Dh=Zs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Ot=!0),r.firstContext=null)}function lr(r){var e=r._currentValue;if(Dh!==r)if(r={context:r,memoizedValue:e,next:null},Zs===null){if(jl===null)throw Error(q(308));Zs=r,jl.dependencies={lanes:0,firstContext:r}}else Zs=Zs.next=r;return e}var ps=null;function Mh(r){ps===null?ps=[r]:ps.push(r)}function ry(r,e,t,n){var s=e.interleaved;return s===null?(t.next=t,Mh(e)):(t.next=s.next,s.next=t),e.interleaved=t,fn(r,n)}function fn(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Ln=!1;function Fh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ny(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function cn(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,fn(r,t)}return s=n.interleaved,s===null?(e.next=e,Mh(n)):(e.next=s.next,s.next=e),n.interleaved=e,fn(r,t)}function nl(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Eh(r,t)}}function Dm(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function $l(r,e,t,n){var s=r.updateQueue;Ln=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=r.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;a=0,u=c=l=null,o=i;do{var f=o.lane,p=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=r,g=o;switch(f=e,p=t,g.tag){case 1:if(h=g.payload,typeof h=="function"){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,f=typeof h=="function"?h.call(p,d,f):h,f==null)break e;d=Xe({},d,f);break e;case 2:Ln=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Is|=a,r.lanes=a,r.memoizedState=d}}function Nm(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(q(191,s));s.call(n)}}}var Qa={},zr=rs(Qa),Ca=rs(Qa),Ra=rs(Qa);function ms(r){if(r===Qa)throw Error(q(174));return r}function jh(r,e){switch(Be(Ra,e),Be(Ca,r),Be(zr,Qa),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ld(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=Ld(e,r)}Ve(zr),Be(zr,e)}function bi(){Ve(zr),Ve(Ca),Ve(Ra)}function sy(r){ms(Ra.current);var e=ms(zr.current),t=Ld(e,r.type);e!==t&&(Be(Ca,r),Be(zr,t))}function $h(r){Ca.current===r&&(Ve(zr),Ve(Ca))}var We=rs(0);function Bl(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function Bh(){for(var r=0;r<Su.length;r++)Su[r]._workInProgressVersionPrimary=null;Su.length=0}var sl=xn.ReactCurrentDispatcher,Eu=xn.ReactCurrentBatchConfig,As=0,Ye=null,at=null,dt=null,Ul=!1,oa=!1,ka=0,VT=0;function vt(){throw Error(q(321))}function Uh(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!wr(r[t],e[t]))return!1;return!0}function zh(r,e,t,n,s,i){if(As=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sl.current=r===null||r.memoizedState===null?WT:qT,r=t(n,s),oa){i=0;do{if(oa=!1,ka=0,25<=i)throw Error(q(301));i+=1,dt=at=null,e.updateQueue=null,sl.current=YT,r=t(n,s)}while(oa)}if(sl.current=zl,e=at!==null&&at.next!==null,As=0,dt=at=Ye=null,Ul=!1,e)throw Error(q(300));return r}function Vh(){var r=ka!==0;return ka=0,r}function kr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ye.memoizedState=dt=r:dt=dt.next=r,dt}function cr(){if(at===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=at.next;var e=dt===null?Ye.memoizedState:dt.next;if(e!==null)dt=e,at=r;else{if(r===null)throw Error(q(310));at=r,r={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Ye.memoizedState=dt=r:dt=dt.next=r}return dt}function _a(r,e){return typeof e=="function"?e(r):e}function wu(r){var e=cr(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=r;var n=at,s=n.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((As&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Ye.lanes|=u,Is|=u}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,wr(n,e.memoizedState)||(Ot=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){s=r;do i=s.lane,Ye.lanes|=i,Is|=i,s=s.next;while(s!==r)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Tu(r){var e=cr(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=r;var n=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=r(i,a.action),a=a.next;while(a!==s);wr(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function iy(){}function ay(r,e){var t=Ye,n=cr(),s=e(),i=!wr(n.memoizedState,s);if(i&&(n.memoizedState=s,Ot=!0),n=n.queue,Gh(cy.bind(null,t,n,r),[r]),n.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(t.flags|=2048,Pa(9,ly.bind(null,t,n,s,e),void 0,null),ft===null)throw Error(q(349));As&30||oy(t,e,s)}return s}function oy(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function ly(r,e,t,n){e.value=t,e.getSnapshot=n,uy(e)&&dy(r)}function cy(r,e,t){return t(function(){uy(e)&&dy(r)})}function uy(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!wr(r,t)}catch{return!0}}function dy(r){var e=fn(r,1);e!==null&&br(e,r,1,-1)}function Om(r){var e=kr();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:r},e.queue=r,r=r.dispatch=KT.bind(null,Ye,r),[e.memoizedState,r]}function Pa(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function fy(){return cr().memoizedState}function il(r,e,t,n){var s=kr();Ye.flags|=r,s.memoizedState=Pa(1|e,t,void 0,n===void 0?null:n)}function Lc(r,e,t,n){var s=cr();n=n===void 0?null:n;var i=void 0;if(at!==null){var a=at.memoizedState;if(i=a.destroy,n!==null&&Uh(n,a.deps)){s.memoizedState=Pa(e,t,i,n);return}}Ye.flags|=r,s.memoizedState=Pa(1|e,t,i,n)}function Mm(r,e){return il(8390656,8,r,e)}function Gh(r,e){return Lc(2048,8,r,e)}function hy(r,e){return Lc(4,2,r,e)}function py(r,e){return Lc(4,4,r,e)}function my(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function gy(r,e,t){return t=t!=null?t.concat([r]):null,Lc(4,4,my.bind(null,e,r),t)}function Hh(){}function xy(r,e){var t=cr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Uh(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function vy(r,e){var t=cr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Uh(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function yy(r,e,t){return As&21?(wr(t,e)||(t=Tv(),Ye.lanes|=t,Is|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,Ot=!0),r.memoizedState=t)}function GT(r,e){var t=Pe;Pe=t!==0&&4>t?t:4,r(!0);var n=Eu.transition;Eu.transition={};try{r(!1),e()}finally{Pe=t,Eu.transition=n}}function by(){return cr().memoizedState}function HT(r,e,t){var n=Gn(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Sy(r))Ey(e,t);else if(t=ry(r,e,t,n),t!==null){var s=Rt();br(t,r,n,s),wy(t,e,n)}}function KT(r,e,t){var n=Gn(r),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Sy(r))Ey(e,s);else{var i=r.alternate;if(r.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,wr(o,a)){var l=e.interleaved;l===null?(s.next=s,Mh(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=ry(r,e,s,n),t!==null&&(s=Rt(),br(t,r,n,s),wy(t,e,n))}}function Sy(r){var e=r.alternate;return r===Ye||e!==null&&e===Ye}function Ey(r,e){oa=Ul=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function wy(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Eh(r,t)}}var zl={readContext:lr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},WT={readContext:lr,useCallback:function(r,e){return kr().memoizedState=[r,e===void 0?null:e],r},useContext:lr,useEffect:Mm,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,il(4194308,4,my.bind(null,e,r),t)},useLayoutEffect:function(r,e){return il(4194308,4,r,e)},useInsertionEffect:function(r,e){return il(4,2,r,e)},useMemo:function(r,e){var t=kr();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=kr();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=HT.bind(null,Ye,r),[n.memoizedState,r]},useRef:function(r){var e=kr();return r={current:r},e.memoizedState=r},useState:Om,useDebugValue:Hh,useDeferredValue:function(r){return kr().memoizedState=r},useTransition:function(){var r=Om(!1),e=r[0];return r=GT.bind(null,r[1]),kr().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Ye,s=kr();if(He){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),ft===null)throw Error(q(349));As&30||oy(n,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,Mm(cy.bind(null,n,i,r),[r]),n.flags|=2048,Pa(9,ly.bind(null,n,i,t,e),void 0,null),t},useId:function(){var r=kr(),e=ft.identifierPrefix;if(He){var t=ln,n=on;t=(n&~(1<<32-yr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=ka++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VT++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},qT={readContext:lr,useCallback:xy,useContext:lr,useEffect:Gh,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:vy,useReducer:wu,useRef:fy,useState:function(){return wu(_a)},useDebugValue:Hh,useDeferredValue:function(r){var e=cr();return yy(e,at.memoizedState,r)},useTransition:function(){var r=wu(_a)[0],e=cr().memoizedState;return[r,e]},useMutableSource:iy,useSyncExternalStore:ay,useId:by,unstable_isNewReconciler:!1},YT={readContext:lr,useCallback:xy,useContext:lr,useEffect:Gh,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:vy,useReducer:Tu,useRef:fy,useState:function(){return Tu(_a)},useDebugValue:Hh,useDeferredValue:function(r){var e=cr();return at===null?e.memoizedState=r:yy(e,at.memoizedState,r)},useTransition:function(){var r=Tu(_a)[0],e=cr().memoizedState;return[r,e]},useMutableSource:iy,useSyncExternalStore:ay,useId:by,unstable_isNewReconciler:!1};function gr(r,e){if(r&&r.defaultProps){e=Xe({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function qd(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Xe({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Cc={isMounted:function(r){return(r=r._reactInternals)?Ns(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Rt(),s=Gn(r),i=cn(n,s);i.payload=e,t!=null&&(i.callback=t),e=zn(r,i,s),e!==null&&(br(e,r,s,n),nl(e,r,s))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Rt(),s=Gn(r),i=cn(n,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=zn(r,i,s),e!==null&&(br(e,r,s,n),nl(e,r,s))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Rt(),n=Gn(r),s=cn(t,n);s.tag=2,e!=null&&(s.callback=e),e=zn(r,s,n),e!==null&&(br(e,r,n,t),nl(e,r,n))}};function Fm(r,e,t,n,s,i,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ta(t,n)||!Ta(s,i):!0}function Ty(r,e,t){var n=!1,s=qn,i=e.contextType;return typeof i=="object"&&i!==null?i=lr(i):(s=$t(e)?ws:Et.current,n=e.contextTypes,i=(n=n!=null)?xi(r,s):qn),e=new e(t,i),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=i),e}function jm(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Cc.enqueueReplaceState(e,e.state,null)}function Yd(r,e,t,n){var s=r.stateNode;s.props=t,s.state=r.memoizedState,s.refs={},Fh(r);var i=e.contextType;typeof i=="object"&&i!==null?s.context=lr(i):(i=$t(e)?ws:Et.current,s.context=xi(r,i)),s.state=r.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qd(r,e,i,t),s.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cc.enqueueReplaceState(s,s.state,null),$l(r,t,s,n),s.state=r.memoizedState),typeof s.componentDidMount=="function"&&(r.flags|=4194308)}function Si(r,e){try{var t="",n=e;do t+=ww(n),n=n.return;while(n);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:r,source:e,stack:s,digest:null}}function Au(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function Xd(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var XT=typeof WeakMap=="function"?WeakMap:Map;function Ay(r,e,t){t=cn(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Gl||(Gl=!0,of=n),Xd(r,e)},t}function Iy(r,e,t){t=cn(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){Xd(r,e)}}var i=r.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Xd(r,e),typeof n!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function $m(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new XT;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),r=u2.bind(null,r,e,t),e.then(r,r))}function Bm(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function Um(r,e,t,n,s){return r.mode&1?(r.flags|=65536,r.lanes=s,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=cn(-1,1),e.tag=2,zn(t,e,1))),t.lanes|=1),r)}var QT=xn.ReactCurrentOwner,Ot=!1;function It(r,e,t,n){e.child=r===null?ty(e,null,t,n):yi(e,r.child,t,n)}function zm(r,e,t,n,s){t=t.render;var i=e.ref;return oi(e,s),n=zh(r,e,t,n,i,s),t=Vh(),r!==null&&!Ot?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,hn(r,e,s)):(He&&t&&kh(e),e.flags|=1,It(r,e,n,s),e.child)}function Vm(r,e,t,n,s){if(r===null){var i=t.type;return typeof i=="function"&&!Jh(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Ly(r,e,i,n,s)):(r=cl(t.type,null,n,e,e.mode,s),r.ref=e.ref,r.return=e,e.child=r)}if(i=r.child,!(r.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:Ta,t(a,n)&&r.ref===e.ref)return hn(r,e,s)}return e.flags|=1,r=Hn(i,n),r.ref=e.ref,r.return=e,e.child=r}function Ly(r,e,t,n,s){if(r!==null){var i=r.memoizedProps;if(Ta(i,n)&&r.ref===e.ref)if(Ot=!1,e.pendingProps=n=i,(r.lanes&s)!==0)r.flags&131072&&(Ot=!0);else return e.lanes=r.lanes,hn(r,e,s)}return Qd(r,e,t,n,s)}function Cy(r,e,t){var n=e.pendingProps,s=n.children,i=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(ei,qt),qt|=t;else{if(!(t&1073741824))return r=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,Be(ei,qt),qt|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,Be(ei,qt),qt|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,Be(ei,qt),qt|=n;return It(r,e,s,t),e.child}function Ry(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Qd(r,e,t,n,s){var i=$t(t)?ws:Et.current;return i=xi(e,i),oi(e,s),t=zh(r,e,t,n,i,s),n=Vh(),r!==null&&!Ot?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,hn(r,e,s)):(He&&n&&kh(e),e.flags|=1,It(r,e,t,s),e.child)}function Gm(r,e,t,n,s){if($t(t)){var i=!0;Nl(e)}else i=!1;if(oi(e,s),e.stateNode===null)al(r,e),Ty(e,t,n),Yd(e,t,n,s),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=lr(c):(c=$t(t)?ws:Et.current,c=xi(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&jm(e,a,n,c),Ln=!1;var f=e.memoizedState;a.state=f,$l(e,n,a,s),l=e.memoizedState,o!==n||f!==l||jt.current||Ln?(typeof u=="function"&&(qd(e,t,u,n),l=e.memoizedState),(o=Ln||Fm(e,t,o,n,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ny(r,e),o=e.memoizedProps,c=e.type===e.elementType?o:gr(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=lr(l):(l=$t(t)?ws:Et.current,l=xi(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&jm(e,a,n,l),Ln=!1,f=e.memoizedState,a.state=f,$l(e,n,a,s);var h=e.memoizedState;o!==d||f!==h||jt.current||Ln?(typeof p=="function"&&(qd(e,t,p,n),h=e.memoizedState),(c=Ln||Fm(e,t,c,n,f,h,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,h,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,h,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return Zd(r,e,t,n,i,s)}function Zd(r,e,t,n,s,i){Ry(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Rm(e,t,!1),hn(r,e,i);n=e.stateNode,QT.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=yi(e,r.child,null,i),e.child=yi(e,null,o,i)):It(r,e,o,i),e.memoizedState=n.state,s&&Rm(e,t,!0),e.child}function ky(r){var e=r.stateNode;e.pendingContext?Cm(r,e.pendingContext,e.pendingContext!==e.context):e.context&&Cm(r,e.context,!1),jh(r,e.containerInfo)}function Hm(r,e,t,n,s){return vi(),Ph(s),e.flags|=256,It(r,e,t,n),e.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function ef(r){return{baseLanes:r,cachePool:null,transitions:null}}function _y(r,e,t){var n=e.pendingProps,s=We.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(s|=1),Be(We,s&1),r===null)return Kd(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=_c(a,n,0,null),r=ys(r,n,t,null),i.return=e,r.return=e,i.sibling=r,e.child=i,e.child.memoizedState=ef(t),e.memoizedState=Jd,r):Kh(e,a));if(s=r.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return ZT(r,e,a,n,o,s,t);if(i){i=n.fallback,a=e.mode,s=r.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Hn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Hn(o,i):(i=ys(i,a,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=r.child.memoizedState,a=a===null?ef(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=r.childLanes&~t,e.memoizedState=Jd,n}return i=r.child,r=i.sibling,n=Hn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function Kh(r,e){return e=_c({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Ao(r,e,t,n){return n!==null&&Ph(n),yi(e,r.child,null,t),r=Kh(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function ZT(r,e,t,n,s,i,a){if(t)return e.flags&256?(e.flags&=-257,n=Au(Error(q(422))),Ao(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=_c({mode:"visible",children:n.children},s,0,null),i=ys(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&yi(e,r.child,null,a),e.child.memoizedState=ef(a),e.memoizedState=Jd,i);if(!(e.mode&1))return Ao(r,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(q(419)),n=Au(i,n,void 0),Ao(r,e,a,n)}if(o=(a&r.childLanes)!==0,Ot||o){if(n=ft,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(r,s),br(n,r,s,-1))}return Zh(),n=Au(Error(q(421))),Ao(r,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=r.child,e=d2.bind(null,r),s._reactRetry=e,null):(r=i.treeContext,Qt=Un(s.nextSibling),Zt=e,He=!0,vr=null,r!==null&&(sr[ir++]=on,sr[ir++]=ln,sr[ir++]=Ts,on=r.id,ln=r.overflow,Ts=e),e=Kh(e,n.children),e.flags|=4096,e)}function Km(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),Wd(r.return,e,t)}function Iu(r,e,t,n,s){var i=r.memoizedState;i===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=s)}function Py(r,e,t){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(It(r,e,n.children,t),n=We.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Km(r,t,e);else if(r.tag===19)Km(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Be(We,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)r=t.alternate,r!==null&&Bl(r)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Iu(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(r=s.alternate,r!==null&&Bl(r)===null){e.child=s;break}r=s.sibling,s.sibling=t,t=s,s=r}Iu(e,!0,t,null,i);break;case"together":Iu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function hn(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Is|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(q(153));if(e.child!==null){for(r=e.child,t=Hn(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Hn(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function JT(r,e,t){switch(e.tag){case 3:ky(e),vi();break;case 5:sy(e);break;case 1:$t(e.type)&&Nl(e);break;case 4:jh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Be(Fl,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Be(We,We.current&1),e.flags|=128,null):t&e.child.childLanes?_y(r,e,t):(Be(We,We.current&1),r=hn(r,e,t),r!==null?r.sibling:null);Be(We,We.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return Py(r,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(We,We.current),n)break;return null;case 22:case 23:return e.lanes=0,Cy(r,e,t)}return hn(r,e,t)}var Dy,tf,Ny,Oy;Dy=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};tf=function(){};Ny=function(r,e,t,n){var s=r.memoizedProps;if(s!==n){r=e.stateNode,ms(zr.current);var i=null;switch(t){case"input":s=wd(r,s),n=wd(r,n),i=[];break;case"select":s=Xe({},s,{value:void 0}),n=Xe({},n,{value:void 0}),i=[];break;case"textarea":s=Id(r,s),n=Id(r,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Pl)}Cd(t,n);var a;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ze("scroll",r),i||o===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Oy=function(r,e,t,n){t!==n&&(e.flags|=4)};function Vi(r,e){if(!He)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function yt(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=r,s=s.sibling;else for(s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=r,s=s.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function e2(r,e,t){var n=e.pendingProps;switch(_h(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return $t(e.type)&&Dl(),yt(e),null;case 3:return n=e.stateNode,bi(),Ve(jt),Ve(Et),Bh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(wo(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vr!==null&&(uf(vr),vr=null))),tf(r,e),yt(e),null;case 5:$h(e);var s=ms(Ra.current);if(t=e.type,r!==null&&e.stateNode!=null)Ny(r,e,t,n,s),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(q(166));return yt(e),null}if(r=ms(zr.current),wo(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Or]=e,n[La]=i,r=(e.mode&1)!==0,t){case"dialog":ze("cancel",n),ze("close",n);break;case"iframe":case"object":case"embed":ze("load",n);break;case"video":case"audio":for(s=0;s<Ji.length;s++)ze(Ji[s],n);break;case"source":ze("error",n);break;case"img":case"image":case"link":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"input":tm(n,i),ze("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ze("invalid",n);break;case"textarea":nm(n,i),ze("invalid",n)}Cd(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Eo(n.textContent,o,r),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Eo(n.textContent,o,r),s=["children",""+o]):xa.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ze("scroll",n)}switch(t){case"input":po(n),rm(n,i,!0);break;case"textarea":po(n),sm(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Pl)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cv(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[Or]=e,r[La]=n,Dy(r,e,!1,!1),e.stateNode=r;e:{switch(a=Rd(t,n),t){case"dialog":ze("cancel",r),ze("close",r),s=n;break;case"iframe":case"object":case"embed":ze("load",r),s=n;break;case"video":case"audio":for(s=0;s<Ji.length;s++)ze(Ji[s],r);s=n;break;case"source":ze("error",r),s=n;break;case"img":case"image":case"link":ze("error",r),ze("load",r),s=n;break;case"details":ze("toggle",r),s=n;break;case"input":tm(r,n),s=wd(r,n),ze("invalid",r);break;case"option":s=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},s=Xe({},n,{value:void 0}),ze("invalid",r);break;case"textarea":nm(r,n),s=Id(r,n),ze("invalid",r);break;default:s=n}Cd(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?fv(r,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uv(r,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&va(r,l):typeof l=="number"&&va(r,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ze("scroll",r):l!=null&&gh(r,i,l,a))}switch(t){case"input":po(r),rm(r,n,!1);break;case"textarea":po(r),sm(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Wn(n.value));break;case"select":r.multiple=!!n.multiple,i=n.value,i!=null?ni(r,!!n.multiple,i,!1):n.defaultValue!=null&&ni(r,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(r.onclick=Pl)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(r&&e.stateNode!=null)Oy(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(q(166));if(t=ms(Ra.current),ms(zr.current),wo(e)){if(n=e.stateNode,t=e.memoizedProps,n[Or]=e,(i=n.nodeValue!==t)&&(r=Zt,r!==null))switch(r.tag){case 3:Eo(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Eo(n.nodeValue,t,(r.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Or]=e,e.stateNode=n}return yt(e),null;case 13:if(Ve(We),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(He&&Qt!==null&&e.mode&1&&!(e.flags&128))Jv(),vi(),e.flags|=98560,i=!1;else if(i=wo(e),n!==null&&n.dehydrated!==null){if(r===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Or]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else vr!==null&&(uf(vr),vr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||We.current&1?lt===0&&(lt=3):Zh())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return bi(),tf(r,e),r===null&&Aa(e.stateNode.containerInfo),yt(e),null;case 10:return Oh(e.type._context),yt(e),null;case 17:return $t(e.type)&&Dl(),yt(e),null;case 19:if(Ve(We),i=e.memoizedState,i===null)return yt(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Vi(i,!1);else{if(lt!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=Bl(r),a!==null){for(e.flags|=128,Vi(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,r=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return Be(We,We.current&1|2),e.child}r=r.sibling}i.tail!==null&&tt()>Ei&&(e.flags|=128,n=!0,Vi(i,!1),e.lanes=4194304)}else{if(!n)if(r=Bl(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Vi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!He)return yt(e),null}else 2*tt()-i.renderingStartTime>Ei&&t!==1073741824&&(e.flags|=128,n=!0,Vi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,t=We.current,Be(We,n?t&1|2:t&1),e):(yt(e),null);case 22:case 23:return Qh(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function t2(r,e){switch(_h(e),e.tag){case 1:return $t(e.type)&&Dl(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return bi(),Ve(jt),Ve(Et),Bh(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return $h(e),null;case 13:if(Ve(We),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(q(340));vi()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Ve(We),null;case 4:return bi(),null;case 10:return Oh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var Io=!1,bt=!1,r2=typeof WeakSet=="function"?WeakSet:Set,J=null;function Js(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Je(r,e,n)}else t.current=null}function rf(r,e,t){try{t()}catch(n){Je(r,e,n)}}var Wm=!1;function n2(r,e){if($d=Rl,r=Bv(),Rh(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=r,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==i||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===r)break t;if(f===t&&++c===s&&(o=a),f===i&&++u===n&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Bd={focusedElem:r,selectionRange:t},Rl=!1,J=e;J!==null;)if(e=J,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,J=r;else for(;J!==null;){e=J;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,y=h.memoizedState,b=e.stateNode,m=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:gr(e.type,g),y);b.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(S){Je(e,e.return,S)}if(r=e.sibling,r!==null){r.return=e.return,J=r;break}J=e.return}return h=Wm,Wm=!1,h}function la(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&r)===r){var i=s.destroy;s.destroy=void 0,i!==void 0&&rf(e,t,i)}s=s.next}while(s!==n)}}function Rc(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function nf(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function My(r){var e=r.alternate;e!==null&&(r.alternate=null,My(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Or],delete e[La],delete e[Vd],delete e[$T],delete e[BT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Fy(r){return r.tag===5||r.tag===3||r.tag===4}function qm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Fy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sf(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Pl));else if(n!==4&&(r=r.child,r!==null))for(sf(r,e,t),r=r.sibling;r!==null;)sf(r,e,t),r=r.sibling}function af(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(af(r,e,t),r=r.sibling;r!==null;)af(r,e,t),r=r.sibling}var ht=null,xr=!1;function yn(r,e,t){for(t=t.child;t!==null;)jy(r,e,t),t=t.sibling}function jy(r,e,t){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(Sc,t)}catch{}switch(t.tag){case 5:bt||Js(t,e);case 6:var n=ht,s=xr;ht=null,yn(r,e,t),ht=n,xr=s,ht!==null&&(xr?(r=ht,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):ht.removeChild(t.stateNode));break;case 18:ht!==null&&(xr?(r=ht,t=t.stateNode,r.nodeType===8?yu(r.parentNode,t):r.nodeType===1&&yu(r,t),Ea(r)):yu(ht,t.stateNode));break;case 4:n=ht,s=xr,ht=t.stateNode.containerInfo,xr=!0,yn(r,e,t),ht=n,xr=s;break;case 0:case 11:case 14:case 15:if(!bt&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&rf(t,e,a),s=s.next}while(s!==n)}yn(r,e,t);break;case 1:if(!bt&&(Js(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){Je(t,e,o)}yn(r,e,t);break;case 21:yn(r,e,t);break;case 22:t.mode&1?(bt=(n=bt)||t.memoizedState!==null,yn(r,e,t),bt=n):yn(r,e,t);break;default:yn(r,e,t)}}function Ym(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new r2),e.forEach(function(n){var s=f2.bind(null,r,n);t.has(n)||(t.add(n),n.then(s,s))})}}function hr(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var i=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ht=o.stateNode,xr=!1;break e;case 3:ht=o.stateNode.containerInfo,xr=!0;break e;case 4:ht=o.stateNode.containerInfo,xr=!0;break e}o=o.return}if(ht===null)throw Error(q(160));jy(i,a,s),ht=null,xr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Je(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$y(e,r),e=e.sibling}function $y(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(hr(e,r),Ar(r),n&4){try{la(3,r,r.return),Rc(3,r)}catch(g){Je(r,r.return,g)}try{la(5,r,r.return)}catch(g){Je(r,r.return,g)}}break;case 1:hr(e,r),Ar(r),n&512&&t!==null&&Js(t,t.return);break;case 5:if(hr(e,r),Ar(r),n&512&&t!==null&&Js(t,t.return),r.flags&32){var s=r.stateNode;try{va(s,"")}catch(g){Je(r,r.return,g)}}if(n&4&&(s=r.stateNode,s!=null)){var i=r.memoizedProps,a=t!==null?t.memoizedProps:i,o=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&ov(s,i),Rd(o,a);var c=Rd(o,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?fv(s,d):u==="dangerouslySetInnerHTML"?uv(s,d):u==="children"?va(s,d):gh(s,u,d,c)}switch(o){case"input":Td(s,i);break;case"textarea":lv(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ni(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ni(s,!!i.multiple,i.defaultValue,!0):ni(s,!!i.multiple,i.multiple?[]:"",!1))}s[La]=i}catch(g){Je(r,r.return,g)}}break;case 6:if(hr(e,r),Ar(r),n&4){if(r.stateNode===null)throw Error(q(162));s=r.stateNode,i=r.memoizedProps;try{s.nodeValue=i}catch(g){Je(r,r.return,g)}}break;case 3:if(hr(e,r),Ar(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Ea(e.containerInfo)}catch(g){Je(r,r.return,g)}break;case 4:hr(e,r),Ar(r);break;case 13:hr(e,r),Ar(r),s=r.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Yh=tt())),n&4&&Ym(r);break;case 22:if(u=t!==null&&t.memoizedState!==null,r.mode&1?(bt=(c=bt)||u,hr(e,r),bt=c):hr(e,r),Ar(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!u&&r.mode&1)for(J=r,u=r.child;u!==null;){for(d=J=u;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:la(4,f,f.return);break;case 1:Js(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(g){Je(n,t,g)}}break;case 5:Js(f,f.return);break;case 22:if(f.memoizedState!==null){Qm(d);continue}}p!==null?(p.return=f,J=p):Qm(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=dv("display",a))}catch(g){Je(r,r.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Je(r,r.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hr(e,r),Ar(r),n&4&&Ym(r);break;case 21:break;default:hr(e,r),Ar(r)}}function Ar(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Fy(t)){var n=t;break e}t=t.return}throw Error(q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(va(s,""),n.flags&=-33);var i=qm(r);af(r,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=qm(r);sf(r,o,a);break;default:throw Error(q(161))}}catch(l){Je(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function s2(r,e,t){J=r,By(r)}function By(r,e,t){for(var n=(r.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Io;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||bt;o=Io;var c=bt;if(Io=a,(bt=l)&&!c)for(J=s;J!==null;)a=J,l=a.child,a.tag===22&&a.memoizedState!==null?Zm(s):l!==null?(l.return=a,J=l):Zm(s);for(;i!==null;)J=i,By(i),i=i.sibling;J=s,Io=o,bt=c}Xm(r)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):Xm(r)}}function Xm(r){for(;J!==null;){var e=J;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||Rc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!bt)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:gr(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Nm(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Nm(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ea(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}bt||e.flags&512&&nf(e)}catch(f){Je(e,e.return,f)}}if(e===r){J=null;break}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}}function Qm(r){for(;J!==null;){var e=J;if(e===r){J=null;break}var t=e.sibling;if(t!==null){t.return=e.return,J=t;break}J=e.return}}function Zm(r){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Rc(4,e)}catch(l){Je(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Je(e,s,l)}}var i=e.return;try{nf(e)}catch(l){Je(e,i,l)}break;case 5:var a=e.return;try{nf(e)}catch(l){Je(e,a,l)}}}catch(l){Je(e,e.return,l)}if(e===r){J=null;break}var o=e.sibling;if(o!==null){o.return=e.return,J=o;break}J=e.return}}var i2=Math.ceil,Vl=xn.ReactCurrentDispatcher,Wh=xn.ReactCurrentOwner,or=xn.ReactCurrentBatchConfig,Ce=0,ft=null,nt=null,gt=0,qt=0,ei=rs(0),lt=0,Da=null,Is=0,kc=0,qh=0,ca=null,Nt=null,Yh=0,Ei=1/0,tn=null,Gl=!1,of=null,Vn=null,Lo=!1,Nn=null,Hl=0,ua=0,lf=null,ol=-1,ll=0;function Rt(){return Ce&6?tt():ol!==-1?ol:ol=tt()}function Gn(r){return r.mode&1?Ce&2&&gt!==0?gt&-gt:zT.transition!==null?(ll===0&&(ll=Tv()),ll):(r=Pe,r!==0||(r=window.event,r=r===void 0?16:_v(r.type)),r):1}function br(r,e,t,n){if(50<ua)throw ua=0,lf=null,Error(q(185));qa(r,t,n),(!(Ce&2)||r!==ft)&&(r===ft&&(!(Ce&2)&&(kc|=t),lt===4&&Pn(r,gt)),Bt(r,n),t===1&&Ce===0&&!(e.mode&1)&&(Ei=tt()+500,Ic&&ns()))}function Bt(r,e){var t=r.callbackNode;zw(r,e);var n=Cl(r,r===ft?gt:0);if(n===0)t!==null&&om(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&om(t),e===1)r.tag===0?UT(Jm.bind(null,r)):Xv(Jm.bind(null,r)),FT(function(){!(Ce&6)&&ns()}),t=null;else{switch(Av(n)){case 1:t=Sh;break;case 4:t=Ev;break;case 16:t=Ll;break;case 536870912:t=wv;break;default:t=Ll}t=qy(t,Uy.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function Uy(r,e){if(ol=-1,ll=0,Ce&6)throw Error(q(327));var t=r.callbackNode;if(li()&&r.callbackNode!==t)return null;var n=Cl(r,r===ft?gt:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=Kl(r,n);else{e=n;var s=Ce;Ce|=2;var i=Vy();(ft!==r||gt!==e)&&(tn=null,Ei=tt()+500,vs(r,e));do try{l2();break}catch(o){zy(r,o)}while(!0);Nh(),Vl.current=i,Ce=s,nt!==null?e=0:(ft=null,gt=0,e=lt)}if(e!==0){if(e===2&&(s=Nd(r),s!==0&&(n=s,e=cf(r,s))),e===1)throw t=Da,vs(r,0),Pn(r,n),Bt(r,tt()),t;if(e===6)Pn(r,n);else{if(s=r.current.alternate,!(n&30)&&!a2(s)&&(e=Kl(r,n),e===2&&(i=Nd(r),i!==0&&(n=i,e=cf(r,i))),e===1))throw t=Da,vs(r,0),Pn(r,n),Bt(r,tt()),t;switch(r.finishedWork=s,r.finishedLanes=n,e){case 0:case 1:throw Error(q(345));case 2:us(r,Nt,tn);break;case 3:if(Pn(r,n),(n&130023424)===n&&(e=Yh+500-tt(),10<e)){if(Cl(r,0)!==0)break;if(s=r.suspendedLanes,(s&n)!==n){Rt(),r.pingedLanes|=r.suspendedLanes&s;break}r.timeoutHandle=zd(us.bind(null,r,Nt,tn),e);break}us(r,Nt,tn);break;case 4:if(Pn(r,n),(n&4194240)===n)break;for(e=r.eventTimes,s=-1;0<n;){var a=31-yr(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=tt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i2(n/1960))-n,10<n){r.timeoutHandle=zd(us.bind(null,r,Nt,tn),n);break}us(r,Nt,tn);break;case 5:us(r,Nt,tn);break;default:throw Error(q(329))}}}return Bt(r,tt()),r.callbackNode===t?Uy.bind(null,r):null}function cf(r,e){var t=ca;return r.current.memoizedState.isDehydrated&&(vs(r,e).flags|=256),r=Kl(r,e),r!==2&&(e=Nt,Nt=t,e!==null&&uf(e)),r}function uf(r){Nt===null?Nt=r:Nt.push.apply(Nt,r)}function a2(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],i=s.getSnapshot;s=s.value;try{if(!wr(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(r,e){for(e&=~qh,e&=~kc,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-yr(e),n=1<<t;r[t]=-1,e&=~n}}function Jm(r){if(Ce&6)throw Error(q(327));li();var e=Cl(r,0);if(!(e&1))return Bt(r,tt()),null;var t=Kl(r,e);if(r.tag!==0&&t===2){var n=Nd(r);n!==0&&(e=n,t=cf(r,n))}if(t===1)throw t=Da,vs(r,0),Pn(r,e),Bt(r,tt()),t;if(t===6)throw Error(q(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,us(r,Nt,tn),Bt(r,tt()),null}function Xh(r,e){var t=Ce;Ce|=1;try{return r(e)}finally{Ce=t,Ce===0&&(Ei=tt()+500,Ic&&ns())}}function Ls(r){Nn!==null&&Nn.tag===0&&!(Ce&6)&&li();var e=Ce;Ce|=1;var t=or.transition,n=Pe;try{if(or.transition=null,Pe=1,r)return r()}finally{Pe=n,or.transition=t,Ce=e,!(Ce&6)&&ns()}}function Qh(){qt=ei.current,Ve(ei)}function vs(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,MT(t)),nt!==null)for(t=nt.return;t!==null;){var n=t;switch(_h(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dl();break;case 3:bi(),Ve(jt),Ve(Et),Bh();break;case 5:$h(n);break;case 4:bi();break;case 13:Ve(We);break;case 19:Ve(We);break;case 10:Oh(n.type._context);break;case 22:case 23:Qh()}t=t.return}if(ft=r,nt=r=Hn(r.current,null),gt=qt=e,lt=0,Da=null,qh=kc=Is=0,Nt=ca=null,ps!==null){for(e=0;e<ps.length;e++)if(t=ps[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}t.pending=n}ps=null}return r}function zy(r,e){do{var t=nt;try{if(Nh(),sl.current=zl,Ul){for(var n=Ye.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ul=!1}if(As=0,dt=at=Ye=null,oa=!1,ka=0,Wh.current=null,t===null||t.return===null){lt=1,Da=e,nt=null;break}e:{var i=r,a=t.return,o=t,l=e;if(e=gt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Bm(a);if(p!==null){p.flags&=-257,Um(p,a,o,i,e),p.mode&1&&$m(i,c,e),e=p,l=c;var h=e.updateQueue;if(h===null){var g=new Set;g.add(l),e.updateQueue=g}else h.add(l);break e}else{if(!(e&1)){$m(i,c,e),Zh();break e}l=Error(q(426))}}else if(He&&o.mode&1){var y=Bm(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Um(y,a,o,i,e),Ph(Si(l,o));break e}}i=l=Si(l,o),lt!==4&&(lt=2),ca===null?ca=[i]:ca.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=Ay(i,l,e);Dm(i,b);break e;case 1:o=l;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vn===null||!Vn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Iy(i,o,e);Dm(i,S);break e}}i=i.return}while(i!==null)}Hy(t)}catch(E){e=E,nt===t&&t!==null&&(nt=t=t.return);continue}break}while(!0)}function Vy(){var r=Vl.current;return Vl.current=zl,r===null?zl:r}function Zh(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(Is&268435455)&&!(kc&268435455)||Pn(ft,gt)}function Kl(r,e){var t=Ce;Ce|=2;var n=Vy();(ft!==r||gt!==e)&&(tn=null,vs(r,e));do try{o2();break}catch(s){zy(r,s)}while(!0);if(Nh(),Ce=t,Vl.current=n,nt!==null)throw Error(q(261));return ft=null,gt=0,lt}function o2(){for(;nt!==null;)Gy(nt)}function l2(){for(;nt!==null&&!Dw();)Gy(nt)}function Gy(r){var e=Wy(r.alternate,r,qt);r.memoizedProps=r.pendingProps,e===null?Hy(r):nt=e,Wh.current=null}function Hy(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=t2(t,e),t!==null){t.flags&=32767,nt=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{lt=6,nt=null;return}}else if(t=e2(t,e,qt),t!==null){nt=t;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=r}while(e!==null);lt===0&&(lt=5)}function us(r,e,t){var n=Pe,s=or.transition;try{or.transition=null,Pe=1,c2(r,e,t,n)}finally{or.transition=s,Pe=n}return null}function c2(r,e,t,n){do li();while(Nn!==null);if(Ce&6)throw Error(q(327));t=r.finishedWork;var s=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(q(177));r.callbackNode=null,r.callbackPriority=0;var i=t.lanes|t.childLanes;if(Vw(r,i),r===ft&&(nt=ft=null,gt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Lo||(Lo=!0,qy(Ll,function(){return li(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=or.transition,or.transition=null;var a=Pe;Pe=1;var o=Ce;Ce|=4,Wh.current=null,n2(r,t),$y(t,r),RT(Bd),Rl=!!$d,Bd=$d=null,r.current=t,s2(t),Nw(),Ce=o,Pe=a,or.transition=i}else r.current=t;if(Lo&&(Lo=!1,Nn=r,Hl=s),i=r.pendingLanes,i===0&&(Vn=null),Fw(t.stateNode),Bt(r,tt()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(Gl)throw Gl=!1,r=of,of=null,r;return Hl&1&&r.tag!==0&&li(),i=r.pendingLanes,i&1?r===lf?ua++:(ua=0,lf=r):ua=0,ns(),null}function li(){if(Nn!==null){var r=Av(Hl),e=or.transition,t=Pe;try{if(or.transition=null,Pe=16>r?16:r,Nn===null)var n=!1;else{if(r=Nn,Nn=null,Hl=0,Ce&6)throw Error(q(331));var s=Ce;for(Ce|=4,J=r.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(J=c;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:la(8,u,i)}var d=u.child;if(d!==null)d.return=u,J=d;else for(;J!==null;){u=J;var f=u.sibling,p=u.return;if(My(u),u===c){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var h=i.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:la(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,J=b;break e}J=i.return}}var m=r.current;for(J=m;J!==null;){a=J;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,J=v;else e:for(a=m;J!==null;){if(o=J,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rc(9,o)}}catch(E){Je(o,o.return,E)}if(o===a){J=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,J=S;break e}J=o.return}}if(Ce=s,ns(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(Sc,r)}catch{}n=!0}return n}finally{Pe=t,or.transition=e}}return!1}function eg(r,e,t){e=Si(t,e),e=Ay(r,e,1),r=zn(r,e,1),e=Rt(),r!==null&&(qa(r,1,e),Bt(r,e))}function Je(r,e,t){if(r.tag===3)eg(r,r,t);else for(;e!==null;){if(e.tag===3){eg(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vn===null||!Vn.has(n))){r=Si(t,r),r=Iy(e,r,1),e=zn(e,r,1),r=Rt(),e!==null&&(qa(e,1,r),Bt(e,r));break}}e=e.return}}function u2(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Rt(),r.pingedLanes|=r.suspendedLanes&t,ft===r&&(gt&t)===t&&(lt===4||lt===3&&(gt&130023424)===gt&&500>tt()-Yh?vs(r,0):qh|=t),Bt(r,e)}function Ky(r,e){e===0&&(r.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var t=Rt();r=fn(r,e),r!==null&&(qa(r,e,t),Bt(r,t))}function d2(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Ky(r,t)}function f2(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,s=r.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(e),Ky(r,t)}var Wy;Wy=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||jt.current)Ot=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return Ot=!1,JT(r,e,t);Ot=!!(r.flags&131072)}else Ot=!1,He&&e.flags&1048576&&Qv(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;al(r,e),r=e.pendingProps;var s=xi(e,Et.current);oi(e,t),s=zh(null,e,n,r,s,t);var i=Vh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(n)?(i=!0,Nl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fh(e),s.updater=Cc,e.stateNode=s,s._reactInternals=e,Yd(e,n,r,t),e=Zd(null,e,n,!0,i,t)):(e.tag=0,He&&i&&kh(e),It(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(al(r,e),r=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=p2(n),r=gr(n,r),s){case 0:e=Qd(null,e,n,r,t);break e;case 1:e=Gm(null,e,n,r,t);break e;case 11:e=zm(null,e,n,r,t);break e;case 14:e=Vm(null,e,n,gr(n.type,r),t);break e}throw Error(q(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:gr(n,s),Qd(r,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:gr(n,s),Gm(r,e,n,s,t);case 3:e:{if(ky(e),r===null)throw Error(q(387));n=e.pendingProps,i=e.memoizedState,s=i.element,ny(r,e),$l(e,n,null,t);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Si(Error(q(423)),e),e=Hm(r,e,n,t,s);break e}else if(n!==s){s=Si(Error(q(424)),e),e=Hm(r,e,n,t,s);break e}else for(Qt=Un(e.stateNode.containerInfo.firstChild),Zt=e,He=!0,vr=null,t=ty(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vi(),n===s){e=hn(r,e,t);break e}It(r,e,n,t)}e=e.child}return e;case 5:return sy(e),r===null&&Kd(e),n=e.type,s=e.pendingProps,i=r!==null?r.memoizedProps:null,a=s.children,Ud(n,s)?a=null:i!==null&&Ud(n,i)&&(e.flags|=32),Ry(r,e),It(r,e,a,t),e.child;case 6:return r===null&&Kd(e),null;case 13:return _y(r,e,t);case 4:return jh(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=yi(e,null,n,t):It(r,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:gr(n,s),zm(r,e,n,s,t);case 7:return It(r,e,e.pendingProps,t),e.child;case 8:return It(r,e,e.pendingProps.children,t),e.child;case 12:return It(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Be(Fl,n._currentValue),n._currentValue=a,i!==null)if(wr(i.value,a)){if(i.children===s.children&&!jt.current){e=hn(r,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=cn(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Wd(i.return,t,e),o.lanes|=t;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Wd(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}It(r,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,oi(e,t),s=lr(s),n=n(s),e.flags|=1,It(r,e,n,t),e.child;case 14:return n=e.type,s=gr(n,e.pendingProps),s=gr(n.type,s),Vm(r,e,n,s,t);case 15:return Ly(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:gr(n,s),al(r,e),e.tag=1,$t(n)?(r=!0,Nl(e)):r=!1,oi(e,t),Ty(e,n,s),Yd(e,n,s,t),Zd(null,e,n,!0,r,t);case 19:return Py(r,e,t);case 22:return Cy(r,e,t)}throw Error(q(156,e.tag))};function qy(r,e){return Sv(r,e)}function h2(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(r,e,t,n){return new h2(r,e,t,n)}function Jh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function p2(r){if(typeof r=="function")return Jh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===vh)return 11;if(r===yh)return 14}return 2}function Hn(r,e){var t=r.alternate;return t===null?(t=ar(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function cl(r,e,t,n,s,i){var a=2;if(n=r,typeof r=="function")Jh(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Gs:return ys(t.children,s,i,e);case xh:a=8,s|=8;break;case yd:return r=ar(12,t,e,s|2),r.elementType=yd,r.lanes=i,r;case bd:return r=ar(13,t,e,s),r.elementType=bd,r.lanes=i,r;case Sd:return r=ar(19,t,e,s),r.elementType=Sd,r.lanes=i,r;case sv:return _c(t,s,i,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case rv:a=10;break e;case nv:a=9;break e;case vh:a=11;break e;case yh:a=14;break e;case In:a=16,n=null;break e}throw Error(q(130,r==null?r:typeof r,""))}return e=ar(a,t,e,s),e.elementType=r,e.type=n,e.lanes=i,e}function ys(r,e,t,n){return r=ar(7,r,n,e),r.lanes=t,r}function _c(r,e,t,n){return r=ar(22,r,n,e),r.elementType=sv,r.lanes=t,r.stateNode={isHidden:!1},r}function Lu(r,e,t){return r=ar(6,r,null,e),r.lanes=t,r}function Cu(r,e,t){return e=ar(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function m2(r,e,t,n,s){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ep(r,e,t,n,s,i,a,o,l){return r=new m2(r,e,t,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ar(3,null,null,e),r.current=i,i.stateNode=r,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(i),r}function g2(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function Yy(r){if(!r)return qn;r=r._reactInternals;e:{if(Ns(r)!==r||r.tag!==1)throw Error(q(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(r.tag===1){var t=r.type;if($t(t))return Yv(r,t,e)}return e}function Xy(r,e,t,n,s,i,a,o,l){return r=ep(t,n,!0,r,s,i,a,o,l),r.context=Yy(null),t=r.current,n=Rt(),s=Gn(t),i=cn(n,s),i.callback=e??null,zn(t,i,s),r.current.lanes=s,qa(r,s,n),Bt(r,n),r}function Pc(r,e,t,n){var s=e.current,i=Rt(),a=Gn(s);return t=Yy(t),e.context===null?e.context=t:e.pendingContext=t,e=cn(i,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=zn(s,e,a),r!==null&&(br(r,s,a,i),nl(r,s,a)),a}function Wl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function tg(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function tp(r,e){tg(r,e),(r=r.alternate)&&tg(r,e)}function x2(){return null}var Qy=typeof reportError=="function"?reportError:function(r){console.error(r)};function rp(r){this._internalRoot=r}Dc.prototype.render=rp.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(q(409));Pc(r,e,null,null)};Dc.prototype.unmount=rp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Ls(function(){Pc(null,r,null,null)}),e[dn]=null}};function Dc(r){this._internalRoot=r}Dc.prototype.unstable_scheduleHydration=function(r){if(r){var e=Cv();r={blockedOn:null,target:r,priority:e};for(var t=0;t<_n.length&&e!==0&&e<_n[t].priority;t++);_n.splice(t,0,r),t===0&&kv(r)}};function np(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function rg(){}function v2(r,e,t,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Wl(a);i.call(c)}}var a=Xy(e,n,r,0,null,!1,!1,"",rg);return r._reactRootContainer=a,r[dn]=a.current,Aa(r.nodeType===8?r.parentNode:r),Ls(),a}for(;s=r.lastChild;)r.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=Wl(l);o.call(c)}}var l=ep(r,0,!1,null,null,!1,!1,"",rg);return r._reactRootContainer=l,r[dn]=l.current,Aa(r.nodeType===8?r.parentNode:r),Ls(function(){Pc(e,l,t,n)}),l}function Oc(r,e,t,n,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Wl(a);o.call(l)}}Pc(e,a,r,s)}else a=v2(t,e,r,s,n);return Wl(a)}Iv=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zi(e.pendingLanes);t!==0&&(Eh(e,t|1),Bt(e,tt()),!(Ce&6)&&(Ei=tt()+500,ns()))}break;case 13:Ls(function(){var n=fn(r,1);if(n!==null){var s=Rt();br(n,r,1,s)}}),tp(r,1)}};wh=function(r){if(r.tag===13){var e=fn(r,134217728);if(e!==null){var t=Rt();br(e,r,134217728,t)}tp(r,134217728)}};Lv=function(r){if(r.tag===13){var e=Gn(r),t=fn(r,e);if(t!==null){var n=Rt();br(t,r,e,n)}tp(r,e)}};Cv=function(){return Pe};Rv=function(r,e){var t=Pe;try{return Pe=r,e()}finally{Pe=t}};_d=function(r,e,t){switch(e){case"input":if(Td(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var s=Ac(n);if(!s)throw Error(q(90));av(n),Td(n,s)}}}break;case"textarea":lv(r,t);break;case"select":e=t.value,e!=null&&ni(r,!!t.multiple,e,!1)}};mv=Xh;gv=Ls;var y2={usingClientEntryPoint:!1,Events:[Xa,qs,Ac,hv,pv,Xh]},Gi={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b2={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=yv(r),r===null?null:r.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||x2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{Sc=Co.inject(b2),Ur=Co}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y2;tr.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!np(e))throw Error(q(200));return g2(r,e,null,t)};tr.createRoot=function(r,e){if(!np(r))throw Error(q(299));var t=!1,n="",s=Qy;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ep(r,1,!1,null,null,t,!1,n,s),r[dn]=e.current,Aa(r.nodeType===8?r.parentNode:r),new rp(e)};tr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(q(188)):(r=Object.keys(r).join(","),Error(q(268,r)));return r=yv(e),r=r===null?null:r.stateNode,r};tr.flushSync=function(r){return Ls(r)};tr.hydrate=function(r,e,t){if(!Nc(e))throw Error(q(200));return Oc(null,r,e,!0,t)};tr.hydrateRoot=function(r,e,t){if(!np(r))throw Error(q(405));var n=t!=null&&t.hydratedSources||null,s=!1,i="",a=Qy;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Xy(e,null,r,1,t??null,s,!1,i,a),r[dn]=e.current,Aa(r),n)for(r=0;r<n.length;r++)t=n[r],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Dc(e)};tr.render=function(r,e,t){if(!Nc(e))throw Error(q(200));return Oc(null,r,e,!1,t)};tr.unmountComponentAtNode=function(r){if(!Nc(r))throw Error(q(40));return r._reactRootContainer?(Ls(function(){Oc(null,null,r,!1,function(){r._reactRootContainer=null,r[dn]=null})}),!0):!1};tr.unstable_batchedUpdates=Xh;tr.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!Nc(t))throw Error(q(200));if(r==null||r._reactInternals===void 0)throw Error(q(38));return Oc(r,e,t,!1,n)};tr.version="18.3.1-next-f1338f8080-20240426";function Zy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zy)}catch(r){console.error(r)}}Zy(),Zx.exports=tr;var S2=Zx.exports,Jy,ng=S2;Jy=ng.createRoot,ng.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Na.apply(this,arguments)}var On;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(On||(On={}));const sg="popstate";function E2(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return df("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:ql(s)}return T2(e,t,null,r)}function st(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function e1(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w2(){return Math.random().toString(36).substr(2,8)}function ig(r,e){return{usr:r.state,key:r.key,idx:e}}function df(r,e,t,n){return t===void 0&&(t=null),Na({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?_i(e):e,{state:t,key:e&&e.key||n||w2()})}function ql(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function _i(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function T2(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=On.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Na({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=On.Pop;let y=u(),b=y==null?null:y-c;c=y,l&&l({action:o,location:g.location,delta:b})}function f(y,b){o=On.Push;let m=df(g.location,y,b);c=u()+1;let v=ig(m,c),S=g.createHref(m);try{a.pushState(v,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&l&&l({action:o,location:g.location,delta:1})}function p(y,b){o=On.Replace;let m=df(g.location,y,b);c=u();let v=ig(m,c),S=g.createHref(m);a.replaceState(v,"",S),i&&l&&l({action:o,location:g.location,delta:0})}function h(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof y=="string"?y:ql(y);return m=m.replace(/ $/,"%20"),st(b,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,b)}let g={get action(){return o},get location(){return r(s,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(sg,d),l=y,()=>{s.removeEventListener(sg,d),l=null}},createHref(y){return e(s,y)},createURL:h,encodeLocation(y){let b=h(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(y){return a.go(y)}};return g}var ag;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ag||(ag={}));function A2(r,e,t){return t===void 0&&(t="/"),I2(r,e,t)}function I2(r,e,t,n){let s=typeof e=="string"?_i(e):e,i=sp(s.pathname||"/",t);if(i==null)return null;let a=t1(r);L2(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=$2(i);o=M2(a[l],c)}return o}function t1(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(st(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Kn([n,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(st(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),t1(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:N2(c,i.index),routesMeta:u})};return r.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of r1(i.path))s(i,a,l)}),e}function r1(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=r1(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function L2(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:O2(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const C2=/^:[\w-]+$/,R2=3,k2=2,_2=1,P2=10,D2=-2,og=r=>r==="*";function N2(r,e){let t=r.split("/"),n=t.length;return t.some(og)&&(n+=D2),e&&(n+=k2),t.filter(s=>!og(s)).reduce((s,i)=>s+(C2.test(i)?R2:i===""?_2:P2),n)}function O2(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function M2(r,e,t){let{routesMeta:n}=r,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=F2({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Kn([i,d.pathname]),pathnameBase:V2(Kn([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Kn([i,d.pathnameBase]))}return a}function F2(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=j2(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=o[d]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const h=o[d];return p&&!h?c[f]=void 0:c[f]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:r}}function j2(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),e1(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function $2(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return e1(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function sp(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function B2(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?_i(r):r;return{pathname:t?t.startsWith("/")?t:U2(t,e):e,search:G2(n),hash:H2(s)}}function U2(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ru(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function n1(r,e){let t=z2(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function s1(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=_i(r):(s=Na({},r),st(!s.pathname||!s.pathname.includes("?"),Ru("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),Ru("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),Ru("#","search","hash",s)));let i=r===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=B2(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Kn=r=>r.join("/").replace(/\/\/+/g,"/"),V2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),G2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,H2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function K2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const i1=["post","put","patch","delete"];new Set(i1);const W2=["get",...i1];new Set(W2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Oa.apply(this,arguments)}const ip=D.createContext(null),q2=D.createContext(null),Os=D.createContext(null),Mc=D.createContext(null),ss=D.createContext({outlet:null,matches:[],isDataRoute:!1}),a1=D.createContext(null);function Y2(r,e){let{relative:t}=e===void 0?{}:e;Za()||st(!1);let{basename:n,navigator:s}=D.useContext(Os),{hash:i,pathname:a,search:o}=l1(r,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Kn([n,a])),s.createHref({pathname:l,search:o,hash:i})}function Za(){return D.useContext(Mc)!=null}function Yr(){return Za()||st(!1),D.useContext(Mc).location}function o1(r){D.useContext(Os).static||D.useLayoutEffect(r)}function Tt(){let{isDataRoute:r}=D.useContext(ss);return r?lA():X2()}function X2(){Za()||st(!1);let r=D.useContext(ip),{basename:e,future:t,navigator:n}=D.useContext(Os),{matches:s}=D.useContext(ss),{pathname:i}=Yr(),a=JSON.stringify(n1(s,t.v7_relativeSplatPath)),o=D.useRef(!1);return o1(()=>{o.current=!0}),D.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=s1(c,JSON.parse(a),i,u.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kn([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,r])}function Yl(){let{matches:r}=D.useContext(ss),e=r[r.length-1];return e?e.params:{}}function l1(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=D.useContext(Os),{matches:s}=D.useContext(ss),{pathname:i}=Yr(),a=JSON.stringify(n1(s,n.v7_relativeSplatPath));return D.useMemo(()=>s1(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function Q2(r,e){return Z2(r,e)}function Z2(r,e,t,n){Za()||st(!1);let{navigator:s}=D.useContext(Os),{matches:i}=D.useContext(ss),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Yr(),u;if(e){var d;let y=typeof e=="string"?_i(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||st(!1),u=y}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let h=A2(r,{pathname:p}),g=nA(h&&h.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Kn([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Kn([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,t,n);return e&&g?D.createElement(Mc.Provider,{value:{location:Oa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:On.Pop}},g):g}function J2(){let r=oA(),e=K2(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:s},t):null,null)}const eA=D.createElement(J2,null);class tA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(ss.Provider,{value:this.props.routeContext},D.createElement(a1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rA(r){let{routeContext:e,match:t,children:n}=r,s=D.useContext(ip);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(ss.Provider,{value:e},n)}function nA(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,o=(s=t)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||st(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=t,h=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||h){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let p,h=!1,g=null,y=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||eA,l&&(c<0&&f===0?(cA("route-fallback"),h=!0,y=null):c===f&&(h=!0,y=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),m=()=>{let v;return p?v=g:h?v=y:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(rA,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:t!=null},children:v})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?D.createElement(tA,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:m(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):m()},null)}var c1=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(c1||{}),u1=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(u1||{});function sA(r){let e=D.useContext(ip);return e||st(!1),e}function iA(r){let e=D.useContext(q2);return e||st(!1),e}function aA(r){let e=D.useContext(ss);return e||st(!1),e}function d1(r){let e=aA(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function oA(){var r;let e=D.useContext(a1),t=iA(),n=d1();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function lA(){let{router:r}=sA(c1.UseNavigateStable),e=d1(u1.UseNavigateStable),t=D.useRef(!1);return o1(()=>{t.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Oa({fromRouteId:e},i)))},[r,e])}const lg={};function cA(r,e,t){lg[r]||(lg[r]=!0)}function uA(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Gt(r){st(!1)}function dA(r){let{basename:e="/",children:t=null,location:n,navigationType:s=On.Pop,navigator:i,static:a=!1,future:o}=r;Za()&&st(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:a,future:Oa({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=_i(n));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:h="default"}=n,g=D.useMemo(()=>{let y=sp(u,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:h},navigationType:s}},[l,u,d,f,p,h,s]);return g==null?null:D.createElement(Os.Provider,{value:c},D.createElement(Mc.Provider,{children:t,value:g}))}function fA(r){let{children:e,location:t}=r;return Q2(ff(e),t)}new Promise(()=>{});function ff(r,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(r,(n,s)=>{if(!D.isValidElement(n))return;let i=[...e,s];if(n.type===D.Fragment){t.push.apply(t,ff(n.props.children,i));return}n.type!==Gt&&st(!1),!n.props.index||!n.props.children||st(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=ff(n.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hf.apply(this,arguments)}function hA(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function pA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mA(r,e){return r.button===0&&(!e||e==="_self")&&!pA(r)}function pf(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(s=>[t,s]):[[t,n]])},[]))}function gA(r,e){let t=pf(r);return e&&e.forEach((n,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}const xA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vA="6";try{window.__reactRouterVersion=vA}catch{}const yA="startTransition",cg=cw[yA];function bA(r){let{basename:e,children:t,future:n,window:s}=r,i=D.useRef();i.current==null&&(i.current=E2({window:s,v5Compat:!0}));let a=i.current,[o,l]=D.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},u=D.useCallback(d=>{c&&cg?cg(()=>l(d)):l(d)},[l,c]);return D.useLayoutEffect(()=>a.listen(u),[a,u]),D.useEffect(()=>uA(n),[n]),D.createElement(dA,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const SA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=D.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=hA(e,xA),{basename:p}=D.useContext(Os),h,g=!1;if(typeof c=="string"&&EA.test(c)&&(h=c,SA))try{let v=new URL(window.location.href),S=c.startsWith("//")?new URL(v.protocol+c):new URL(c),E=sp(S.pathname,p);S.origin===v.origin&&E!=null?c=E+S.search+S.hash:g=!0}catch{}let y=Y2(c,{relative:s}),b=wA(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:d});function m(v){n&&n(v),v.defaultPrevented||b(v)}return D.createElement("a",hf({},f,{href:h||y,onClick:g||i?n:m,ref:t,target:l}))});var ug;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ug||(ug={}));var dg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(dg||(dg={}));function wA(r,e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Tt(),c=Yr(),u=l1(r,{relative:a});return D.useCallback(d=>{if(mA(d,t)){d.preventDefault();let f=n!==void 0?n:ql(c)===ql(u);l(r,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,n,s,t,r,i,a,o])}function Fc(r){let e=D.useRef(pf(r)),t=D.useRef(!1),n=Yr(),s=D.useMemo(()=>gA(n.search,t.current?null:e.current),[n.search]),i=Tt(),a=D.useCallback((o,l)=>{const c=pf(typeof o=="function"?o(s):o);t.current=!0,i("?"+c,l)},[i,s]);return[s,a]}function f1(r,e){return function(){return r.apply(e,arguments)}}const{toString:TA}=Object.prototype,{getPrototypeOf:ap}=Object,{iterator:jc,toStringTag:h1}=Symbol,$c=(r=>e=>{const t=TA.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Tr=r=>(r=r.toLowerCase(),e=>$c(e)===r),Bc=r=>e=>typeof e===r,{isArray:Pi}=Array,wi=Bc("undefined");function Ja(r){return r!==null&&!wi(r)&&r.constructor!==null&&!wi(r.constructor)&&Ut(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const p1=Tr("ArrayBuffer");function AA(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&p1(r.buffer),e}const IA=Bc("string"),Ut=Bc("function"),m1=Bc("number"),eo=r=>r!==null&&typeof r=="object",LA=r=>r===!0||r===!1,ul=r=>{if($c(r)!=="object")return!1;const e=ap(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(h1 in r)&&!(jc in r)},CA=r=>{if(!eo(r)||Ja(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},RA=Tr("Date"),kA=Tr("File"),_A=Tr("Blob"),PA=Tr("FileList"),DA=r=>eo(r)&&Ut(r.pipe),NA=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Ut(r.append)&&((e=$c(r))==="formdata"||e==="object"&&Ut(r.toString)&&r.toString()==="[object FormData]"))},OA=Tr("URLSearchParams"),[MA,FA,jA,$A]=["ReadableStream","Request","Response","Headers"].map(Tr),BA=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function to(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),Pi(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{if(Ja(r))return;const i=t?Object.getOwnPropertyNames(r):Object.keys(r),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,r[o],o,r)}}function g1(r,e){if(Ja(r))return null;e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const gs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,x1=r=>!wi(r)&&r!==gs;function mf(){const{caseless:r,skipUndefined:e}=x1(this)&&this||{},t={},n=(s,i)=>{const a=r&&g1(t,i)||i;ul(t[a])&&ul(s)?t[a]=mf(t[a],s):ul(s)?t[a]=mf({},s):Pi(s)?t[a]=s.slice():(!e||!wi(s))&&(t[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&to(arguments[s],n);return t}const UA=(r,e,t,{allOwnKeys:n}={})=>(to(e,(s,i)=>{t&&Ut(s)?r[i]=f1(s,t):r[i]=s},{allOwnKeys:n}),r),zA=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),VA=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},GA=(r,e,t,n)=>{let s,i,a;const o={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),i=s.length;i-- >0;)a=s[i],(!n||n(a,r,e))&&!o[a]&&(e[a]=r[a],o[a]=!0);r=t!==!1&&ap(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},HA=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},KA=r=>{if(!r)return null;if(Pi(r))return r;let e=r.length;if(!m1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},WA=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&ap(Uint8Array)),qA=(r,e)=>{const n=(r&&r[jc]).call(r);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(r,i[0],i[1])}},YA=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},XA=Tr("HTMLFormElement"),QA=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),fg=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),ZA=Tr("RegExp"),v1=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};to(t,(s,i)=>{let a;(a=e(s,i,r))!==!1&&(n[i]=a||s)}),Object.defineProperties(r,n)},JA=r=>{v1(r,(e,t)=>{if(Ut(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Ut(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},eI=(r,e)=>{const t={},n=s=>{s.forEach(i=>{t[i]=!0})};return Pi(r)?n(r):n(String(r).split(e)),t},tI=()=>{},rI=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function nI(r){return!!(r&&Ut(r.append)&&r[h1]==="FormData"&&r[jc])}const sI=r=>{const e=new Array(10),t=(n,s)=>{if(eo(n)){if(e.indexOf(n)>=0)return;if(Ja(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Pi(n)?[]:{};return to(n,(a,o)=>{const l=t(a,s+1);!wi(l)&&(i[o]=l)}),e[s]=void 0,i}}return n};return t(r,0)},iI=Tr("AsyncFunction"),aI=r=>r&&(eo(r)||Ut(r))&&Ut(r.then)&&Ut(r.catch),y1=((r,e)=>r?setImmediate:e?((t,n)=>(gs.addEventListener("message",({source:s,data:i})=>{s===gs&&i===t&&n.length&&n.shift()()},!1),s=>{n.push(s),gs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ut(gs.postMessage)),oI=typeof queueMicrotask<"u"?queueMicrotask.bind(gs):typeof process<"u"&&process.nextTick||y1,lI=r=>r!=null&&Ut(r[jc]),V={isArray:Pi,isArrayBuffer:p1,isBuffer:Ja,isFormData:NA,isArrayBufferView:AA,isString:IA,isNumber:m1,isBoolean:LA,isObject:eo,isPlainObject:ul,isEmptyObject:CA,isReadableStream:MA,isRequest:FA,isResponse:jA,isHeaders:$A,isUndefined:wi,isDate:RA,isFile:kA,isBlob:_A,isRegExp:ZA,isFunction:Ut,isStream:DA,isURLSearchParams:OA,isTypedArray:WA,isFileList:PA,forEach:to,merge:mf,extend:UA,trim:BA,stripBOM:zA,inherits:VA,toFlatObject:GA,kindOf:$c,kindOfTest:Tr,endsWith:HA,toArray:KA,forEachEntry:qA,matchAll:YA,isHTMLForm:XA,hasOwnProperty:fg,hasOwnProp:fg,reduceDescriptors:v1,freezeMethods:JA,toObjectSet:eI,toCamelCase:QA,noop:tI,toFiniteNumber:rI,findKey:g1,global:gs,isContextDefined:x1,isSpecCompliantForm:nI,toJSONObject:sI,isAsyncFn:iI,isThenable:aI,setImmediate:y1,asap:oI,isIterable:lI};function pe(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const b1=pe.prototype,S1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{S1[r]={value:r}});Object.defineProperties(pe,S1);Object.defineProperty(b1,"isAxiosError",{value:!0});pe.from=(r,e,t,n,s,i)=>{const a=Object.create(b1);V.toFlatObject(r,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=r&&r.message?r.message:"Error",l=e==null&&r?r.code:e;return pe.call(a,o,l,t,n,s),r&&a.cause==null&&Object.defineProperty(a,"cause",{value:r,configurable:!0}),a.name=r&&r.name||"Error",i&&Object.assign(a,i),a};const cI=null;function gf(r){return V.isPlainObject(r)||V.isArray(r)}function E1(r){return V.endsWith(r,"[]")?r.slice(0,-2):r}function hg(r,e,t){return r?r.concat(e).map(function(s,i){return s=E1(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function uI(r){return V.isArray(r)&&!r.some(gf)}const dI=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Uc(r,e,t){if(!V.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=V.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!V.isUndefined(y[g])});const n=t.metaTokens,s=t.visitor||u,i=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(V.isDate(h))return h.toISOString();if(V.isBoolean(h))return h.toString();if(!l&&V.isBlob(h))throw new pe("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(h)||V.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,g,y){let b=h;if(h&&!y&&typeof h=="object"){if(V.endsWith(g,"{}"))g=n?g:g.slice(0,-2),h=JSON.stringify(h);else if(V.isArray(h)&&uI(h)||(V.isFileList(h)||V.endsWith(g,"[]"))&&(b=V.toArray(h)))return g=E1(g),b.forEach(function(v,S){!(V.isUndefined(v)||v===null)&&e.append(a===!0?hg([g],S,i):a===null?g:g+"[]",c(v))}),!1}return gf(h)?!0:(e.append(hg(y,g,i),c(h)),!1)}const d=[],f=Object.assign(dI,{defaultVisitor:u,convertValue:c,isVisitable:gf});function p(h,g){if(!V.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(h),V.forEach(h,function(b,m){(!(V.isUndefined(b)||b===null)&&s.call(e,b,V.isString(m)?m.trim():m,g,f))===!0&&p(b,g?g.concat(m):[m])}),d.pop()}}if(!V.isObject(r))throw new TypeError("data must be an object");return p(r),e}function pg(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function op(r,e){this._pairs=[],r&&Uc(r,this,e)}const w1=op.prototype;w1.append=function(e,t){this._pairs.push([e,t])};w1.toString=function(e){const t=e?function(n){return e.call(this,n,pg)}:pg;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function fI(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function T1(r,e,t){if(!e)return r;const n=t&&t.encode||fI;V.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let i;if(s?i=s(e,t):i=V.isURLSearchParams(e)?e.toString():new op(e,t).toString(n),i){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}class mg{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(n){n!==null&&e(n)})}}const A1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hI=typeof URLSearchParams<"u"?URLSearchParams:op,pI=typeof FormData<"u"?FormData:null,mI=typeof Blob<"u"?Blob:null,gI={isBrowser:!0,classes:{URLSearchParams:hI,FormData:pI,Blob:mI},protocols:["http","https","file","blob","url","data"]},lp=typeof window<"u"&&typeof document<"u",xf=typeof navigator=="object"&&navigator||void 0,xI=lp&&(!xf||["ReactNative","NativeScript","NS"].indexOf(xf.product)<0),vI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yI=lp&&window.location.href||"http://localhost",bI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lp,hasStandardBrowserEnv:xI,hasStandardBrowserWebWorkerEnv:vI,navigator:xf,origin:yI},Symbol.toStringTag,{value:"Module"})),St={...bI,...gI};function SI(r,e){return Uc(r,new St.classes.URLSearchParams,{visitor:function(t,n,s,i){return St.isNode&&V.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function EI(r){return V.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wI(r){const e={},t=Object.keys(r);let n;const s=t.length;let i;for(n=0;n<s;n++)i=t[n],e[i]=r[i];return e}function I1(r){function e(t,n,s,i){let a=t[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=t.length;return a=!a&&V.isArray(s)?s.length:a,l?(V.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!V.isObject(s[a]))&&(s[a]=[]),e(t,n,s[a],i)&&V.isArray(s[a])&&(s[a]=wI(s[a])),!o)}if(V.isFormData(r)&&V.isFunction(r.entries)){const t={};return V.forEachEntry(r,(n,s)=>{e(EI(n),s,t,0)}),t}return null}function TI(r,e,t){if(V.isString(r))try{return(e||JSON.parse)(r),V.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const ro={transitional:A1,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=V.isObject(e);if(i&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return s?JSON.stringify(I1(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return SI(e,this.formSerializer).toString();if((o=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Uc(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),TI(e)):e}],transformResponse:[function(e){const t=this.transitional||ro.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?pe.from(o,pe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:St.classes.FormData,Blob:St.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],r=>{ro.headers[r]={}});const AI=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),II=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!t||e[t]&&AI[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},gg=Symbol("internals");function Hi(r){return r&&String(r).trim().toLowerCase()}function dl(r){return r===!1||r==null?r:V.isArray(r)?r.map(dl):String(r)}function LI(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const CI=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ku(r,e,t,n,s){if(V.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!V.isString(e)){if(V.isString(n))return e.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(e)}}function RI(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function kI(r,e){const t=V.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}let zt=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(o,l,c){const u=Hi(l);if(!u)throw new Error("header name must be a non-empty string");const d=V.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=dl(o))}const a=(o,l)=>V.forEach(o,(c,u)=>i(c,u,l));if(V.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(V.isString(e)&&(e=e.trim())&&!CI(e))a(II(e),t);else if(V.isObject(e)&&V.isIterable(e)){let o={},l,c;for(const u of e){if(!V.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?V.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,t)}else e!=null&&i(t,e,n);return this}get(e,t){if(e=Hi(e),e){const n=V.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return LI(s);if(V.isFunction(t))return t.call(this,s,n);if(V.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Hi(e),e){const n=V.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||ku(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function i(a){if(a=Hi(a),a){const o=V.findKey(n,a);o&&(!t||ku(n,n[o],o,t))&&(delete n[o],s=!0)}}return V.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];(!e||ku(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return V.forEach(this,(s,i)=>{const a=V.findKey(n,i);if(a){t[a]=dl(s),delete t[i];return}const o=e?RI(i):String(i).trim();o!==i&&delete t[i],t[o]=dl(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return V.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&V.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[gg]=this[gg]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=Hi(a);n[o]||(kI(s,a),n[o]=!0)}return V.isArray(e)?e.forEach(i):i(e),this}};zt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(zt.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});V.freezeMethods(zt);function _u(r,e){const t=this||ro,n=e||t,s=zt.from(n.headers);let i=n.data;return V.forEach(r,function(o){i=o.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function L1(r){return!!(r&&r.__CANCEL__)}function Di(r,e,t){pe.call(this,r??"canceled",pe.ERR_CANCELED,e,t),this.name="CanceledError"}V.inherits(Di,pe,{__CANCEL__:!0});function C1(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new pe("Request failed with status code "+t.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function _I(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function PI(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[i];a||(a=c),t[s]=l,n[s]=c;let d=i,f=0;for(;d!==s;)f+=t[d++],d=d%r;if(s=(s+1)%r,s===i&&(i=(i+1)%r),c-a<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function DI(r,e){let t=0,n=1e3/e,s,i;const a=(c,u=Date.now())=>{t=u,s=null,i&&(clearTimeout(i),i=null),r(...c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=n?a(c,u):(s=c,i||(i=setTimeout(()=>{i=null,a(s)},n-d)))},()=>s&&a(s)]}const Xl=(r,e,t=3)=>{let n=0;const s=PI(50,250);return DI(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-n,c=s(l),u=a<=o;n=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};r(d)},t)},xg=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},vg=r=>(...e)=>V.asap(()=>r(...e)),NI=St.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,St.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(St.origin),St.navigator&&/(msie|trident)/i.test(St.navigator.userAgent)):()=>!0,OI=St.hasStandardBrowserEnv?{write(r,e,t,n,s,i){const a=[r+"="+encodeURIComponent(e)];V.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),V.isString(n)&&a.push("path="+n),V.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function MI(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function FI(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function R1(r,e,t){let n=!MI(e);return r&&(n||t==!1)?FI(r,e):e}const yg=r=>r instanceof zt?{...r}:r;function Cs(r,e){e=e||{};const t={};function n(c,u,d,f){return V.isPlainObject(c)&&V.isPlainObject(u)?V.merge.call({caseless:f},c,u):V.isPlainObject(u)?V.merge({},u):V.isArray(u)?u.slice():u}function s(c,u,d,f){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c,d,f)}else return n(c,u,d,f)}function i(c,u){if(!V.isUndefined(u))return n(void 0,u)}function a(c,u){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function o(c,u,d){if(d in e)return n(c,u);if(d in r)return n(void 0,c)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,d)=>s(yg(c),yg(u),d,!0)};return V.forEach(Object.keys({...r,...e}),function(u){const d=l[u]||s,f=d(r[u],e[u],u);V.isUndefined(f)&&d!==o||(t[u]=f)}),t}const k1=r=>{const e=Cs({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=e;if(e.headers=a=zt.from(a),e.url=T1(R1(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),V.isFormData(t)){if(St.hasStandardBrowserEnv||St.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(V.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&a.set(u,d)})}}if(St.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(e)),n||n!==!1&&NI(e.url))){const l=s&&i&&OI.read(i);l&&a.set(s,l)}return e},jI=typeof XMLHttpRequest<"u",$I=jI&&function(r){return new Promise(function(t,n){const s=k1(r);let i=s.data;const a=zt.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=s,u,d,f,p,h;function g(){p&&p(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function b(){if(!y)return;const v=zt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:v,config:r,request:y};C1(function(L){t(L),g()},function(L){n(L),g()},E),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(n(new pe("Request aborted",pe.ECONNABORTED,r,y)),y=null)},y.onerror=function(S){const E=S&&S.message?S.message:"Network Error",C=new pe(E,pe.ERR_NETWORK,r,y);C.event=S||null,n(C),y=null},y.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||A1;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new pe(S,E.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,r,y)),y=null},i===void 0&&a.setContentType(null),"setRequestHeader"in y&&V.forEach(a.toJSON(),function(S,E){y.setRequestHeader(E,S)}),V.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),o&&o!=="json"&&(y.responseType=s.responseType),c&&([f,h]=Xl(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([d,p]=Xl(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=v=>{y&&(n(!v||v.type?new Di(null,r,y):v),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const m=_I(s.url);if(m&&St.protocols.indexOf(m)===-1){n(new pe("Unsupported protocol "+m+":",pe.ERR_BAD_REQUEST,r));return}y.send(i||null)})},BI=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const i=function(c){if(!s){s=!0,o();const u=c instanceof Error?c:this.reason;n.abort(u instanceof pe?u:new Di(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,i(new pe(`timeout ${e} of ms exceeded`,pe.ETIMEDOUT))},e);const o=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),r=null)};r.forEach(c=>c.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>V.asap(o),l}},UI=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},zI=async function*(r,e){for await(const t of VI(r))yield*UI(t,e)},VI=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},bg=(r,e,t,n)=>{const s=zI(r,e);let i=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let f=i+=d;t(f)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},Sg=64*1024,{isFunction:Ro}=V,GI=(({Request:r,Response:e})=>({Request:r,Response:e}))(V.global),{ReadableStream:Eg,TextEncoder:wg}=V.global,Tg=(r,...e)=>{try{return!!r(...e)}catch{return!1}},HI=r=>{r=V.merge.call({skipUndefined:!0},GI,r);const{fetch:e,Request:t,Response:n}=r,s=e?Ro(e):typeof fetch=="function",i=Ro(t),a=Ro(n);if(!s)return!1;const o=s&&Ro(Eg),l=s&&(typeof wg=="function"?(h=>g=>h.encode(g))(new wg):async h=>new Uint8Array(await new t(h).arrayBuffer())),c=i&&o&&Tg(()=>{let h=!1;const g=new t(St.origin,{body:new Eg,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!g}),u=a&&o&&Tg(()=>V.isReadableStream(new n("").body)),d={stream:u&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(g,y)=>{let b=g&&g[h];if(b)return b.call(g);throw new pe(`Response type '${h}' is not supported`,pe.ERR_NOT_SUPPORT,y)})});const f=async h=>{if(h==null)return 0;if(V.isBlob(h))return h.size;if(V.isSpecCompliantForm(h))return(await new t(St.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(V.isArrayBufferView(h)||V.isArrayBuffer(h))return h.byteLength;if(V.isURLSearchParams(h)&&(h=h+""),V.isString(h))return(await l(h)).byteLength},p=async(h,g)=>{const y=V.toFiniteNumber(h.getContentLength());return y??f(g)};return async h=>{let{url:g,method:y,data:b,signal:m,cancelToken:v,timeout:S,onDownloadProgress:E,onUploadProgress:C,responseType:L,headers:I,withCredentials:T="same-origin",fetchOptions:w}=k1(h),R=e||fetch;L=L?(L+"").toLowerCase():"text";let _=BI([m,v&&v.toAbortSignal()],S),k=null;const N=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let M;try{if(C&&c&&y!=="get"&&y!=="head"&&(M=await p(I,b))!==0){let $=new t(g,{method:"POST",body:b,duplex:"half"}),G;if(V.isFormData(b)&&(G=$.headers.get("content-type"))&&I.setContentType(G),$.body){const[Y,ee]=xg(M,Xl(vg(C)));b=bg($.body,Sg,Y,ee)}}V.isString(T)||(T=T?"include":"omit");const O=i&&"credentials"in t.prototype,j={...w,signal:_,method:y.toUpperCase(),headers:I.normalize().toJSON(),body:b,duplex:"half",credentials:O?T:void 0};k=i&&new t(g,j);let P=await(i?R(k,w):R(g,j));const F=u&&(L==="stream"||L==="response");if(u&&(E||F&&N)){const $={};["status","statusText","headers"].forEach(te=>{$[te]=P[te]});const G=V.toFiniteNumber(P.headers.get("content-length")),[Y,ee]=E&&xg(G,Xl(vg(E),!0))||[];P=new n(bg(P.body,Sg,Y,()=>{ee&&ee(),N&&N()}),$)}L=L||"text";let B=await d[V.findKey(d,L)||"text"](P,h);return!F&&N&&N(),await new Promise(($,G)=>{C1($,G,{data:B,headers:zt.from(P.headers),status:P.status,statusText:P.statusText,config:h,request:k})})}catch(O){throw N&&N(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,h,k),{cause:O.cause||O}):pe.from(O,O&&O.code,h,k)}}},KI=new Map,_1=r=>{let e=r?r.env:{};const{fetch:t,Request:n,Response:s}=e,i=[n,s,t];let a=i.length,o=a,l,c,u=KI;for(;o--;)l=i[o],c=u.get(l),c===void 0&&u.set(l,c=o?new Map:HI(e)),u=c;return c};_1();const vf={http:cI,xhr:$I,fetch:{get:_1}};V.forEach(vf,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Ag=r=>`- ${r}`,WI=r=>V.isFunction(r)||r===null||r===!1,P1={getAdapter:(r,e)=>{r=V.isArray(r)?r:[r];const{length:t}=r;let n,s;const i={};for(let a=0;a<t;a++){n=r[a];let o;if(s=n,!WI(n)&&(s=vf[(o=String(n)).toLowerCase()],s===void 0))throw new pe(`Unknown adapter '${o}'`);if(s&&(V.isFunction(s)||(s=s.get(e))))break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(Ag).join(`
`):" "+Ag(a[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:vf};function Pu(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Di(null,r)}function Ig(r){return Pu(r),r.headers=zt.from(r.headers),r.data=_u.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),P1.getAdapter(r.adapter||ro.adapter,r)(r).then(function(n){return Pu(r),n.data=_u.call(r,r.transformResponse,n),n.headers=zt.from(n.headers),n},function(n){return L1(n)||(Pu(r),n&&n.response&&(n.response.data=_u.call(r,r.transformResponse,n.response),n.response.headers=zt.from(n.response.headers))),Promise.reject(n)})}const D1="1.12.2",zc={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{zc[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Lg={};zc.transitional=function(e,t,n){function s(i,a){return"[Axios v"+D1+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new pe(s(a," has been removed"+(t?" in "+t:"")),pe.ERR_DEPRECATED);return t&&!Lg[a]&&(Lg[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,a,o):!0}};zc.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function qI(r,e,t){if(typeof r!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=r[i],l=o===void 0||a(o,i,r);if(l!==!0)throw new pe("option "+i+" must be "+l,pe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new pe("Unknown option "+i,pe.ERR_BAD_OPTION)}}const fl={assertOptions:qI,validators:zc},Ir=fl.validators;let bs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new mg,response:new mg}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Cs(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;n!==void 0&&fl.assertOptions(n,{silentJSONParsing:Ir.transitional(Ir.boolean),forcedJSONParsing:Ir.transitional(Ir.boolean),clarifyTimeoutError:Ir.transitional(Ir.boolean)},!1),s!=null&&(V.isFunction(s)?t.paramsSerializer={serialize:s}:fl.assertOptions(s,{encode:Ir.function,serialize:Ir.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),fl.assertOptions(t,{baseUrl:Ir.spelling("baseURL"),withXsrfToken:Ir.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&V.merge(i.common,i[t.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),t.headers=zt.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!l){const h=[Ig.bind(this),void 0];for(h.unshift(...o),h.push(...c),f=h.length,u=Promise.resolve(t);d<f;)u=u.then(h[d++],h[d++]);return u}f=o.length;let p=t;for(;d<f;){const h=o[d++],g=o[d++];try{p=h(p)}catch(y){g.call(this,y);break}}try{u=Ig.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Cs(this.defaults,e);const t=R1(e.baseURL,e.url,e.allowAbsoluteUrls);return T1(t,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){bs.prototype[e]=function(t,n){return this.request(Cs(n||{},{method:e,url:t,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(e){function t(n){return function(i,a,o){return this.request(Cs(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}bs.prototype[e]=t(),bs.prototype[e+"Form"]=t(!0)});let YI=class N1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new Di(i,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new N1(function(s){e=s}),cancel:e}}};function XI(r){return function(t){return r.apply(null,t)}}function QI(r){return V.isObject(r)&&r.isAxiosError===!0}const yf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yf).forEach(([r,e])=>{yf[e]=r});function O1(r){const e=new bs(r),t=f1(bs.prototype.request,e);return V.extend(t,bs.prototype,e,{allOwnKeys:!0}),V.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return O1(Cs(r,s))},t}const Te=O1(ro);Te.Axios=bs;Te.CanceledError=Di;Te.CancelToken=YI;Te.isCancel=L1;Te.VERSION=D1;Te.toFormData=Uc;Te.AxiosError=pe;Te.Cancel=Te.CanceledError;Te.all=function(e){return Promise.all(e)};Te.spread=XI;Te.isAxiosError=QI;Te.mergeConfig=Cs;Te.AxiosHeaders=zt;Te.formToJSON=r=>I1(V.isHTMLForm(r)?new FormData(r):r);Te.getAdapter=P1.getAdapter;Te.HttpStatusCode=yf;Te.default=Te;const{Axios:GO,AxiosError:HO,CanceledError:KO,isCancel:WO,CancelToken:qO,VERSION:YO,all:XO,Cancel:QO,isAxiosError:ZO,spread:JO,toFormData:eM,AxiosHeaders:tM,HttpStatusCode:rM,formToJSON:nM,getAdapter:sM,mergeConfig:iM}=Te,Cg="homeInfoCache",ZI=24*60*60*1e3;async function JI(){const r="https://api-orcin-seven-62.vercel.app/api",e=Date.now(),t=JSON.parse(localStorage.getItem(Cg));if(t&&e-t.timestamp<ZI)return t.data;const n=await Te.get(`${r}`);if(!n.data.results||Object.keys(n.data.results).length===0)return null;const{spotlights:s,trending:i,topTen:a,today:o,topAiring:l,mostPopular:c,mostFavorite:u,latestCompleted:d,latestEpisode:f,topUpcoming:p,recentlyAdded:h,genres:g}=n.data.results,y={data:{spotlights:s,trending:i,topten:a,todaySchedule:o,top_airing:l,most_popular:c,most_favorite:u,latest_completed:d,latest_episode:f,top_upcoming:p,recently_added:h,genres:g},timestamp:e};return localStorage.setItem(Cg,JSON.stringify(y)),y.data}const M1=D.createContext(),eL=({children:r})=>{const[e,t]=D.useState(()=>{const o=localStorage.getItem("homeInfoCache");if(o)try{return JSON.parse(o).data||null}catch{return null}return null}),[n,s]=D.useState(()=>!localStorage.getItem("homeInfoCache")),[i,a]=D.useState(null);return D.useEffect(()=>{(async()=>{if(!e)try{const l=await JI();t(l)}catch(l){console.error("Error fetching home info:",l),a(l)}finally{s(!1)}})()},[]),x.jsx(M1.Provider,{value:{homeInfo:e,homeInfoLoading:n,error:i},children:r})},Ni=()=>D.useContext(M1),Mt="Zenime";function Rg(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function cp(r,e){r===void 0&&(r={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof r[n]>"u"?r[n]=e[n]:Rg(e[n])&&Rg(r[n])&&Object.keys(e[n]).length>0&&cp(r[n],e[n])})}const F1={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Vr(){const r=typeof document<"u"?document:{};return cp(r,F1),r}const tL={document:F1,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function Pt(){const r=typeof window<"u"?window:{};return cp(r,tL),r}function rL(r){return r===void 0&&(r=""),r.trim().split(" ").filter(e=>!!e.trim())}function nL(r){const e=r;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function j1(r,e){return e===void 0&&(e=0),setTimeout(r,e)}function Ql(){return Date.now()}function sL(r){const e=Pt();let t;return e.getComputedStyle&&(t=e.getComputedStyle(r,null)),!t&&r.currentStyle&&(t=r.currentStyle),t||(t=r.style),t}function iL(r,e){e===void 0&&(e="x");const t=Pt();let n,s,i;const a=sL(r);return t.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),i=new t.WebKitCSSMatrix(s==="none"?"":s)):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=i.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=i.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=i.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function ko(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function aL(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function Yt(){const r=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!aL(n)){const s=Object.keys(Object(n)).filter(i=>e.indexOf(i)<0);for(let i=0,a=s.length;i<a;i+=1){const o=s[i],l=Object.getOwnPropertyDescriptor(n,o);l!==void 0&&l.enumerable&&(ko(r[o])&&ko(n[o])?n[o].__swiper__?r[o]=n[o]:Yt(r[o],n[o]):!ko(r[o])&&ko(n[o])?(r[o]={},n[o].__swiper__?r[o]=n[o]:Yt(r[o],n[o])):r[o]=n[o])}}}return r}function _o(r,e,t){r.style.setProperty(e,t)}function $1(r){let{swiper:e,targetPosition:t,side:n}=r;const s=Pt(),i=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const c=t>i?"next":"prev",u=(f,p)=>c==="next"&&f>=p||c==="prev"&&f<=p,d=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),p=.5-Math.cos(f*Math.PI)/2;let h=i+p*(t-i);if(u(h,t)&&(h=t),e.wrapperEl.scrollTo({[n]:h}),u(h,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function Mr(r,e){e===void 0&&(e="");const t=Pt(),n=[...r.children];return t.HTMLSlotElement&&r instanceof HTMLSlotElement&&n.push(...r.assignedElements()),e?n.filter(s=>s.matches(e)):n}function oL(r,e){const t=[e];for(;t.length>0;){const n=t.shift();if(r===n)return!0;t.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function lL(r,e){const t=Pt();let n=e.contains(r);return!n&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(n=[...e.assignedElements()].includes(r),n||(n=oL(r,e))),n}function Zl(r){try{console.warn(r);return}catch{}}function Jl(r,e){e===void 0&&(e=[]);const t=document.createElement(r);return t.classList.add(...Array.isArray(e)?e:rL(e)),t}function cL(r,e){const t=[];for(;r.previousElementSibling;){const n=r.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function uL(r,e){const t=[];for(;r.nextElementSibling;){const n=r.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function Mn(r,e){return Pt().getComputedStyle(r,null).getPropertyValue(e)}function ec(r){let e=r,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function B1(r,e){const t=[];let n=r.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function bf(r,e,t){const n=Pt();return r[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ut(r){return(Array.isArray(r)?r:[r]).filter(e=>!!e)}function tc(r,e){e===void 0&&(e=""),typeof trustedTypes<"u"?r.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):r.innerHTML=e}let Du;function dL(){const r=Pt(),e=Vr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&e instanceof r.DocumentTouch)}}function U1(){return Du||(Du=dL()),Du}let Nu;function fL(r){let{userAgent:e}=r===void 0?{}:r;const t=U1(),n=Pt(),s=n.navigator.platform,i=e||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,l=n.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let h=s==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&h&&t.touch&&g.indexOf(`${o}x${l}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),h=!1),c&&!p&&(a.os="android",a.android=!0),(u||f||d)&&(a.os="ios",a.ios=!0),a}function z1(r){return r===void 0&&(r={}),Nu||(Nu=fL(r)),Nu}let Ou;function hL(){const r=Pt(),e=z1();let t=!1;function n(){const o=r.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(n()){const o=String(r.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent),i=n(),a=i||s&&e.ios;return{isSafari:t||i,needPerspectiveFix:t,need3dFix:a,isWebView:s}}function V1(){return Ou||(Ou=hL()),Ou}function pL(r){let{swiper:e,on:t,emit:n}=r;const s=Pt();let i=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(i=new ResizeObserver(d=>{a=s.requestAnimationFrame(()=>{const{width:f,height:p}=e;let h=f,g=p;d.forEach(y=>{let{contentBoxSize:b,contentRect:m,target:v}=y;v&&v!==e.el||(h=m?m.width:(b[0]||b).inlineSize,g=m?m.height:(b[0]||b).blockSize)}),(h!==f||g!==p)&&o()})}),i.observe(e.el))},c=()=>{a&&s.cancelAnimationFrame(a),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null)},u=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",u)})}function mL(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const i=[],a=Pt(),o=function(u,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,p=new f(h=>{if(e.__preventObserver__)return;if(h.length===1){s("observerUpdate",h[0]);return}const g=function(){s("observerUpdate",h[0])};a.requestAnimationFrame?a.requestAnimationFrame(g):a.setTimeout(g,0)});p.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),i.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=B1(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{i.forEach(u=>{u.disconnect()}),i.splice(0,i.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",c)}var gL={on(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return r.split(" ").forEach(i=>{n.eventsListeners[i]||(n.eventsListeners[i]=[]),n.eventsListeners[i][s](e)}),n},once(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(){n.off(r,s),s.__emitterProxy&&delete s.__emitterProxy;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(n,a)}return s.__emitterProxy=e,n.on(r,s,t)},onAny(r,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof r!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(r)<0&&t.eventsAnyListeners[n](r),t},offAny(r){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(r);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(r,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||r.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,i)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(i,1)})}),t},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let e,t,n;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return typeof i[0]=="string"||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),n=r):(e=i[0].events,t=i[0].data,n=i[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(c=>{c.apply(n,[l,...t])}),r.eventsListeners&&r.eventsListeners[l]&&r.eventsListeners[l].forEach(c=>{c.apply(n,t)})}),r}};function xL(){const r=this;let e,t;const n=r.el;typeof r.params.width<"u"&&r.params.width!==null?e=r.params.width:e=n.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?t=r.params.height:t=n.clientHeight,!(e===0&&r.isHorizontal()||t===0&&r.isVertical())&&(e=e-parseInt(Mn(n,"padding-left")||0,10)-parseInt(Mn(n,"padding-right")||0,10),t=t-parseInt(Mn(n,"padding-top")||0,10)-parseInt(Mn(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(r,{width:e,height:t,size:r.isHorizontal()?e:t}))}function vL(){const r=this;function e(w,R){return parseFloat(w.getPropertyValue(r.getDirectionLabel(R))||0)}const t=r.params,{wrapperEl:n,slidesEl:s,size:i,rtlTranslate:a,wrongRTL:o}=r,l=r.virtual&&t.virtual.enabled,c=l?r.virtual.slides.length:r.slides.length,u=Mr(s,`.${r.params.slideClass}, swiper-slide`),d=l?r.virtual.slides.length:u.length;let f=[];const p=[],h=[];let g=t.slidesOffsetBefore;typeof g=="function"&&(g=t.slidesOffsetBefore.call(r));let y=t.slidesOffsetAfter;typeof y=="function"&&(y=t.slidesOffsetAfter.call(r));const b=r.snapGrid.length,m=r.slidesGrid.length;let v=t.spaceBetween,S=-g,E=0,C=0;if(typeof i>"u")return;typeof v=="string"&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*i:typeof v=="string"&&(v=parseFloat(v)),r.virtualSize=-v,u.forEach(w=>{a?w.style.marginLeft="":w.style.marginRight="",w.style.marginBottom="",w.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(_o(n,"--swiper-centered-offset-before",""),_o(n,"--swiper-centered-offset-after",""));const L=t.grid&&t.grid.rows>1&&r.grid;L?r.grid.initSlides(u):r.grid&&r.grid.unsetSlides();let I;const T=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(w=>typeof t.breakpoints[w].slidesPerView<"u").length>0;for(let w=0;w<d;w+=1){I=0;let R;if(u[w]&&(R=u[w]),L&&r.grid.updateSlide(w,R,u),!(u[w]&&Mn(R,"display")==="none")){if(t.slidesPerView==="auto"){T&&(u[w].style[r.getDirectionLabel("width")]="");const _=getComputedStyle(R),k=R.style.transform,N=R.style.webkitTransform;if(k&&(R.style.transform="none"),N&&(R.style.webkitTransform="none"),t.roundLengths)I=r.isHorizontal()?bf(R,"width"):bf(R,"height");else{const M=e(_,"width"),O=e(_,"padding-left"),j=e(_,"padding-right"),P=e(_,"margin-left"),F=e(_,"margin-right"),B=_.getPropertyValue("box-sizing");if(B&&B==="border-box")I=M+P+F;else{const{clientWidth:$,offsetWidth:G}=R;I=M+O+j+P+F+(G-$)}}k&&(R.style.transform=k),N&&(R.style.webkitTransform=N),t.roundLengths&&(I=Math.floor(I))}else I=(i-(t.slidesPerView-1)*v)/t.slidesPerView,t.roundLengths&&(I=Math.floor(I)),u[w]&&(u[w].style[r.getDirectionLabel("width")]=`${I}px`);u[w]&&(u[w].swiperSlideSize=I),h.push(I),t.centeredSlides?(S=S+I/2+E/2+v,E===0&&w!==0&&(S=S-i/2-v),w===0&&(S=S-i/2-v),Math.abs(S)<1/1e3&&(S=0),t.roundLengths&&(S=Math.floor(S)),C%t.slidesPerGroup===0&&f.push(S),p.push(S)):(t.roundLengths&&(S=Math.floor(S)),(C-Math.min(r.params.slidesPerGroupSkip,C))%r.params.slidesPerGroup===0&&f.push(S),p.push(S),S=S+I+v),r.virtualSize+=I+v,E=I,C+=1}}if(r.virtualSize=Math.max(r.virtualSize,i)+y,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${r.virtualSize+v}px`),t.setWrapperSize&&(n.style[r.getDirectionLabel("width")]=`${r.virtualSize+v}px`),L&&r.grid.updateWrapperSize(I,f),!t.centeredSlides){const w=[];for(let R=0;R<f.length;R+=1){let _=f[R];t.roundLengths&&(_=Math.floor(_)),f[R]<=r.virtualSize-i&&w.push(_)}f=w,Math.floor(r.virtualSize-i)-Math.floor(f[f.length-1])>1&&f.push(r.virtualSize-i)}if(l&&t.loop){const w=h[0]+v;if(t.slidesPerGroup>1){const R=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/t.slidesPerGroup),_=w*t.slidesPerGroup;for(let k=0;k<R;k+=1)f.push(f[f.length-1]+_)}for(let R=0;R<r.virtual.slidesBefore+r.virtual.slidesAfter;R+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+w),p.push(p[p.length-1]+w),r.virtualSize+=w}if(f.length===0&&(f=[0]),v!==0){const w=r.isHorizontal()&&a?"marginLeft":r.getDirectionLabel("marginRight");u.filter((R,_)=>!t.cssMode||t.loop?!0:_!==u.length-1).forEach(R=>{R.style[w]=`${v}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let w=0;h.forEach(_=>{w+=_+(v||0)}),w-=v;const R=w>i?w-i:0;f=f.map(_=>_<=0?-g:_>R?R+y:_)}if(t.centerInsufficientSlides){let w=0;h.forEach(_=>{w+=_+(v||0)}),w-=v;const R=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(w+R<i){const _=(i-w-R)/2;f.forEach((k,N)=>{f[N]=k-_}),p.forEach((k,N)=>{p[N]=k+_})}}if(Object.assign(r,{slides:u,snapGrid:f,slidesGrid:p,slidesSizesGrid:h}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){_o(n,"--swiper-centered-offset-before",`${-f[0]}px`),_o(n,"--swiper-centered-offset-after",`${r.size/2-h[h.length-1]/2}px`);const w=-r.snapGrid[0],R=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(_=>_+w),r.slidesGrid=r.slidesGrid.map(_=>_+R)}if(d!==c&&r.emit("slidesLengthChange"),f.length!==b&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),p.length!==m&&r.emit("slidesGridLengthChange"),t.watchSlidesProgress&&r.updateSlidesOffset(),r.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const w=`${t.containerModifierClass}backface-hidden`,R=r.el.classList.contains(w);d<=t.maxBackfaceHiddenSlides?R||r.el.classList.add(w):R&&r.el.classList.remove(w)}}function yL(r){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,i;typeof r=="number"?e.setTransition(r):r===!0&&e.setTransition(e.params.speed);const a=o=>n?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const o=e.activeIndex+i;if(o>e.slides.length&&!n)break;t.push(a(o))}else t.push(a(e.activeIndex));for(i=0;i<t.length;i+=1)if(typeof t[i]<"u"){const o=t[i].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function bL(){const r=this,e=r.slides,t=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(r.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-r.cssOverflowAdjustment()}const kg=(r,e,t)=>{e&&!r.classList.contains(t)?r.classList.add(t):!e&&r.classList.contains(t)&&r.classList.remove(t)};function SL(r){r===void 0&&(r=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:i}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-r;s&&(a=r),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<n.length;l+=1){const c=n[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=n[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=(a-i[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),p=-(a-u),h=p+e.slidesSizesGrid[l],g=p>=0&&p<=e.size-e.slidesSizesGrid[l],y=p>=0&&p<e.size-1||h>1&&h<=e.size||p<=0&&h>=e.size;y&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),kg(c,y,t.slideVisibleClass),kg(c,g,t.slideFullyVisibleClass),c.progress=s?-d:d,c.originalProgress=s?-f:f}}function EL(r){const e=this;if(typeof r>"u"){const u=e.rtlTranslate?-1:1;r=e&&e.translate&&e.translate*u||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:i,isEnd:a,progressLoop:o}=e;const l=i,c=a;if(n===0)s=0,i=!0,a=!0;else{s=(r-e.minTranslate())/n;const u=Math.abs(r-e.minTranslate())<1,d=Math.abs(r-e.maxTranslate())<1;i=u||s<=0,a=d||s>=1,u&&(s=0),d&&(s=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],p=e.slidesGrid[d],h=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(r);g>=f?o=(g-f)/h:o=(g+h-p)/h,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:i,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(r),i&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!i||c&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}const Mu=(r,e,t)=>{e&&!r.classList.contains(t)?r.classList.add(t):!e&&r.classList.contains(t)&&r.classList.remove(t)};function wL(){const r=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=r,i=r.virtual&&t.virtual.enabled,a=r.grid&&t.grid&&t.grid.rows>1,o=d=>Mr(n,`.${t.slideClass}${d}, swiper-slide${d}`)[0];let l,c,u;if(i)if(t.loop){let d=s-r.virtual.slidesBefore;d<0&&(d=r.virtual.slides.length+d),d>=r.virtual.slides.length&&(d-=r.virtual.slides.length),l=o(`[data-swiper-slide-index="${d}"]`)}else l=o(`[data-swiper-slide-index="${s}"]`);else a?(l=e.find(d=>d.column===s),u=e.find(d=>d.column===s+1),c=e.find(d=>d.column===s-1)):l=e[s];l&&(a||(u=uL(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=cL(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(d=>{Mu(d,d===l,t.slideActiveClass),Mu(d,d===u,t.slideNextClass),Mu(d,d===c,t.slidePrevClass)}),r.emitSlidesClasses()}const hl=(r,e)=>{if(!r||r.destroyed||!r.params)return;const t=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,n=e.closest(t());if(n){let s=n.querySelector(`.${r.params.lazyPreloaderClass}`);!s&&r.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Fu=(r,e)=>{if(!r.slides[e])return;const t=r.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Sf=r=>{if(!r||r.destroyed||!r.params)return;let e=r.params.lazyPreloadPrevNext;const t=r.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),s=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+n+c)),r.slides.forEach((l,c)=>{o.includes(l.column)&&Fu(r,c)});return}const i=s+n-1;if(r.params.rewind||r.params.loop)for(let a=s-e;a<=i+e;a+=1){const o=(a%t+t)%t;(o<s||o>i)&&Fu(r,o)}else for(let a=Math.max(s-e,0);a<=Math.min(i+e,t-1);a+=1)a!==s&&(a>i||a<s)&&Fu(r,a)};function TL(r){const{slidesGrid:e,params:t}=r,n=r.rtlTranslate?r.translate:-r.translate;let s;for(let i=0;i<e.length;i+=1)typeof e[i+1]<"u"?n>=e[i]&&n<e[i+1]-(e[i+1]-e[i])/2?s=i:n>=e[i]&&n<e[i+1]&&(s=i+1):n>=e[i]&&(s=i);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function AL(r){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:i,realIndex:a,snapIndex:o}=e;let l=r,c;const u=p=>{let h=p-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=TL(e)),n.indexOf(t)>=0)c=n.indexOf(t);else{const p=Math.min(s.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/s.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),l===i&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===i&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let f;if(e.virtual&&s.virtual.enabled&&s.loop)f=u(l);else if(d){const p=e.slides.find(g=>g.column===l);let h=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(h)&&(h=Math.max(e.slides.indexOf(p),0)),f=Math.floor(h/s.grid.rows)}else if(e.slides[l]){const p=e.slides[l].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:f,previousIndex:i,activeIndex:l}),e.initialized&&Sf(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function IL(r,e){const t=this,n=t.params;let s=r.closest(`.${n.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(r)&&[...e.slice(e.indexOf(r)+1,e.length)].forEach(o=>{!s&&o.matches&&o.matches(`.${n.slideClass}, swiper-slide`)&&(s=o)});let i=!1,a;if(s){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===s){i=!0,a=o;break}}if(s&&i)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var LL={updateSize:xL,updateSlides:vL,updateAutoHeight:yL,updateSlidesOffset:bL,updateSlidesProgress:SL,updateProgress:EL,updateSlidesClasses:wL,updateActiveIndex:AL,updateClickedSlide:IL};function CL(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:i}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let a=iL(i,r);return a+=e.cssOverflowAdjustment(),n&&(a=-a),a||0}function RL(r,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:i,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=n?-r:r:l=r,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,s.cssMode?i[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:s.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),i.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(r-t.minTranslate())/d,u!==a&&t.updateProgress(r),t.emit("setTranslate",t.translate,e)}function kL(){return-this.snapGrid[0]}function _L(){return-this.snapGrid[this.snapGrid.length-1]}function PL(r,e,t,n,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const i=this,{params:a,wrapperEl:o}=i;if(i.animating&&a.preventInteractionOnTransition)return!1;const l=i.minTranslate(),c=i.maxTranslate();let u;if(n&&r>l?u=l:n&&r<c?u=c:u=r,i.updateProgress(u),a.cssMode){const d=i.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!i.support.smoothScroll)return $1({swiper:i,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(u),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(u),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(f){!i||i.destroyed||f.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,t&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var DL={getTranslate:CL,setTranslate:RL,minTranslate:kL,maxTranslate:_L,translateTo:PL};function NL(r,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${r}ms`,t.wrapperEl.style.transitionDelay=r===0?"0ms":""),t.emit("setTransition",r,e)}function G1(r){let{swiper:e,runCallbacks:t,direction:n,step:s}=r;const{activeIndex:i,previousIndex:a}=e;let o=n;o||(i>a?o="next":i<a?o="prev":o="reset"),e.emit(`transition${s}`),t&&o==="reset"?e.emit(`slideResetTransition${s}`):t&&i!==a&&(e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`))}function OL(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),G1({swiper:t,runCallbacks:r,direction:e,step:"Start"}))}function ML(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),G1({swiper:t,runCallbacks:r,direction:e,step:"End"}))}var FL={setTransition:NL,transitionStart:OL,transitionEnd:ML};function jL(r,e,t,n,s){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const i=this;let a=r;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:f,wrapperEl:p,enabled:h}=i;if(!h&&!n&&!s||i.destroyed||i.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=i.params.speed);const g=Math.min(i.params.slidesPerGroupSkip,a);let y=g+Math.floor((a-g)/i.params.slidesPerGroup);y>=l.length&&(y=l.length-1);const b=-l[y];if(o.normalizeSlideIndex)for(let L=0;L<c.length;L+=1){const I=-Math.floor(b*100),T=Math.floor(c[L]*100),w=Math.floor(c[L+1]*100);typeof c[L+1]<"u"?I>=T&&I<w-(w-T)/2?a=L:I>=T&&I<w&&(a=L+1):I>=T&&(a=L)}if(i.initialized&&a!==d&&(!i.allowSlideNext&&(f?b>i.translate&&b>i.minTranslate():b<i.translate&&b<i.minTranslate())||!i.allowSlidePrev&&b>i.translate&&b>i.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&i.emit("beforeSlideChangeStart"),i.updateProgress(b);let m;a>d?m="next":a<d?m="prev":m="reset";const v=i.virtual&&i.params.virtual.enabled;if(!(v&&s)&&(f&&-b===i.translate||!f&&b===i.translate))return i.updateActiveIndex(a),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),o.effect!=="slide"&&i.setTranslate(b),m!=="reset"&&(i.transitionStart(t,m),i.transitionEnd(t,m)),!1;if(o.cssMode){const L=i.isHorizontal(),I=f?b:-b;if(e===0)v&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),v&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[L?"scrollLeft":"scrollTop"]=I})):p[L?"scrollLeft":"scrollTop"]=I,v&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return $1({swiper:i,targetPosition:I,side:L?"left":"top"}),!0;p.scrollTo({[L?"left":"top"]:I,behavior:"smooth"})}return!0}const C=V1().isSafari;return v&&!s&&C&&i.isElement&&i.virtual.update(!1,!1,a),i.setTransition(e),i.setTranslate(b),i.updateActiveIndex(a),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,n),i.transitionStart(t,m),e===0?i.transitionEnd(t,m):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(I){!i||i.destroyed||I.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(t,m))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function $L(r,e,t,n){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const i=s.grid&&s.params.grid&&s.params.grid.rows>1;let a=r;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)a=a+s.virtual.slidesBefore;else{let o;if(i){const f=a*s.params.grid.rows;o=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===f).column}else o=s.getSlideIndexByData(a);const l=i?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let u=s.params.slidesPerView;u==="auto"?u=s.slidesPerViewDynamic():(u=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=l-o<u;if(c&&(d=d||o<Math.ceil(u/2)),n&&c&&s.params.slidesPerView!=="auto"&&!i&&(d=!1),d){const f=c?o<s.activeIndex?"prev":"next":o-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?o+1:o-l+1,slideRealIndex:f==="next"?s.realIndex:void 0})}if(i){const f=a*s.params.grid.rows;a=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===f).column}else a=s.getSlideIndexByData(a)}return requestAnimationFrame(()=>{s.slideTo(a,e,t,n)}),s}function BL(r,e,t){e===void 0&&(e=!0);const n=this,{enabled:s,params:i,animating:a}=n;if(!s||n.destroyed)return n;typeof r>"u"&&(r=n.params.speed);let o=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<i.slidesPerGroupSkip?1:o,c=n.virtual&&i.virtual.enabled;if(i.loop){if(a&&!c&&i.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,r,e,t)}),!0}return i.rewind&&n.isEnd?n.slideTo(0,r,e,t):n.slideTo(n.activeIndex+l,r,e,t)}function UL(r,e,t){e===void 0&&(e=!0);const n=this,{params:s,snapGrid:i,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=n;if(!l||n.destroyed)return n;typeof r>"u"&&(r=n.params.speed);const u=n.virtual&&s.virtual.enabled;if(s.loop){if(c&&!u&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const d=o?n.translate:-n.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const p=f(d),h=i.map(m=>f(m)),g=s.freeMode&&s.freeMode.enabled;let y=i[h.indexOf(p)-1];if(typeof y>"u"&&(s.cssMode||g)){let m;i.forEach((v,S)=>{p>=v&&(m=S)}),typeof m<"u"&&(y=g?i[m]:i[m>0?m-1:m])}let b=0;if(typeof y<"u"&&(b=a.indexOf(y),b<0&&(b=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(b=b-n.slidesPerViewDynamic("previous",!0)+1,b=Math.max(b,0))),s.rewind&&n.isBeginning){const m=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(m,r,e,t)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(b,r,e,t)}),!0;return n.slideTo(b,r,e,t)}function zL(r,e,t){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof r>"u"&&(r=n.params.speed),n.slideTo(n.activeIndex,r,e,t)}function VL(r,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof r>"u"&&(r=s.params.speed);let i=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,i),o=a+Math.floor((i-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){const c=s.snapGrid[o],u=s.snapGrid[o+1];l-c>(u-c)*n&&(i+=s.params.slidesPerGroup)}else{const c=s.snapGrid[o-1],u=s.snapGrid[o];l-c<=(u-c)*n&&(i-=s.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,s.slidesGrid.length-1),s.slideTo(i,r,e,t)}function GL(){const r=this;if(r.destroyed)return;const{params:e,slidesEl:t}=r,n=e.slidesPerView==="auto"?r.slidesPerViewDynamic():e.slidesPerView;let s=r.getSlideIndexWhenGrid(r.clickedIndex),i;const a=r.isElement?"swiper-slide":`.${e.slideClass}`,o=r.grid&&r.params.grid&&r.params.grid.rows>1;if(e.loop){if(r.animating)return;i=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r.slideToLoop(i):s>(o?(r.slides.length-n)/2-(r.params.grid.rows-1):r.slides.length-n)?(r.loopFix(),s=r.getSlideIndex(Mr(t,`${a}[data-swiper-slide-index="${i}"]`)[0]),j1(()=>{r.slideTo(s)})):r.slideTo(s)}else r.slideTo(s)}var HL={slideTo:jL,slideToLoop:$L,slideNext:BL,slidePrev:UL,slideReset:zL,slideToClosest:VL,slideToClickedSlide:GL};function KL(r,e){const t=this,{params:n,slidesEl:s}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{Mr(s,`.${n.slideClass}, swiper-slide`).forEach((p,h)=>{p.setAttribute("data-swiper-slide-index",h)})},a=()=>{const f=Mr(s,`.${n.slideBlankClass}`);f.forEach(p=>{p.remove()}),f.length>0&&(t.recalcSlides(),t.updateSlides())},o=t.grid&&n.grid&&n.grid.rows>1;n.loopAddBlankSlides&&(n.slidesPerGroup>1||o)&&a();const l=n.slidesPerGroup*(o?n.grid.rows:1),c=t.slides.length%l!==0,u=o&&t.slides.length%n.grid.rows!==0,d=f=>{for(let p=0;p<f;p+=1){const h=t.isElement?Jl("swiper-slide",[n.slideBlankClass]):Jl("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(h)}};if(c){if(n.loopAddBlankSlides){const f=l-t.slides.length%l;d(f),t.recalcSlides(),t.updateSlides()}else Zl("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(u){if(n.loopAddBlankSlides){const f=n.grid.rows-t.slides.length%n.grid.rows;d(f),t.recalcSlides(),t.updateSlides()}else Zl("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:r,direction:n.centeredSlides?void 0:"next",initial:e})}function WL(r){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:s,activeSlideIndex:i,initial:a,byController:o,byMousewheel:l}=r===void 0?{}:r;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:f,slidesEl:p,params:h}=c,{centeredSlides:g,initialSlide:y}=h;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):h.centeredSlides&&c.snapIndex<h.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=f,c.emit("loopFix");return}let b=h.slidesPerView;b==="auto"?b=c.slidesPerViewDynamic():(b=Math.ceil(parseFloat(h.slidesPerView,10)),g&&b%2===0&&(b=b+1));const m=h.slidesPerGroupAuto?b:h.slidesPerGroup;let v=g?Math.max(m,Math.ceil(b/2)):m;v%m!==0&&(v+=m-v%m),v+=h.loopAdditionalSlides,c.loopedSlides=v;const S=c.grid&&h.grid&&h.grid.rows>1;u.length<b+v||c.params.effect==="cards"&&u.length<b+v*2?Zl("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):S&&h.grid.fill==="row"&&Zl("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],C=[],L=S?Math.ceil(u.length/h.grid.rows):u.length,I=a&&L-y<b&&!g;let T=I?y:c.activeIndex;typeof i>"u"?i=c.getSlideIndex(u.find(O=>O.classList.contains(h.slideActiveClass))):T=i;const w=n==="next"||!n,R=n==="prev"||!n;let _=0,k=0;const M=(S?u[i].column:i)+(g&&typeof s>"u"?-b/2+.5:0);if(M<v){_=Math.max(v-M,m);for(let O=0;O<v-M;O+=1){const j=O-Math.floor(O/L)*L;if(S){const P=L-j-1;for(let F=u.length-1;F>=0;F-=1)u[F].column===P&&E.push(F)}else E.push(L-j-1)}}else if(M+b>L-v){k=Math.max(M-(L-v*2),m),I&&(k=Math.max(k,b-L+y+1));for(let O=0;O<k;O+=1){const j=O-Math.floor(O/L)*L;S?u.forEach((P,F)=>{P.column===j&&C.push(F)}):C.push(j)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&u.length<b+v*2&&(C.includes(i)&&C.splice(C.indexOf(i),1),E.includes(i)&&E.splice(E.indexOf(i),1)),R&&E.forEach(O=>{u[O].swiperLoopMoveDOM=!0,p.prepend(u[O]),u[O].swiperLoopMoveDOM=!1}),w&&C.forEach(O=>{u[O].swiperLoopMoveDOM=!0,p.append(u[O]),u[O].swiperLoopMoveDOM=!1}),c.recalcSlides(),h.slidesPerView==="auto"?c.updateSlides():S&&(E.length>0&&R||C.length>0&&w)&&c.slides.forEach((O,j)=>{c.grid.updateSlide(j,O,c.slides)}),h.watchSlidesProgress&&c.updateSlidesOffset(),t){if(E.length>0&&R){if(typeof e>"u"){const O=c.slidesGrid[T],P=c.slidesGrid[T+_]-O;l?c.setTranslate(c.translate-P):(c.slideTo(T+Math.ceil(_),0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-P,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-P))}else if(s){const O=S?E.length/h.grid.rows:E.length;c.slideTo(c.activeIndex+O,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(C.length>0&&w)if(typeof e>"u"){const O=c.slidesGrid[T],P=c.slidesGrid[T-k]-O;l?c.setTranslate(c.translate-P):(c.slideTo(T-k,0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-P,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-P))}else{const O=S?C.length/h.grid.rows:C.length;c.slideTo(c.activeIndex-O,0,!1,!0)}}if(c.allowSlidePrev=d,c.allowSlideNext=f,c.controller&&c.controller.control&&!o){const O={slideRealIndex:e,direction:n,setTranslate:s,activeSlideIndex:i,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(j=>{!j.destroyed&&j.params.loop&&j.loopFix({...O,slideTo:j.params.slidesPerView===h.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...O,slideTo:c.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}c.emit("loopFix")}function qL(){const r=this,{params:e,slidesEl:t}=r;if(!e.loop||!t||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const n=[];r.slides.forEach(s=>{const i=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[i]=s}),r.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var YL={loopCreate:KL,loopFix:WL,loopDestroy:qL};function XL(r){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=r?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function QL(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var ZL={setGrabCursor:XL,unsetGrabCursor:QL};function JL(r,e){e===void 0&&(e=this);function t(n){if(!n||n===Vr()||n===Pt())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(r);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function _g(r,e,t){const n=Pt(),{params:s}=r,i=s.edgeSwipeDetection,a=s.edgeSwipeThreshold;return i&&(t<=a||t>=n.innerWidth-a)?i==="prevent"?(e.preventDefault(),!0):!1:!0}function eC(r){const e=this,t=Vr();let n=r;n.originalEvent&&(n=n.originalEvent);const s=e.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){_g(e,n,n.targetTouches[0].pageX);return}const{params:i,touches:a,enabled:o}=e;if(!o||!i.simulateTouch&&n.pointerType==="mouse"||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let l=n.target;if(i.touchEventsTarget==="wrapper"&&!lL(l,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const c=!!i.noSwipingClass&&i.noSwipingClass!=="",u=n.composedPath?n.composedPath():n.path;c&&n.target&&n.target.shadowRoot&&u&&(l=u[0]);const d=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,f=!!(n.target&&n.target.shadowRoot);if(i.noSwiping&&(f?JL(d,l):l.closest(d))){e.allowClick=!0;return}if(i.swipeHandler&&!l.closest(i.swipeHandler))return;a.currentX=n.pageX,a.currentY=n.pageY;const p=a.currentX,h=a.currentY;if(!_g(e,n,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=h,s.touchStartTime=Ql(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(s.allowThresholdMove=!1);let g=!0;l.matches(s.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&t.activeElement.blur();const y=g&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||y)&&!l.isContentEditable&&n.preventDefault(),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function tC(r){const e=Vr(),t=this,n=t.touchEventsData,{params:s,touches:i,rtlTranslate:a,enabled:o}=t;if(!o||!s.simulateTouch&&r.pointerType==="mouse")return;let l=r;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(E=>E.identifier===n.touchId),!c||c.identifier!==n.touchId)return}else c=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){i.startX=u,i.startY=d;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d}),n.touchStartTime=Ql());return}if(s.touchReleaseOnEdges&&!s.loop)if(t.isVertical()){if(d<i.startY&&t.translate<=t.maxTranslate()||d>i.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else{if(a&&(u>i.startX&&-t.translate<=t.maxTranslate()||u<i.startX&&-t.translate>=t.minTranslate()))return;if(!a&&(u<i.startX&&t.translate<=t.maxTranslate()||u>i.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",l),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=u,i.currentY=d;const f=i.currentX-i.startX,p=i.currentY-i.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let E;t.isHorizontal()&&i.currentY===i.startY||t.isVertical()&&i.currentX===i.startX?n.isScrolling=!1:f*f+p*p>=25&&(E=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,n.isScrolling=t.isHorizontal()?E>s.touchAngle:90-E>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let h=t.isHorizontal()?f:p,g=t.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;s.oneWayMovement&&(h=Math.abs(h)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),i.diff=h,h*=s.touchRatio,a&&(h=-h,g=-g);const y=t.touchesDirection;t.swipeDirection=h>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";const b=t.params.loop&&!s.cssMode,m=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(b&&m&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const E=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(E)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}if(new Date().getTime(),s._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&y!==t.touchesDirection&&b&&m&&Math.abs(h)>=1){Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=h+n.startTranslate;let v=!0,S=s.resistanceRatio;if(s.touchReleaseOnEdges&&(S=0),h>0?(b&&m&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(v=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+h)**S))):h<0&&(b&&m&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(v=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-h)**S))),v&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(h)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,n.currentTranslate=n.startTranslate,i.diff=t.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function rC(r){const e=this,t=e.touchEventsData;let n=r;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].find(E=>E.identifier===t.touchId),!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!a.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=Ql(),f=d-t.touchStartTime;if(e.allowClick){const E=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(E&&E[0]||n.target,E),e.emit("tap click",n),f<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=Ql(),j1(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||o.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(a.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const h=p>=-e.maxTranslate()&&!e.params.loop;let g=0,y=e.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<a.slidesPerGroupSkip?1:a.slidesPerGroup){const C=E<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[E+C]<"u"?(h||p>=c[E]&&p<c[E+C])&&(g=E,y=c[E+C]-c[E]):(h||p>=c[E])&&(g=E,y=c[c.length-1]-c[c.length-2])}let b=null,m=null;a.rewind&&(e.isBeginning?m=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(b=0));const v=(p-c[g])/y,S=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?b:g+S):e.slideTo(g)),e.swipeDirection==="prev"&&(v>1-a.longSwipesRatio?e.slideTo(g+S):m!==null&&v<0&&Math.abs(v)>a.longSwipesRatio?e.slideTo(m):e.slideTo(g))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(g+S):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(b!==null?b:g+S),e.swipeDirection==="prev"&&e.slideTo(m!==null?m:g))}}function Pg(){const r=this,{params:e,el:t}=r;if(t&&t.offsetWidth===0)return;e.breakpoints&&r.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:i}=r,a=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!o?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!a?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=s,r.allowSlideNext=n,r.params.watchOverflow&&i!==r.snapGrid&&r.checkOverflow()}function nC(r){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&r.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function sC(){const r=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=r;if(!n)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-e.scrollLeft:r.translate=-e.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let s;const i=r.maxTranslate()-r.minTranslate();i===0?s=0:s=(r.translate-r.minTranslate())/i,s!==r.progress&&r.updateProgress(t?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function iC(r){const e=this;hl(e,r.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function aC(){const r=this;r.documentTouchHandlerProceeded||(r.documentTouchHandlerProceeded=!0,r.params.touchReleaseOnEdges&&(r.el.style.touchAction="auto"))}const H1=(r,e)=>{const t=Vr(),{params:n,el:s,wrapperEl:i,device:a}=r,o=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!s||typeof s=="string"||(t[l]("touchstart",r.onDocumentTouchStart,{passive:!1,capture:o}),s[l]("touchstart",r.onTouchStart,{passive:!1}),s[l]("pointerdown",r.onTouchStart,{passive:!1}),t[l]("touchmove",r.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",r.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",r.onTouchEnd,{passive:!0}),t[l]("pointerup",r.onTouchEnd,{passive:!0}),t[l]("pointercancel",r.onTouchEnd,{passive:!0}),t[l]("touchcancel",r.onTouchEnd,{passive:!0}),t[l]("pointerout",r.onTouchEnd,{passive:!0}),t[l]("pointerleave",r.onTouchEnd,{passive:!0}),t[l]("contextmenu",r.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",r.onClick,!0),n.cssMode&&i[l]("scroll",r.onScroll),n.updateOnWindowResize?r[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Pg,!0):r[c]("observerUpdate",Pg,!0),s[l]("load",r.onLoad,{capture:!0}))};function oC(){const r=this,{params:e}=r;r.onTouchStart=eC.bind(r),r.onTouchMove=tC.bind(r),r.onTouchEnd=rC.bind(r),r.onDocumentTouchStart=aC.bind(r),e.cssMode&&(r.onScroll=sC.bind(r)),r.onClick=nC.bind(r),r.onLoad=iC.bind(r),H1(r,"on")}function lC(){H1(this,"off")}var cC={attachEvents:oC,detachEvents:lC};const Dg=(r,e)=>r.grid&&e.grid&&e.grid.rows>1;function uC(){const r=this,{realIndex:e,initialized:t,params:n,el:s}=r,i=n.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const a=Vr(),o=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",l=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?r.el:a.querySelector(n.breakpointsBase),c=r.getBreakpoint(i,o,l);if(!c||r.currentBreakpoint===c)return;const d=(c in i?i[c]:void 0)||r.originalParams,f=Dg(r,n),p=Dg(r,d),h=r.params.grabCursor,g=d.grabCursor,y=n.enabled;f&&!p?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),r.emitContainerClasses()):!f&&p&&(s.classList.add(`${n.containerModifierClass}grid`),(d.grid.fill&&d.grid.fill==="column"||!d.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),r.emitContainerClasses()),h&&!g?r.unsetGrabCursor():!h&&g&&r.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(C=>{if(typeof d[C]>"u")return;const L=n[C]&&n[C].enabled,I=d[C]&&d[C].enabled;L&&!I&&r[C].disable(),!L&&I&&r[C].enable()});const b=d.direction&&d.direction!==n.direction,m=n.loop&&(d.slidesPerView!==n.slidesPerView||b),v=n.loop;b&&t&&r.changeDirection(),Yt(r.params,d);const S=r.params.enabled,E=r.params.loop;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),y&&!S?r.disable():!y&&S&&r.enable(),r.currentBreakpoint=c,r.emit("_beforeBreakpoint",d),t&&(m?(r.loopDestroy(),r.loopCreate(e),r.updateSlides()):!v&&E?(r.loopCreate(e),r.updateSlides()):v&&!E&&r.loopDestroy()),r.emit("breakpoint",d)}function dC(r,e,t){if(e===void 0&&(e="window"),!r||e==="container"&&!t)return;let n=!1;const s=Pt(),i=e==="window"?s.innerHeight:t.clientHeight,a=Object.keys(r).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:i*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=t.clientWidth&&(n=l)}return n||"max"}var fC={setBreakpoint:uC,getBreakpoint:dC};function hC(r,e){const t=[];return r.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function pC(){const r=this,{classNames:e,params:t,rtl:n,el:s,device:i}=r,a=hC(["initialized",t.direction,{"free-mode":r.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),s.classList.add(...e),r.emitContainerClasses()}function mC(){const r=this,{el:e,classNames:t}=r;!e||typeof e=="string"||(e.classList.remove(...t),r.emitContainerClasses())}var gC={addClasses:pC,removeClasses:mC};function xC(){const r=this,{isLocked:e,params:t}=r,{slidesOffsetBefore:n}=t;if(n){const s=r.slides.length-1,i=r.slidesGrid[s]+r.slidesSizesGrid[s]+n*2;r.isLocked=r.size>i}else r.isLocked=r.snapGrid.length===1;t.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),t.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),e&&e!==r.isLocked&&(r.isEnd=!1),e!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var vC={checkOverflow:xC},Ef={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function yC(r,e){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],i=n[s];if(typeof i!="object"||i===null){Yt(e,n);return}if(r[s]===!0&&(r[s]={enabled:!0}),s==="navigation"&&r[s]&&r[s].enabled&&!r[s].prevEl&&!r[s].nextEl&&(r[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&r[s]&&r[s].enabled&&!r[s].el&&(r[s].auto=!0),!(s in r&&"enabled"in i)){Yt(e,n);return}typeof r[s]=="object"&&!("enabled"in r[s])&&(r[s].enabled=!0),r[s]||(r[s]={enabled:!1}),Yt(e,n)}}const ju={eventsEmitter:gL,update:LL,translate:DL,transition:FL,slide:HL,loop:YL,grabCursor:ZL,events:cC,breakpoints:fC,checkOverflow:vC,classes:gC},$u={};let up=class en{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Yt({},t),e&&!t.el&&(t.el=e);const a=Vr();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const f=Yt({},t,{el:d});u.push(new en(f))}),u}const o=this;o.__swiper__=!0,o.support=U1(),o.device=z1({userAgent:t.userAgent}),o.browser=V1(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:yC(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=Yt({},Ef,l);return o.params=Yt({},c,$u,t),o.originalParams=Yt({},o.params),o.passedParams=Yt({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=Mr(t,`.${n.slideClass}, swiper-slide`),i=ec(s[0]);return ec(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=Mr(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),a=(n.maxTranslate()-s)*e+s;n.translateTo(a,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:s,slides:i,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=n;let u=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=i[c]?Math.ceil(i[c].swiperSlideSize):0,f;for(let p=c+1;p<i.length;p+=1)i[p]&&!f&&(d+=Math.ceil(i[p].swiperSlideSize),u+=1,d>l&&(f=!0));for(let p=c-1;p>=0;p-=1)i[p]&&!f&&(d+=i[p].swiperSlideSize,u+=1,d>l&&(f=!0))}else if(e==="current")for(let d=c+1;d<i.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&hl(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const a=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(a.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(i=>{e==="vertical"?i.style.width="":i.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):Mr(n,s())[0];return!a&&t.params.createElements&&(a=Jl("div",t.params.wrapperClass),n.append(a),Mr(n,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:n,wrapperEl:a,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:a,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Mn(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Mn(n,"direction")==="rtl"),wrongRTL:Mn(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(i=>{i.complete?hl(t,i):i.addEventListener("load",a=>{hl(t,a.target)})}),Sf(t),t.initialized=!0,Sf(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:s,el:i,wrapperEl:a,slides:o}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),i&&typeof i!="string"&&i.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),nL(n)),n.destroyed=!0),null}static extendDefaults(e){Yt($u,e)}static get extendedDefaults(){return $u}static get defaults(){return Ef}static installModule(e){en.prototype.__modules__||(en.prototype.__modules__=[]);const t=en.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>en.installModule(t)),en):(en.installModule(e),en)}};Object.keys(ju).forEach(r=>{Object.keys(ju[r]).forEach(e=>{up.prototype[e]=ju[r][e]})});up.use([pL,mL]);const K1=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Rs(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"&&!r.__swiper__}function ci(r,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof r[n]>"u"?r[n]=e[n]:Rs(e[n])&&Rs(r[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?r[n]=e[n]:ci(r[n],e[n]):r[n]=e[n]})}function W1(r){return r===void 0&&(r={}),r.navigation&&typeof r.navigation.nextEl>"u"&&typeof r.navigation.prevEl>"u"}function q1(r){return r===void 0&&(r={}),r.pagination&&typeof r.pagination.el>"u"}function Y1(r){return r===void 0&&(r={}),r.scrollbar&&typeof r.scrollbar.el>"u"}function X1(r){r===void 0&&(r="");const e=r.split(" ").map(n=>n.trim()).filter(n=>!!n),t=[];return e.forEach(n=>{t.indexOf(n)<0&&t.push(n)}),t.join(" ")}function bC(r){return r===void 0&&(r=""),r?r.includes("swiper-wrapper")?r:`swiper-wrapper ${r}`:"swiper-wrapper"}function SC(r){let{swiper:e,slides:t,passedParams:n,changedParams:s,nextEl:i,prevEl:a,scrollbarEl:o,paginationEl:l}=r;const c=s.filter(T=>T!=="children"&&T!=="direction"&&T!=="wrapperClass"),{params:u,pagination:d,navigation:f,scrollbar:p,virtual:h,thumbs:g}=e;let y,b,m,v,S,E,C,L;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(y=!0),s.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(b=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(m=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&p&&!p.el&&(v=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||a)&&(n.navigation.nextEl||i)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const I=T=>{e[T]&&(e[T].destroy(),T==="navigation"?(e.isElement&&(e[T].prevEl.remove(),e[T].nextEl.remove()),u[T].prevEl=void 0,u[T].nextEl=void 0,e[T].prevEl=void 0,e[T].nextEl=void 0):(e.isElement&&e[T].el.remove(),u[T].el=void 0,e[T].el=void 0))};s.includes("loop")&&e.isElement&&(u.loop&&!n.loop?E=!0:!u.loop&&n.loop?C=!0:L=!0),c.forEach(T=>{if(Rs(u[T])&&Rs(n[T]))Object.assign(u[T],n[T]),(T==="navigation"||T==="pagination"||T==="scrollbar")&&"enabled"in n[T]&&!n[T].enabled&&I(T);else{const w=n[T];(w===!0||w===!1)&&(T==="navigation"||T==="pagination"||T==="scrollbar")?w===!1&&I(T):u[T]=n[T]}}),c.includes("controller")&&!b&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),s.includes("children")&&t&&h&&u.virtual.enabled?(h.slides=t,h.update(!0)):s.includes("virtual")&&h&&u.virtual.enabled&&(t&&(h.slides=t),h.update(!0)),s.includes("children")&&t&&u.loop&&(L=!0),y&&g.init()&&g.update(!0),b&&(e.controller.control=u.controller.control),m&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),v&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(u.scrollbar.el=o),p.init(),p.updateSize(),p.setTranslate()),S&&(e.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),tc(i,e.hostEl.constructor.nextButtonSvg),i.part.add("button-next"),e.el.appendChild(i)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),tc(a,e.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),e.el.appendChild(a))),i&&(u.navigation.nextEl=i),a&&(u.navigation.prevEl=a),f.init(),f.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&e.changeDirection(n.direction,!1),(E||L)&&e.loopDestroy(),(C||L)&&e.loopCreate(),e.update()}function EC(r,e){r===void 0&&(r={}),e===void 0&&(e=!0);const t={on:{}},n={},s={};ci(t,Ef),t._emitClasses=!0,t.init=!1;const i={},a=K1.map(l=>l.replace(/_/,"")),o=Object.assign({},r);return Object.keys(o).forEach(l=>{typeof r[l]>"u"||(a.indexOf(l)>=0?Rs(r[l])?(t[l]={},s[l]={},ci(t[l],r[l]),ci(s[l],r[l])):(t[l]=r[l],s[l]=r[l]):l.search(/on[A-Z]/)===0&&typeof r[l]=="function"?e?n[`${l[2].toLowerCase()}${l.substr(3)}`]=r[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=r[l]:i[l]=r[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:s,rest:i,events:n}}function wC(r,e){let{el:t,nextEl:n,prevEl:s,paginationEl:i,scrollbarEl:a,swiper:o}=r;W1(e)&&n&&s&&(o.params.navigation.nextEl=n,o.originalParams.navigation.nextEl=n,o.params.navigation.prevEl=s,o.originalParams.navigation.prevEl=s),q1(e)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),Y1(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function TC(r,e,t,n,s){const i=[];if(!e)return i;const a=l=>{i.indexOf(l)<0&&i.push(l)};if(t&&n){const l=n.map(s),c=t.map(s);l.join("")!==c.join("")&&a("children"),n.length!==t.length&&a("children")}return K1.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in r&&l in e)if(Rs(r[l])&&Rs(e[l])){const c=Object.keys(r[l]),u=Object.keys(e[l]);c.length!==u.length?a(l):(c.forEach(d=>{r[l][d]!==e[l][d]&&a(l)}),u.forEach(d=>{r[l][d]!==e[l][d]&&a(l)}))}else r[l]!==e[l]&&a(l)}),i}const AC=r=>{!r||r.destroyed||!r.params.virtual||r.params.virtual&&!r.params.virtual.enabled||(r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.emit("_virtualUpdated"),r.parallax&&r.params.parallax&&r.params.parallax.enabled&&r.parallax.setTranslate())};function rc(){return rc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},rc.apply(this,arguments)}function Q1(r){return r.type&&r.type.displayName&&r.type.displayName.includes("SwiperSlide")}function Z1(r){const e=[];return Le.Children.toArray(r).forEach(t=>{Q1(t)?e.push(t):t.props&&t.props.children&&Z1(t.props.children).forEach(n=>e.push(n))}),e}function IC(r){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Le.Children.toArray(r).forEach(n=>{if(Q1(n))e.push(n);else if(n.props&&n.props.slot&&t[n.props.slot])t[n.props.slot].push(n);else if(n.props&&n.props.children){const s=Z1(n.props.children);s.length>0?s.forEach(i=>e.push(i)):t["container-end"].push(n)}else t["container-end"].push(n)}),{slides:e,slots:t}}function LC(r,e,t){if(!t)return null;const n=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},s=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:i,to:a}=t,o=r.params.loop?-e.length:0,l=r.params.loop?e.length*2:e.length,c=[];for(let u=o;u<l;u+=1)u>=i&&u<=a&&c.push(e[n(u)]);return c.map((u,d)=>Le.cloneElement(u,{swiper:r,style:s,key:u.props.virtualIndex||u.key||`slide-${d}`}))}function da(r,e){return typeof window>"u"?D.useEffect(r,e):D.useLayoutEffect(r,e)}const Ng=D.createContext(null),CC=D.createContext(null),no=D.forwardRef(function(r,e){let{className:t,tag:n="div",wrapperTag:s="div",children:i,onSwiper:a,...o}=r===void 0?{}:r,l=!1;const[c,u]=D.useState("swiper"),[d,f]=D.useState(null),[p,h]=D.useState(!1),g=D.useRef(!1),y=D.useRef(null),b=D.useRef(null),m=D.useRef(null),v=D.useRef(null),S=D.useRef(null),E=D.useRef(null),C=D.useRef(null),L=D.useRef(null),{params:I,passedParams:T,rest:w,events:R}=EC(o),{slides:_,slots:k}=IC(i),N=()=>{h(!p)};Object.assign(I.on,{_containerClasses(F,B){u(B)}});const M=()=>{Object.assign(I.on,R),l=!0;const F={...I};if(delete F.wrapperClass,b.current=new up(F),b.current.virtual&&b.current.params.virtual.enabled){b.current.virtual.slides=_;const B={cache:!1,slides:_,renderExternal:f,renderExternalUpdate:!1};ci(b.current.params.virtual,B),ci(b.current.originalParams.virtual,B)}};y.current||M(),b.current&&b.current.on("_beforeBreakpoint",N);const O=()=>{l||!R||!b.current||Object.keys(R).forEach(F=>{b.current.on(F,R[F])})},j=()=>{!R||!b.current||Object.keys(R).forEach(F=>{b.current.off(F,R[F])})};D.useEffect(()=>()=>{b.current&&b.current.off("_beforeBreakpoint",N)}),D.useEffect(()=>{!g.current&&b.current&&(b.current.emitSlidesClasses(),g.current=!0)}),da(()=>{if(e&&(e.current=y.current),!!y.current)return b.current.destroyed&&M(),wC({el:y.current,nextEl:S.current,prevEl:E.current,paginationEl:C.current,scrollbarEl:L.current,swiper:b.current},I),a&&!b.current.destroyed&&a(b.current),()=>{b.current&&!b.current.destroyed&&b.current.destroy(!0,!1)}},[]),da(()=>{O();const F=TC(T,m.current,_,v.current,B=>B.key);return m.current=T,v.current=_,F.length&&b.current&&!b.current.destroyed&&SC({swiper:b.current,slides:_,passedParams:T,changedParams:F,nextEl:S.current,prevEl:E.current,scrollbarEl:L.current,paginationEl:C.current}),()=>{j()}}),da(()=>{AC(b.current)},[d]);function P(){return I.virtual?LC(b.current,_,d):_.map((F,B)=>Le.cloneElement(F,{swiper:b.current,swiperSlideIndex:B}))}return Le.createElement(n,rc({ref:y,className:X1(`${c}${t?` ${t}`:""}`)},w),Le.createElement(CC.Provider,{value:b.current},k["container-start"],Le.createElement(s,{className:bC(I.wrapperClass)},k["wrapper-start"],P(),k["wrapper-end"]),W1(I)&&Le.createElement(Le.Fragment,null,Le.createElement("div",{ref:E,className:"swiper-button-prev"}),Le.createElement("div",{ref:S,className:"swiper-button-next"})),Y1(I)&&Le.createElement("div",{ref:L,className:"swiper-scrollbar"}),q1(I)&&Le.createElement("div",{ref:C,className:"swiper-pagination"}),k["container-end"]))});no.displayName="Swiper";const so=D.forwardRef(function(r,e){let{tag:t="div",children:n,className:s="",swiper:i,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:c,...u}=r===void 0?{}:r;const d=D.useRef(null),[f,p]=D.useState("swiper-slide"),[h,g]=D.useState(!1);function y(S,E,C){E===d.current&&p(C)}da(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),e&&(e.current=d.current),!(!d.current||!i)){if(i.destroyed){f!=="swiper-slide"&&p("swiper-slide");return}return i.on("_slideClass",y),()=>{i&&i.off("_slideClass",y)}}}),da(()=>{i&&d.current&&!i.destroyed&&p(i.getSlideClasses(d.current))},[i]);const b={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},m=()=>typeof n=="function"?n(b):n,v=()=>{g(!0)};return Le.createElement(t,rc({ref:d,className:X1(`${f}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:v},u),a&&Le.createElement(Ng.Provider,{value:b},Le.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},m(),o&&!h&&Le.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&Le.createElement(Ng.Provider,{value:b},m(),o&&!h&&Le.createElement("div",{className:"swiper-lazy-preloader"})))});so.displayName="SwiperSlide";function J1(r,e,t,n){return r.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let i=Mr(r.el,`.${n[s]}`)[0];i||(i=Jl("div",n[s]),i.className=n[s],r.el.append(i)),t[s]=i,e[s]=i}}),t}function Vc(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function i(h){let g;return h&&typeof h=="string"&&e.isElement&&(g=e.el.querySelector(h)||e.hostEl.querySelector(h),g)?g:(h&&(typeof h=="string"&&(g=[...document.querySelectorAll(h)]),e.params.uniqueNavElements&&typeof h=="string"&&g&&g.length>1&&e.el.querySelectorAll(h).length===1?g=e.el.querySelector(h):g&&g.length===1&&(g=g[0])),h&&!g?h:g)}function a(h,g){const y=e.params.navigation;h=ut(h),h.forEach(b=>{b&&(b.classList[g?"add":"remove"](...y.disabledClass.split(" ")),b.tagName==="BUTTON"&&(b.disabled=g),e.params.watchOverflow&&e.enabled&&b.classList[e.isLocked?"add":"remove"](y.lockClass))})}function o(){const{nextEl:h,prevEl:g}=e.navigation;if(e.params.loop){a(g,!1),a(h,!1);return}a(g,e.isBeginning&&!e.params.rewind),a(h,e.isEnd&&!e.params.rewind)}function l(h){h.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function c(h){h.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){const h=e.params.navigation;if(e.params.navigation=J1(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(h.nextEl||h.prevEl))return;let g=i(h.nextEl),y=i(h.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:y}),g=ut(g),y=ut(y);const b=(m,v)=>{m&&m.addEventListener("click",v==="next"?c:l),!e.enabled&&m&&m.classList.add(...h.lockClass.split(" "))};g.forEach(m=>b(m,"next")),y.forEach(m=>b(m,"prev"))}function d(){let{nextEl:h,prevEl:g}=e.navigation;h=ut(h),g=ut(g);const y=(b,m)=>{b.removeEventListener("click",m==="next"?c:l),b.classList.remove(...e.params.navigation.disabledClass.split(" "))};h.forEach(b=>y(b,"next")),g.forEach(b=>y(b,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?p():(u(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{d()}),n("enable disable",()=>{let{nextEl:h,prevEl:g}=e.navigation;if(h=ut(h),g=ut(g),e.enabled){o();return}[...h,...g].filter(y=>!!y).forEach(y=>y.classList.add(e.params.navigation.lockClass))}),n("click",(h,g)=>{let{nextEl:y,prevEl:b}=e.navigation;y=ut(y),b=ut(b);const m=g.target;let v=b.includes(m)||y.includes(m);if(e.isElement&&!v){const S=g.path||g.composedPath&&g.composedPath();S&&(v=S.find(E=>y.includes(E)||b.includes(E)))}if(e.params.navigation.hideOnClick&&!v){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===m||e.pagination.el.contains(m)))return;let S;y.length?S=y[0].classList.contains(e.params.navigation.hiddenClass):b.length&&(S=b[0].classList.contains(e.params.navigation.hiddenClass)),s(S===!0?"navigationShow":"navigationHide"),[...y,...b].filter(E=>!!E).forEach(E=>E.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),o()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:f,disable:p,update:o,init:u,destroy:d})}function Ki(r){return r===void 0&&(r=""),`.${r.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function eb(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const i="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(m,v){const{bulletActiveClass:S}=e.params.pagination;m&&(m=m[`${v==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${S}-${v}`),m=m[`${v==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${S}-${v}-${v}`)))}function u(m,v,S){if(m=m%S,v=v%S,v===m+1)return"next";if(v===m-1)return"previous"}function d(m){const v=m.target.closest(Ki(e.params.pagination.bulletClass));if(!v)return;m.preventDefault();const S=ec(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===S)return;const E=u(e.realIndex,S,e.slides.length);E==="next"?e.slideNext():E==="previous"?e.slidePrev():e.slideToLoop(S)}else e.slideTo(S)}function f(){const m=e.rtl,v=e.params.pagination;if(l())return;let S=e.pagination.el;S=ut(S);let E,C;const L=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,I=e.params.loop?Math.ceil(L/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(C=e.previousRealIndex||0,E=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(E=e.snapIndex,C=e.previousSnapIndex):(C=e.previousIndex||0,E=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const T=e.pagination.bullets;let w,R,_;if(v.dynamicBullets&&(a=bf(T[0],e.isHorizontal()?"width":"height"),S.forEach(k=>{k.style[e.isHorizontal()?"width":"height"]=`${a*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&C!==void 0&&(o+=E-(C||0),o>v.dynamicMainBullets-1?o=v.dynamicMainBullets-1:o<0&&(o=0)),w=Math.max(E-o,0),R=w+(Math.min(T.length,v.dynamicMainBullets)-1),_=(R+w)/2),T.forEach(k=>{const N=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(M=>`${v.bulletActiveClass}${M}`)].map(M=>typeof M=="string"&&M.includes(" ")?M.split(" "):M).flat();k.classList.remove(...N)}),S.length>1)T.forEach(k=>{const N=ec(k);N===E?k.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&k.setAttribute("part","bullet"),v.dynamicBullets&&(N>=w&&N<=R&&k.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),N===w&&c(k,"prev"),N===R&&c(k,"next"))});else{const k=T[E];if(k&&k.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&T.forEach((N,M)=>{N.setAttribute("part",M===E?"bullet-active":"bullet")}),v.dynamicBullets){const N=T[w],M=T[R];for(let O=w;O<=R;O+=1)T[O]&&T[O].classList.add(...`${v.bulletActiveClass}-main`.split(" "));c(N,"prev"),c(M,"next")}}if(v.dynamicBullets){const k=Math.min(T.length,v.dynamicMainBullets+4),N=(a*k-a)/2-_*a,M=m?"right":"left";T.forEach(O=>{O.style[e.isHorizontal()?M:"top"]=`${N}px`})}}S.forEach((T,w)=>{if(v.type==="fraction"&&(T.querySelectorAll(Ki(v.currentClass)).forEach(R=>{R.textContent=v.formatFractionCurrent(E+1)}),T.querySelectorAll(Ki(v.totalClass)).forEach(R=>{R.textContent=v.formatFractionTotal(I)})),v.type==="progressbar"){let R;v.progressbarOpposite?R=e.isHorizontal()?"vertical":"horizontal":R=e.isHorizontal()?"horizontal":"vertical";const _=(E+1)/I;let k=1,N=1;R==="horizontal"?k=_:N=_,T.querySelectorAll(Ki(v.progressbarFillClass)).forEach(M=>{M.style.transform=`translate3d(0,0,0) scaleX(${k}) scaleY(${N})`,M.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(tc(T,v.renderCustom(e,E+1,I)),w===0&&s("paginationRender",T)):(w===0&&s("paginationRender",T),s("paginationUpdate",T)),e.params.watchOverflow&&e.enabled&&T.classList[e.isLocked?"add":"remove"](v.lockClass)})}function p(){const m=e.params.pagination;if(l())return;const v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let S=e.pagination.el;S=ut(S);let E="";if(m.type==="bullets"){let C=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&C>v&&(C=v);for(let L=0;L<C;L+=1)m.renderBullet?E+=m.renderBullet.call(e,L,m.bulletClass):E+=`<${m.bulletElement} ${e.isElement?'part="bullet"':""} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?E=m.renderFraction.call(e,m.currentClass,m.totalClass):E=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?E=m.renderProgressbar.call(e,m.progressbarFillClass):E=`<span class="${m.progressbarFillClass}"></span>`),e.pagination.bullets=[],S.forEach(C=>{m.type!=="custom"&&tc(C,E||""),m.type==="bullets"&&e.pagination.bullets.push(...C.querySelectorAll(Ki(m.bulletClass)))}),m.type!=="custom"&&s("paginationRender",S[0])}function h(){e.params.pagination=J1(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const m=e.params.pagination;if(!m.el)return;let v;typeof m.el=="string"&&e.isElement&&(v=e.el.querySelector(m.el)),!v&&typeof m.el=="string"&&(v=[...document.querySelectorAll(m.el)]),v||(v=m.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(m.el)],v.length>1&&(v=v.find(S=>B1(S,".swiper")[0]===e.el))),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=ut(v),v.forEach(S=>{m.type==="bullets"&&m.clickable&&S.classList.add(...(m.clickableClass||"").split(" ")),S.classList.add(m.modifierClass+m.type),S.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(S.classList.add(`${m.modifierClass}${m.type}-dynamic`),o=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&S.classList.add(m.progressbarOppositeClass),m.clickable&&S.addEventListener("click",d),e.enabled||S.classList.add(m.lockClass)}))}function g(){const m=e.params.pagination;if(l())return;let v=e.pagination.el;v&&(v=ut(v),v.forEach(S=>{S.classList.remove(m.hiddenClass),S.classList.remove(m.modifierClass+m.type),S.classList.remove(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&(S.classList.remove(...(m.clickableClass||"").split(" ")),S.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(S=>S.classList.remove(...m.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const m=e.params.pagination;let{el:v}=e.pagination;v=ut(v),v.forEach(S=>{S.classList.remove(m.horizontalClass,m.verticalClass),S.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?b():(h(),p(),f())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),n("snapIndexChange",()=>{f()}),n("snapGridLengthChange",()=>{p(),f()}),n("destroy",()=>{g()}),n("enable disable",()=>{let{el:m}=e.pagination;m&&(m=ut(m),m.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{f()}),n("click",(m,v)=>{const S=v.target,E=ut(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&E&&E.length>0&&!S.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&S===e.navigation.nextEl||e.navigation.prevEl&&S===e.navigation.prevEl))return;const C=E[0].classList.contains(e.params.pagination.hiddenClass);s(C===!0?"paginationShow":"paginationHide"),E.forEach(L=>L.classList.toggle(e.params.pagination.hiddenClass))}});const y=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=ut(m),m.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),h(),p(),f()},b=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=ut(m),m.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:y,disable:b,render:p,update:f,init:h,destroy:g})}function RC(r){let{swiper:e,extendParams:t,on:n,emit:s,params:i}=r;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=i&&i.autoplay?i.autoplay.delay:3e3,c=i&&i.autoplay?i.autoplay.delay:3e3,u,d=new Date().getTime(),f,p,h,g,y,b,m;function v(P){!e||e.destroyed||!e.wrapperEl||P.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",v),!(m||P.detail&&P.detail.bySwiperTouchMove)&&w())}const S=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(c=u,f=!1);const P=e.autoplay.paused?u:d+c-new Date().getTime();e.autoplay.timeLeft=P,s("autoplayTimeLeft",P,P/l),o=requestAnimationFrame(()=>{S()})},E=()=>{let P;return e.virtual&&e.params.virtual.enabled?P=e.slides.find(B=>B.classList.contains("swiper-slide-active")):P=e.slides[e.activeIndex],P?parseInt(P.getAttribute("data-swiper-autoplay"),10):void 0},C=P=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),S();let F=typeof P>"u"?e.params.autoplay.delay:P;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const B=E();!Number.isNaN(B)&&B>0&&typeof P>"u"&&(F=B,l=B,c=B),u=F;const $=e.params.speed,G=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev($,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,$,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext($,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,$,!0,!0),s("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{C()})))};return F>0?(clearTimeout(a),a=setTimeout(()=>{G()},F)):requestAnimationFrame(()=>{G()}),F},L=()=>{d=new Date().getTime(),e.autoplay.running=!0,C(),s("autoplayStart")},I=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),s("autoplayStop")},T=(P,F)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),P||(b=!0);const B=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",v):w()};if(e.autoplay.paused=!0,F){y&&(u=e.params.autoplay.delay),y=!1,B();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),B())},w=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),b?(b=!1,C(u)):C(),e.autoplay.paused=!1,s("autoplayResume"))},R=()=>{if(e.destroyed||!e.autoplay.running)return;const P=Vr();P.visibilityState==="hidden"&&(b=!0,T(!0)),P.visibilityState==="visible"&&w()},_=P=>{P.pointerType==="mouse"&&(b=!0,m=!0,!(e.animating||e.autoplay.paused)&&T(!0))},k=P=>{P.pointerType==="mouse"&&(m=!1,e.autoplay.paused&&w())},N=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",_),e.el.addEventListener("pointerleave",k))},M=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",_),e.el.removeEventListener("pointerleave",k))},O=()=>{Vr().addEventListener("visibilitychange",R)},j=()=>{Vr().removeEventListener("visibilitychange",R)};n("init",()=>{e.params.autoplay.enabled&&(N(),O(),L())}),n("destroy",()=>{M(),j(),e.autoplay.running&&I()}),n("_freeModeStaticRelease",()=>{(h||b)&&w()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?I():T(!0,!0)}),n("beforeTransitionStart",(P,F,B)=>{e.destroyed||!e.autoplay.running||(B||!e.params.autoplay.disableOnInteraction?T(!0,!0):I())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){I();return}p=!0,h=!1,b=!1,g=setTimeout(()=>{b=!0,h=!0,T(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(g),clearTimeout(a),e.params.autoplay.disableOnInteraction){h=!1,p=!1;return}h&&e.params.cssMode&&w(),h=!1,p=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(y=!0)}),Object.assign(e.autoplay,{start:L,stop:I,pause:T,resume:w})}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function kC(r,e,t){return(e=PC(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Og(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function W(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Og(Object(t),!0).forEach(function(n){kC(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Og(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _C(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function PC(r){var e=_C(r,"string");return typeof e=="symbol"?e:e+""}const Mg=()=>{};let dp={},tb={},rb=null,nb={mark:Mg,measure:Mg};try{typeof window<"u"&&(dp=window),typeof document<"u"&&(tb=document),typeof MutationObserver<"u"&&(rb=MutationObserver),typeof performance<"u"&&(nb=performance)}catch{}const{userAgent:Fg=""}=dp.navigator||{},Yn=dp,Ge=tb,jg=rb,Po=nb;Yn.document;const vn=!!Ge.documentElement&&!!Ge.head&&typeof Ge.addEventListener=="function"&&typeof Ge.createElement=="function",sb=~Fg.indexOf("MSIE")||~Fg.indexOf("Trident/");var DC=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,NC=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,ib={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},OC={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},ab=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],wt="classic",Gc="duotone",MC="sharp",FC="sharp-duotone",ob=[wt,Gc,MC,FC],jC={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},$C={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},BC=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),UC={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},zC=["fak","fa-kit","fakd","fa-kit-duotone"],$g={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},VC=["kit"],GC={kit:{"fa-kit":"fak"}},HC=["fak","fakd"],KC={kit:{fak:"fa-kit"}},Bg={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Do={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},WC=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],qC=["fak","fa-kit","fakd","fa-kit-duotone"],YC={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},XC={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},QC={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},wf={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},ZC=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Tf=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...WC,...ZC],JC=["solid","regular","light","thin","duotone","brands"],lb=[1,2,3,4,5,6,7,8,9,10],eR=lb.concat([11,12,13,14,15,16,17,18,19,20]),tR=[...Object.keys(QC),...JC,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Do.GROUP,Do.SWAP_OPACITY,Do.PRIMARY,Do.SECONDARY].concat(lb.map(r=>"".concat(r,"x"))).concat(eR.map(r=>"w-".concat(r))),rR={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const pn="___FONT_AWESOME___",Af=16,cb="fa",ub="svg-inline--fa",ks="data-fa-i2svg",If="data-fa-pseudo-element",nR="data-fa-pseudo-element-pending",fp="data-prefix",hp="data-icon",Ug="fontawesome-i2svg",sR="async",iR=["HTML","HEAD","STYLE","SCRIPT"],db=(()=>{try{return!0}catch{return!1}})();function io(r){return new Proxy(r,{get(e,t){return t in e?e[t]:e[wt]}})}const fb=W({},ib);fb[wt]=W(W(W(W({},{"fa-duotone":"duotone"}),ib[wt]),$g.kit),$g["kit-duotone"]);const aR=io(fb),Lf=W({},UC);Lf[wt]=W(W(W(W({},{duotone:"fad"}),Lf[wt]),Bg.kit),Bg["kit-duotone"]);const zg=io(Lf),Cf=W({},wf);Cf[wt]=W(W({},Cf[wt]),KC.kit);const pp=io(Cf),Rf=W({},XC);Rf[wt]=W(W({},Rf[wt]),GC.kit);io(Rf);const oR=DC,hb="fa-layers-text",lR=NC,cR=W({},jC);io(cR);const uR=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Bu=OC,dR=[...VC,...tR],fa=Yn.FontAwesomeConfig||{};function fR(r){var e=Ge.querySelector("script["+r+"]");if(e)return e.getAttribute(r)}function hR(r){return r===""?!0:r==="false"?!1:r==="true"?!0:r}Ge&&typeof Ge.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const s=hR(fR(t));s!=null&&(fa[n]=s)});const pb={styleDefault:"solid",familyDefault:wt,cssPrefix:cb,replacementClass:ub,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};fa.familyPrefix&&(fa.cssPrefix=fa.familyPrefix);const Ti=W(W({},pb),fa);Ti.autoReplaceSvg||(Ti.observeMutations=!1);const ne={};Object.keys(pb).forEach(r=>{Object.defineProperty(ne,r,{enumerable:!0,set:function(e){Ti[r]=e,ha.forEach(t=>t(ne))},get:function(){return Ti[r]}})});Object.defineProperty(ne,"familyPrefix",{enumerable:!0,set:function(r){Ti.cssPrefix=r,ha.forEach(e=>e(ne))},get:function(){return Ti.cssPrefix}});Yn.FontAwesomeConfig=ne;const ha=[];function pR(r){return ha.push(r),()=>{ha.splice(ha.indexOf(r),1)}}const bn=Af,Fr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function mR(r){if(!r||!vn)return;const e=Ge.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=r;const t=Ge.head.childNodes;let n=null;for(let s=t.length-1;s>-1;s--){const i=t[s],a=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(n=i)}return Ge.head.insertBefore(e,n),r}const gR="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ma(){let r=12,e="";for(;r-- >0;)e+=gR[Math.random()*62|0];return e}function Oi(r){const e=[];for(let t=(r||[]).length>>>0;t--;)e[t]=r[t];return e}function mp(r){return r.classList?Oi(r.classList):(r.getAttribute("class")||"").split(" ").filter(e=>e)}function mb(r){return"".concat(r).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xR(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,'="').concat(mb(r[t]),'" '),"").trim()}function Hc(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,": ").concat(r[t].trim(),";"),"")}function gp(r){return r.size!==Fr.size||r.x!==Fr.x||r.y!==Fr.y||r.rotate!==Fr.rotate||r.flipX||r.flipY}function vR(r){let{transform:e,containerWidth:t,iconWidth:n}=r;const s={transform:"translate(".concat(t/2," 256)")},i="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(i," ").concat(a," ").concat(o)},c={transform:"translate(".concat(n/2*-1," -256)")};return{outer:s,inner:l,path:c}}function yR(r){let{transform:e,width:t=Af,height:n=Af,startCentered:s=!1}=r,i="";return s&&sb?i+="translate(".concat(e.x/bn-t/2,"em, ").concat(e.y/bn-n/2,"em) "):s?i+="translate(calc(-50% + ".concat(e.x/bn,"em), calc(-50% + ").concat(e.y/bn,"em)) "):i+="translate(".concat(e.x/bn,"em, ").concat(e.y/bn,"em) "),i+="scale(".concat(e.size/bn*(e.flipX?-1:1),", ").concat(e.size/bn*(e.flipY?-1:1),") "),i+="rotate(".concat(e.rotate,"deg) "),i}var bR=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function gb(){const r=cb,e=ub,t=ne.cssPrefix,n=ne.replacementClass;let s=bR;if(t!==r||n!==e){const i=new RegExp("\\.".concat(r,"\\-"),"g"),a=new RegExp("\\--".concat(r,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");s=s.replace(i,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(o,".".concat(n))}return s}let Vg=!1;function Uu(){ne.autoAddCss&&!Vg&&(mR(gb()),Vg=!0)}var SR={mixout(){return{dom:{css:gb,insertCss:Uu}}},hooks(){return{beforeDOMElementCreation(){Uu()},beforeI2svg(){Uu()}}}};const mn=Yn||{};mn[pn]||(mn[pn]={});mn[pn].styles||(mn[pn].styles={});mn[pn].hooks||(mn[pn].hooks={});mn[pn].shims||(mn[pn].shims=[]);var jr=mn[pn];const xb=[],vb=function(){Ge.removeEventListener("DOMContentLoaded",vb),nc=1,xb.map(r=>r())};let nc=!1;vn&&(nc=(Ge.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ge.readyState),nc||Ge.addEventListener("DOMContentLoaded",vb));function ER(r){vn&&(nc?setTimeout(r,0):xb.push(r))}function ao(r){const{tag:e,attributes:t={},children:n=[]}=r;return typeof r=="string"?mb(r):"<".concat(e," ").concat(xR(t),">").concat(n.map(ao).join(""),"</").concat(e,">")}function Gg(r,e,t){if(r&&r[e]&&r[e][t])return{prefix:e,iconName:t,icon:r[e][t]}}var zu=function(e,t,n,s){var i=Object.keys(e),a=i.length,o=t,l,c,u;for(n===void 0?(l=1,u=e[i[0]]):(l=0,u=n);l<a;l++)c=i[l],u=o(u,e[c],c,e);return u};function wR(r){const e=[];let t=0;const n=r.length;for(;t<n;){const s=r.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){const i=r.charCodeAt(t++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function kf(r){const e=wR(r);return e.length===1?e[0].toString(16):null}function TR(r,e){const t=r.length;let n=r.charCodeAt(e),s;return n>=55296&&n<=56319&&t>e+1&&(s=r.charCodeAt(e+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function Hg(r){return Object.keys(r).reduce((e,t)=>{const n=r[t];return!!n.icon?e[n.iconName]=n.icon:e[t]=n,e},{})}function _f(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:n=!1}=t,s=Hg(e);typeof jr.hooks.addPack=="function"&&!n?jr.hooks.addPack(r,Hg(e)):jr.styles[r]=W(W({},jr.styles[r]||{}),s),r==="fas"&&_f("fa",e)}const{styles:Fa,shims:AR}=jr,yb=Object.keys(pp),IR=yb.reduce((r,e)=>(r[e]=Object.keys(pp[e]),r),{});let xp=null,bb={},Sb={},Eb={},wb={},Tb={};function LR(r){return~dR.indexOf(r)}function CR(r,e){const t=e.split("-"),n=t[0],s=t.slice(1).join("-");return n===r&&s!==""&&!LR(s)?s:null}const Ab=()=>{const r=n=>zu(Fa,(s,i,a)=>(s[a]=zu(i,n,{}),s),{});bb=r((n,s,i)=>(s[3]&&(n[s[3]]=i),s[2]&&s[2].filter(o=>typeof o=="number").forEach(o=>{n[o.toString(16)]=i}),n)),Sb=r((n,s,i)=>(n[i]=i,s[2]&&s[2].filter(o=>typeof o=="string").forEach(o=>{n[o]=i}),n)),Tb=r((n,s,i)=>{const a=s[2];return n[i]=i,a.forEach(o=>{n[o]=i}),n});const e="far"in Fa||ne.autoFetchSvg,t=zu(AR,(n,s)=>{const i=s[0];let a=s[1];const o=s[2];return a==="far"&&!e&&(a="fas"),typeof i=="string"&&(n.names[i]={prefix:a,iconName:o}),typeof i=="number"&&(n.unicodes[i.toString(16)]={prefix:a,iconName:o}),n},{names:{},unicodes:{}});Eb=t.names,wb=t.unicodes,xp=Kc(ne.styleDefault,{family:ne.familyDefault})};pR(r=>{xp=Kc(r.styleDefault,{family:ne.familyDefault})});Ab();function vp(r,e){return(bb[r]||{})[e]}function RR(r,e){return(Sb[r]||{})[e]}function xs(r,e){return(Tb[r]||{})[e]}function Ib(r){return Eb[r]||{prefix:null,iconName:null}}function kR(r){const e=wb[r],t=vp("fas",r);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Xn(){return xp}const Lb=()=>({prefix:null,iconName:null,rest:[]});function _R(r){let e=wt;const t=yb.reduce((n,s)=>(n[s]="".concat(ne.cssPrefix,"-").concat(s),n),{});return ob.forEach(n=>{(r.includes(t[n])||r.some(s=>IR[n].includes(s)))&&(e=n)}),e}function Kc(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=wt}=e,n=aR[t][r];if(t===Gc&&!r)return"fad";const s=zg[t][r]||zg[t][n],i=r in jr.styles?r:null;return s||i||null}function PR(r){let e=[],t=null;return r.forEach(n=>{const s=CR(ne.cssPrefix,n);s?t=s:n&&e.push(n)}),{iconName:t,rest:e}}function Kg(r){return r.sort().filter((e,t,n)=>n.indexOf(e)===t)}function Wc(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e;let n=null;const s=Tf.concat(qC),i=Kg(r.filter(d=>s.includes(d))),a=Kg(r.filter(d=>!Tf.includes(d))),o=i.filter(d=>(n=d,!ab.includes(d))),[l=null]=o,c=_R(i),u=W(W({},PR(a)),{},{prefix:Kc(l,{family:c})});return W(W(W({},u),MR({values:r,family:c,styles:Fa,config:ne,canonical:u,givenPrefix:n})),DR(t,n,u))}function DR(r,e,t){let{prefix:n,iconName:s}=t;if(r||!n||!s)return{prefix:n,iconName:s};const i=e==="fa"?Ib(s):{},a=xs(n,s);return s=i.iconName||a||s,n=i.prefix||n,n==="far"&&!Fa.far&&Fa.fas&&!ne.autoFetchSvg&&(n="fas"),{prefix:n,iconName:s}}const NR=ob.filter(r=>r!==wt||r!==Gc),OR=Object.keys(wf).filter(r=>r!==wt).map(r=>Object.keys(wf[r])).flat();function MR(r){const{values:e,family:t,canonical:n,givenPrefix:s="",styles:i={},config:a={}}=r,o=t===Gc,l=e.includes("fa-duotone")||e.includes("fad"),c=a.familyDefault==="duotone",u=n.prefix==="fad"||n.prefix==="fa-duotone";if(!o&&(l||c||u)&&(n.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(n.prefix="fab"),!n.prefix&&NR.includes(t)&&(Object.keys(i).find(f=>OR.includes(f))||a.autoFetchSvg)){const f=BC.get(t).defaultShortPrefixId;n.prefix=f,n.iconName=xs(n.prefix,n.iconName)||n.iconName}return(n.prefix==="fa"||s==="fa")&&(n.prefix=Xn()||"fas"),n}class FR{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.reduce(this._pullDefinitions,{});Object.keys(s).forEach(i=>{this.definitions[i]=W(W({},this.definitions[i]||{}),s[i]),_f(i,s[i]);const a=pp[wt][i];a&&_f(a,s[i]),Ab()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(s=>{const{prefix:i,iconName:a,icon:o}=n[s],l=o[2];e[i]||(e[i]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[i][c]=o)}),e[i][a]=o}),e}}let Wg=[],ti={};const ui={},jR=Object.keys(ui);function $R(r,e){let{mixoutsTo:t}=e;return Wg=r,ti={},Object.keys(ui).forEach(n=>{jR.indexOf(n)===-1&&delete ui[n]}),Wg.forEach(n=>{const s=n.mixout?n.mixout():{};if(Object.keys(s).forEach(i=>{typeof s[i]=="function"&&(t[i]=s[i]),typeof s[i]=="object"&&Object.keys(s[i]).forEach(a=>{t[i]||(t[i]={}),t[i][a]=s[i][a]})}),n.hooks){const i=n.hooks();Object.keys(i).forEach(a=>{ti[a]||(ti[a]=[]),ti[a].push(i[a])})}n.provides&&n.provides(ui)}),t}function Pf(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];return(ti[r]||[]).forEach(a=>{e=a.apply(null,[e,...n])}),e}function _s(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];(ti[r]||[]).forEach(i=>{i.apply(null,t)})}function Qn(){const r=arguments[0],e=Array.prototype.slice.call(arguments,1);return ui[r]?ui[r].apply(null,e):void 0}function Df(r){r.prefix==="fa"&&(r.prefix="fas");let{iconName:e}=r;const t=r.prefix||Xn();if(e)return e=xs(t,e)||e,Gg(Cb.definitions,t,e)||Gg(jr.styles,t,e)}const Cb=new FR,BR=()=>{ne.autoReplaceSvg=!1,ne.observeMutations=!1,_s("noAuto")},UR={i2svg:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vn?(_s("beforeI2svg",r),Qn("pseudoElements2svg",r),Qn("i2svg",r)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=r;ne.autoReplaceSvg===!1&&(ne.autoReplaceSvg=!0),ne.observeMutations=!0,ER(()=>{VR({autoReplaceSvgRoot:e}),_s("watch",r)})}},zR={icon:r=>{if(r===null)return null;if(typeof r=="object"&&r.prefix&&r.iconName)return{prefix:r.prefix,iconName:xs(r.prefix,r.iconName)||r.iconName};if(Array.isArray(r)&&r.length===2){const e=r[1].indexOf("fa-")===0?r[1].slice(3):r[1],t=Kc(r[0]);return{prefix:t,iconName:xs(t,e)||e}}if(typeof r=="string"&&(r.indexOf("".concat(ne.cssPrefix,"-"))>-1||r.match(oR))){const e=Wc(r.split(" "),{skipLookups:!0});return{prefix:e.prefix||Xn(),iconName:xs(e.prefix,e.iconName)||e.iconName}}if(typeof r=="string"){const e=Xn();return{prefix:e,iconName:xs(e,r)||r}}}},nr={noAuto:BR,config:ne,dom:UR,parse:zR,library:Cb,findIconDefinition:Df,toHtml:ao},VR=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ge}=r;(Object.keys(jr.styles).length>0||ne.autoFetchSvg)&&vn&&ne.autoReplaceSvg&&nr.dom.i2svg({node:e})};function qc(r,e){return Object.defineProperty(r,"abstract",{get:e}),Object.defineProperty(r,"html",{get:function(){return r.abstract.map(t=>ao(t))}}),Object.defineProperty(r,"node",{get:function(){if(!vn)return;const t=Ge.createElement("div");return t.innerHTML=r.html,t.children}}),r}function GR(r){let{children:e,main:t,mask:n,attributes:s,styles:i,transform:a}=r;if(gp(a)&&t.found&&!n.found){const{width:o,height:l}=t,c={x:o/l/2,y:.5};s.style=Hc(W(W({},i),{},{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function HR(r){let{prefix:e,iconName:t,children:n,attributes:s,symbol:i}=r;const a=i===!0?"".concat(e,"-").concat(ne.cssPrefix,"-").concat(t):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:W(W({},s),{},{id:a}),children:n}]}]}function yp(r){const{icons:{main:e,mask:t},prefix:n,iconName:s,transform:i,symbol:a,title:o,maskId:l,titleId:c,extra:u,watchable:d=!1}=r,{width:f,height:p}=t.found?t:e,h=HC.includes(n),g=[ne.replacementClass,s?"".concat(ne.cssPrefix,"-").concat(s):""].filter(E=>u.classes.indexOf(E)===-1).filter(E=>E!==""||!!E).concat(u.classes).join(" ");let y={children:[],attributes:W(W({},u.attributes),{},{"data-prefix":n,"data-icon":s,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const b=h&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(y.attributes[ks]=""),o&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(c||Ma())},children:[o]}),delete y.attributes.title);const m=W(W({},y),{},{prefix:n,iconName:s,main:e,mask:t,maskId:l,transform:i,symbol:a,styles:W(W({},b),u.styles)}),{children:v,attributes:S}=t.found&&e.found?Qn("generateAbstractMask",m)||{children:[],attributes:{}}:Qn("generateAbstractIcon",m)||{children:[],attributes:{}};return m.children=v,m.attributes=S,a?HR(m):GR(m)}function qg(r){const{content:e,width:t,height:n,transform:s,title:i,extra:a,watchable:o=!1}=r,l=W(W(W({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")});o&&(l[ks]="");const c=W({},a.styles);gp(s)&&(c.transform=yR({transform:s,startCentered:!0,width:t,height:n}),c["-webkit-transform"]=c.transform);const u=Hc(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}function KR(r){const{content:e,title:t,extra:n}=r,s=W(W(W({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),i=Hc(n.styles);i.length>0&&(s.style=i);const a=[];return a.push({tag:"span",attributes:s,children:[e]}),t&&a.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),a}const{styles:Vu}=jr;function Nf(r){const e=r[0],t=r[1],[n]=r.slice(4);let s=null;return Array.isArray(n)?s={tag:"g",attributes:{class:"".concat(ne.cssPrefix,"-").concat(Bu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ne.cssPrefix,"-").concat(Bu.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(ne.cssPrefix,"-").concat(Bu.PRIMARY),fill:"currentColor",d:n[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:e,height:t,icon:s}}const WR={found:!1,width:512,height:512};function qR(r,e){!db&&!ne.showMissingIcons&&r&&console.error('Icon with name "'.concat(r,'" and prefix "').concat(e,'" is missing.'))}function Of(r,e){let t=e;return e==="fa"&&ne.styleDefault!==null&&(e=Xn()),new Promise((n,s)=>{if(t==="fa"){const i=Ib(r)||{};r=i.iconName||r,e=i.prefix||e}if(r&&e&&Vu[e]&&Vu[e][r]){const i=Vu[e][r];return n(Nf(i))}qR(r,e),n(W(W({},WR),{},{icon:ne.showMissingIcons&&r?Qn("missingIconAbstract")||{}:{}}))})}const Yg=()=>{},Mf=ne.measurePerformance&&Po&&Po.mark&&Po.measure?Po:{mark:Yg,measure:Yg},ea='FA "6.7.2"',YR=r=>(Mf.mark("".concat(ea," ").concat(r," begins")),()=>Rb(r)),Rb=r=>{Mf.mark("".concat(ea," ").concat(r," ends")),Mf.measure("".concat(ea," ").concat(r),"".concat(ea," ").concat(r," begins"),"".concat(ea," ").concat(r," ends"))};var bp={begin:YR,end:Rb};const pl=()=>{};function Xg(r){return typeof(r.getAttribute?r.getAttribute(ks):null)=="string"}function XR(r){const e=r.getAttribute?r.getAttribute(fp):null,t=r.getAttribute?r.getAttribute(hp):null;return e&&t}function QR(r){return r&&r.classList&&r.classList.contains&&r.classList.contains(ne.replacementClass)}function ZR(){return ne.autoReplaceSvg===!0?ml.replace:ml[ne.autoReplaceSvg]||ml.replace}function JR(r){return Ge.createElementNS("http://www.w3.org/2000/svg",r)}function ek(r){return Ge.createElement(r)}function kb(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=r.tag==="svg"?JR:ek}=e;if(typeof r=="string")return Ge.createTextNode(r);const n=t(r.tag);return Object.keys(r.attributes||[]).forEach(function(i){n.setAttribute(i,r.attributes[i])}),(r.children||[]).forEach(function(i){n.appendChild(kb(i,{ceFn:t}))}),n}function tk(r){let e=" ".concat(r.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const ml={replace:function(r){const e=r[0];if(e.parentNode)if(r[1].forEach(t=>{e.parentNode.insertBefore(kb(t),e)}),e.getAttribute(ks)===null&&ne.keepOriginalSource){let t=Ge.createComment(tk(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(r){const e=r[0],t=r[1];if(~mp(e).indexOf(ne.replacementClass))return ml.replace(r);const n=new RegExp("".concat(ne.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const i=t[0].attributes.class.split(" ").reduce((a,o)=>(o===ne.replacementClass||o.match(n)?a.toSvg.push(o):a.toNode.push(o),a),{toNode:[],toSvg:[]});t[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",i.toNode.join(" "))}const s=t.map(i=>ao(i)).join(`
`);e.setAttribute(ks,""),e.innerHTML=s}};function Qg(r){r()}function _b(r,e){const t=typeof e=="function"?e:pl;if(r.length===0)t();else{let n=Qg;ne.mutateApproach===sR&&(n=Yn.requestAnimationFrame||Qg),n(()=>{const s=ZR(),i=bp.begin("mutate");r.map(s),i(),t()})}}let Sp=!1;function Pb(){Sp=!0}function Ff(){Sp=!1}let sc=null;function Zg(r){if(!jg||!ne.observeMutations)return;const{treeCallback:e=pl,nodeCallback:t=pl,pseudoElementsCallback:n=pl,observeMutationsRoot:s=Ge}=r;sc=new jg(i=>{if(Sp)return;const a=Xn();Oi(i).forEach(o=>{if(o.type==="childList"&&o.addedNodes.length>0&&!Xg(o.addedNodes[0])&&(ne.searchPseudoElements&&n(o.target),e(o.target)),o.type==="attributes"&&o.target.parentNode&&ne.searchPseudoElements&&n(o.target.parentNode),o.type==="attributes"&&Xg(o.target)&&~uR.indexOf(o.attributeName))if(o.attributeName==="class"&&XR(o.target)){const{prefix:l,iconName:c}=Wc(mp(o.target));o.target.setAttribute(fp,l||a),c&&o.target.setAttribute(hp,c)}else QR(o.target)&&t(o.target)})}),vn&&sc.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function rk(){sc&&sc.disconnect()}function nk(r){const e=r.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((n,s)=>{const i=s.split(":"),a=i[0],o=i.slice(1);return a&&o.length>0&&(n[a]=o.join(":").trim()),n},{})),t}function sk(r){const e=r.getAttribute("data-prefix"),t=r.getAttribute("data-icon"),n=r.innerText!==void 0?r.innerText.trim():"";let s=Wc(mp(r));return s.prefix||(s.prefix=Xn()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||(s.prefix&&n.length>0&&(s.iconName=RR(s.prefix,r.innerText)||vp(s.prefix,kf(r.innerText))),!s.iconName&&ne.autoFetchSvg&&r.firstChild&&r.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=r.firstChild.data)),s}function ik(r){const e=Oi(r.attributes).reduce((s,i)=>(s.name!=="class"&&s.name!=="style"&&(s[i.name]=i.value),s),{}),t=r.getAttribute("title"),n=r.getAttribute("data-fa-title-id");return ne.autoA11y&&(t?e["aria-labelledby"]="".concat(ne.replacementClass,"-title-").concat(n||Ma()):(e["aria-hidden"]="true",e.focusable="false")),e}function ak(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Fr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Jg(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:n,rest:s}=sk(r),i=ik(r),a=Pf("parseNodeAttributes",{},r);let o=e.styleParser?nk(r):[];return W({iconName:t,title:r.getAttribute("title"),titleId:r.getAttribute("data-fa-title-id"),prefix:n,transform:Fr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:o,attributes:i}},a)}const{styles:ok}=jr;function Db(r){const e=ne.autoReplaceSvg==="nest"?Jg(r,{styleParser:!1}):Jg(r);return~e.extra.classes.indexOf(hb)?Qn("generateLayersText",r,e):Qn("generateSvgReplacementMutation",r,e)}function lk(){return[...zC,...Tf]}function e0(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!vn)return Promise.resolve();const t=Ge.documentElement.classList,n=u=>t.add("".concat(Ug,"-").concat(u)),s=u=>t.remove("".concat(Ug,"-").concat(u)),i=ne.autoFetchSvg?lk():ab.concat(Object.keys(ok));i.includes("fa")||i.push("fa");const a=[".".concat(hb,":not([").concat(ks,"])")].concat(i.map(u=>".".concat(u,":not([").concat(ks,"])"))).join(", ");if(a.length===0)return Promise.resolve();let o=[];try{o=Oi(r.querySelectorAll(a))}catch{}if(o.length>0)n("pending"),s("complete");else return Promise.resolve();const l=bp.begin("onTree"),c=o.reduce((u,d)=>{try{const f=Db(d);f&&u.push(f)}catch(f){db||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{_b(f,()=>{n("active"),n("complete"),s("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function ck(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Db(r).then(t=>{t&&_b([t],e)})}function uk(r){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=(e||{}).icon?e:Df(e||{});let{mask:s}=t;return s&&(s=(s||{}).icon?s:Df(s||{})),r(n,W(W({},t),{},{mask:s}))}}const dk=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=Fr,symbol:n=!1,mask:s=null,maskId:i=null,title:a=null,titleId:o=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!r)return;const{prefix:d,iconName:f,icon:p}=r;return qc(W({type:"icon"},r),()=>(_s("beforeDOMElementCreation",{iconDefinition:r,params:e}),ne.autoA11y&&(a?c["aria-labelledby"]="".concat(ne.replacementClass,"-title-").concat(o||Ma()):(c["aria-hidden"]="true",c.focusable="false")),yp({icons:{main:Nf(p),mask:s?Nf(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:W(W({},Fr),t),symbol:n,title:a,maskId:i,titleId:o,extra:{attributes:c,styles:u,classes:l}})))};var fk={mixout(){return{icon:uk(dk)}},hooks(){return{mutationObserverCallbacks(r){return r.treeCallback=e0,r.nodeCallback=ck,r}}},provides(r){r.i2svg=function(e){const{node:t=Ge,callback:n=()=>{}}=e;return e0(t,n)},r.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:s,titleId:i,prefix:a,transform:o,symbol:l,mask:c,maskId:u,extra:d}=t;return new Promise((f,p)=>{Promise.all([Of(n,a),c.iconName?Of(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(h=>{let[g,y]=h;f([e,yp({icons:{main:g,mask:y},prefix:a,iconName:n,transform:o,symbol:l,maskId:u,title:s,titleId:i,extra:d,watchable:!0})])}).catch(p)})},r.generateAbstractIcon=function(e){let{children:t,attributes:n,main:s,transform:i,styles:a}=e;const o=Hc(a);o.length>0&&(n.style=o);let l;return gp(i)&&(l=Qn("generateAbstractTransformGrouping",{main:s,transform:i,containerWidth:s.width,iconWidth:s.width})),t.push(l||s.icon),{children:t,attributes:n}}}},hk={mixout(){return{layer(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return qc({type:"layer"},()=>{_s("beforeDOMElementCreation",{assembler:r,params:e});let n=[];return r(s=>{Array.isArray(s)?s.map(i=>{n=n.concat(i.abstract)}):n=n.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(ne.cssPrefix,"-layers"),...t].join(" ")},children:n}]})}}}},pk={mixout(){return{counter(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:n=[],attributes:s={},styles:i={}}=e;return qc({type:"counter",content:r},()=>(_s("beforeDOMElementCreation",{content:r,params:e}),KR({content:r.toString(),title:t,extra:{attributes:s,styles:i,classes:["".concat(ne.cssPrefix,"-layers-counter"),...n]}})))}}}},mk={mixout(){return{text(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=Fr,title:n=null,classes:s=[],attributes:i={},styles:a={}}=e;return qc({type:"text",content:r},()=>(_s("beforeDOMElementCreation",{content:r,params:e}),qg({content:r,transform:W(W({},Fr),t),title:n,extra:{attributes:i,styles:a,classes:["".concat(ne.cssPrefix,"-layers-text"),...s]}})))}}},provides(r){r.generateLayersText=function(e,t){const{title:n,transform:s,extra:i}=t;let a=null,o=null;if(sb){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();a=c.width/l,o=c.height/l}return ne.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,qg({content:e.innerHTML,width:a,height:o,transform:s,title:n,extra:i,watchable:!0})])}}};const gk=new RegExp('"',"ug"),t0=[1105920,1112319],r0=W(W(W(W({},{FontAwesome:{normal:"fas",400:"fas"}}),$C),rR),YC),jf=Object.keys(r0).reduce((r,e)=>(r[e.toLowerCase()]=r0[e],r),{}),xk=Object.keys(jf).reduce((r,e)=>{const t=jf[e];return r[e]=t[900]||[...Object.entries(t)][0][1],r},{});function vk(r){const e=r.replace(gk,""),t=TR(e,0),n=t>=t0[0]&&t<=t0[1],s=e.length===2?e[0]===e[1]:!1;return{value:kf(s?e[0]:e),isSecondary:n||s}}function yk(r,e){const t=r.replace(/^['"]|['"]$/g,"").toLowerCase(),n=parseInt(e),s=isNaN(n)?"normal":n;return(jf[t]||{})[s]||xk[t]}function n0(r,e){const t="".concat(nR).concat(e.replace(":","-"));return new Promise((n,s)=>{if(r.getAttribute(t)!==null)return n();const a=Oi(r.children).filter(f=>f.getAttribute(If)===e)[0],o=Yn.getComputedStyle(r,e),l=o.getPropertyValue("font-family"),c=l.match(lR),u=o.getPropertyValue("font-weight"),d=o.getPropertyValue("content");if(a&&!c)return r.removeChild(a),n();if(c&&d!=="none"&&d!==""){const f=o.getPropertyValue("content");let p=yk(l,u);const{value:h,isSecondary:g}=vk(f),y=c[0].startsWith("FontAwesome");let b=vp(p,h),m=b;if(y){const v=kR(h);v.iconName&&v.prefix&&(b=v.iconName,p=v.prefix)}if(b&&!g&&(!a||a.getAttribute(fp)!==p||a.getAttribute(hp)!==m)){r.setAttribute(t,m),a&&r.removeChild(a);const v=ak(),{extra:S}=v;S.attributes[If]=e,Of(b,p).then(E=>{const C=yp(W(W({},v),{},{icons:{main:E,mask:Lb()},prefix:p,iconName:m,extra:S,watchable:!0})),L=Ge.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?r.insertBefore(L,r.firstChild):r.appendChild(L),L.outerHTML=C.map(I=>ao(I)).join(`
`),r.removeAttribute(t),n()}).catch(s)}else n()}else n()})}function bk(r){return Promise.all([n0(r,"::before"),n0(r,"::after")])}function Sk(r){return r.parentNode!==document.head&&!~iR.indexOf(r.tagName.toUpperCase())&&!r.getAttribute(If)&&(!r.parentNode||r.parentNode.tagName!=="svg")}function s0(r){if(vn)return new Promise((e,t)=>{const n=Oi(r.querySelectorAll("*")).filter(Sk).map(bk),s=bp.begin("searchPseudoElements");Pb(),Promise.all(n).then(()=>{s(),Ff(),e()}).catch(()=>{s(),Ff(),t()})})}var Ek={hooks(){return{mutationObserverCallbacks(r){return r.pseudoElementsCallback=s0,r}}},provides(r){r.pseudoElements2svg=function(e){const{node:t=Ge}=e;ne.searchPseudoElements&&s0(t)}}};let i0=!1;var wk={mixout(){return{dom:{unwatch(){Pb(),i0=!0}}}},hooks(){return{bootstrap(){Zg(Pf("mutationObserverCallbacks",{}))},noAuto(){rk()},watch(r){const{observeMutationsRoot:e}=r;i0?Ff():Zg(Pf("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const a0=r=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return r.toLowerCase().split(" ").reduce((t,n)=>{const s=n.toLowerCase().split("-"),i=s[0];let a=s.slice(1).join("-");if(i&&a==="h")return t.flipX=!0,t;if(i&&a==="v")return t.flipY=!0,t;if(a=parseFloat(a),isNaN(a))return t;switch(i){case"grow":t.size=t.size+a;break;case"shrink":t.size=t.size-a;break;case"left":t.x=t.x-a;break;case"right":t.x=t.x+a;break;case"up":t.y=t.y-a;break;case"down":t.y=t.y+a;break;case"rotate":t.rotate=t.rotate+a;break}return t},e)};var Tk={mixout(){return{parse:{transform:r=>a0(r)}}},hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-transform");return t&&(r.transform=a0(t)),r}}},provides(r){r.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:s,iconWidth:i}=e;const a={transform:"translate(".concat(s/2," 256)")},o="translate(".concat(n.x*32,", ").concat(n.y*32,") "),l="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),u={transform:"".concat(o," ").concat(l," ").concat(c)},d={transform:"translate(".concat(i/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:W({},f.outer),children:[{tag:"g",attributes:W({},f.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:W(W({},t.icon.attributes),f.path)}]}]}}}};const Gu={x:0,y:0,width:"100%",height:"100%"};function o0(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.attributes&&(r.attributes.fill||e)&&(r.attributes.fill="black"),r}function Ak(r){return r.tag==="g"?r.children:[r]}var Ik={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-mask"),n=t?Wc(t.split(" ").map(s=>s.trim())):Lb();return n.prefix||(n.prefix=Xn()),r.mask=n,r.maskId=e.getAttribute("data-fa-mask-id"),r}}},provides(r){r.generateAbstractMask=function(e){let{children:t,attributes:n,main:s,mask:i,maskId:a,transform:o}=e;const{width:l,icon:c}=s,{width:u,icon:d}=i,f=vR({transform:o,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:W(W({},Gu),{},{fill:"white"})},h=c.children?{children:c.children.map(o0)}:{},g={tag:"g",attributes:W({},f.inner),children:[o0(W({tag:c.tag,attributes:W(W({},c.attributes),f.path)},h))]},y={tag:"g",attributes:W({},f.outer),children:[g]},b="mask-".concat(a||Ma()),m="clip-".concat(a||Ma()),v={tag:"mask",attributes:W(W({},Gu),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:m},children:Ak(d)},v]};return t.push(S,{tag:"rect",attributes:W({fill:"currentColor","clip-path":"url(#".concat(m,")"),mask:"url(#".concat(b,")")},Gu)}),{children:t,attributes:n}}}},Lk={provides(r){let e=!1;Yn.matchMedia&&(e=Yn.matchMedia("(prefers-reduced-motion: reduce)").matches),r.missingIconAbstract=function(){const t=[],n={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:W(W({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=W(W({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:W(W({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||a.children.push({tag:"animate",attributes:W(W({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:W(W({},i),{},{values:"1;0;1;1;0;1;"})}),t.push(a),t.push({tag:"path",attributes:W(W({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:W(W({},i),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:W(W({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:W(W({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},Ck={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-symbol"),n=t===null?!1:t===""?!0:t;return r.symbol=n,r}}}},Rk=[SR,fk,hk,pk,mk,Ek,wk,Tk,Ik,Lk,Ck];$R(Rk,{mixoutsTo:nr});nr.noAuto;nr.config;nr.library;nr.dom;const $f=nr.parse;nr.findIconDefinition;nr.toHtml;const kk=nr.icon;nr.layer;nr.text;nr.counter;var Nb={exports:{}},_k="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pk=_k,Dk=Pk;function Ob(){}function Mb(){}Mb.resetWarningCache=Ob;var Nk=function(){function r(n,s,i,a,o,l){if(l!==Dk){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Mb,resetWarningCache:Ob};return t.PropTypes=t,t};Nb.exports=Nk();var Ok=Nb.exports;const ve=ch(Ok);var Mk={};function Bf(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Fk(r){if(Array.isArray(r))return r}function jk(r){if(Array.isArray(r))return Bf(r)}function Cn(r,e,t){return(e=Kk(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $k(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Bk(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,s,i,a,o=[],l=!0,c=!1;try{if(i=(t=t.call(r)).next,e!==0)for(;!(l=(n=i.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function Uk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Dr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l0(Object(t),!0).forEach(function(n){Cn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):l0(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Vk(r,e){if(r==null)return{};var t,n,s=Gk(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)t=i[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(s[t]=r[t])}return s}function Gk(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function c0(r,e){return Fk(r)||Bk(r,e)||Fb(r,e)||Uk()}function Uf(r){return jk(r)||$k(r)||Fb(r)||zk()}function Hk(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Kk(r){var e=Hk(r,"string");return typeof e=="symbol"?e:e+""}function ic(r){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ic(r)}function Fb(r,e){if(r){if(typeof r=="string")return Bf(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Bf(r,e):void 0}}var Wk="7.0.0",zf;try{var qk=require("@fortawesome/fontawesome-svg-core/package.json");zf=qk.version}catch{zf=typeof process<"u"&&Mk.FA_VERSION||"7.0.0"}function Yk(r){var e=r.beat,t=r.fade,n=r.beatFade,s=r.bounce,i=r.shake,a=r.flash,o=r.spin,l=r.spinPulse,c=r.spinReverse,u=r.pulse,d=r.fixedWidth,f=r.inverse,p=r.border,h=r.listItem,g=r.flip,y=r.size,b=r.rotation,m=r.pull,v=r.swapOpacity,S=r.rotateBy,E=r.widthAuto,C=Xk(zf,Wk),L=Cn(Cn(Cn(Cn(Cn(Cn({"fa-beat":e,"fa-fade":t,"fa-beat-fade":n,"fa-bounce":s,"fa-shake":i,"fa-flash":a,"fa-spin":o,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":h,"fa-flip":g===!0,"fa-flip-horizontal":g==="horizontal"||g==="both","fa-flip-vertical":g==="vertical"||g==="both"},"fa-".concat(y),typeof y<"u"&&y!==null),"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),"fa-pull-".concat(m),typeof m<"u"&&m!==null),"fa-swap-opacity",v),"fa-rotate-by",C&&S),"fa-width-auto",C&&E);return Object.keys(L).map(function(I){return L[I]?I:null}).filter(function(I){return I})}function Xk(r,e){for(var t=r.split("-"),n=c0(t,2),s=n[0],i=n[1],a=e.split("-"),o=c0(a,2),l=o[0],c=o[1],u=s.split("."),d=l.split("."),f=0;f<Math.max(u.length,d.length);f++){var p=u[f]||"0",h=d[f]||"0",g=parseInt(p,10),y=parseInt(h,10);if(g!==y)return g>y}for(var b=0;b<Math.max(u.length,d.length);b++){var m=u[b]||"0",v=d[b]||"0";if(m!==v&&m.length!==v.length)return m.length<v.length}return!(i&&!c)}function Qk(r){return r=r-0,r===r}function jb(r){return Qk(r)?r:(r=r.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),r.substr(0,1).toLowerCase()+r.substr(1))}var Zk=["style"];function Jk(r){return r.charAt(0).toUpperCase()+r.slice(1)}function e3(r){return r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),s=jb(t.slice(0,n)),i=t.slice(n+1).trim();return s.startsWith("webkit")?e[Jk(s)]=i:e[s]=i,e},{})}function $b(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var n=(e.children||[]).map(function(l){return $b(r,l)}),s=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=e3(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[jb(c)]=u}return l},{attrs:{}}),i=t.style,a=i===void 0?{}:i,o=Vk(t,Zk);return s.attrs.style=Dr(Dr({},s.attrs.style),a),r.apply(void 0,[e.tag,Dr(Dr({},s.attrs),o)].concat(Uf(n)))}var Bb=!1;try{Bb=!0}catch{}function t3(){if(!Bb&&console&&typeof console.error=="function"){var r;(r=console).error.apply(r,arguments)}}function u0(r){if(r&&ic(r)==="object"&&r.prefix&&r.iconName&&r.icon)return r;if($f.icon)return $f.icon(r);if(r===null)return null;if(r&&ic(r)==="object"&&r.prefix&&r.iconName)return r;if(Array.isArray(r)&&r.length===2)return{prefix:r[0],iconName:r[1]};if(typeof r=="string")return{prefix:"fas",iconName:r}}function Hu(r,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Cn({},r,e):{}}var d0={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},oe=Le.forwardRef(function(r,e){var t=Dr(Dr({},d0),r),n=t.icon,s=t.mask,i=t.symbol,a=t.className,o=t.title,l=t.titleId,c=t.maskId,u=u0(n),d=Hu("classes",[].concat(Uf(Yk(t)),Uf((a||"").split(" ")))),f=Hu("transform",typeof t.transform=="string"?$f.transform(t.transform):t.transform),p=Hu("mask",u0(s)),h=kk(u,Dr(Dr(Dr(Dr({},d),f),p),{},{symbol:i,title:o,titleId:l,maskId:c}));if(!h)return t3("Could not find icon",u),null;var g=h.abstract,y={ref:e};return Object.keys(t).forEach(function(b){d0.hasOwnProperty(b)||(y[b]=t[b])}),r3(g[0],y)});oe.displayName="FontAwesomeIcon";oe.propTypes={beat:ve.bool,border:ve.bool,beatFade:ve.bool,bounce:ve.bool,className:ve.string,fade:ve.bool,flash:ve.bool,mask:ve.oneOfType([ve.object,ve.array,ve.string]),maskId:ve.string,fixedWidth:ve.bool,inverse:ve.bool,flip:ve.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ve.oneOfType([ve.object,ve.array,ve.string]),listItem:ve.bool,pull:ve.oneOf(["right","left"]),pulse:ve.bool,rotation:ve.oneOf([0,90,180,270]),rotateBy:ve.bool,shake:ve.bool,size:ve.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ve.bool,spinPulse:ve.bool,spinReverse:ve.bool,symbol:ve.oneOfType([ve.bool,ve.string]),title:ve.string,titleId:ve.string,transform:ve.oneOfType([ve.string,ve.object]),swapOpacity:ve.bool,widthAuto:ve.bool};var r3=$b.bind(null,Le.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const n3={prefix:"fas",iconName:"backward",icon:[512,512,[9194],"f04a","M459.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4L288 214.3l0 41.7 0 41.7L459.5 440.6zM256 352l0-96 0-128 0-32c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160C4.2 237.5 0 246.5 0 256s4.2 18.5 11.5 24.6l192 160c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-64z"]},s3={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},Ub={prefix:"fas",iconName:"film",icon:[512,512,[127902],"f008","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM48 368l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM48 240l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM48 112l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16L64 96c-8.8 0-16 7.2-16 16zM416 96c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM160 128l0 64c0 17.7 14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32L192 96c-17.7 0-32 14.3-32 32zm32 160c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l-128 0z"]},i3={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},zb={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},a3={prefix:"fas",iconName:"shuffle",icon:[512,512,[128256,"random"],"f074","M403.8 34.4c12-5 25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-32-32 0c-10.1 0-19.6 4.7-25.6 12.8L284 229.3 244 176l31.2-41.6C293.3 110.2 321.8 96 352 96l32 0 0-32c0-12.9 7.8-24.6 19.8-29.6zM164 282.7L204 336l-31.2 41.6C154.7 401.8 126.2 416 96 416l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c10.1 0 19.6-4.7 25.6-12.8L164 282.7zm274.6 188c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-32-32 0c-30.2 0-58.7-14.2-76.8-38.4L121.6 172.8c-6-8.1-15.5-12.8-25.6-12.8l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c30.2 0 58.7 14.2 76.8 38.4L326.4 339.2c6 8.1 15.5 12.8 25.6 12.8l32 0 0-32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64z"]},Vb=a3,Hr={prefix:"fas",iconName:"microphone",icon:[384,512,[],"f130","M192 0C139 0 96 43 96 96l0 160c0 53 43 96 96 96s96-43 96-96l0-160c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c0 89.1 66.2 162.7 152 174.4l0 33.6-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l72 0 72 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0 0-33.6c85.8-11.7 152-85.3 152-174.4l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c0 70.7-57.3 128-128 128s-128-57.3-128-128l0-40z"]},o3={prefix:"fas",iconName:"angles-right",icon:[512,512,[187,"angle-double-right"],"f101","M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},l3=o3,c3={prefix:"fas",iconName:"circle-play",icon:[512,512,[61469,"play-circle"],"f144","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9l0 176c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"]},u3={prefix:"fas",iconName:"circle-arrow-right",icon:[512,512,["arrow-circle-right"],"f0a9","M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM297 385c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l71-71L120 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l214.1 0-71-71c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L409 239c9.4 9.4 9.4 24.6 0 33.9L297 385z"]},d3={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Kr={prefix:"fas",iconName:"closed-captioning",icon:[576,512,[],"f20a","M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"]},f3={prefix:"fas",iconName:"forward",icon:[512,512,[9193],"f04e","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4L224 214.3l0 41.7 0 41.7L52.5 440.6zM256 352l0-96 0-128 0-32c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4s-18.4-16.6-18.4-29l0-64z"]},h3={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},p3={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"]},Zn={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Yc={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},m3={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},g3={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},x3={prefix:"fas",iconName:"angles-left",icon:[512,512,[171,"angle-double-left"],"f100","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"]},v3=x3,y3={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z"]},b3={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var Gb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},f0=Le.createContext&&Le.createContext(Gb),S3=["attr","size","title"];function E3(r,e){if(r==null)return{};var t=w3(r,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function w3(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function ac(){return ac=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ac.apply(this,arguments)}function h0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function oc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h0(Object(t),!0).forEach(function(n){T3(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):h0(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function T3(r,e,t){return e=A3(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function A3(r){var e=I3(r,"string");return typeof e=="symbol"?e:e+""}function I3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Hb(r){return r&&r.map((e,t)=>Le.createElement(e.tag,oc({key:t},e.attr),Hb(e.child)))}function Xc(r){return e=>Le.createElement(L3,ac({attr:oc({},r.attr)},e),Hb(r.child))}function L3(r){var e=t=>{var{attr:n,size:s,title:i}=r,a=E3(r,S3),o=s||t.size||"1em",l;return t.className&&(l=t.className),r.className&&(l=(l?l+" ":"")+r.className),Le.createElement("svg",ac({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:l,style:oc(oc({color:r.color||t.color},t.style),r.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Le.createElement("title",null,i),r.children)};return f0!==void 0?Le.createElement(f0.Consumer,null,t=>e(t)):e(Gb)}function C3(r){return Xc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(r)}function oo(r){return Xc({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(r)}function is(r){return Xc({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(r)}function R3(r){return Xc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(r)}function k3({item:r,index:e}){var n,s;const{language:t}=dr();return x.jsxs("section",{className:"spotlight w-full h-full",children:[x.jsx("img",{src:`${r.poster}`,alt:r.title,className:"absolute right-0 object-cover h-full w-[80%] bg-auto max-[1200px]:w-full max-[1200px]:bottom-0"}),x.jsx("div",{className:"spotlight-overlay"}),x.jsxs("div",{className:"absolute flex flex-col left-0 bottom-[50px] w-[55%] p-4 z-10 max-[1390px]:w-[45%] max-[1390px]:bottom-[10px] max-[1300px]:w-[600px] max-[1120px]:w-[60%] max-md:w-[90%] max-[300px]:w-full",children:[x.jsxs("p",{className:"text-[#ffbade] font-semibold text-[20px] w-fit max-[1300px]:text-[15px]",children:["#",e+1," Spotlight"]}),x.jsx("h3",{className:"text-white line-clamp-2 text-5xl font-bold mt-6 text-left max-[1390px]:text-[45px] max-[1300px]:text-3xl max-[1300px]:mt-4 max-md:text-2xl max-md:mt-1 max-[575px]:text-[22px] max-sm:leading-6 max-sm:w-[80%] max-[320px]:w-full ",children:t==="EN"?r.title:r.japanese_title}),x.jsx("div",{className:"flex h-fit justify-center items-center w-fit space-x-5 mt-8 max-[1300px]:mt-6 max-md:hidden",children:r.tvInfo&&x.jsxs(x.Fragment,{children:[r.tvInfo.showType&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center",children:[x.jsx(oe,{icon:Zn,className:"text-[8px] bg-white px-[4px] py-[3px] rounded-full"}),x.jsx("p",{className:"text-white text-[16px]",children:r.tvInfo.showType})]}),r.tvInfo.duration&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center",children:[x.jsx(oe,{icon:d3,className:"text-white text-[14px]"}),x.jsx("p",{className:"text-white text-[17px]",children:r.tvInfo.duration})]}),r.tvInfo.releaseDate&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center",children:[x.jsx(oe,{icon:y3,className:"text-white text-[14px]"}),x.jsx("p",{className:"text-white text-[16px]",children:r.tvInfo.releaseDate})]}),x.jsxs("div",{className:"flex space-x-3 w-fit",children:[r.tvInfo.quality&&x.jsx("div",{className:"bg-[#ffbade] py-[1px] px-[6px] rounded-md w-fit text-[11px] font-bold h-fit",children:r.tvInfo.quality}),x.jsxs("div",{className:"flex space-x-[1px] rounded-r-[5px] rounded-l-[5px] w-fit py-[1px] overflow-hidden",children:[((n=r.tvInfo.episodeInfo)==null?void 0:n.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] px-[4px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:r.tvInfo.episodeInfo.sub})]}),((s=r.tvInfo.episodeInfo)==null?void 0:s.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] px-[4px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-semibold",children:r.tvInfo.episodeInfo.dub})]})]})]})]})}),x.jsx("p",{className:"text-white text-[17px] font-sm mt-6 text-left line-clamp-3 max-[1200px]:line-clamp-2 max-[1300px]:w-[500px] max-[1120px]:w-[90%] max-md:hidden",children:r.description}),x.jsxs("div",{className:"flex gap-x-5 mt-10 max-md:mt-6 max-sm:w-full max-[320px]:flex-col max-[320px]:space-y-3",children:[x.jsxs("button",{className:"flex justify-center items-center bg-[#ffbade] px-4 py-2 rounded-3xl gap-x-2 max-[320px]:w-fit ",children:[x.jsx(oe,{icon:Zn,className:"text-[8px] bg-[#000000] px-[6px] py-[6px] rounded-full text-[#ffbade] max-[320px]:text-[6px]"}),x.jsx(ge,{to:`/watch/${r.id}`,className:"max-[1000px]:text-[15px] font-semibold max-[320px]:text-[12px]",children:"Watch Now"})]}),x.jsxs(ge,{to:`/${r.id}`,className:"flex bg-[#3B3A52] justify-center items-center px-4 py-2 rounded-3xl gap-x-2 max-[320px]:w-fit max-[320px]:px-3",children:[x.jsx("p",{className:"text-white max-[1000px]:text-[15px] font-semibold max-[320px]:text-[12px]",children:"Detail"}),x.jsx(is,{className:"text-white max-[320px]:text-[10px]"})]})]})]})]})}const _3=({spotlights:r})=>x.jsx(x.Fragment,{children:x.jsxs("div",{className:"relative h-[600px] max-[1390px]:h-[530px] max-[1300px]:h-[500px] max-md:h-[420px]",children:[x.jsxs("div",{className:"absolute right-[10px] bottom-0 flex flex-col space-y-2 z-10 max-[575px]:hidden",children:[x.jsx("div",{className:"button-next"}),x.jsx("div",{className:"button-prev"})]}),r&&r.length>0?x.jsx(x.Fragment,{children:x.jsx(no,{spaceBetween:0,slidesPerView:1,loop:!0,allowTouchMove:!1,navigation:{nextEl:".button-next",prevEl:".button-prev"},autoplay:{delay:3e3,disableOnInteraction:!1},modules:[Vc,RC],className:"h-[600px] max-[1390px]:h-full",style:{"--swiper-pagination-bullet-inactive-color":"#ffffff","--swiper-pagination-bullet-inactive-opacity":"1"},children:r.map((e,t)=>x.jsx(so,{className:"text-black relative",children:x.jsx(k3,{item:e,index:t})},t))})}):x.jsx("p",{children:"No spotlights to show."})]})}),P3=({trending:r})=>{const{language:e}=dr();return Tt(),x.jsxs("div",{className:"mt-6 max-[1200px]:px-4 max-md:px-0",children:[x.jsx("h1",{className:"text-[#ffbade] text-2xl font-bold max-md:pl-4",children:"Trending"}),x.jsxs("div",{className:"pr-[60px] relative mx-auto overflow-hidden z-[1] mt-6 max-[759px]:pr-0",children:[x.jsx(no,{className:"w-full h-full",slidesPerView:3,spaceBetween:2,breakpoints:{479:{spaceBetween:15},575:{spaceBetween:15},640:{slidesPerView:3,spaceBetween:15},900:{slidesPerView:4,spaceBetween:15},1300:{slidesPerView:6,spaceBetween:15}},modules:[eb,Vc],navigation:{nextEl:".btn-next",prevEl:".btn-prev"},children:r&&r.map((t,n)=>x.jsx(so,{className:"text-center flex text-[18px] justify-center items-center",children:x.jsxs("div",{className:"w-full h-auto pb-[115%] relative inline-block overflow-hidden max-[575px]:pb-[150%]",children:[x.jsxs("div",{className:"absolute left-0 top-0 bottom-0 overflow-hidden w-[40px] text-center font-semibold bg-[#201F31] max-[575px]:top-0 max-[575px]:h-[30px] max-[575px]:z-[9] max-[575px]:bg-white",children:[x.jsx("span",{className:"absolute left-0 right-0 bottom-0 text-[24px] leading-[1.1em] text-center z-[9] transform -rotate-90 max-[575px]:transform max-[575px]:rotate-0 max-[575px]:text-[#111] max-[575px]:text-[18px] max-[575px]:leading-[30px]",children:t.number}),x.jsx("div",{className:"w-[150px] h-fit text-left transform -rotate-90 absolute bottom-[100px] left-[-55px] leading-[40px] text-ellipsis whitespace-nowrap overflow-hidden text-white text-[16px] font-medium",children:e==="EN"?t.title:t.japanese_title})]}),x.jsx(ge,{to:`/${t.id}`,className:"inline-block bg-[#2a2c31] absolute w-auto left-[40px] right-0 top-0 bottom-0 max-[575px]:left-0 max-[575px]:top-0 max-[575px]:bottom-0",children:x.jsx("img",{src:`${t.poster}`,alt:t.title,className:"block w-full h-full object-cover hover:cursor-pointer",title:t.title})})]})},n))}),x.jsxs("div",{className:"absolute top-0 right-0 bottom-0 w-[45px] flex flex-col space-y-2 max-[759px]:hidden",children:[x.jsx("div",{className:"btn-next bg-[#383747] h-[50%] flex justify-center items-center rounded-[8px] cursor-pointer transition-all duration-300 ease-out hover:bg-[#ffbade] hover:text-[#383747]",children:x.jsx(is,{})}),x.jsx("div",{className:"btn-prev bg-[#383747] h-[50%] flex justify-center items-center rounded-[8px] cursor-pointer transition-all duration-300 ease-out hover:bg-[#ffbade] hover:text-[#383747]",children:x.jsx(oo,{})})]})]})]})},Qc=(r,e)=>{const t=D.useRef([]),[n,s]=D.useState("top-1/2"),[i,a]=D.useState("left-1/2"),o=()=>{if(r!==null){const l=e.findIndex((u,d)=>u.id+d===r),c=t.current[l];if(c){const{top:u,height:d,left:f,width:p}=c.getBoundingClientRect(),h=u+d/2-64,g=window.innerHeight-h;h<g?s("top-1/2"):s("bottom-1/2");const y=f+p/2;window.innerWidth-y>320?a("left-1/2"):a("right-1/2")}}};return D.useEffect(()=>{o();const l=()=>{o()};return window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[r,e]),{tooltipPosition:n,tooltipHorizontalPosition:i,cardRefs:t}},Ai=()=>x.jsxs("div",{className:"bouncing-loading flex gap-x-[5px]",children:[x.jsx("div",{className:"span1"}),x.jsx("div",{className:"span2"}),x.jsx("div",{className:"span3"})]}),D3=async r=>{try{let e="https://api-orcin-seven-62.vercel.app/api".split(","),t=e!=null&&e.length?e[Math.floor(Math.random()*e.length)]:"https://api-orcin-seven-62.vercel.app/api";if(!t)throw new Error("No API endpoint defined.");return(await Te.get(`${t}/qtip/${r.split("-").pop()}`)).data.results}catch(e){return console.error("Error fetching genre info:",e),null}};function ja({id:r}){const[e,t]=D.useState(null),[n,s]=D.useState(!0),[i,a]=D.useState(null);return D.useEffect(()=>{(async()=>{s(!0);try{const l=await D3(r);t(l)}catch(l){console.error("Error fetching anime info:",l),a(l)}finally{s(!1)}})()},[r]),x.jsx("div",{className:"w-[320px] h-fit rounded-xl p-4 flex justify-center items-center bg-[#3e3c50] bg-opacity-70 backdrop-blur-[10px] z-50",children:n||i||!e?x.jsx(Ai,{}):x.jsxs("div",{className:"w-full flex flex-col justify-start gap-y-2",children:[x.jsx("h1",{className:"text-xl font-semibold text-white text-[13px] leading-6",children:e.title}),x.jsxs("div",{className:"w-full flex items-center relative mt-2",children:[(e==null?void 0:e.rating)&&x.jsxs("div",{className:"flex gap-x-2 items-center",children:[x.jsx(oe,{icon:zb,className:"text-[#ffc107]"}),x.jsx("p",{className:"text-[#b7b7b8]",children:e.rating})]}),x.jsxs("div",{className:"flex ml-4 gap-x-[1px] overflow-hidden rounded-md items-center h-fit",children:[(e==null?void 0:e.quality)&&x.jsx("div",{className:"bg-[#ffbade] px-[7px] w-fit flex justify-center items-center py-[1px] text-black",children:x.jsx("p",{className:"text-[12px] font-semibold",children:e.quality})}),x.jsxs("div",{className:"flex gap-x-[1px] w-fit items-center py-[1px]",children:[(e==null?void 0:e.subCount)&&x.jsxs("div",{className:"flex gap-x-1 justify-center items-center bg-[#B0E3AF] px-[7px] text-black",children:[x.jsx(oe,{icon:Kr,className:"text-[13px]"}),x.jsx("p",{className:"text-[13px] font-semibold",children:e.subCount})]}),(e==null?void 0:e.dubCount)&&x.jsxs("div",{className:"flex gap-x-1 justify-center items-center bg-[#B9E7FF] px-[7px] text-black",children:[x.jsx(oe,{icon:Hr,className:"text-[13px]"}),x.jsx("p",{className:"text-[13px] font-semibold",children:e.dubCount})]}),(e==null?void 0:e.episodeCount)&&x.jsx("div",{className:"flex gap-x-1 justify-center items-center bg-[#a199a3] px-[7px] text-black",children:x.jsx("p",{className:"text-[13px] font-semibold",children:e.episodeCount})})]}),(e==null?void 0:e.type)&&x.jsx("div",{className:"absolute right-0 top-0 justify-center items-center rounded-sm bg-[#ffbade] px-[6px] text-black",children:x.jsx("p",{className:"font-semibold text-[13px]",children:e.type})})]})]}),(e==null?void 0:e.description)&&x.jsx("p",{className:"text-[#d7d7d8] text-[13px] leading-4 font-light line-clamp-3 mt-1",children:e.description}),x.jsxs("div",{className:"flex flex-col mt-1",children:[(e==null?void 0:e.japaneseTitle)&&x.jsxs("div",{className:"leading-4",children:[x.jsx("span",{className:"text-[#b7b7b8] text-[13px]",children:"Japanese:"}),x.jsx("span",{className:"text-[13px]",children:e.japaneseTitle})]}),(e==null?void 0:e.Synonyms)&&x.jsxs("div",{className:"leading-4",children:[x.jsx("span",{className:"text-[#b7b7b8] text-[13px]",children:"Synonyms:"}),x.jsx("span",{className:"text-[13px]",children:e.Synonyms})]}),(e==null?void 0:e.airedDate)&&x.jsxs("div",{className:"leading-4",children:[x.jsx("span",{className:"text-[#b7b7b8] text-[13px]",children:"Aired:"}),x.jsx("span",{className:"text-[13px]",children:e.airedDate})]}),(e==null?void 0:e.status)&&x.jsxs("div",{className:"leading-4",children:[x.jsx("span",{className:"text-[#b7b7b8] text-[13px]",children:"Status:"}),x.jsx("span",{className:"text-[13px]",children:e.status})]}),(e==null?void 0:e.genres)&&x.jsxs("div",{className:"leading-4 flex flex-wrap text-wrap",children:[x.jsx("span",{className:"text-[#b7b7b8] text-[13px]",children:"Genres:"}),e.genres.map((o,l)=>x.jsx(ge,{to:`/genre/${o}`,className:"text-[13px] hover:text-[#ffbade]",children:x.jsxs("span",{children:[o,l===e.genres.length-1?"":",",""]})},l))]})]}),x.jsxs(ge,{to:e.watchLink,className:"w-[80%] flex mt-4 justify-center items-center gap-x-2 bg-[#ffbade] py-[9px] rounded-3xl",children:[x.jsx(oe,{icon:Zn,className:"text-[14px] text-black"}),x.jsx("p",{className:"text-[14px] font-semibold text-black",children:"Watch Now"})]})]})})}function No({label:r,data:e,path:t}){const{language:n}=dr(),s=Tt(),[i,a]=D.useState(null),[o,l]=D.useState(null),{tooltipPosition:c,tooltipHorizontalPosition:u,cardRefs:d}=Qc(i,e),f=(h,g)=>{o&&clearTimeout(o),a(h.id+g)},p=()=>{l(setTimeout(()=>{a(null)},300))};return x.jsxs("div",{className:"flex flex-col w-1/4 space-y-7 max-[1200px]:w-full",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade] max-md:text-xl",children:r}),x.jsxs("div",{className:"w-full space-y-4 flex flex-col",children:[e&&e.slice(0,5).map((h,g)=>{var y,b;return x.jsxs("div",{style:{borderBottom:"1px solid rgba(255, 255, 255, .075)"},className:"flex pb-4 items-center relative",ref:m=>d.current[g]=m,children:[x.jsx("img",{src:`${h.poster}`,alt:h.title,className:"flex-shrink-0 w-[60px] h-[75px] rounded-md object-cover cursor-pointer",onClick:()=>s(`/watch/${h.id}`),onMouseEnter:()=>f(h,g),onMouseLeave:p}),i===h.id+g&&window.innerWidth>1024&&x.jsx("div",{className:`absolute ${c} ${u} 
                    ${u==="left-1/2"?"translate-x-[-100px]":"translate-x-[-200px]"} 
                    z-[100000] transform transition-all duration-300 ease-in-out 
                    ${i===h.id+g?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,onMouseEnter:()=>{o&&clearTimeout(o)},onMouseLeave:p,children:x.jsx(ja,{id:h.id})}),x.jsxs("div",{className:"flex flex-col ml-4 space-y-2 w-full",children:[x.jsx(ge,{to:`/${h.id}`,className:"w-full line-clamp-2 text-[1em] font-[500] hover:cursor-pointer hover:text-[#ffbade] transform transition-all ease-out max-[1200px]:text-[14px]",children:n==="EN"?h.title:h.japanese_title}),x.jsxs("div",{className:"flex items-center flex-wrap w-fit space-x-1",children:[((y=h.tvInfo)==null?void 0:y.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] rounded-[4px] px-[4px] text-black py-[2px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:h.tvInfo.sub})]}),((b=h.tvInfo)==null?void 0:b.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] rounded-[4px] px-[8px] text-black py-[2px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:h.tvInfo.dub})]}),x.jsxs("div",{className:"flex items-center w-fit pl-1 gap-x-1",children:[x.jsx("div",{className:"dot"}),x.jsx("p",{className:"text-[14px] text-[#D2D2D3]",children:h.tvInfo.showType})]})]})]})]},g)}),x.jsxs(ge,{to:`/${t}`,className:"flex w-fit items-baseline rounded-3xl gap-x-2 group",children:[x.jsx("p",{className:"text-white text-[17px] h-fit leading-4 group-hover:text-[#ffbade] transform transition-all ease-out",children:"View more"}),x.jsx(is,{className:"text-white text-[10px] group-hover:text-[#ffbade] transform transition-all ease-out"})]})]})]})}const Gr=Le.memo(({label:r,data:e,showViewMore:t=!0,className:n,categoryPage:s=!1,cardStyle:i,path:a,limit:o})=>{const{language:l}=dr(),c=Tt(),[u,d]=D.useState(!1);o&&(e=e.slice(0,o));const[f,p]=D.useState({firstRow:[],remainingItems:[]}),h=D.useCallback(()=>{if(s){const I=window.innerWidth>758&&e.length>4?e.slice(0,4):[],T=window.innerWidth>758&&e.length>4?e.slice(4):e.slice(0);return{firstRow:I,remainingItems:T}}return{firstRow:[],remainingItems:e.slice(0)}},[s,e]);D.useEffect(()=>{const I=()=>{p(h())},T=h();return p(w=>JSON.stringify(w.firstRow)!==JSON.stringify(T.firstRow)||JSON.stringify(w.remainingItems)!==JSON.stringify(T.remainingItems)?T:w),window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}},[h]);const[g,y]=D.useState(null),[b,m]=D.useState(null),{tooltipPosition:v,tooltipHorizontalPosition:S,cardRefs:E}=Qc(g,e),C=(I,T)=>{const w=setTimeout(()=>{y(I.id+T),d(!0)},400);m(w)},L=()=>{clearTimeout(b),y(null),d(!1)};return x.jsxs("div",{className:`w-full ${n}`,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px] capitalize",children:r}),t&&x.jsxs(ge,{to:`/${a}`,className:"flex w-fit items-baseline h-fit rounded-3xl gap-x-1 group",children:[x.jsx("p",{className:"text-white text-[12px] font-semibold h-fit leading-0 group-hover:text-[#ffbade] transition-all ease-out",children:"View more"}),x.jsx(is,{className:"text-white text-[10px] group-hover:text-[#ffbade] transition-all ease-out"})]})]}),x.jsxs(x.Fragment,{children:[s&&x.jsx("div",{className:`grid grid-cols-4 gap-x-3 gap-y-8 transition-all duration-300 ease-in-out ${s&&f.firstRow.length>0?"mt-8 max-[758px]:hidden":""}`,children:f.firstRow.map((I,T)=>{var w,R,_,k,N,M,O;return x.jsxs("div",{className:"flex flex-col transition-transform duration-300 ease-in-out",style:{height:"fit-content"},ref:j=>E.current[T]=j,children:[x.jsxs("div",{className:"w-full relative group hover:cursor-pointer",onClick:()=>c(`${a==="top-upcoming"?`/${I.id}`:`/watch/${I.id}`}`),onMouseEnter:()=>C(I,T),onMouseLeave:L,children:[g===I.id+T&&u&&x.jsx(oe,{icon:Zn,className:"text-[40px] text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[10000]"}),x.jsx("div",{className:"overlay"}),x.jsx("div",{className:"overflow-hidden",children:x.jsx("img",{src:`${I.poster}`,alt:I.title,className:`w-full h-[320px] object-cover max-[1200px]:h-[35vw] max-[758px]:h-[45vw] max-[478px]:h-[60vw] group-hover:blur-[7px] transform transition-all duration-300 ease-in-out ultra-wide:h-[400px] ${i}`})}),(((w=I.tvInfo)==null?void 0:w.rating)==="18+"||(I==null?void 0:I.adultContent)===!0)&&x.jsx("div",{className:"text-white px-2 rounded-md bg-[#FF5700] absolute top-2 left-2 flex items-center justify-center text-[14px] font-bold",children:"18+"}),x.jsxs("div",{className:"absolute left-2 bottom-3 flex items-center justify-center w-fit space-x-1 z-[100] max-[270px]:flex-col max-[270px]:gap-y-[3px]",children:[((R=I.tvInfo)==null?void 0:R.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] rounded-[2px] px-[4px] text-black py-[2px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:I.tvInfo.sub})]}),((_=I.tvInfo)==null?void 0:_.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] rounded-[2px] px-[8px] text-black py-[2px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:I.tvInfo.dub})]}),((k=I.tvInfo)==null?void 0:k.eps)&&x.jsx("div",{className:"flex space-x-1 justify-center items-center bg-[#a9a6b16f] rounded-[2px] px-[8px] text-white py-[2px]",children:x.jsx("p",{className:"text-[12px] font-extrabold",children:I.tvInfo.eps})})]}),g===I.id+T&&window.innerWidth>1024&&x.jsx("div",{className:`absolute ${v} ${S} z-[100000] transform transition-all duration-300 ease-in-out ${g===I.id+T?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:x.jsx(ja,{id:I.id})})]}),x.jsx(ge,{to:`/${I.id}`,className:"text-white font-semibold mt-1 item-title hover:text-[#FFBADE] hover:cursor-pointer line-clamp-1",children:l==="EN"?I.title:I.japanese_title}),I.description&&x.jsx("div",{className:"line-clamp-3 text-[13px] font-extralight text-[#b1b0b0] max-[1200px]:hidden",children:I.description}),x.jsxs("div",{className:"flex items-center gap-x-2 w-full mt-2 overflow-hidden",children:[x.jsx("div",{className:"text-gray-400 text-[14px] text-nowrap overflow-hidden text-ellipsis",children:I.tvInfo.showType.split(" ").shift()}),x.jsx("div",{className:"dot"}),x.jsx("div",{className:"text-gray-400 text-[14px] text-nowrap overflow-hidden text-ellipsis",children:((N=I.tvInfo)==null?void 0:N.duration)==="m"||((M=I.tvInfo)==null?void 0:M.duration)==="?"||I.duration==="m"||I.duration==="?"?"N/A":((O=I.tvInfo)==null?void 0:O.duration)||I.duration||"N/A"})]})]},T)})}),x.jsx("div",{className:"grid grid-cols-6 gap-x-3 gap-y-8 mt-6 transition-all duration-300 ease-in-out max-[1400px]:grid-cols-4 max-[758px]:grid-cols-3 max-[478px]:grid-cols-2",children:f.remainingItems.map((I,T)=>{var w,R,_,k,N,M;return x.jsxs("div",{className:"flex flex-col transition-transform duration-300 ease-in-out",style:{height:"fit-content"},ref:O=>E.current[T]=O,children:[x.jsxs("div",{className:"w-full relative group hover:cursor-pointer",onClick:()=>c(`${a==="top-upcoming"?`/${I.id}`:`/watch/${I.id}`}`),onMouseEnter:()=>C(I,T),onMouseLeave:L,children:[g===I.id+T&&u&&x.jsx(oe,{icon:Zn,className:"text-[40px] text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[10000]"}),x.jsx("div",{className:"overlay"}),x.jsx("div",{className:"overflow-hidden",children:x.jsx("img",{src:`${I.poster}`,alt:I.title,className:`w-full h-[250px] object-cover max-[1200px]:h-[35vw] max-[758px]:h-[45vw] max-[478px]:h-[60vw] ${i} group-hover:blur-[7px] transform transition-all duration-300 ease-in-out `})}),(((w=I.tvInfo)==null?void 0:w.rating)==="18+"||(I==null?void 0:I.adultContent)===!0)&&x.jsx("div",{className:"text-white px-2 rounded-md bg-[#FF5700] absolute top-2 left-2 flex items-center justify-center text-[14px] font-bold",children:"18+"}),x.jsxs("div",{className:"absolute left-2 bottom-4 flex items-center justify-center w-fit space-x-1 z-[100] max-[270px]:flex-col max-[270px]:gap-y-[3px]",children:[((R=I.tvInfo)==null?void 0:R.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] rounded-[2px] px-[4px] text-black py-[2px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:I.tvInfo.sub})]}),((_=I.tvInfo)==null?void 0:_.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] rounded-[2px] px-[8px] text-black py-[2px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:I.tvInfo.dub})]})]}),g===I.id+T&&window.innerWidth>1024&&x.jsx("div",{className:`absolute ${v} ${S} z-[100000] transform transition-all duration-300 ease-in-out ${g===I.id+T?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:x.jsx(ja,{id:I.id})})]}),x.jsx(ge,{to:`/${I.id}`,className:"text-white font-semibold mt-1 item-title hover:text-[#FFBADE] hover:cursor-pointer line-clamp-1",children:l==="EN"?I.title:I.japanese_title}),x.jsxs("div",{className:"flex items-center gap-x-2 w-full mt-2 overflow-hidden",children:[x.jsx("div",{className:"text-gray-400 text-[14px] text-nowrap overflow-hidden text-ellipsis",children:I.tvInfo.showType.split(" ").shift()}),x.jsx("div",{className:"dot"}),x.jsx("div",{className:"text-gray-400 text-[14px] text-nowrap overflow-hidden text-ellipsis",children:((k=I.tvInfo)==null?void 0:k.duration)==="m"||((N=I.tvInfo)==null?void 0:N.duration)==="?"||I.duration==="m"||I.duration==="?"?"N/A":((M=I.tvInfo)==null?void 0:M.duration)||I.duration||"N/A"})]})]},T)})})]})]})});Gr.displayName="CategoryCard";function N3({data:r}){const e=["#A4B389","#FFBADE","#935C5F","#AD92BC","#ABCCD8","#D8B2AB","#85E1CD","#B7C996"],[t,n]=D.useState(!1),s=()=>{n(i=>!i)};return x.jsxs("div",{className:"flex flex-col w-full",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade]",children:"Genres"}),x.jsxs("div",{className:"bg-[#373646] py-6 px-4 mt-6 max-[478px]:bg-transparent max-[478px]:px-0",children:[x.jsx("div",{className:"grid grid-cols-3 grid-rows-2 gap-x-4 gap-y-3 w-full max-[478px]:flex max-[478px]:flex-wrap max-[478px]:gap-2",children:r&&(t?r:r.slice(0,24)).map((i,a)=>{const o=e[a%e.length];return x.jsx(ge,{to:`/genre/${i}`,className:"rounded-[4px] py-2 px-3 hover:bg-[#555462] hover:cursor-pointer max-[478px]:bg-[#373646] max-[478px]:py-[6px]",style:{color:o},children:x.jsx("div",{className:"overflow-hidden text-left text-ellipsis text-nowrap font-bold",children:i.charAt(0).toUpperCase()+i.slice(1)})},a)})}),x.jsx("button",{className:"w-full bg-[#555462d3] py-3 mt-4 hover:bg-[#555462] rounded-md font-bold transform transition-all ease-out",onClick:s,children:t?"Show less":"Show more"})]})]})}const Zc=Le.memo(N3);function O3({data:r,className:e}){const{language:t}=dr(),[n,s]=D.useState("today"),[i,a]=D.useState(null),[o,l]=D.useState(null),c=Tt(),u=m=>{s(m)},d=m=>{c(`/${m}`),window.scrollTo({top:0,behavior:"smooth"})},f=n==="today"?r.today:n==="week"?r.week:r.month,{tooltipPosition:p,tooltipHorizontalPosition:h,cardRefs:g}=Qc(i,f),y=(m,v)=>{o&&clearTimeout(o),a(m.id+v)},b=()=>{l(setTimeout(()=>{a(null)},300))};return x.jsxs("div",{className:`flex flex-col space-y-6 ${e}`,children:[x.jsxs("div",{className:"flex justify-between items-center max-[350px]:flex-col max-[350px]:gap-y-2 max-[350px]:items-start",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade]",children:"Top 10"}),x.jsx("ul",{className:"flex justify-between w-fit bg-[#373646] rounded-[4px] text-sm font-bold",children:["today","week","month"].map(m=>x.jsx("li",{className:`cursor-pointer p-2 px-3 ${n===m?"bg-[#ffbade] text-[#555462]":"text-white hover:text-[#ffbade]"} ${m==="today"?"rounded-l-[4px]":""} ${m==="month"?"rounded-r-[4px]":""}`,onClick:()=>u(m),children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),x.jsx("div",{className:"flex flex-col space-y-4 bg-[#2B2A3C] p-4 pt-8",children:f&&f.map((m,v)=>{var S,E;return x.jsxs("div",{className:"flex items-center gap-x-4",ref:C=>g.current[v]=C,children:[x.jsx("h1",{className:`font-bold text-2xl ${v<3?"pb-1 text-white border-b-[3px] border-[#ffbade]":"text-[#777682]"} max-[350px]:hidden`,children:`${v+1<10?"0":""}${v+1}`}),x.jsxs("div",{style:{borderBottom:v+1<10?"1px solid rgba(255, 255, 255, .075)":"none"},className:"flex pb-4 relative container items-center",children:[x.jsx("img",{src:`${m.poster}`,alt:m.title,className:"w-[60px] h-[75px] rounded-md object-cover flex-shrink-0 cursor-pointer",onClick:()=>c(`/watch/${m.id}`),onMouseEnter:()=>y(m,v),onMouseLeave:b}),i===m.id+v&&window.innerWidth>1024&&x.jsx("div",{className:`absolute ${p} ${h} 
                      ${p==="top-1/2"?"translate-y-[50px]":"translate-y-[-50px]"} 
                      z-[100000] transform transition-all duration-300 ease-in-out 
                      ${i===m.id+v?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,onMouseEnter:()=>{o&&clearTimeout(o)},onMouseLeave:b,children:x.jsx(ja,{id:m.id})}),x.jsxs("div",{className:"flex flex-col ml-4 space-y-2",children:[x.jsx(ge,{to:`/${m.id}`,className:"text-[1em] font-[500] hover:cursor-pointer hover:text-[#ffbade] transform transition-all ease-out line-clamp-1 max-[478px]:line-clamp-2 max-[478px]:text-[14px]",onClick:()=>d(m.id),children:t==="EN"?m.title:m.japanese_title}),x.jsxs("div",{className:"flex flex-wrap items-center w-fit space-x-1 max-[350px]:gap-y-[3px]",children:[((S=m.tvInfo)==null?void 0:S.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] rounded-[4px] px-[4px] text-black py-[2px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:m.tvInfo.sub})]}),((E=m.tvInfo)==null?void 0:E.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] rounded-[4px] px-[8px] text-black py-[2px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:m.tvInfo.dub})]})]})]})]})]},v)})})]})}const Ep=Le.memo(O3);function Kb(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Kb(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function M3(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Kb(r))&&(n&&(n+=" "),n+=e);return n}const wp="-",F3=r=>{const e=$3(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const o=a.split(wp);return o[0]===""&&o.length!==1&&o.shift(),Wb(o,e)||j3(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},Wb=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?Wb(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(wp);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},p0=/^\[(.+)\]$/,j3=r=>{if(p0.test(r)){const e=p0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$3=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return U3(Object.entries(r.classGroups),t).forEach(([i,a])=>{Vf(a,n,i,e)}),n},Vf=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:m0(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(B3(s)){Vf(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{Vf(a,m0(e,i),t,n)})})},m0=(r,e)=>{let t=r;return e.split(wp).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},B3=r=>r.isThemeGetter,U3=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,s]}):r,z3=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},qb="!",V3=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,a=o=>{const l=[];let c=0,u=0,d;for(let y=0;y<o.length;y++){let b=o[y];if(c===0){if(b===s&&(n||o.slice(y,y+i)===e)){l.push(o.slice(u,y)),u=y+i;continue}if(b==="/"){d=y;continue}}b==="["?c++:b==="]"&&c--}const f=l.length===0?o:o.substring(u),p=f.startsWith(qb),h=p?f.substring(1):f,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};return t?o=>t({className:o,parseClassName:a}):a},G3=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},H3=r=>({cache:z3(r.cacheSize),parseClassName:V3(r),...F3(r)}),K3=/\s+/,W3=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=r.trim().split(K3);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=t(c);let h=!!p,g=n(h?f.substring(0,p):f);if(!g){if(!h){o=c+(o.length>0?" "+o:o);continue}if(g=n(f),!g){o=c+(o.length>0?" "+o:o);continue}h=!1}const y=G3(u).join(":"),b=d?y+qb:y,m=b+g;if(i.includes(m))continue;i.push(m);const v=s(g,h);for(let S=0;S<v.length;++S){const E=v[S];i.push(b+E)}o=c+(o.length>0?" "+o:o)}return o};function q3(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Yb(e))&&(n&&(n+=" "),n+=t);return n}const Yb=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=Yb(r[n]))&&(t&&(t+=" "),t+=e);return t};function Y3(r,...e){let t,n,s,i=a;function a(l){const c=e.reduce((u,d)=>d(u),r());return t=H3(c),n=t.cache.get,s=t.cache.set,i=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=W3(l,t);return s(l,u),u}return function(){return i(q3.apply(null,arguments))}}const Ue=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},Xb=/^\[(?:([a-z-]+):)?(.+)\]$/i,X3=/^\d+\/\d+$/,Q3=new Set(["px","full","screen"]),Z3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qr=r=>di(r)||Q3.has(r)||X3.test(r),Sn=r=>Mi(r,"length",u_),di=r=>!!r&&!Number.isNaN(Number(r)),Ku=r=>Mi(r,"number",di),Wi=r=>!!r&&Number.isInteger(Number(r)),n_=r=>r.endsWith("%")&&di(r.slice(0,-1)),me=r=>Xb.test(r),En=r=>Z3.test(r),s_=new Set(["length","size","percentage"]),i_=r=>Mi(r,s_,Qb),a_=r=>Mi(r,"position",Qb),o_=new Set(["image","url"]),l_=r=>Mi(r,o_,f_),c_=r=>Mi(r,"",d_),qi=()=>!0,Mi=(r,e,t)=>{const n=Xb.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},u_=r=>J3.test(r)&&!e_.test(r),Qb=()=>!1,d_=r=>t_.test(r),f_=r=>r_.test(r),h_=()=>{const r=Ue("colors"),e=Ue("spacing"),t=Ue("blur"),n=Ue("brightness"),s=Ue("borderColor"),i=Ue("borderRadius"),a=Ue("borderSpacing"),o=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),u=Ue("hueRotate"),d=Ue("invert"),f=Ue("gap"),p=Ue("gradientColorStops"),h=Ue("gradientColorStopPositions"),g=Ue("inset"),y=Ue("margin"),b=Ue("opacity"),m=Ue("padding"),v=Ue("saturate"),S=Ue("scale"),E=Ue("sepia"),C=Ue("skew"),L=Ue("space"),I=Ue("translate"),T=()=>["auto","contain","none"],w=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",me,e],_=()=>[me,e],k=()=>["",Qr,Sn],N=()=>["auto",di,me],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],j=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",me],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[di,me];return{cacheSize:500,separator:":",theme:{colors:[qi],spacing:[Qr,Sn],blur:["none","",En,me],brightness:$(),borderColor:[r],borderRadius:["none","","full",En,me],borderSpacing:_(),borderWidth:k(),contrast:$(),grayscale:F(),hueRotate:$(),invert:F(),gap:_(),gradientColorStops:[r],gradientColorStopPositions:[n_,Sn],inset:R(),margin:R(),opacity:$(),padding:_(),saturate:$(),scale:$(),sepia:F(),skew:$(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[En]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),me]}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wi,me]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Wi,me]}],"grid-cols":[{"grid-cols":[qi]}],"col-start-end":[{col:["auto",{span:["full",Wi,me]},me]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[qi]}],"row-start-end":[{row:["auto",{span:[Wi,me]},me]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[En]},En]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",En,Sn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ku]}],"font-family":[{font:[qi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",di,Ku]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qr,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qr,Sn]}],"underline-offset":[{"underline-offset":["auto",Qr,me]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),a_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",i_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},l_]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:O()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[Qr,me]}],"outline-w":[{outline:[Qr,Sn]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Qr,Sn]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",En,c_]}],"shadow-color":[{shadow:[qi]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...j(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":j()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",En,me]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Wi,me]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Qr,Sn,Ku]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p_=Y3(h_);function m_(...r){return p_(M3(r))}function ae({className:r,animation:e=!0,...t}){return x.jsx("div",{className:m_("bg-gray-400 rounded-3xl",e?"shimmer-effect":"",r),...t})}function Sr({className:r,showLabelSkeleton:e=!0}){return x.jsxs("div",{className:`w-full ${r}`,children:[e&&x.jsx(ae,{className:"w-[200px] h-[20px] max-[320px]:w-[70px]"}),x.jsx("div",{className:"grid grid-cols-6 gap-x-3 gap-y-8 mt-6 max-[1400px]:grid-cols-4 max-[758px]:grid-cols-3 max-[478px]:grid-cols-2",children:[...Array(12)].map((t,n)=>x.jsxs("div",{className:"flex flex-col",style:{height:"fit-content"},children:[x.jsxs("div",{className:"w-full relative",children:[x.jsx(ae,{className:"w-full h-[250px] object-cover max-[1200px]:h-[35vw] max-[758px]:h-[45vw] max-[478px]:h-[60vw] rounded-none"}),x.jsxs("div",{className:"absolute left-2 bottom-4 flex items-center justify-center w-fit space-x-1 z-20 max-[320px]:w-[80%] max-[320px]:left-0",children:[x.jsx(ae,{className:"w-[50px] h-[15px] bg-gray-600 max-[320px]:w-[40%]"}),x.jsx(ae,{className:"w-[50px] h-[15px] bg-gray-600 max-[320px]:w-[40%]"})]})]}),x.jsx(ae,{className:"mt-1 w-[90%] h-[15px]"}),x.jsxs("div",{className:"flex items-center gap-x-2 w-full mt-2",children:[x.jsx(ae,{className:"w-[40%] h-[12px]"}),x.jsx(ae,{className:"w-[40%] h-[12px]"})]})]},n))})]})}function gn({className:r}){return x.jsxs("div",{className:`flex flex-col space-y-6 ${r}`,children:[x.jsx(ae,{className:"w-[200px] h-[15px]"}),x.jsx("div",{className:"flex flex-col space-y-4 bg-[#2B2A3C] p-4 pt-8 w-full",children:[...Array(10)].map((e,t)=>x.jsx("div",{className:"flex items-center gap-x-4",children:x.jsxs("div",{className:"flex pb-4 relative container items-center",children:[x.jsx(ae,{className:"w-[60px] h-[75px] rounded-md"}),x.jsxs("div",{className:"flex flex-col ml-4 space-y-2 w-[60%]",children:[x.jsx(ae,{className:"w-[90%] h-[15px]"}),x.jsxs("div",{className:"flex flex-wrap items-center space-x-1",children:[x.jsx(ae,{className:"w-[30%] h-[15px]"}),x.jsx(ae,{className:"w-[30%] h-[15px]"})]})]})]})},t))})]})}const wn=({count:r,className:e})=>[...Array(r)].map((t,n)=>x.jsx(ae,{className:e},n));function g_(){return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"relative grid grid-cols-[minmax(0,75%),minmax(0,25%)] h-fit w-full overflow-hidden mt-[64px] max-[1200px]:flex max-[1200px]:flex-col max-md:mt-[50px]",children:[x.jsx(ae,{className:"absolute inset-0 w-full h-full blur-lg z-[-900] bg-gray-500",animation:!1}),x.jsxs("div",{className:"flex items-start z-10 px-14 py-[70px] bg-[#252434] bg-opacity-70 gap-x-8 max-[1024px]:px-6 max-[1024px]:py-10 max-[1024px]:gap-x-4 max-[575px]:flex-col max-[575px]:items-center max-[575px]:justify-center",children:[x.jsx(ae,{className:"w-[200px] h-[270px] rounded-none"}),x.jsxs("div",{className:"flex flex-col ml-4 gap-y-5 w-full max-[575px]:items-center max-[575px]:justify-center max-[575px]:mt-0",children:[x.jsx("ul",{className:"flex gap-x-2 items-center w-fit max-[1200px]:hidden",children:x.jsx(wn,{count:3,className:"w-[40px] h-[15px] rounded-xl "})}),x.jsx("div",{className:"flex flex-col gap-y-2",children:x.jsx(wn,{count:2,className:"w-[50%] h-[20px] rounded-xl "})}),x.jsx("div",{className:"flex gap-x-[3px]",children:x.jsx(wn,{count:6,className:"w-[30px] h-[20px] rounded-sm"})}),x.jsx(ae,{className:"w-[150px] h-[40px] rounded-3xl mt-4"}),x.jsx("div",{className:"flex flex-col gap-y-2 mt-5 max-[575px]:hidden",children:x.jsx(wn,{count:3,className:"w-[80%] h-[15px] rounded-3xl "})}),x.jsxs("div",{className:"flex gap-x-4 items-center mt-4",children:[x.jsx(ae,{className:"w-[60px] h-[60px] rounded-full bg-gray-500 max-[575px]:hidden"}),x.jsx("div",{className:"flex flex-col w-fit gap-y-2",children:x.jsx(wn,{count:2,className:"w-[150px] h-[10px] rounded-xl "})})]})]})]}),x.jsx("div",{className:"bg-[#4c4b57c3] flex items-center px-8 max-[1200px]:py-10 max-[1200px]:bg-[#363544e0] max-[575px]:p-4",children:x.jsxs("div",{className:"w-full flex flex-col h-fit gap-y-4",children:[x.jsx(wn,{count:6,className:"w-full h-[15px] rounded-xl"}),x.jsxs("div",{className:"flex gap-x-4 py-2 mt-4",children:[x.jsx(ae,{className:"w-[50px] h-[20px] "}),x.jsx("div",{className:"flex flex-wrap gap-1",children:x.jsx(wn,{count:4,className:"w-[30px] h-[20px] rounded-sm bg-gray-500"})})]}),x.jsx(wn,{count:2,className:"w-[90%] h-[15px] rounded-xl  "})]})})]}),x.jsxs("div",{className:"w-full grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex flex-col px-4",children:[x.jsx(Sr,{className:"mt-[60px]"}),x.jsx(gn,{className:"mt-[60px]"})]})]})}const x_=({count:r,className:e})=>[...Array(r)].map((t,n)=>x.jsx(ae,{className:e},n));function Oo(){return x.jsxs("div",{className:"flex flex-col w-1/4 space-y-7 max-[1200px]:w-full",children:[x.jsx(ae,{className:"w-[200px] h-[20px]"}),x.jsx("div",{className:"w-full space-y-4 flex flex-col ",children:[...Array(5)].map((r,e)=>x.jsxs("div",{style:{borderBottom:"1px solid rgba(255, 255, 255, .075)"},className:"flex pb-4 items-center",children:[x.jsx(ae,{className:"w-[60px] h-[75px] rounded-none"}),x.jsxs("div",{className:"flex flex-col ml-4 space-y-2 w-full",children:[x.jsx(ae,{className:"w-[90%] h-[15px]"}),x.jsx("div",{className:"flex items-center w-fit space-x-1",children:x.jsx(x_,{count:3,className:"w-[30px] h-[15px]"})})]})]},e))}),x.jsx(ae,{className:"w-[100px] h-[30px]"})]})}const g0=({count:r,className:e})=>[...Array(r)].map((t,n)=>x.jsx(ae,{className:e},n));function v_(){return x.jsx("section",{className:"w-full h-[600px] max-[1390px]:h-[530px] max-[1300px]:h-[500px] max-md:h-[420px] relative",children:x.jsxs("div",{className:"absolute flex flex-col left-0 bottom-[100px] w-[55%] p-4 z-10 max-[1390px]:w-[45%] max-[1390px]:bottom-[10px] max-[1300px]:w-[600px] max-[1120px]:w-[60%] max-md:w-[90%] max-[300px]:w-full",children:[x.jsx(ae,{className:"w-[400px] h-[20px] max-md:w-[180px]"}),x.jsx(ae,{className:"w-[70%] h-[20px] mt-6 text-left max-[1300px]:mt-4  max-sm:w-[80%] max-[320px]:w-full "}),x.jsxs("div",{className:"flex h-fit justify-center items-center w-fit space-x-5 mt-8 max-[1300px]:mt-6 max-md:hidden",children:[x.jsx(g0,{count:2,className:"w-[30px] h-[15px]"}),x.jsxs("div",{className:"flex space-x-3 w-fit",children:[x.jsx(ae,{className:"w-[80px] h-[15px]"}),x.jsx("div",{className:"flex space-x-[1px] rounded-r-[5px] rounded-l-[5px] w-fit py-[1px] overflow-hidden",children:x.jsx(g0,{count:2,className:"w-[30px] h-[15px]"})})]})]}),x.jsxs("div",{className:"mt-6 max-[1300px]:w-[500px] flex flex-col gap-y-2 max-[1120px]:w-[90%] max-md:hidden",children:[x.jsx(ae,{className:"w-full h-[13px]"}),x.jsx(ae,{className:"w-[85%] h-[13px]"}),x.jsx(ae,{className:"w-[70%] h-[13px]"})]}),x.jsxs("div",{className:"flex gap-x-5 mt-10 max-md:mt-6 max-sm:w-full max-[320px]:flex-col max-[320px]:space-y-3",children:[x.jsx(ae,{className:"w-[170px] h-[40px] max-[575px]:w-[120px] max-[575px]:h-[30px]"}),x.jsx(ae,{className:"w-[150px] h-[40px] max-[575px]:w-[120px] max-[575px]:h-[30px]"})]})]})})}function y_(){const[r,e]=D.useState(()=>window.innerWidth<720?3:window.innerWidth<1300?4:6);return D.useEffect(()=>{const t=()=>{window.innerWidth<720?e(3):window.innerWidth<1300?e(4):e(6)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),x.jsxs("div",{className:"flex flex-col w-full mt-10 max-[1200px]:px-4",children:[x.jsx(ae,{className:"w-[150px] h-[20px] max-[400px]:w-[100px]"}),x.jsx("div",{className:"w-full h-[250px] overflow-hidden flex mt-6 justify-around max-[1300px]:h-fit",children:[...Array(r)].map((t,n)=>x.jsx("div",{children:x.jsx(ae,{className:"w-[200px] h-full rounded-none max-[1300px]:w-[22vw] max-[1300px]:h-[30vw] max-[720px]:w-[25vw] max-[720px]:h-[35vw]"})},n))})]})}function b_(){return x.jsxs("div",{className:"px-4 w-full h-full  max-[1200px]:px-0 bg-[#3a395100]",children:[x.jsx(v_,{}),x.jsx(y_,{}),x.jsxs("div",{className:"mt-16 flex gap-6 max-[1200px]:px-4 max-[1200px]:grid max-[1200px]:grid-cols-2 max-[1200px]:mt-12 max-[1200px]:gap-y-10 max-[680px]:grid-cols-1",children:[x.jsx(Oo,{}),x.jsx(Oo,{}),x.jsx(Oo,{}),x.jsx(Oo,{})]}),x.jsxs("div",{className:"w-full grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex flex-col max-[1200px]:px-4",children:[x.jsxs("div",{children:[x.jsx(Sr,{className:"mt-[60px]"}),x.jsx(Sr,{className:"mt-[60px]"}),x.jsx(Sr,{className:"mt-[60px]"})]}),x.jsxs("div",{className:"w-full mt-[60px]",children:[x.jsx(gn,{}),x.jsx(gn,{})]})]})]})}function S_(){return x.jsxs("div",{className:"w-full flex flex-col gap-y-4 mt-[64px] max-md:mt-[50px]",children:[x.jsxs("div",{className:"flex gap-x-4 items-center p-5 mt-4",children:[x.jsx(ae,{className:"w-[60px] h-[60px] rounded-full bg-gray-500 max-[575px]:hidden"}),x.jsxs("div",{className:"flex flex-col w-fit gap-y-2",children:[x.jsx(ae,{className:"w-[150px] h-[10px] rounded-xl "}),x.jsx(ae,{className:"w-[150px] h-[10px] rounded-xl "})]})]}),x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex max-[1200px]:flex-col max-[1200px]:gap-y-10",children:[x.jsx(Sr,{className:"mt-[0px]"}),x.jsx(gn,{})]})]})}const E_=({count:r,className:e})=>[...Array(r)].map((t,n)=>x.jsx(ae,{className:e},n));function w_(){return x.jsxs("div",{className:"max-w-[1260px] mx-auto px-[15px] flex flex-col mt-[64px] max-md:mt-[50px]",children:[x.jsxs("ul",{className:"flex gap-x-4 mt-[50px] items-center w-fit max-[1200px]:hidden",children:[x.jsx(ae,{className:"w-[50px] h-[15px]"}),x.jsx(ae,{className:"w-[70px] h-[15px]"})]}),x.jsxs("div",{className:"flex flex-col gap-y-5 mt-6",children:[x.jsx(ae,{className:"w-[200px] h-[15px]"}),x.jsx("div",{className:"flex gap-x-[7px] flex-wrap justify-start gap-y-2 max-md:justify-start",children:x.jsx(E_,{count:20,className:"w-[40px] h-[20px] rounded-sm"})})]}),x.jsx(Sr,{showLabelSkeleton:!1})]})}function T_(){return x.jsx("div",{className:"w-full mt-[100px] flex flex-col gap-y-4 max-md:mt-[50px]",children:x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex max-[1200px]:flex-col max-[1200px]:gap-y-10",children:[x.jsx(Sr,{className:"mt-[0px]"}),x.jsx(gn,{})]})})}const Jc=({type:r})=>{switch(r){case"home":return x.jsx(b_,{});case"animeInfo":return x.jsx(g_,{});case"category":return x.jsx(S_,{});case"categoryCard":return x.jsx(Sr,{});case"producer":return x.jsx(T_,{});case"AtoZ":return x.jsx(w_,{});default:return x.jsx("div",{className:"loading-skeleton default-skeleton"})}};function Er({error:r}){const e=Tt();return x.jsx("div",{className:"bg-[#201F31] w-full h-screen flex justify-center items-center",children:x.jsxs("div",{className:"flex flex-col w-fit h-fit items-center justify-center",children:[x.jsx("img",{src:"https://s1.gifyu.com/images/SBlOe.png",alt:"",className:"w-[300px] h-[300px] max-[500px]:w-[200px] max-[500px]:h-[200px]"}),x.jsx("h1",{className:"text-white text-[35px] leading-5 mt-7",children:r==="404"?"404 Error":"Error"}),x.jsx("p",{className:"mt-5",children:"Oops! We couldn't find this page."}),x.jsxs("button",{className:"bg-[#ffbade] py-2 px-4 w-fit rounded-3xl text-black text-light flex items-center gap-x-2 mt-7",children:[x.jsx(oo,{className:"text-[#ffbade] w-[20px] h-[20px] rounded-full p-1 bg-black"}),x.jsx("p",{onClick:()=>e("/home"),className:"text-[18px]",children:"Back to homepage"})]})]})})}async function A_(r){try{return(await Te.get(`https://api-orcin-seven-62.vercel.app/api/schedule?date=${r}`)).data.results}catch(e){return console.error(e),e}}const I_=()=>{const[r,e]=D.useState([]),[t,n]=D.useState(!1),[s,i]=D.useState(null),[a,o]=D.useState(!1),[l,c]=D.useState(null),[u,d]=D.useState([]),[f,p]=D.useState(new Date),h=D.useRef([]),g=D.useRef(null),y=new Date,b=y.getFullYear(),m=y.getMonth(),v=y.toLocaleString("default",{month:"short"}),S=new Date(b,m+1,0).getDate(),E=`GMT ${new Date().getTimezoneOffset()>0?"-":"+"}${String(Math.floor(Math.abs(new Date().getTimezoneOffset())/60)).padStart(2,"0")}:${String(Math.abs(new Date().getTimezoneOffset())%60).padStart(2,"0")}`,C=[];D.useEffect(()=>{for(let R=1;R<=S;R++){const _=new Date(b,m,R),k=_.toLocaleString("default",{weekday:"short"}),N=_.getFullYear(),M=String(_.getMonth()+1).padStart(2,"0"),O=String(_.getDate()).padStart(2,"0"),j=`${N}-${M}-${O}`;C.push({day:R,monthName:v,dayname:k,fulldate:j})}e(C);const w=setInterval(()=>{p(new Date)},1e3);return()=>clearInterval(w)},[]),D.useEffect(()=>{const w=r.findIndex(R=>R.fulldate===`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`);w!==-1&&(c(w),I(w))},[r]);const L=async w=>{try{n(!0);const R=localStorage.getItem(`schedule-${w}`);if(R){const _=JSON.parse(R);d(Array.isArray(_)?_:[])}else{const _=await A_(w);d(Array.isArray(_)?_:[]),localStorage.setItem(`schedule-${w}`,JSON.stringify(_||[]))}}catch(R){console.error("Error fetching schedule info:",R),i(R)}finally{n(!1)}},I=w=>{h.current.forEach(R=>{R&&R.classList.remove("active")}),h.current[w]&&(h.current[w].classList.add("active"),r[w]&&r[w].fulldate&&L(r[w].fulldate),c(w))},T=()=>{o(!a)};return D.useEffect(()=>{o(!1),l!==null&&g.current&&g.current.slideTo(l)},[l]),x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-full mt-[60px] max-[480px]:mt-[40px]",children:x.jsxs("div",{className:"flex items-center justify-between max-[570px]:flex-col max-[570px]:items-start max-[570px]:gap-y-2",children:[x.jsx("div",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px]",children:"Estimated Schedule"}),x.jsxs("p",{className:"leading-[28px] px-[10px] bg-white text-black rounded-full my-[6px] text-[16px] font-bold max-[478px]:text-[12px] max-[275px]:text-[10px]",children:["(",E,") ",f.toLocaleDateString()," ",f.toLocaleTimeString()]})]})}),x.jsx("div",{className:"w-full overflow-x-scroll space-x-4 scrollbar-hide pt-10 px-6 max-[480px]:px-4 max-[478px]:pt-4",children:x.jsxs("div",{className:"relative w-full",children:[x.jsx(no,{slidesPerView:3,spaceBetween:2,breakpoints:{250:{slidesPerView:3,spaceBetween:10},640:{slidesPerView:4,spaceBetween:10},768:{slidesPerView:5,spaceBetween:10},1024:{slidesPerView:7,spaceBetween:10},1300:{slidesPerView:7,spaceBetween:15}},modules:[eb,Vc],navigation:{nextEl:".next",prevEl:".prev"},onSwiper:w=>g.current=w,children:r&&r.map((w,R)=>x.jsx(so,{children:x.jsxs("div",{ref:_=>h.current[R]=_,onClick:()=>I(R),className:`h-[70px] flex flex-col justify-center items-center w-full text-center rounded-xl shadow-lg cursor-pointer ${l===R?"bg-[#ffbade] text-black":"bg-white bg-opacity-5 text-[#ffffff] hover:bg-[#373646] transition-all duration-300 ease-in-out"}`,children:[x.jsx("div",{className:"text-[18px] font-bold max-[400px]:text-[14px] max-[350px]:text-[12px]",children:w.dayname}),x.jsxs("div",{className:`text-[14px] max-[400px]:text-[12px] ${l===R?"text-black":"text-gray-400"} max-[350px]:text-[10px]`,children:[w.monthName," ",w.day]})]})},R))}),x.jsx("button",{className:"next absolute top-1/2 right-[-15px] transform -translate-y-1/2 flex justify-center items-center cursor-pointer",children:x.jsx(is,{className:"text-[12px]"})}),x.jsx("button",{className:"prev absolute top-1/2 left-[-15px] transform -translate-y-1/2 flex justify-center items-center cursor-pointer",children:x.jsx(oo,{className:"text-[12px]"})})]})}),t?x.jsx("div",{className:"w-full h-[70px] flex justify-center items-center",children:x.jsx(Ai,{})}):!u||u.length===0?x.jsx("div",{className:"w-full h-[70px] flex justify-center items-center mt-5 text-xl",children:"No data to display"}):s?x.jsx("div",{className:"w-full h-[70px] flex justify-center items-center mt-5 text-xl",children:"Something went wrong"}):x.jsxs("div",{className:"flex flex-col mt-5 items-start",children:[(a?u:Array.isArray(u)?u.slice(0,7):[]).map((w,R)=>x.jsxs(ge,{to:`/${w.id}`,className:"w-full flex justify-between py-4 border-[#FFFFFF0D] border-b-[1px] group cursor-pointer max-[325px]:py-2",children:[x.jsxs("div",{className:"flex items-center max-w-[500px] gap-x-7 max-[400px]:gap-x-2",children:[x.jsx("div",{className:"text-lg font-semibold text-[#ffffff59] group-hover:text-[#ffbade] transition-all duration-300 ease-in-out max-[600px]:text-[14px] max-[275px]:text-[12px]",children:w.time||"N/A"}),x.jsx("h3",{className:"text-[17px] font-semibold line-clamp-1 group-hover:text-[#ffbade] transition-all duration-300 ease-in-out max-[600px]:text-[14px] max-[275px]:text-[12px]",children:w.title||"N/A"})]}),x.jsxs("button",{className:"max-w-[150px] flex items-center py-1 px-4 rounded-lg gap-x-2 group-hover:bg-[#ffbade] transition-all duration-300 ease-in-out",children:[x.jsx(oe,{icon:Zn,className:"mt-[1px] text-[10px] max-[320px]:text-[8px] group-hover:text-black transition-all duration-300 ease-in-out"}),x.jsxs("p",{className:"text-[14px] text-white group-hover:text-black transition-all duration-300 ease-in-out max-[275px]:text-[12px]",children:["Episode ",w.episode_no||"N/A"]})]})]},R)),u.length>7&&x.jsx("button",{onClick:T,className:"text-white py-4 hover:text-[#ffbade] font-semibold transition-all duration-300 ease-in-out max-sm:text-[13px]",children:a?"Show Less":"Show More"})]})]})},L_=()=>{const[r,e]=D.useState([]),{language:t}=dr(),n=D.useRef(null);D.useEffect(()=>{const a=JSON.parse(localStorage.getItem("continueWatching")||"[]");a.sort((o,l)=>(l.updatedAt||0)-(o.updatedAt||0)),e(a)},[]);const s=D.useMemo(()=>r,[r]),i=a=>{e(o=>{const l=o.filter(c=>c.episodeId!==a);return localStorage.setItem("continueWatching",JSON.stringify(l)),l})};return s.length===0?null:x.jsxs("div",{className:"mt-6 max-[1200px]:px-6 max-md:px-0",children:[x.jsxs("div",{className:"flex items-center justify-between max-md:pl-4",children:[x.jsxs("div",{className:"flex items-center gap-x-2 justify-center",children:[x.jsx(R3,{className:"text-[#ffbade]"}),x.jsx("h1",{className:"text-[#ffbade] text-2xl font-bold max-[450px]:text-xl max-[450px]:mb-1 max-[350px]:text-lg",children:"Continue Watching"})]}),x.jsxs("div",{className:"flex gap-x-2 pr-2 max-[350px]:hidden",children:[x.jsx("button",{className:"btn-prev bg-gray-700 text-white p-3 rounded-full hover:bg-gray-500 transition max-[768px]:p-2",children:x.jsx(oo,{className:"text-xs"})}),x.jsx("button",{className:"btn-next bg-gray-700 text-white p-3 rounded-full hover:bg-gray-500 transition max-[768px]:p-2",children:x.jsx(is,{className:"text-xs"})})]})]}),x.jsx("div",{className:"relative mx-auto overflow-hidden z-[1] mt-6 max-[450px]:mt-3",children:x.jsx(no,{ref:n,className:"w-full h-full",slidesPerView:3,spaceBetween:15,breakpoints:{640:{slidesPerView:4,spaceBetween:15},768:{slidesPerView:4,spaceBetween:15},1024:{slidesPerView:5,spaceBetween:15},1300:{slidesPerView:6,spaceBetween:15},1600:{slidesPerView:7,spaceBetween:20}},modules:[Vc],navigation:{nextEl:".btn-next",prevEl:".btn-prev"},children:s.map((a,o)=>x.jsx(so,{className:"text-center flex justify-center items-center",children:x.jsxs("div",{className:"w-full h-auto pb-[140%] relative inline-block overflow-hidden",children:[x.jsx("button",{className:"absolute top-2 right-2 bg-black text-white px-3 py-2 bg-opacity-60 rounded-full text-sm z-10 font-extrabold hover:bg-white hover:text-black transition-all",onClick:()=>i(a.episodeId),children:""}),x.jsxs(ge,{to:`/playing/${a==null?void 0:a.id}?ep=${a.episodeId}`,className:"inline-block bg-[#2a2c31] absolute left-0 top-0 w-full h-full group",children:[x.jsx("img",{src:`https://wsrv.nl/?url=${a==null?void 0:a.poster}`,alt:a==null?void 0:a.title,className:"block w-full h-full object-cover transition-all duration-300 ease-in-out group-hover:blur-[4px]",title:a==null?void 0:a.title,loading:"lazy"}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:x.jsx(oe,{icon:Zn,className:"text-[50px] text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[10000] max-[450px]:text-[36px]"})})]}),(a==null?void 0:a.adultContent)===!0&&x.jsx("div",{className:"text-white px-2 rounded-md bg-[#FF5700] absolute top-2 left-2 flex items-center justify-center text-[14px] font-bold",children:"18+"}),x.jsxs("div",{className:"absolute bottom-0 left-0 flex flex-col gap-y-2 right-0 p-2 bg-gradient-to-t from-black via-black/80 to-transparent max-[450px]:gap-y-1",children:[x.jsx("p",{className:"text-white text-md font-bold text-left truncate max-[450px]:text-sm",children:t==="EN"?a==null?void 0:a.title:a==null?void 0:a.japanese_title}),x.jsxs("p",{className:"text-gray-300 text-sm font-semibold text-left max-[450px]:text-[12px]",children:["Episode ",a.episodeNum]})]})]})},o))})})]})};function C_(){const{homeInfo:r,homeInfoLoading:e,error:t}=Ni();return e?x.jsx(Jc,{type:"home"}):t?x.jsx(Er,{}):r?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"px-4 w-full max-[1200px]:px-0",children:[x.jsx(_3,{spotlights:r.spotlights}),x.jsx(L_,{}),x.jsx(P3,{trending:r.trending}),x.jsxs("div",{className:"mt-10 flex gap-6 max-[1200px]:px-4 max-[1200px]:grid max-[1200px]:grid-cols-2 max-[1200px]:mt-12 max-[1200px]:gap-y-10 max-[680px]:grid-cols-1",children:[x.jsx(No,{label:"Top Airing",data:r.top_airing,path:"top-airing"}),x.jsx(No,{label:"Most Popular",data:r.most_popular,path:"most-popular"}),x.jsx(No,{label:"Most Favorite",data:r.most_favorite,path:"most-favorite"}),x.jsx(No,{label:"Latest Completed",data:r.latest_completed,path:"completed"})]}),x.jsxs("div",{className:"w-full grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex flex-col max-[1200px]:px-4",children:[x.jsxs("div",{children:[x.jsx(Gr,{label:"Latest Episode",data:r.latest_episode,className:"mt-[60px]",path:"recently-updated",limit:12}),x.jsx(Gr,{label:`New On ${Mt}`,data:r.recently_added,className:"mt-[60px]",path:"recently-added",limit:12}),x.jsx(I_,{}),x.jsx(Gr,{label:"Top Upcoming",data:r.top_upcoming,className:"mt-[30px]",path:"top-upcoming",limit:12})]}),x.jsxs("div",{className:"w-full mt-[60px]",children:[x.jsx(Zc,{data:r.genres}),x.jsx(Ep,{data:r.topten,className:"mt-12"})]})]})]})}):x.jsx(Er,{error:"404"})}async function Zb(r,e=!1){const t="https://api-orcin-seven-62.vercel.app/api";try{if(e){const n=await Te.get(`${t}/random/id`);return(await Te.get(`${t}/info?id=${n.data.results}`)).data.results}else return(await Te.get(`${t}/info?id=${r}`)).data.results}catch(n){return console.error("Error fetching anime info:",n),n}}function R_({data:r,label:e,className:t,limit:n}){const{language:s}=dr(),i=Tt(),[a,o]=D.useState(!1),[l,c]=D.useState(null),u=(v,S)=>{const E=setTimeout(()=>{g(v.id+S)},400);c(E)},d=()=>{clearTimeout(l),g(null)},f=()=>{o(v=>!v)},p=n?r.slice(0,n):a?r:r.slice(0,6),[h,g]=D.useState(null),{tooltipPosition:y,tooltipHorizontalPosition:b,cardRefs:m}=Qc(h,r);return x.jsxs("div",{className:`flex flex-col space-y-6 ${t}`,children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade]",children:e}),x.jsxs("div",{className:"flex flex-col space-y-4 bg-[#2B2A3C] p-4 pt-8",children:[r&&p.map((v,S)=>{var E,C,L;return x.jsx("div",{className:"flex items-center gap-x-4",ref:I=>m.current[S]=I,children:x.jsxs("div",{style:{borderBottom:S+1<p.length?"1px solid rgba(255, 255, 255, .075)":"none"},className:"flex pb-4 relative container items-center",children:[h===v.id+S&&window.innerWidth>1024&&x.jsx("div",{className:`absolute ${y} ${b} ${y==="top-1/2"?"translate-y-[50px]":"translate-y-[-50px]"} z-[100000] transform transition-all duration-300 ease-in-out ${h===v.id+S?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:x.jsx(ja,{id:v.id})}),x.jsx("img",{src:`${v.poster}`,alt:v.title,className:"flex-shrink-0 w-[60px] h-[75px] rounded-md object-cover cursor-pointer",onClick:()=>i(`/watch/${v.id}`),onMouseEnter:()=>u(v,S),onMouseLeave:d}),x.jsxs("div",{className:"flex flex-col ml-4 space-y-2",children:[x.jsx(ge,{to:`/${v.id}`,className:"text-[1em] font-[500] hover:cursor-pointer hover:text-[#ffbade] transform transition-all ease-out line-clamp-1 max-[478px]:line-clamp-2 max-[478px]:text-[14px]",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:s==="EN"?v.title:v.japanese_title}),x.jsxs("div",{className:"flex flex-wrap items-center w-fit space-x-1 max-[320px]:gap-y-2",children:[((E=v.tvInfo)==null?void 0:E.sub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B0E3AF] rounded-[4px] px-[4px] text-black py-[2px]",children:[x.jsx(oe,{icon:Kr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:v.tvInfo.sub})]}),((C=v.tvInfo)==null?void 0:C.dub)&&x.jsxs("div",{className:"flex space-x-1 justify-center items-center bg-[#B9E7FF] rounded-[4px] px-[8px] text-black py-[2px]",children:[x.jsx(oe,{icon:Hr,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px] font-bold",children:v.tvInfo.dub})]}),((L=v.tvInfo)==null?void 0:L.showType)&&x.jsxs("div",{className:"flex items-center gap-x-2",children:[x.jsx("div",{className:"dot ml-[4px]"}),x.jsx("p",{className:"text-[15px] font-light",children:v.tvInfo.showType})]})]})]})]})},S)}),!n&&r.length>6&&x.jsx("button",{className:"w-full bg-[#555462d3] py-3 mt-4 hover:bg-[#555462] rounded-md font-bold transform transition-all ease-out",onClick:f,children:a?"Show less":"Show more"})]})]})}const $a=Le.memo(R_);async function k_(r,e){const t="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${t}/character/list/${r}?page=${e}`)).data.results}catch(n){return console.error("Error fetching anime info:",n),n}}function __(){return x.jsx("div",{className:"w-full h-fit grid grid-cols-2 gap-4 overflow-y-hidden max-sm:gap-2 max-md:h-[400px] max-md:flex max-md:flex-col",children:[...Array(10)].map((r,e)=>x.jsx("div",{className:"h-[80px] p-4 rounded-md bg-[#444445]",children:x.jsxs("div",{className:"flex h-full items-center gap-x-2",children:[x.jsx(ae,{className:"w-[45px] h-[45px] rounded-full max-sm:w-[30px] max-sm:h-[30px]"}),x.jsxs("div",{className:"flex flex-col gap-y-1",children:[x.jsx(ae,{className:"h-[10px] w-[100px] rounded-md max-[300px]:w-[50px] max-[300px]:h-[8px]"}),x.jsx(ae,{className:"h-[10px] w-[70px] rounded-md max-[300px]:w-[20px] max-[300px]:h-[8px]"})]})]})},e))})}function Jb(r){const e=()=>window.innerWidth-document.documentElement.clientWidth,t=document.body;if(r){const n=e();t.style.paddingRight=`${n}px`,t.classList.add("overflow-y-hidden");const s=document.createElement("style");s.id="hide-scrollbar",s.innerHTML="::-webkit-scrollbar { display: none; }",document.head.appendChild(s)}else{t.style.paddingRight="0",t.classList.remove("overflow-y-hidden");const n=document.getElementById("hide-scrollbar");n&&n.remove()}}function eS(){const r=document.body;r.style.paddingRight="0",r.classList.remove("overflow-y-hidden");const e=document.getElementById("hide-scrollbar");e&&e.remove()}function lo({page:r,totalPages:e,handlePageChange:t,start:n=!1,style:s}){const i=()=>{const a=[];if(e===1)return null;if(e<=3)for(let o=1;o<=e;o++)a.push(o);else r===1?a.push(1,2,3):r===2?a.push(1,2,3,4):r===e?a.push(e-2,e-1,e):r===e-1?a.push(e-3,e-2,e-1,e):a.push(r-2,r-1,r,r+1,r+2);return a.map(o=>x.jsx("button",{onClick:()=>t(o),className:`w-[40px] text-[15px] mx-1 flex justify-center items-center p-2 rounded-full font-bold ${r===o?"bg-[#ffbade] text-[#2B2A3C] cursor-default":"bg-[#2B2A3C]  text-[#999] hover:text-[#ffbade]"} ${n?"bg-[#353537]":"bg-[#2B2A3C]"} `,children:o},o))};return x.jsx("div",{className:`w-full flex ${n?"justify-start":"justify-center"} items-center mt-12 overflow-hidden`,style:s,children:x.jsxs("div",{className:"flex justify-center mt-4 w-fit",children:[r>1&&e>2&&x.jsx("button",{onClick:()=>t(1),className:`w-[40px] mx-1 p-2 ${n?"bg-[#353537]":"bg-[#2B2A3C]"} rounded-full text-[#999] text-[8px] hover:text-[#ffbade]`,children:x.jsx(oe,{icon:v3})}),r>1&&x.jsx("button",{onClick:()=>{r>0&&t(r-1)},className:`w-[40px] mx-1 p-2 ${n?"bg-[#353537]":"bg-[#2B2A3C]"} rounded-full text-[#999] text-[8px] hover:text-[#ffbade]`,children:x.jsx(oe,{icon:m3})}),i(),r<e&&x.jsx("button",{onClick:()=>{r<e&&t(r+1)},className:`w-[40px] mx-1 p-2 ${n?"bg-[#353537]":"bg-[#2B2A3C]"} rounded-full text-[#999] text-[8px] hover:text-[#ffbade]`,children:x.jsx(oe,{icon:g3})}),r<e&&e>2&&x.jsx("button",{onClick:()=>t(e),className:`w-[40px] mx-1 p-2 ${n?"bg-[#353537]":"bg-[#2B2A3C]"} rounded-full text-[#999] text-[8px] hover:text-[#ffbade]`,children:x.jsx(oe,{icon:l3})})]})})}function P_({id:r,isOpen:e,onClose:t}){const[n,s]=D.useState(!0),[i,a]=D.useState(1),[o,l]=D.useState(1),[c,u]=D.useState(null),[d,f]=D.useState([]),p=Tt();return D.useEffect(()=>(Jb(e),()=>{eS()}),[e]),D.useEffect(()=>{(async()=>{s(!0);try{const g=await k_(r,i);f(g.data),l(g.totalPages),s(!1)}catch(g){u(g),console.error("Error fetching category info:",g)}})()},[i]),c?(p("/error-page"),x.jsx(Er,{})):d?x.jsx("div",{className:"fixed top-0 left-0 w-screen h-screen overflow-y-auto bg-black/80 z-50 flex justify-center py-10  max-[575px]:py-3",style:{zIndex:1e6,pointerEvents:"auto"},children:x.jsxs("div",{className:`w-[920px] h-fit flex flex-col relative backdrop-blur-[10px] rounded-lg p-6 bg-white/10 ${n?"h-fit":""} max-[1000px]:w-[80vw] max-md:w-[90vw] max-[480px]:p-3`,style:{pointerEvents:"auto"},children:[!n&&x.jsx("h2",{className:"text-2xl font-bold col-span-2 max-[480px]:text-lg",children:"Characters & Voice Actors"}),n?x.jsx(__,{}):x.jsx("div",{className:"w-full grid grid-cols-2 gap-4 mt-5 max-[1000px]:grid-cols-1",children:d.map((h,g)=>{var y;return x.jsxs("div",{className:"flex p-4 items-center justify-between py-2 bg-[#444445] rounded-lg h-[80px] max-[480px]:p-1 max-[480px]:bg-transparent max-[480px]:rounded-none max-[480px]:border-b-[1px] border-dotted max-[480px]:h-[60px] max-[480px]:pb-4",children:[x.jsxs("div",{className:"flex gap-x-2 items-center w-[50%] overflow-hidden",children:[x.jsx("img",{src:h.character.poster,className:"w-[45px] h-[45px] rounded-full flex-shrink-0 object-cover hover:cursor-pointer max-[480px]:w-[30px] max-[480px]:h-[30px]",loading:"lazy",onError:b=>{b.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"}}),x.jsxs("div",{className:"flex flex-col text-left gap-y-1 w-full",children:[h.character.name&&x.jsx("h1",{className:"text-[13px] font-semibold max-[480px]:text-[11px]",children:h.character.name}),h.character.cast&&x.jsx("p",{className:"text-[12px] font-light max-[480px]:text-[10px]",children:h.character.cast})]})]}),h.voiceActors&&h.voiceActors.length>0&&(h.voiceActors.length>1?x.jsx("div",{className:"flex flex-wrap gap-x-[4px] items-center justify-end w-[50%] max-sm:flex-nowrap max-sm:overflow-auto max-[350px]:justify-start max-sm:py-3",children:h.voiceActors.map((b,m)=>x.jsx("img",{src:b.poster,className:"w-[41px] h-[41px] opacity-70 cursor-pointer rounded-full flex-shrink-0 object-cover grayscale hover:grayscale-0 hover:opacity-100 max-[480px]:w-[30px] max-[480px]:h-[30px] transition-all duration-300 ease-in-out",title:b.name,style:{border:"4px solid rgba(105, 108, 117, 0.8)"},onError:v=>{v.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"}},m))}):x.jsxs("div",{className:"flex items-center justify-end gap-x-2 w-[50%] overflow-hidden max-[480px]:flex-wrap max-[480px]:flex-col-reverse max-[480px]:items-end max-[480px]:gap-y-1",children:[((y=h==null?void 0:h.voiceActors[0])==null?void 0:y.name)&&x.jsx("p",{className:"text-right text-[13px] max-[480px]:text-[11px]",children:h.voiceActors[0].name}),x.jsx("img",{src:h.voiceActors[0].poster,alt:"",title:h.voiceActors.name,loading:"lazy",className:"w-[45px] h-[45px] rounded-full opacity-70 flex-shrink-0 object-cover grayscale hover:grayscale-0 hover:opacity-100 max-[480px]:w-[30px] max-[480px]:h-[30px] transition-all duration-300 ease-in-out",onError:b=>{b.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"}})]}))]},g)})}),x.jsx("div",{className:"bg-white w-[30px] h-[30px] p-2 rounded-full text-3xl absolute z-[1000] top-[-14px] right-[-14px] hover:text-[#FFBADE] cursor-pointer transform transition-all ease-in-out duration-300 flex items-center justify-center hover:bg-[#ffbade] max-md:top-0 max-md:right-0 max-md:rounded-none max-md:rounded-bl-lg max-md:rounded-tr-lg",onClick:t,children:x.jsx("button",{className:"text-black mb-[6px] font-semibold",children:""})}),x.jsx(lo,{page:i,totalPages:o,handlePageChange:a,start:!0,style:{marginTop:"10px"}})]})}):(p("/404-not-found-page"),null)}function tS({animeInfo:r,className:e}){const[t,n]=D.useState(!1);return x.jsxs("div",{className:`w-full mt-8 flex flex-col gap-y-4 ${e}`,children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px] capitalize",children:"Characters & Voice Actors"}),x.jsxs("button",{className:"flex w-fit items-baseline h-fit rounded-3xl gap-x-1 group",children:[x.jsx("p",{className:"text-white text-[12px] font-semibold h-fit leading-0",onClick:()=>{n(!0)},children:"View more"}),x.jsx(is,{className:"text-white text-[10px]"})]})]}),x.jsx("div",{className:"w-full grid grid-cols-3 max-[1024px]:grid-cols-2 max-[758px]:grid-cols-1 gap-4",children:r.charactersVoiceActors.slice(0,6).map((s,i)=>x.jsxs("div",{className:"flex justify-between items-center px-3 py-4 rounded-md bg-[#373646]",children:[s.character&&x.jsx("div",{className:"w-[50%] float-left overflow-hidden max-[350px]:w-[45%]",children:x.jsxs("div",{className:"w-full flex gap-x-3",children:[s.character.poster&&x.jsx("img",{src:s.character.poster,title:s.character.name||"Character",alt:s.character.name||"Character",onError:a=>{a.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"},className:"w-[45px] h-[45px] flex-shrink-0 rounded-full object-cover",loading:"lazy"}),x.jsxs("div",{className:"flex justify-center flex-col",children:[s.character.name&&x.jsx("h4",{className:"text-[13px] text-left leading-[1.3em] font-[400] mb-0 overflow-hidden -webkit-box -webkit-line-clamp-2 -webkit-box-orient-vertical",children:s.character.name}),s.character.cast&&x.jsx("p",{className:"text-[11px] mt-[3px]",children:s.character.cast})]})]})}),s.voiceActors.length>0&&s.voiceActors[0]&&x.jsx("div",{className:"w-[50%] float-right overflow-hidden max-[350px]:w-[45%]",children:x.jsxs("div",{className:"w-full flex justify-end gap-x-2",children:[x.jsx("div",{className:"flex flex-col justify-center ",children:s.voiceActors[0].name&&x.jsx("span",{className:"text-[13px] text-right leading-[1.3em] font-[400] mb-0 overflow-hidden -webkit-box -webkit-line-clamp-2 -webkit-box-orient-vertical w-fit",children:s.voiceActors[0].name})}),s.voiceActors[0].poster&&x.jsx("img",{src:s.voiceActors[0].poster,title:s.voiceActors[0].name||"Voice Actor",alt:s.voiceActors[0].name||"Voice Actor",loading:"lazy",onError:a=>{a.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"},className:"w-[45px] h-[45px] rounded-full object-cover grayscale hover:grayscale-0 hover:cursor-pointer flex-shrink-0 transition-all duration-300 ease-in-out"})]})})]},i))}),t&&x.jsx(P_,{id:r.id,isOpen:t,onClose:()=>n(!1)})]})}function x0({label:r,value:e,isProducer:t=!0}){return e&&x.jsxs("div",{className:"text-[14px] font-bold",children:[`${r}: `,x.jsx("span",{className:"font-light",children:Array.isArray(e)?e.map((n,s)=>t?x.jsxs(ge,{to:`/producer/${n.replace(/[&'"^%$#@!()+=<>:;,.?/\\|{}[\]`~*_]/g,"").split(" ").join("-").replace(/-+/g,"-")}`,className:"cursor-pointer hover:text-[#ffbade]",children:[n,s<e.length-1&&", "]},s):x.jsx("span",{className:"cursor-pointer",children:n},s)):t?x.jsx(ge,{to:`/producer/${e.replace(/[&'"^%$#@!()+=<>:;,.?/\\|{}[\]`~*_]/g,"").split(" ").join("-").replace(/-+/g,"-")}`,className:"cursor-pointer hover:text-[#ffbade]",children:e}):x.jsx("span",{className:"cursor-pointer",children:e})})]})}function D_({bgColor:r,index:e,icon:t,text:n}){return x.jsxs("div",{className:`flex space-x-1 justify-center items-center px-[4px] py-[1px] text-black font-bold text-[13px] ${e===0?"rounded-l-[4px]":"rounded-none"}`,style:{backgroundColor:r},children:[t&&x.jsx(oe,{icon:t,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px]",children:n})]})}function v0({random:r=!1}){var C,L,I,T,w,R,_,k,N,M;const{language:e}=dr(),{id:t}=Yl(),n=r?null:t,[s,i]=D.useState(!1),[a,o]=D.useState(null),[l,c]=D.useState(null),[u,d]=D.useState(!0),[f,p]=D.useState(null),{homeInfo:h}=Ni(),{id:g}=Yl(),y=Tt();if(D.useEffect(()=>{if(n==="404-not-found-page")return console.log("404 got!"),null;(async()=>{d(!0);try{const j=await Zb(n,r);c(j==null?void 0:j.seasons),o(j.data)}catch(j){console.error("Error fetching anime info:",j),p(j)}finally{d(!1)}})(),window.scrollTo({top:0,behavior:"smooth"})},[n,r]),D.useEffect(()=>(a&&location.pathname===`/${a.id}`&&(document.title=`Watch ${a.title} English Sub/Dub online Free on ${Mt}`),()=>{document.title=`${Mt} | Free anime streaming platform`}),[a]),u)return x.jsx(Jc,{type:"animeInfo"});if(f)return x.jsx(Er,{});if(!a){y("/404-not-found-page");return}const{title:b,japanese_title:m,poster:v,animeInfo:S}=a,E=[{condition:(C=S.tvInfo)==null?void 0:C.rating,bgColor:"#ffffff",text:S.tvInfo.rating},{condition:(L=S.tvInfo)==null?void 0:L.quality,bgColor:"#FFBADE",text:S.tvInfo.quality},{condition:(I=S.tvInfo)==null?void 0:I.sub,icon:Kr,bgColor:"#B0E3AF",text:S.tvInfo.sub},{condition:(T=S.tvInfo)==null?void 0:T.dub,icon:Hr,bgColor:"#B9E7FF",text:S.tvInfo.dub}];return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"relative grid grid-cols-[minmax(0,75%),minmax(0,25%)] h-fit w-full overflow-hidden text-white mt-[64px] max-[1200px]:flex max-[1200px]:flex-col max-md:mt-[50px]",children:[x.jsx("img",{src:`${v}`,alt:`${b} Poster`,className:"absolute inset-0 object-cover w-full h-full filter grayscale blur-lg z-[-900]"}),x.jsxs("div",{className:"flex items-start z-10 px-14 py-[70px] bg-[#252434] bg-opacity-70 gap-x-8 max-[1024px]:px-6 max-[1024px]:py-10 max-[1024px]:gap-x-4 max-[575px]:flex-col max-[575px]:items-center max-[575px]:justify-center",children:[x.jsxs("div",{className:"relative w-[180px] h-[270px] max-[575px]:w-[140px] max-[575px]:h-[200px] flex-shrink-0",children:[x.jsx("img",{src:`${v}`,alt:`${b} Poster`,className:"w-full h-full object-cover object-center flex-shrink-0"}),a.adultContent&&x.jsx("div",{className:"text-white px-2 rounded-md bg-[#FF5700] absolute top-2 left-2 flex items-center justify-center text-[14px] font-bold",children:"18+"})]}),x.jsxs("div",{className:"flex flex-col ml-4 gap-y-5 max-[575px]:items-center max-[575px]:justify-center max-[575px]:mt-6 max-[1200px]:ml-0",children:[x.jsxs("ul",{className:"flex gap-x-2 items-center w-fit max-[1200px]:hidden",children:[[["Home","home"],[(w=S.tvInfo)==null?void 0:w.showType,(R=S.tvInfo)==null?void 0:R.showType]].map(([O,j],P)=>x.jsxs("li",{className:"flex gap-x-3 items-center",children:[x.jsx(ge,{to:`/${j}`,className:"text-white hover:text-[#FFBADE] text-[15px] font-semibold",children:O}),x.jsx("div",{className:"dot mt-[1px] bg-white"})]},P)),x.jsx("p",{className:"font-light text-[15px] text-gray-300 line-clamp-1 max-[575px]:leading-5",children:e==="EN"?b:m})]}),x.jsx("h1",{className:"text-4xl font-semibold max-[1200px]:text-3xl max-[575px]:text-2xl max-[575px]:text-center  max-[575px]:leading-7",children:e==="EN"?b:m}),x.jsxs("div",{className:"flex flex-wrap w-fit gap-x-[2px] mt-3 max-[575px]:mx-auto max-[575px]:mt-0 gap-y-[3px] max-[320px]:justify-center",children:[E.map(({condition:O,icon:j,bgColor:P,text:F},B)=>O&&x.jsx(D_,{index:B,bgColor:P,icon:j,text:F},B)),x.jsx("div",{className:"flex w-fit items-center ml-1",children:[(_=S.tvInfo)==null?void 0:_.showType,(k=S.tvInfo)==null?void 0:k.duration].map((O,j)=>O&&x.jsxs("div",{className:"px-1 h-fit flex items-center gap-x-2 w-fit",children:[x.jsx("div",{className:"dot mt-[2px]"}),x.jsx("p",{className:"text-[14px]",children:O})]},j))})]}),((M=(N=a==null?void 0:a.animeInfo)==null?void 0:N.Status)==null?void 0:M.toLowerCase())!=="not-yet-aired"?x.jsxs(ge,{to:`/watch/${a.id}`,className:"flex gap-x-2 px-6 py-2 bg-[#FFBADE] w-fit text-black items-center rounded-3xl mt-5",children:[x.jsx(oe,{icon:Zn,className:"text-[14px] mt-[1px]"}),x.jsx("p",{className:"text-lg font-medium",children:"Watch Now"})]}):x.jsx(ge,{to:`/${a.id}`,className:"flex gap-x-2 px-6 py-2 bg-[#FFBADE] w-fit text-black items-center rounded-3xl mt-5",children:x.jsx("p",{className:"text-lg font-medium",children:"Not released"})}),(S==null?void 0:S.Overview)&&x.jsx("div",{className:"text-[14px] mt-2 max-[575px]:hidden",children:S.Overview.length>270?x.jsxs(x.Fragment,{children:[s?S.Overview:`${S.Overview.slice(0,270)}...`,x.jsx("span",{className:"text-[13px] font-bold hover:cursor-pointer",onClick:()=>i(!s),children:s?"- Less":"+ More"})]}):S.Overview}),x.jsxs("p",{className:"text-[14px] max-[575px]:hidden",children:[`${Mt} is the best site to watch `,x.jsx("span",{className:"font-bold",children:b})," SUB online, or you can even watch ",x.jsx("span",{className:"font-bold",children:b})," DUB in HD quality."]}),x.jsxs("div",{className:"flex gap-x-4 items-center mt-4 max-[575px]:w-full max-[575px]:justify-center max-[320px]:hidden",children:[x.jsx("img",{src:"https://i.postimg.cc/d34WWyNQ/share-icon.gif",alt:"Share Anime",className:"w-[60px] h-auto rounded-full max-[1024px]:w-[40px]"}),x.jsxs("div",{className:"flex flex-col w-fit",children:[x.jsx("p",{className:"text-[15px] font-bold text-[#FFBADE]",children:"Share Anime"}),x.jsx("p",{className:"text-[16px] text-white",children:"to your friends"})]})]})]})]}),x.jsx("div",{className:"bg-[#4c4b57c3] flex items-center px-8 max-[1200px]:py-10 max-[1200px]:bg-[#363544e0] max-[575px]:p-4",children:x.jsxs("div",{className:"w-full flex flex-col h-fit gap-y-3",children:[(S==null?void 0:S.Overview)&&x.jsxs("div",{className:"custom-xl:hidden max-h-[150px] overflow-hidden",children:[x.jsx("p",{className:"text-[13px] font-bold",children:"Overview:"}),x.jsx("div",{className:"max-h-[110px] mt-2 overflow-y-scroll",children:x.jsx("p",{className:"text-[14px] font-light",children:S.Overview})})]}),[{label:"Japanese",value:S==null?void 0:S.Japanese},{label:"Synonyms",value:S==null?void 0:S.Synonyms},{label:"Aired",value:S==null?void 0:S.Aired},{label:"Premiered",value:S==null?void 0:S.Premiered},{label:"Duration",value:S==null?void 0:S.Duration},{label:"Status",value:S==null?void 0:S.Status},{label:"MAL Score",value:S==null?void 0:S["MAL Score"]}].map(({label:O,value:j},P)=>x.jsx(x0,{label:O,value:j,isProducer:!1},P)),(S==null?void 0:S.Genres)&&x.jsxs("div",{className:"flex gap-x-2 py-2 custom-xl:border-t custom-xl:border-b custom-xl:border-white/20 max-[1200px]:border-none",children:[x.jsx("p",{children:"Genres:"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:S.Genres.map((O,j)=>x.jsx(ge,{to:`/genre/${O.split(" ").join("-")}`,className:"text-[14px] font-semibold px-2 py-[1px] border border-gray-400 rounded-2xl hover:text-[#ffbade]",children:O},j))})]}),[{label:"Studios",value:S==null?void 0:S.Studios},{label:"Producers",value:S==null?void 0:S.Producers}].map(({label:O,value:j},P)=>x.jsx(x0,{label:O,value:j},P)),x.jsxs("p",{className:"text-[14px] mt-4 custom-xl:hidden",children:[`${Mt} is the best site to watch `,x.jsx("span",{className:"font-bold",children:b})," SUB online, or you can even watch ",x.jsx("span",{className:"font-bold",children:b})," DUB in HD quality."]})]})})]}),x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex flex-col",children:[x.jsxs("div",{children:[(l==null?void 0:l.length)>0&&x.jsxs("div",{className:"flex flex-col gap-y-7 mt-8",children:[x.jsx("h1",{className:"w-fit text-2xl text-[#ffbade] max-[478px]:text-[18px] font-bold",children:"More Seasons"}),x.jsx("div",{className:"flex flex-wrap gap-4 max-[575px]:grid max-[575px]:grid-cols-3 max-[575px]:gap-3 max-[480px]:grid-cols-2",children:l.map((O,j)=>x.jsxs(ge,{to:`/${O.id}`,className:`relative w-[20%] h-[60px] rounded-lg overflow-hidden cursor-pointer group ${g===String(O.id)?"border border-[#ffbade]":""} max-[1200px]:w-[140px] max-[575px]:w-full`,children:[x.jsx("p",{className:`text-[13px] text-center font-bold absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full px-2 z-30 line-clamp-2 group-hover:text-[#ffbade] ${g===String(O.id)?"text-[#ffbade]":"text-white"}`,children:O.season}),x.jsx("div",{className:"absolute inset-0 z-10 bg-[url('https://i.postimg.cc/pVGY6RXd/thumb.png')] bg-repeat"}),x.jsx("img",{src:O.season_poster,alt:"",className:"w-full h-full object-cover blur-[3px] opacity-50"})]},j))})]}),(a==null?void 0:a.charactersVoiceActors.length)>0&&x.jsx(tS,{animeInfo:a}),a.recommended_data.length>0&&x.jsx(Gr,{label:"Recommended for you",data:a.recommended_data,limit:a.recommended_data.length,showViewMore:!1,className:"mt-8"})]}),x.jsxs("div",{children:[a.related_data.length>0&&x.jsx($a,{label:"Related Anime",data:a.related_data,className:"mt-8"}),h&&h.most_popular&&x.jsx($a,{label:"Most Popular",data:h.most_popular.slice(0,10),className:"mt-[40px]",limit:10})]})]})]})}const Fn="Zen!me",N_=({isOpen:r,onClose:e})=>{const{language:t,toggleLanguage:n}=dr(),s=Yr();return D.useEffect(()=>(Jb(r),()=>{eS()}),[r]),D.useEffect(()=>{e()},[s]),x.jsxs(x.Fragment,{children:[r&&x.jsx("div",{className:`fixed top-0 left-0 bottom-0 right-0 w-screen h-screen transform transition-all duration-400 ease-in-out ${r?"backdrop-blur-lg":"backdrop-blur-none"}`,onClick:e,style:{zIndex:1e6,background:"rgba(32, 31, 49, .8)"}}),x.jsx("div",{className:`fixed h-full top-0 left-0 z-50 flex transition-transform duration-300 ease-in-out ${r?"translate-x-0":"-translate-x-full"}`,style:{zIndex:1000200},children:x.jsxs("div",{className:"bg-white/10 w-[260px] py-8 h-full flex flex-col items-start max-[575px]:w-56 overflow-y-auto sidebar",style:{zIndex:300,borderRight:"1px solid rgba(0, 0, 0, .1)"},children:[x.jsx("div",{className:"px-4 w-full",children:x.jsxs("button",{onClick:e,className:"w-full text-white flex items-baseline h-fit gap-x-1 z-[100] px-3 py-2 bg-[#4f4d6e] rounded-3xl",children:[x.jsx(oo,{className:"text-sm font-bold"}),x.jsx("p",{children:"Close menu"})]})}),x.jsxs("div",{className:"flex gap-x-7 w-full py-3 justify-center px-auto mt-8 bg-black/10 max-[575px]:gap-x-4 lg:hidden",children:[[{icon:Vb,label:"Random"},{icon:Ub,label:"Movie"}].map((i,a)=>x.jsxs(ge,{to:`/${i.label}`,className:"flex flex-col gap-y-1 items-center",children:[x.jsx(oe,{icon:i.icon,className:"text-[#ffbade] text-xl font-bold max-[575px]:text-[15px]"}),x.jsx("p",{className:"text-[15px] max-[575px]:text-[13px]",children:i.label})]},a)),x.jsxs("div",{className:"flex flex-col gap-y-1 items-center w-auto justify-center",children:[x.jsx("div",{className:"flex",children:["EN","JP"].map((i,a)=>x.jsx("button",{onClick:()=>n(i),className:`px-1 py-[1px] text-xs font-bold ${a===0?"rounded-l-[3px]":"rounded-r-[3px]"} ${t===i?"bg-[#ffbade] text-black":"bg-gray-600 text-white"} max-[575px]:text-[9px] max-[575px]:py-0`,children:i},i))}),x.jsx("div",{className:"w-full",children:x.jsx("p",{className:"whitespace-nowrap text-[15px] max-[575px]:text-[13px]",children:"Anime name"})})]})]}),x.jsx("ul",{className:"text-white mt-8 w-full",children:[{name:"Home",path:"/home"},{name:"Subbed Anime",path:"/subbed-anime"},{name:"Dubbed Anime",path:"/dubbed-anime"},{name:"Most Popular",path:"/most-popular"},{name:"Movies",path:"/movie"},{name:"TV Series",path:"/tv"},{name:"OVAs",path:"/ova"},{name:"ONAs",path:"/ona"},{name:"Specials",path:"/special"},{name:"Join Telegram",path:"https://t.me/zenime_discussion"}].map((i,a)=>x.jsx("li",{className:"py-4 w-full font-semibold",style:{borderBottom:"1px solid rgba(255, 255, 255, .08)"},children:x.jsx(ge,{to:i.path,className:"px-4 hover:text-[#ffbade] hover:cursor-pointer w-fit line-clamp-1",children:i.name})},a))})]})})]})},rS=D.createContext();function O_({children:r}){const[e,t]=D.useState(!1);return x.jsx(rS.Provider,{value:{isSearchVisible:e,setIsSearchVisible:t},children:r})}const M_=()=>D.useContext(rS),F_=async r=>{const e="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${e}/search/suggest?keyword=${r}`)).data.results}catch(t){return console.error("Error fetching genre info:",t),t}};function nS({keyword:r,className:e}){const[t,n]=D.useState([]),[s,i]=D.useState(!1),[a,o]=D.useState(null),[l,c]=D.useState(!1);return D.useEffect(()=>{(async()=>{if(r){i(!0),c(!1);try{const d=await F_(r);n(d),c(!0)}catch(d){console.error("Error fetching search suggestion info:",d),o(d)}finally{i(!1)}}})()},[r]),x.jsx("div",{className:`bg-[#2d2b44] ${e} flex ${s?"justify-center py-7":"justify-start"} ${t?"justify-start":"p-3"} items-center`,style:{boxShadow:"0 20px 20px rgba(0, 0, 0, .3)"},children:s?x.jsx(Ai,{}):a&&!t?x.jsx("div",{children:"Error loading suggestions"}):t&&l?x.jsxs("div",{className:"w-full flex flex-col pt-2 overflow-y-auto",children:[t.map((u,d)=>x.jsxs(ge,{to:`/${u.id}`,className:"group py-2 flex items-start gap-x-3 hover:bg-[#3c3a5e] cursor-pointer px-[10px]",style:{borderBottom:d===t.length-1?"none":"1px dashed rgba(255, 255, 255, .075)"},children:[x.jsx("img",{src:`${u.poster}`,className:"w-[50px] h-[75px] flex-shrink-0 object-cover",alt:"",onError:f=>{f.target.src="https://i.postimg.cc/HnHKvHpz/no-avatar.jpg"}}),x.jsxs("div",{className:"flex flex-col gap-y-[2px]",children:[(u==null?void 0:u.title)&&x.jsx("h1",{className:"line-clamp-1 leading-5 font-bold text-[15px] group-hover:text-[#ffbade]",children:u.title||"N/A"}),(u==null?void 0:u.japanese_title)&&x.jsx("h1",{className:"line-clamp-1 leading-5 text-[13px] font-light text-[#aaaaaa]",children:u.japanese_title||"N/A"}),((u==null?void 0:u.releaseDate)||(u==null?void 0:u.showType)||(u==null?void 0:u.duration))&&x.jsxs("div",{className:"flex gap-x-[5px] items-center w-full justify-start mt-[4px]",children:[x.jsx("p",{className:"leading-5 text-[13px] font-light text-[#aaaaaa]",children:u.releaseDate||"N/A"}),x.jsx("span",{className:"dot"}),x.jsx("p",{className:"leading-5 text-[13px] font-medium group-hover:text-[#ffbade]",children:u.showType||"N/A"}),x.jsx("span",{className:"dot"}),x.jsx("p",{className:"leading-5 text-[13px] font-light text-[#aaaaaa]",children:u.duration||"N/A"})]})]})]},d)),!s&&l&&x.jsx(ge,{className:"w-full flex py-4 justify-center items-center bg-[#ffbade]",to:`/search?keyword=${encodeURIComponent(r)}`,children:x.jsxs("div",{className:"flex w-fit items-center gap-x-2",children:[x.jsx("p",{className:"text-[17px] font-light text-black",children:"View all results"}),x.jsx(is,{className:"text-black text-[12px] font-black mt-[2px]"})]})})]}):l?x.jsx("p",{className:"text-[17px]",children:"No results found!"}):null})}const sS=()=>{const{isSearchVisible:r,setIsSearchVisible:e}=M_(),[t,n]=D.useState(""),[s,i]=D.useState(!1),[a,o]=D.useState(""),l=D.useRef([]),c=Yr();D.useEffect(()=>{const d=setTimeout(()=>{o(t)},500);return()=>{clearTimeout(d)}},[t]),D.useEffect(()=>{e(!1),n(""),o("")},[c,e]),D.useEffect(()=>{const d=f=>{const p=l.current.some(g=>g&&g.contains(f.target)),h=document.activeElement===f.target;!p&&!h&&i(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const u=D.useCallback(d=>{d&&!l.current.includes(d)&&l.current.push(d)},[]);return{isSearchVisible:r,setIsSearchVisible:e,searchValue:t,setSearchValue:n,isFocused:s,setIsFocused:i,debouncedValue:a,suggestionRefs:l,addSuggestionRef:u}};function j_(){const r=Tt(),{setIsSearchVisible:e,searchValue:t,setSearchValue:n,isFocused:s,setIsFocused:i,debouncedValue:a,suggestionRefs:o,addSuggestionRef:l}=sS(),c=()=>{window.innerWidth<=600&&e(u=>!u),t.trim()&&window.innerWidth>600&&r(`/search?keyword=${encodeURIComponent(t)}`)};return x.jsxs("div",{className:"flex items-center relative w-[380px] max-[600px]:w-fit",children:[x.jsx("input",{type:"text",className:"bg-white px-4 py-2 text-black focus:outline-none w-full max-[600px]:hidden",placeholder:"Search anime...",value:t,onChange:u=>n(u.target.value),onFocus:()=>i(!0),onBlur:()=>{setTimeout(()=>{o.current.some(d=>d&&d.contains(document.activeElement))||i(!1)},100)},onKeyDown:u=>{u.key==="Enter"&&t.trim()&&r(`/search?keyword=${encodeURIComponent(t)}`)}}),x.jsx("button",{className:"bg-white p-2 max-[600px]:bg-transparent focus:outline-none max-[600px]:p-0",onClick:c,children:x.jsx(oe,{icon:Yc,className:"text-lg text-black hover:text-[#ffbade] max-[600px]:text-white max-[600px]:text-2xl max-[575px]:text-xl max-[600px]:mt-[7px]"})}),t.trim()&&s&&x.jsx("div",{ref:l,className:"absolute z-[100000] top-full w-full",children:x.jsx(nS,{keyword:a,className:"w-full"})})]})}function $_(){const r=Tt(),{isSearchVisible:e,searchValue:t,setSearchValue:n,isFocused:s,setIsFocused:i,debouncedValue:a,suggestionRefs:o,addSuggestionRef:l}=sS(),c=()=>{t.trim()&&window.innerWidth<=600&&r(`/search?keyword=${encodeURIComponent(t)}`)};return x.jsx(x.Fragment,{children:e&&x.jsxs("div",{className:"flex w-full mt-2 relative custom-md:hidden ",children:[x.jsx("input",{type:"text",className:"bg-white px-4 py-2 text-black focus:outline-none w-full rounded-l-md",placeholder:"Search anime...",value:t,onChange:u=>n(u.target.value),onFocus:()=>i(!0),onBlur:()=>{setTimeout(()=>{o.current.some(d=>d&&d.contains(document.activeElement))||i(!1)},100)},onKeyDown:u=>{u.key==="Enter"&&c()}}),x.jsx("button",{className:"flex items-center justify-center p-2 bg-white rounded-r-md",onClick:c,children:x.jsx(oe,{icon:Yc,className:"text-black text-lg"})}),t.trim()&&s&&x.jsx("div",{ref:l,className:"absolute z-[100000] top-full w-full",children:x.jsx(nS,{keyword:a,className:"w-full"})})]})})}function B_(){const r=Yr(),{language:e,toggleLanguage:t}=dr(),[n,s]=D.useState(r.pathname!=="/"&&r.pathname!=="/home"),[i,a]=D.useState(!1),[o,l]=D.useState(!1);D.useEffect(()=>{const f=()=>{a(window.scrollY>0)};return window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]);const c=()=>{l(!0)},u=()=>{l(!1)},d=()=>{r.pathname==="/random"&&window.location.reload()};return D.useEffect(()=>{s(r.pathname!=="/"&&r.pathname!=="/home")},[r.pathname]),x.jsxs(O_,{children:[x.jsxs("nav",{className:`fixed top-0 left-0 w-full h-16 z-[1000000] flex p-4 py-8 items-center justify-between transition-all duration-300 ease-in-out ${n?"bg-[#201F31]":"bg-opacity-0"} ${i?"bg-[#2D2B44] bg-opacity-90 backdrop-blur-md":""} max-[600px]:h-fit max-[600px]:flex-col max-[1200px]:bg-opacity-100 max-[600px]:py-2`,children:[x.jsxs("div",{className:"flex gap-x-6 items-center w-fit max-lg:w-full max-lg:justify-between",children:[x.jsxs("div",{className:"flex gap-x-6 items-center w-fit",children:[x.jsx(oe,{icon:s3,className:"text-2xl text-white mt-1 cursor-pointer",onClick:c}),x.jsxs(ge,{to:"/",className:"text-4xl font-bold max-[575px]:text-3xl cursor-pointer",children:[Fn.slice(0,3),x.jsx("span",{className:"text-[#FFBADE]",children:Fn.slice(3,4)}),Fn.slice(4)]})]}),x.jsx(j_,{})]}),x.jsxs("div",{className:"flex gap-x-7 items-center max-lg:hidden",children:[[{icon:Vb,label:"Random",path:"/random"},{icon:Ub,label:"Movie",path:"/movie"},{icon:zb,label:"Popular",path:"/most-popular"}].map(f=>x.jsxs(ge,{to:f.path==="/random"?r.pathname==="/random"?"#":"/random":f.path,onClick:f.path==="/random"?d:void 0,className:"flex flex-col gap-y-1 items-center cursor-pointer",children:[x.jsx(oe,{icon:f.icon,className:"text-[#ffbade] text-xl font-bold"}),x.jsx("p",{className:"text-[15px]",children:f.label})]},f.path)),x.jsxs("div",{className:"flex flex-col gap-y-1 items-center w-auto",children:[x.jsx("div",{className:"flex",children:["EN","JP"].map((f,p)=>x.jsx("button",{onClick:()=>t(f),className:`px-1 py-[1px] text-xs font-bold ${p===0?"rounded-l-[3px]":"rounded-r-[3px]"} ${e===f?"bg-[#ffbade] text-black":"bg-gray-600 text-white"}`,children:f},f))}),x.jsx("div",{className:"w-full",children:x.jsx("p",{className:"whitespace-nowrap text-[15px]",children:"Anime name"})})]}),x.jsxs(ge,{to:"https://t.me/zenime_discussion",className:"flex flex-col gap-y-1 items-center cursor-pointer",children:[x.jsx(C3,{className:"text-xl font-bold text-[#ffbade]"}),x.jsx("p",{className:"text-[15px] mb-[1px] text-white",children:"Join Telegram"})]})]}),x.jsx($_,{})]}),x.jsx(N_,{isOpen:o,onClose:u})]})}function U_(){return x.jsxs("footer",{className:"flex flex-col w-full mt-[100px] px-4 max-[500px]:px-0",children:[x.jsx("div",{style:{borderBottom:"1px solid rgba(255, 255, 255, .075)"},className:"w-full text-left max-[500px]:hidden",children:x.jsx("img",{src:"https://i.postimg.cc/SsKY6Y9f/2H76i57.png",alt:Fn,className:"w-[200px] h-[100px]"})}),x.jsxs("div",{className:"flex py-5 flex-col w-full space-y-4 max-md:items-center max-[500px]:bg-[#373646]",children:[x.jsxs("div",{className:"flex w-fit items-center space-x-6 max-[500px]:hidden",children:[x.jsx("p",{className:"text-2xl font-bold max-md:text-lg",children:"A-Z LIST"}),x.jsx("p",{style:{borderLeft:"1px solid rgba(255, 255, 255, 0.6)"},className:"text-md font-semibold pl-6",children:"Searching anime order by alphabet name A to Z"})]}),x.jsx("div",{className:"flex gap-x-[7px] flex-wrap justify-start gap-y-2 max-md:justify-start max-[500px]:hidden",children:["All","#","0-9",...Array.from({length:26},(r,e)=>String.fromCharCode(65+e))].map((r,e)=>x.jsx(ge,{to:`az-list/${r==="All"?"":r}`,className:"text-lg bg-[#373646] px-2 rounded-md font-bold hover:text-black hover:bg-[#FFBADE] hover:cursor-pointer transition-all ease-out",children:r},e))}),x.jsxs("div",{className:"flex flex-col w-full text-left space-y-2 pt-4 max-md:items-center max-[470px]:px-[5px]",children:[x.jsxs("p",{className:"text-[#9B9BA3] text-[16px] max-md:text-center max-md:text-[12px]",children:[Mt," does not host any files, it merely pulls streams from 3rd party services. Legal issues should be taken up with the file hosts and providers. ",Mt," is not responsible for any media files shown by the video providers."]}),x.jsxs("p",{className:"text-[#9B9BA3] max-md:text-[14px]",children:[" ",Mt,". All rights reserved."]})]})]})]})}const iS=async(r,e)=>{const t="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${t}/${r}?page=${e}`)).data.results}catch(n){return console.error("Error fetching genre info:",n),n}};function z_({path:r,label:e}){const[t,n]=Fc(),[s,i]=D.useState(null),[a,o]=D.useState(!0),[l,c]=D.useState(null),[u,d]=D.useState(0),f=parseInt(t.get("page"))||1,{homeInfo:p,homeInfoLoading:h}=Ni(),g=Tt();if(D.useEffect(()=>{(async()=>{o(!0);try{const m=await iS(r,f);i(m.data),d(m.totalPages),o(!1)}catch(m){c(m),console.error("Error fetching category info:",m)}})(),window.scrollTo({top:0,behavior:"smooth"})},[r,f]),l)return g("/error-page"),x.jsx(Er,{});if(!s&&!a)return g("/404-not-found-page"),null;const y=b=>{n({page:b})};return x.jsxs("div",{className:"w-full flex flex-col gap-y-4 mt-[64px] max-md:mt-[50px]",children:[x.jsxs("div",{className:"w-full flex gap-x-4 items-center bg-[#191826] p-5 max-[575px]:px-3 max-[320px]:hidden",children:[x.jsx("img",{src:"https://i.postimg.cc/d34WWyNQ/share-icon.gif",alt:"Share Anime",className:"w-[60px] h-auto rounded-full max-[1024px]:w-[40px] max-[575px]:hidden"}),x.jsxs("div",{className:"flex flex-col w-fit",children:[x.jsx("p",{className:"text-[15px] font-bold text-[#FFBADE]",children:"Share Anime"}),x.jsx("p",{className:"text-[16px] text-white",children:"to your friends"})]})]}),x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex max-[1200px]:flex-col max-[1200px]:gap-y-10",children:[x.jsx("div",{children:a?x.jsx(Sr,{className:"mt-5"}):f>u?x.jsxs("p",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px] max-[300px]:leading-6",children:["You came a long way, go back ",x.jsx("br",{className:"max-[300px]:hidden"}),"nothing is here"]}):x.jsxs(x.Fragment,{children:[s&&s.length>0&&x.jsx(Gr,{label:e.split("/").pop(),data:s,showViewMore:!1,className:"mt-0",categoryPage:!0,path:r}),x.jsx(lo,{page:f,totalPages:u,handlePageChange:y})]})}),x.jsx("div",{className:"w-full flex flex-col gap-y-10",children:h&&!p?x.jsx(gn,{}):x.jsxs(x.Fragment,{children:[(p==null?void 0:p.topten)&&x.jsx(Ep,{data:p.topten,className:"mt-0"}),(p==null?void 0:p.genres)&&x.jsx(Zc,{data:p.genres})]})})]})]})}function V_({path:r}){const[e,t]=Fc(),[n,s]=D.useState(null),[i,a]=D.useState(!0),[o,l]=D.useState(null),[c,u]=D.useState(0),d=parseInt(e.get("page"))||1,f=r.split("/").pop()||"";if(D.useEffect(()=>{(async()=>{a(!0);try{const g=await iS(r,d);s(g.data),u(g.totalPages),a(!1)}catch(g){l(g),a(!1),console.error("Error fetching category info:",g)}})(),window.scrollTo(0,0)},[r,d]),i)return x.jsx(Jc,{type:"AtoZ"});if(o)return x.jsx(Er,{});if(!n)return null;const p=h=>{t({page:h})};return x.jsxs("div",{className:"max-w-[1260px] mx-auto px-[15px] flex flex-col mt-[64px] max-md:mt-[50px]",children:[x.jsxs("ul",{className:"flex gap-x-2 mt-[50px] items-center w-fit max-[1200px]:hidden",children:[x.jsxs("li",{className:"flex gap-x-3 items-center",children:[x.jsx(ge,{to:"/home",className:"text-white hover:text-[#FFBADE] text-[17px]",children:"Home"}),x.jsx("div",{className:"dot mt-[1px] bg-white"})]}),x.jsx("li",{className:"font-light",children:"A-Z List"})]}),x.jsxs("div",{className:"flex flex-col gap-y-5 mt-6",children:[x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px]",children:"Sort By Letters"}),x.jsx("div",{className:"flex gap-x-[7px] flex-wrap justify-start gap-y-2 max-md:justify-start",children:["All","#","0-9",...Array.from({length:26},(h,g)=>String.fromCharCode(65+g))].map((h,g)=>{const y=h.toLowerCase()==="all"?"":h==="#"?"other":h,b=f==="az-list"&&h.toLowerCase()==="all"||f==="other"&&h==="#"||f===h.toLowerCase();return x.jsx(ge,{to:`/az-list/${y}`,className:`text-md bg-[#373646] py-1 px-4 rounded-md font-bold hover:text-black hover:bg-[#FFBADE] hover:cursor-pointer transition-all ease-out ${b?"text-black bg-[#FFBADE]":""}`,children:h},g)})})]}),x.jsx("div",{className:"w-full flex flex-col gap-y-8",children:x.jsxs("div",{children:[n&&n.length>0&&x.jsx(Gr,{data:n,limit:n.length,showViewMore:!1,className:"mt-0",cardStyle:"max-[1400px]:h-[35vw]"}),x.jsx(lo,{page:d,totalPages:c,handlePageChange:p})]})})]})}const G_=["genre/action","genre/adventure","genre/cars","genre/comedy","genre/dementia","genre/demons","genre/drama","genre/ecchi","genre/fantasy","genre/game","genre/harem","genre/historical","genre/horror","genre/isekai","genre/josei","genre/kids","genre/magic","genre/martial-arts","genre/mecha","genre/military","genre/music","genre/mystery","genre/parody","genre/police","genre/psychological","genre/romance","genre/samurai","genre/school","genre/sci-fi","genre/seinen","genre/shoujo","genre/shoujo-ai","genre/shounen","genre/shounen-ai","genre/slice-of-life","genre/space","genre/sports","genre/super-power","genre/supernatural","genre/thriller","genre/vampire","top-airing","most-popular","most-favorite","completed","recently-updated","recently-added","top-upcoming","subbed-anime","dubbed-anime","movie","special","ova","ona","tv"],H_=["az-list","az-list/other","az-list/0-9","az-list/a","az-list/b","az-list/c","az-list/d","az-list/e","az-list/f","az-list/g","az-list/h","az-list/i","az-list/j","az-list/k","az-list/l","az-list/m","az-list/n","az-list/o","az-list/p","az-list/q","az-list/r","az-list/s","az-list/t","az-list/u","az-list/v","az-list/w","az-list/x","az-list/y","az-list/z"],K_=async(r,e)=>{const t="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${t}/search?keyword=${r}&page=${e}`)).data.results}catch(n){return console.error("Error fetching genre info:",n),n}};function W_(){const{homeInfo:r,homeInfoLoading:e}=Ni(),[t,n]=Fc(),s=t.get("keyword"),i=parseInt(t.get("page"),10)||1,[a,o]=D.useState(null),[l,c]=D.useState(0),[u,d]=D.useState(!0),[f,p]=D.useState(null);D.useEffect(()=>{(async()=>{d(!0);try{const y=await K_(s,i);o(y.data),c(y.totalPage),d(!1)}catch(y){console.error("Error fetching anime info:",y),p(y),d(!1)}})(),window.scrollTo({top:0,behavior:"smooth"})},[s,i]);const h=g=>{n({keyword:s,page:g})};return x.jsxs("div",{className:"w-full px-4 mt-[128px] grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex max-[1200px]:flex-col max-[1200px]:gap-y-10 max-custom-md:mt-[80px] max-[478px]:mt-[60px]",children:[u?x.jsx(Sr,{className:"max-[478px]:mt-2"}):i>l?x.jsxs("p",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px] max-[300px]:leading-6",children:["You came a long way, go back ",x.jsx("br",{className:"max-[300px]:hidden"}),"nothing is here"]}):a&&a.length>0?x.jsxs("div",{children:[x.jsx(Gr,{label:`Search results for: ${s}`,data:a,showViewMore:!1,className:"mt-0"}),x.jsx(lo,{page:i,totalPages:l,handlePageChange:h})]}):f?x.jsx("p",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px]",children:"Couldn't get search result please try again"}):x.jsx("h1",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px]",children:`Search results for: ${s}`}),x.jsx("div",{className:"w-full flex flex-col gap-y-10",children:e&&!r?x.jsx(gn,{}):x.jsxs(x.Fragment,{children:[(r==null?void 0:r.most_popular)&&x.jsx($a,{data:r.most_popular,className:"mt-0",label:"Most Popular"}),(r==null?void 0:r.genres)&&x.jsx(Zc,{data:r.genres})]})})]})}async function q_(r){const e="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${e}/episodes/${r}`)).data.results}catch(t){return console.error("Error fetching anime info:",t),t}}const Y_=async r=>{const e="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${e}/schedule/${r}`)).data.results}catch(t){return console.error("Error fetching next episode schedule:",t),t}};async function X_(r,e){try{return(await Te.get(`https://api-orcin-seven-62.vercel.app/api/servers/${r}?ep=${e}`)).data.results}catch(t){return console.error(t),t}}async function Q_(r,e,t,n){const s="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${s}/stream?id=${r}?ep=${e}&server=${t}&type=${n}`)).data.results}catch(i){return console.error("Error fetching stream info:",i),i}}const Z_=(r,e)=>{const[t,n]=D.useState(null),[s,i]=D.useState(!0),[a,o]=D.useState(null),[l,c]=D.useState(null),[u,d]=D.useState(null),[f,p]=D.useState(!1),[h,g]=D.useState(null),[y,b]=D.useState(null),[m,v]=D.useState(null),[S,E]=D.useState(null),[C,L]=D.useState(!1),[I,T]=D.useState([]),[w,R]=D.useState(null),[_,k]=D.useState(null),[N,M]=D.useState(null),[O,j]=D.useState(null),[P,F]=D.useState(null),[B,$]=D.useState(null),[G,Y]=D.useState(null),[ee,te]=D.useState(null),[se,we]=D.useState(!0),[le,he]=D.useState(null),De=D.useRef(!1),Qe=D.useRef(!1);return D.useEffect(()=>{d(null),j(null),F(null),v(null),$(null),o(null),E(null),T([]),R(null),k(null),M(null),i(!0),we(!0),n(null),c(null),b(null),g(null),p(!0),De.current=!1,Qe.current=!1},[r]),D.useEffect(()=>{(async()=>{var ie,be;try{p(!0);const[ue,Q]=await Promise.all([Zb(r,!1),q_(r)]);c(ue==null?void 0:ue.data),b(ue==null?void 0:ue.seasons),d(Q==null?void 0:Q.episodes),g(Q==null?void 0:Q.totalEpisodes);const K=e||(((ie=Q==null?void 0:Q.episodes)==null?void 0:ie.length)>0?(be=Q.episodes[0].id.match(/ep=(\d+)/))==null?void 0:be[1]:null);j(K)}catch(ue){console.error("Error fetching initial data:",ue),n(ue.message||"An error occurred.")}finally{p(!1)}})()},[r]),D.useEffect(()=>{(async()=>{try{const ie=await Y_(r);he(ie)}catch(ie){console.error("Error fetching next episode schedule:",ie)}})()},[r]),D.useEffect(()=>{if(!u||!O){F(null);return}const $e=u.find(be=>{const ue=be.id.match(/ep=(\d+)/);return ue&&ue[1]===O}),ie=$e?$e.episode_no:null;P!==ie&&F(ie)},[O,u]),D.useEffect(()=>{if(!O||!u||De.current)return;let $e=!0;const ie=new AbortController;return De.current=!0,we(!0),(async()=>{try{const ue=await X_(r,O,{signal:ie.signal});if(!$e)return;let K=[...(ue==null?void 0:ue.filter(ce=>ce.serverName==="HD-1"||ce.serverName==="HD-2"||ce.serverName==="Vidstreaming"||ce.serverName==="Vidcloud"||ce.serverName==="DouVideo"))||[]];K.some(ce=>ce.type==="sub")&&(K.some(ce=>ce.serverName==="HD-4"&&ce.type==="sub")||K.push({type:"sub",data_id:"69696968",server_id:"41",serverName:"HD-4"})),K.some(ce=>ce.type==="dub")&&(K.some(ce=>ce.serverName==="HD-4"&&ce.type==="dub")||K.push({type:"dub",data_id:"96969696",server_id:"42",serverName:"HD-4"}));const Ne=localStorage.getItem("server_name"),Re=localStorage.getItem("server_type"),xe=K.find(ce=>ce.serverName===Ne&&ce.type===Re)||K.find(ce=>ce.serverName===Ne)||K.find(ce=>ce.type===Re&&["HD-1","HD-2","HD-3","HD-4","Vidstreaming","Vidcloud","DouVideo"].includes(ce.serverName))||K[0];v(K),Y(xe==null?void 0:xe.type),te(xe==null?void 0:xe.serverName),$(xe==null?void 0:xe.data_id)}catch(ue){if((ue==null?void 0:ue.name)==="AbortError")return;console.error("Error fetching servers:",ue),$e&&n(ue.message||"An error occurred.")}finally{$e&&(we(!1),De.current=!1)}})(),()=>{$e=!1;try{ie.abort()}catch{}De.current=!1}},[O,u]),D.useEffect(()=>{if(!O||!B||!m||De.current||Qe.current)return;if(["hd-1","hd-4","vidstreaming","vidcloud","douvideo"].includes(ee==null?void 0:ee.toLowerCase())&&!se){i(!1);return}(async()=>{var be,ue,Q,K,Ne,Re,xe,ce;Qe.current=!0,i(!0);try{const Oe=m.find(Ae=>Ae.data_id===B);if(Oe){const Ae=await Q_(r,O,Oe.serverName.toLowerCase()==="hd-3"?"hd-1":Oe.serverName.toLowerCase(),Oe.type.toLowerCase());o(Ae),E(((ue=(be=Ae==null?void 0:Ae.streamingLink)==null?void 0:be.link)==null?void 0:ue.file)||null),k(((Q=Ae==null?void 0:Ae.streamingLink)==null?void 0:Q.intro)||null),M(((K=Ae==null?void 0:Ae.streamingLink)==null?void 0:K.outro)||null);const At=((Re=(Ne=Ae==null?void 0:Ae.streamingLink)==null?void 0:Ne.tracks)==null?void 0:Re.filter(et=>et.kind==="captions").map(({file:et,label:Xr})=>({file:et,label:Xr})))||[];T(At);const Vt=(ce=(xe=Ae==null?void 0:Ae.streamingLink)==null?void 0:xe.tracks)==null?void 0:ce.find(et=>et.kind==="thumbnails"&&et.file);Vt&&R(Vt.file)}else n("No server found with the activeServerId.")}catch(Oe){console.error("Error fetching stream info:",Oe),n(Oe.message||"An error occurred.")}finally{i(!1),Qe.current=!1}})()},[O,B,m]),{error:t,buffering:s,serverLoading:se,streamInfo:a,animeInfo:l,episodes:u,nextEpisodeSchedule:le,animeInfoLoading:f,totalEpisodes:h,seasons:y,servers:m,streamUrl:S,isFullOverview:C,setIsFullOverview:L,subtitles:I,thumbnail:w,intro:_,outro:N,episodeId:O,setEpisodeId:j,activeEpisodeNum:P,setActiveEpisodeNum:F,activeServerId:B,setActiveServerId:$,activeServerType:G,setActiveServerType:Y,activeServerName:ee,setActiveServerName:te}},X=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},J_=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=e4},e4=Number.MAX_SAFE_INTEGER||9007199254740991;let re=function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r}({}),z=function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r}({}),A=function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r}({});var Se={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Z={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class js{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class t4{constructor(e,t,n,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new js(e),this.fast_=new js(t),this.defaultTTFB_=s,this.ttfb_=new js(e)}update(e,t){const{slow_:n,fast_:s,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new js(e,n.getEstimate(),n.getTotalWeight())),s.halfLife!==t&&(this.fast_=new js(t,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new js(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,s=e/1e3,i=n/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function r4(r,e,t){return(e=s4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Me(){return Me=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Me.apply(null,arguments)}function y0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y0(Object(t),!0).forEach(function(n){r4(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):y0(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function n4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function s4(r){var e=n4(r,"string");return typeof e=="symbol"?e:e+""}class fr{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Rn,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Rn=function(){},i4={trace:Rn,debug:Rn,log:Rn,warn:Rn,info:Rn,error:Rn};function Gf(){return Me({},i4)}function a4(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):Rn}function b0(r,e,t){return e[r]?e[r].bind(e):a4(r,t)}const Hf=Gf();function o4(r,e,t){const n=Gf();if(typeof console=="object"&&r===!0||typeof r=="object"){const s=["debug","log","info","warn","error"];s.forEach(i=>{n[i]=b0(i,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.13`)}catch{return Gf()}s.forEach(i=>{Hf[i]=b0(i,r)})}else Me(Hf,n);return n}const _e=Hf;function Jn(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function l4(r){return typeof self<"u"&&r===self.ManagedMediaSource}function aS(r,e){const t=Object.keys(r),n=Object.keys(e),s=t.length,i=n.length;return!s||!i||s===i&&!t.some(a=>n.indexOf(a)===-1)}function Jt(r,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(r);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const t=r.length;let n,s,i,a="",o=0;for(;o<t;){if(n=r[o++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:s=r[o++],a+=String.fromCharCode((n&31)<<6|s&63);break;case 14:s=r[o++],i=r[o++],a+=String.fromCharCode((n&15)<<12|(s&63)<<6|(i&63)<<0);break}}return a}function Lt(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function oS(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function c4(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wu={exports:{}},S0;function u4(){return S0||(S0=1,function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var f=o.parseURL(c);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):c;var p=o.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var h=s.exec(p.path);p.netLoc=h[1],p.path=h[2]}p.netLoc&&!p.path&&(p.path="/");var g={scheme:p.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=p.netLoc,f.path[0]!=="/"))if(!f.path)g.path=p.path,f.params||(g.params=p.params,f.query||(g.query=p.query));else{var y=p.path,b=y.substring(0,y.lastIndexOf("/")+1)+f.path;g.path=o.normalizePath(b)}return g.path===null&&(g.path=u.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(g)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(i,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()}(Wu)),Wu.exports}var Tp=u4();class Ap{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Fe={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class lS{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,f4(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let s;n.length===1?s=(t==null?void 0:t.byteRangeEndOffset)||0:s=parseInt(n[1]),this._byteRange=[s,parseInt(n[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Fe.AUDIO]:null,[Fe.VIDEO]:null,[Fe.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Ap),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Tp.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Fe.AUDIO]=null,e[Fe.VIDEO]=null,e[Fe.AUDIOVIDEO]=null}}function rt(r){return r.sn!=="initSegment"}class qu extends lS{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(X(e)&&X(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const s=this._decryptdata=t[n[0]]||null;s&&(this._decryptdata=s.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=X(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),s=n.length;if(s>1||s===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!X(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return rt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const s=t[e];s&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=s.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,s,i,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:n,startDTS:s,endDTS:i,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,i)}}class d4 extends lS{constructor(e,t,n,s,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function cS(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||cS(t,e)}}function f4(r,e){const t=cS(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const E0=Math.pow(2,32)-1,h4=[].push,uS={video:1,audio:2,id3:3,text:4};function it(r){return String.fromCharCode.apply(null,r)}function dS(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function de(r,e){const t=fS(r,e);return t<0?4294967296+t:t}function w0(r,e){let t=de(r,e);return t*=Math.pow(2,32),t+=de(r,e+4),t}function fS(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function p4(r){const e=r.byteLength;for(let t=0;t<e;){const n=de(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function ye(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let s=0;s<n;){const i=de(r,s),a=it(r.subarray(s+4,s+8)),o=i>1?s+i:n;if(a===e[0])if(e.length===1)t.push(r.subarray(s+8,o));else{const l=ye(r.subarray(s+8,o),e.slice(1));l.length&&h4.apply(t,l)}s=o}return t}function m4(r){const e=[],t=r[0];let n=8;const s=de(r,n);n+=4;let i=0,a=0;t===0?(i=de(r,n),a=de(r,n+4),n+=8):(i=w0(r,n),a=w0(r,n+8),n+=16),n+=2;let o=r.length+a;const l=dS(r,n);n+=2;for(let c=0;c<l;c++){let u=n;const d=de(r,u);u+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return _e.warn("SIDX has hierarchical references (not supported)"),null;const h=de(r,u);u+=4,e.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/s,start:o,end:o+f-1}}),o+=f,u+=4,n=u}return{earliestPresentationTime:i,timescale:s,version:t,referencesCount:l,references:e}}function hS(r){const e=[],t=ye(r,["moov","trak"]);for(let s=0;s<t.length;s++){const i=t[s],a=ye(i,["tkhd"])[0];if(a){let o=a[0];const l=de(a,o===0?12:20),c=ye(i,["mdia","mdhd"])[0];if(c){o=c[0];const u=de(c,o===0?12:20),d=ye(i,["mdia","hdlr"])[0];if(d){const f=it(d.subarray(8,12)),p={soun:Fe.AUDIO,vide:Fe.VIDEO}[f],h=ye(i,["mdia","minf","stbl","stsd"])[0],g=g4(h);p?(e[l]={timescale:u,type:p,stsd:g},e[p]=ke({timescale:u,id:l},g)):e[l]={timescale:u,type:f,stsd:g}}}}}return ye(r,["moov","mvex","trex"]).forEach(s=>{const i=de(s,4),a=e[i];a&&(a.default={duration:de(s,12),flags:de(s,20)})}),e}function g4(r){const e=r.subarray(8),t=e.subarray(86),n=it(e.subarray(4,8));let s=n,i;const a=n==="enca"||n==="encv";if(a){const c=ye(e,[n])[0].subarray(n==="enca"?28:78);ye(c,["sinf"]).forEach(d=>{const f=ye(d,["schm"])[0];if(f){const p=it(f.subarray(4,8));if(p==="cbcs"||p==="cenc"){const h=ye(d,["frma"])[0];h&&(s=it(h))}}})}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const l=ye(t,["avcC"])[0];l&&l.length>3&&(s+="."+Fo(l[1])+Fo(l[2])+Fo(l[3]),i=Mo(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=ye(e,[n])[0],c=ye(l.subarray(28),["esds"])[0];if(c&&c.length>7){let u=4;if(c[u++]!==3)break;u=Yu(c,u),u+=2;const d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=Yu(c,u);const f=c[u++];if(f===64)s+="."+Fo(f);else break;if(u+=12,c[u++]!==5)break;u=Yu(c,u);const p=c[u++];let h=(p&248)>>3;h===31&&(h+=1+((p&7)<<3)+((c[u]&224)>>5)),s+="."+h}break}case"hvc1":case"hev1":{const l=ye(t,["hvcC"])[0];if(l&&l.length>12){const c=l[1],u=["","A","B","C"][c>>6],d=c&31,f=de(l,2),p=(c&32)>>5?"H":"L",h=l[12],g=l.subarray(6,12);s+="."+u+d,s+="."+x4(f).toString(16).toUpperCase(),s+="."+p+h;let y="";for(let b=g.length;b--;){const m=g[b];(m||y)&&(y="."+m.toString(16).toUpperCase()+y)}s+=y}i=Mo(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=Mo(s,t)||s;break}case"vp09":{const l=ye(t,["vpcC"])[0];if(l&&l.length>6){const c=l[4],u=l[5],d=l[6]>>4&15;s+="."+_r(c)+"."+_r(u)+"."+_r(d)}break}case"av01":{const l=ye(t,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,u=l[1]&31,d=l[2]>>>7?"H":"M",f=(l[2]&64)>>6,p=(l[2]&32)>>5,h=c===2&&f?p?12:10:f?10:8,g=(l[2]&16)>>4,y=(l[2]&8)>>3,b=(l[2]&4)>>2,m=l[2]&3;s+="."+c+"."+_r(u)+d+"."+_r(h)+"."+g+"."+y+b+m+"."+_r(1)+"."+_r(1)+"."+_r(1)+"."+0,i=Mo("dav1",t)}break}}return{codec:s,encrypted:a,supplemental:i}}function Mo(r,e){const t=ye(e,["dvvC"]),n=t.length?t[0]:ye(e,["dvcC"])[0];if(n){const s=n[2]>>1&127,i=n[2]<<5&32|n[3]>>3&31;return r+"."+_r(s)+"."+_r(i)}}function x4(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function Yu(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Fo(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function _r(r){return(r<10?"0":"")+r}function v4(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&pS(r,(n,s)=>{const i=n.subarray(8,24);i.some(a=>a!==0)||(_e.log(`[eme] Patching keyId in 'enc${s?"a":"v"}>sinf>>tenc' box: ${Lt(i)} -> ${Lt(t)}`),n.set(t,8))})}function y4(r){const e=[];return pS(r,t=>e.push(t.subarray(8,24))),e}function pS(r,e){ye(r,["moov","trak"]).forEach(n=>{const s=ye(n,["mdia","minf","stbl","stsd"])[0];if(!s)return;const i=s.subarray(8);let a=ye(i,["enca"]);const o=a.length>0;o||(a=ye(i,["encv"])),a.forEach(l=>{const c=o?l.subarray(28):l.subarray(78);ye(c,["sinf"]).forEach(d=>{const f=mS(d);f&&e(f,o)})})})}function mS(r){const e=ye(r,["schm"])[0];if(e){const t=it(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=ye(r,["schi","tenc"])[0];if(n)return n}}}function b4(r,e,t){const n={},s=ye(r,["moof","traf"]);for(let i=0;i<s.length;i++){const a=s[i],o=ye(a,["tfhd"])[0],l=de(o,4),c=e[l];if(!c)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const u=n[l],d=ye(a,["tfdt"])[0];if(d){const v=d[0];let S=de(d,4);v===1&&(S===E0?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(S*=E0+1,S+=de(d,8))),X(S)&&(!X(u.start)||S<u.start)&&(u.start=S)}const f=c.default,p=de(o,0)|(f==null?void 0:f.flags);let h=(f==null?void 0:f.duration)||0;p&8&&(p&2?h=de(o,12):h=de(o,8));const g=ye(a,["trun"]);let y=u.start||0,b=0,m=h;for(let v=0;v<g.length;v++){const S=g[v],E=de(S,4),C=u.sampleCount;u.sampleCount+=E;const L=S[3]&1,I=S[3]&4,T=S[2]&1,w=S[2]&2,R=S[2]&4,_=S[2]&8;let k=8,N=E;for(L&&(k+=4),I&&E&&(!(S[k+1]&1)&&u.keyFrameIndex===void 0&&(u.keyFrameIndex=C),k+=4,T?(m=de(S,k),k+=4):m=h,w&&(k+=4),_&&(k+=4),y+=m,b+=m,N--);N--;)T?(m=de(S,k),k+=4):m=h,w&&(k+=4),R&&(S[k+1]&1||u.keyFrameIndex===void 0&&(u.keyFrameIndex=u.sampleCount-(N+1),u.keyFrameStart=y),k+=4),_&&(k+=4),y+=m,b+=m;!b&&h&&(b+=h*E)}u.duration+=b}if(!Object.keys(n).some(i=>n[i].duration)){let i=1/0,a=0;const o=ye(r,["sidx"]);for(let l=0;l<o.length;l++){const c=m4(o[l]);if(c!=null&&c.references){i=Math.min(i,c.earliestPresentationTime/c.timescale);const u=c.references.reduce((d,f)=>d+f.info.duration||0,0);a=Math.max(a,u+c.earliestPresentationTime/c.timescale)}}a&&X(a)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=a*n[l].timescale-n[l].start)})}return n}function S4(r){const e={valid:null,remainder:null},t=ye(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function ur(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function T0(r,e){const t=[],n=e.samples,s=e.timescale,i=e.id;let a=!1;return ye(n,["moof"]).map(l=>{const c=l.byteOffset-8;ye(l,["traf"]).map(d=>{const f=ye(d,["tfdt"]).map(p=>{const h=p[0];let g=de(p,4);return h===1&&(g*=Math.pow(2,32),g+=de(p,8)),g/s})[0];return f!==void 0&&(r=f),ye(d,["tfhd"]).map(p=>{const h=de(p,4),g=de(p,0)&16777215,y=(g&1)!==0,b=(g&2)!==0,m=(g&8)!==0;let v=0;const S=(g&16)!==0;let E=0;const C=(g&32)!==0;let L=8;h===i&&(y&&(L+=8),b&&(L+=4),m&&(v=de(p,L),L+=4),S&&(E=de(p,L),L+=4),C&&(L+=4),e.type==="video"&&(a=eu(e.codec)),ye(d,["trun"]).map(I=>{const T=I[0],w=de(I,0)&16777215,R=(w&1)!==0;let _=0;const k=(w&4)!==0,N=(w&256)!==0;let M=0;const O=(w&512)!==0;let j=0;const P=(w&1024)!==0,F=(w&2048)!==0;let B=0;const $=de(I,4);let G=8;R&&(_=de(I,G),G+=4),k&&(G+=4);let Y=_+c;for(let ee=0;ee<$;ee++){if(N?(M=de(I,G),G+=4):M=v,O?(j=de(I,G),G+=4):j=E,P&&(G+=4),F&&(T===0?B=de(I,G):B=fS(I,G),G+=4),e.type===Fe.VIDEO){let te=0;for(;te<j;){const se=de(n,Y);if(Y+=4,E4(a,n[Y])){const we=n.subarray(Y,Y+se);Ip(we,a?2:1,r+B/s,t)}Y+=se,te+=se+4}}r+=M/s}}))})})}),t}function eu(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function E4(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Ip(r,e,t,n){const s=gS(r);let i=0;i+=e;let a=0,o=0,l=0;for(;i<s.length;){a=0;do{if(i>=s.length)break;l=s[i++],a+=l}while(l===255);o=0;do{if(i>=s.length)break;l=s[i++],o+=l}while(l===255);const c=s.length-i;let u=i;if(o<c)i+=o;else if(o>c){_e.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(s[u++]===181){const f=dS(s,u);if(u+=2,f===49){const p=de(s,u);if(u+=4,p===1195456820){const h=s[u++];if(h===3){const g=s[u++],y=31&g,b=64&g,m=b?2+y*3:0,v=new Uint8Array(m);if(b){v[0]=g;for(let S=1;S<m;S++)v[S]=s[u++]}n.push({type:h,payloadType:a,pts:t,bytes:v})}}}}}else if(a===5&&o>16){const d=[];for(let h=0;h<16;h++){const g=s[u++].toString(16);d.push(g.length==1?"0"+g:g),(h===3||h===5||h===7||h===9)&&d.push("-")}const f=o-16,p=new Uint8Array(f);for(let h=0;h<f;h++)p[h]=s[u++];n.push({payloadType:a,pts:t,uuid:d.join(""),userData:Jt(p),userDataBytes:p})}}}function gS(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const s=e-t.length,i=new Uint8Array(s);let a=0;for(n=0;n<s;a++,n++)a===t[0]&&(a++,t.shift()),i[n]=r[a];return i}function w4(r){const e=r[0];let t="",n="",s=0,i=0,a=0,o=0,l=0,c=0;if(e===0){for(;it(r.subarray(c,c+1))!=="\0";)t+=it(r.subarray(c,c+1)),c+=1;for(t+=it(r.subarray(c,c+1)),c+=1;it(r.subarray(c,c+1))!=="\0";)n+=it(r.subarray(c,c+1)),c+=1;n+=it(r.subarray(c,c+1)),c+=1,s=de(r,12),i=de(r,16),o=de(r,20),l=de(r,24),c=28}else if(e===1){c+=4,s=de(r,c),c+=4;const d=de(r,c);c+=4;const f=de(r,c);for(c+=4,a=2**32*d+f,J_(a)||(a=Number.MAX_SAFE_INTEGER,_e.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=de(r,c),c+=4,l=de(r,c),c+=4;it(r.subarray(c,c+1))!=="\0";)t+=it(r.subarray(c,c+1)),c+=1;for(t+=it(r.subarray(c,c+1)),c+=1;it(r.subarray(c,c+1))!=="\0";)n+=it(r.subarray(c,c+1)),c+=1;n+=it(r.subarray(c,c+1)),c+=1}const u=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:s,presentationTime:a,presentationTimeDelta:i,eventDuration:o,id:l,payload:u}}function T4(r,...e){const t=e.length;let n=8,s=t;for(;s--;)n+=e[s].byteLength;const i=new Uint8Array(n);for(i[0]=n>>24&255,i[1]=n>>16&255,i[2]=n>>8&255,i[3]=n&255,i.set(r,4),s=0,n=8;s<t;s++)i.set(e[s],n),n+=e[s].byteLength;return i}function A4(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,s;n=0,s=new Uint8Array;let i;n>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),T4([112,115,115,104],new Uint8Array([n,0,0,0]),r,i,s,a,t)}function I4(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const s=new DataView(r,n),i=L4(s);e.push(i),n+=i.size}}return e}function L4(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const i=r.getUint32(8)>>>24;if(i!==0&&i!==1)return{offset:t,size:e};const a=r.buffer,o=Lt(new Uint8Array(a,t+12,16));let l=null,c=null,u=0;if(i===0)u=28;else{const f=r.getUint32(28);if(!f||n<32+f*16)return{offset:t,size:e};l=[];for(let p=0;p<f;p++)l.push(new Uint8Array(a,t+32+p*16,16));u=32+f*16}if(!u)return{offset:t,size:e};const d=r.getUint32(u);return e-32<d?{offset:t,size:e}:(c=new Uint8Array(a,t+u+4,d),{version:i,systemId:o,kids:l,data:c,offset:t,size:e})}const xS=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Ii={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Lp(r,e){const t=Ii[e];return!!t&&!!t[r.slice(0,4)]}function Ba(r,e,t=!0){return!r.split(",").some(n=>!Cp(n,e,t))}function Cp(r,e,t=!0){var n;const s=Jn(t);return(n=s==null?void 0:s.isTypeSupported(Ua(r,e)))!=null?n:!1}function Ua(r,e){return`${e}/mp4;codecs=${r}`}function A0(r){if(r){const e=r.substring(0,4);return Ii.video[e]}return 2}function lc(r){const e=xS();return r.split(",").reduce((t,n)=>{const i=e&&eu(n)?9:Ii.video[n];return i?(i*2+t)/(t?3:2):(Ii.audio[n]+t)/(t?2:1)},0)}const Xu={};function C4(r,e=!0){if(Xu[r])return Xu[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let s=0;s<t.length;s++){var n;if(Cp(t[s],"audio",e))return Xu[r]=t[s],t[s];if(t[s]==="mp3"&&(n=Jn(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const R4=/flac|opus|mp4a\.40\.34/i;function cc(r,e=!0){return r.replace(R4,t=>C4(t.toLowerCase(),e))}function k4(r,e){const t=[];if(r){const n=r.split(",");for(let s=0;s<n.length;s++)Lp(n[s],"video")||t.push(n[s])}return e&&t.push(e),t.join(",")}function gl(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(I0(r,"audio")||I0(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function I0(r,e){return Lp(r,e)&&Cp(r,e)}function _4(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function P4(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function L0(r){const e=Jn(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Kf(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const D4={supported:!0,powerEfficient:!0,smooth:!0},N4={supported:!1,smooth:!1,powerEfficient:!1},vS={supported:!0,configurations:[],decodingInfoResults:[D4]};function yS(r,e){return{supported:!1,configurations:e,decodingInfoResults:[N4],error:r}}function O4(r,e,t,n,s,i){const a=r.videoCodec,o=r.audioCodec?r.audioGroups:null,l=i==null?void 0:i.audioCodec,c=i==null?void 0:i.channels,u=c?parseInt(c):l?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((f,p)=>{if(p){const h=e.groups[p];if(!h)throw new Error(`Audio track group ${p} not found`);Object.keys(h.channels).forEach(g=>{f[g]=(f[g]||0)+h.channels[g]})}return f},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(f=>eu(f))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(s,8e6))||!!d&&X(u)&&Object.keys(d).some(f=>parseInt(f)>u)}function bS(r,e,t,n={}){const s=r.videoCodec;if(!s&&!r.audioCodec||!t)return Promise.resolve(vS);const i=[],a=M4(r),o=a.length,l=F4(r,e,o>0),c=l.length;for(let u=o||1*c||1;u--;){const d={type:"media-source"};if(o&&(d.video=a[u%o]),c){d.audio=l[u%c];const f=d.audio.bitrate;d.video&&f&&(d.video.bitrate-=f)}i.push(d)}if(s){const u=navigator.userAgent;if(s.split(",").some(d=>eu(d))&&xS())return Promise.resolve(yS(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${u})`),i))}return Promise.all(i.map(u=>{const d=$4(u);return n[d]||(n[d]=t.decodingInfo(u))})).then(u=>({supported:!u.some(d=>!d.supported),configurations:i,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:i,decodingInfoResults:[],error:u}))}function M4(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=SS(r),s=r.width||640,i=r.height||480,a=r.frameRate||30,o=r.videoRange.toLowerCase();return t?t.map(l=>{const c={contentType:Ua(P4(l),"video"),width:s,height:i,bitrate:n,framerate:a};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function F4(r,e,t){var n;const s=(n=r.audioCodec)==null?void 0:n.split(","),i=SS(r);return s&&r.audioGroups?r.audioGroups.reduce((a,o)=>{var l;const c=o?(l=e.groups[o])==null?void 0:l.tracks:null;return c?c.reduce((u,d)=>{if(d.groupId===o){const f=parseFloat(d.channels||"");s.forEach(p=>{const h={contentType:Ua(p,"audio"),bitrate:t?j4(p,i):i};f&&(h.channels=""+f),u.push(h)})}return u},a):a},[]):[]}function j4(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function SS(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function $4(r){let e="";const{audio:t,video:n}=r;if(n){const s=Kf(n.contentType);e+=`${s}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const s=Kf(t.contentType);e+=`${n?"_":""}${s}_c${t.channels}`}return e}const Wf=["NONE","TYPE-0","TYPE-1",null];function B4(r){return Wf.indexOf(r)>-1}const uc=["SDR","PQ","HLG"];function U4(r){return!!r&&uc.indexOf(r)>-1}var xl={No:"",Yes:"YES",v2:"v2"};function C0(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,s=n<e/2;return e&&s?t?xl.v2:xl.Yes:xl.No}class R0{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class za{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return k0(this._audioGroups,e)}hasSubtitleGroup(e){return k0(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function k0(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function z4(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function V4(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||uc.slice(0);const s=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:s&&z4(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const G4=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},je=(r,e)=>JSON.stringify(r,G4(e));function H4(r,e,t,n,s){const i=Object.keys(r),a=n==null?void 0:n.channels,o=n==null?void 0:n.audioCodec,l=s==null?void 0:s.videoCodec,c=a&&parseInt(a)===2;let u=!1,d=!1,f=1/0,p=1/0,h=1/0,g=1/0,y=0,b=[];const{preferHDR:m,allowedVideoRanges:v}=V4(e,s);for(let I=i.length;I--;){const T=r[i[I]];u||(u=T.channels[2]>0),f=Math.min(f,T.minHeight),p=Math.min(p,T.minFramerate),h=Math.min(h,T.minBitrate),v.filter(R=>T.videoRanges[R]>0).length>0&&(d=!0)}f=X(f)?f:0,p=X(p)?p:0;const S=Math.max(1080,f),E=Math.max(30,p);h=X(h)?h:t,t=Math.max(h,t),d||(e=void 0);const C=i.length>1;return{codecSet:i.reduce((I,T)=>{const w=r[T];if(T===I)return I;if(b=d?v.filter(R=>w.videoRanges[R]>0):[],C){if(w.minBitrate>t)return Lr(T,`min bitrate of ${w.minBitrate} > current estimate of ${t}`),I;if(!w.hasDefaultAudio)return Lr(T,"no renditions with default or auto-select sound found"),I;if(o&&T.indexOf(o.substring(0,4))%5!==0)return Lr(T,`audio codec preference "${o}" not found`),I;if(a&&!c){if(!w.channels[a])return Lr(T,`no renditions with ${a} channel sound found (channels options: ${Object.keys(w.channels)})`),I}else if((!o||c)&&u&&w.channels[2]===0)return Lr(T,"no renditions with stereo sound found"),I;if(w.minHeight>S)return Lr(T,`min resolution of ${w.minHeight} > maximum of ${S}`),I;if(w.minFramerate>E)return Lr(T,`min framerate of ${w.minFramerate} > maximum of ${E}`),I;if(!b.some(R=>w.videoRanges[R]>0))return Lr(T,`no variants with VIDEO-RANGE of ${je(b)} found`),I;if(l&&T.indexOf(l.substring(0,4))%5!==0)return Lr(T,`video codec preference "${l}" not found`),I;if(w.maxScore<y)return Lr(T,`max score of ${w.maxScore} < selected max of ${y}`),I}return I&&(lc(T)>=lc(I)||w.fragmentError>r[I].fragmentError)?I:(g=w.minIndex,y=w.maxScore,T)},void 0),videoRanges:b,preferHDR:m,minFramerate:p,minBitrate:h,minIndex:g}}function Lr(r,e){_e.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function ES(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const s=t.channels||"2";return n.channels[s]=(n.channels[s]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function K4(r,e,t,n){return r.slice(t,n+1).reduce((s,i,a)=>{if(!i.codecSet)return s;const o=i.audioGroups;let l=s[i.codecSet];l||(s[i.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,i.bitrate);const c=Math.min(i.height,i.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,i.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,i.score),l.fragmentError+=i.fragmentError,l.videoRanges[i.videoRange]=(l.videoRanges[i.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const d=e.groups[u];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(f=>{l.channels[f]=(l.channels[f]||0)+d.channels[f]}))}),s},{})}function _0(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:s,audioCodec:i}=r;return{lang:e,assocLang:t,characteristics:n,channels:s,audioCodec:i}}function $r(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const s=e[n];if(Ss(r,s,t))return n}return-1}function Ss(r,e,t){const{groupId:n,name:s,lang:i,assocLang:a,default:o}=r,l=r.forced;return(n===void 0||e.groupId===n)&&(s===void 0||e.name===s)&&(i===void 0||W4(i,e.lang))&&(i===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in r)||q4(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function W4(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function q4(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(s=>n.indexOf(s)===-1)}function ds(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Y4(r,e,t,n,s){const i=e[n],o=e.reduce((f,p,h)=>{const g=p.uri;return(f[g]||(f[g]=[])).push(h),f},{})[i.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=i.videoRange,c=i.frameRate,u=i.codecSet.substring(0,4),d=P0(e,n,f=>{if(f.videoRange!==l||f.frameRate!==c||f.codecSet.substring(0,4)!==u)return!1;const p=f.audioGroups,h=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return $r(r,h,s)>-1});return d>-1?d:P0(e,n,f=>{const p=f.audioGroups,h=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return $r(r,h,s)>-1})}function P0(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function dc(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class X4 extends fr{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:s,partCurrent:i,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!s||!l)return;const c=performance.now(),u=i?i.stats:s.stats,d=i?i.duration:s.duration,f=c-u.loading.start,p=a.minAutoLevel,h=s.level,g=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||h<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const y=g>-1&&g!==h,b=!!t||y;if(!b&&(l.paused||!l.playbackRate||!l.readyState))return;const m=a.mainForwardBufferInfo;if(!b&&m===null)return;const v=this.bwEstimator.getEstimateTTFB(),S=Math.abs(l.playbackRate);if(f<=Math.max(v,1e3*(d/(S*2))))return;const E=m?m.len/S:0,C=u.loading.first?u.loading.first-u.loading.start:-1,L=u.loaded&&C>-1,I=this.getBwEstimate(),T=a.levels,w=T[h],R=Math.max(u.loaded,Math.round(d*(s.bitrate||w.averageBitrate)/8));let _=L?f-C:f;_<1&&L&&(_=Math.min(f,u.loaded*8/I));const k=L?u.loaded*1e3/_:0,N=v/1e3,M=k?(R-u.loaded)/k:R*8/I+N;if(M<=E)return;const O=k?k*8:I,j=((n=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,P=this.hls.config.abrBandWidthUpFactor;let F=Number.POSITIVE_INFINITY,B;for(B=h-1;B>p;B--){const ee=T[B].maxBitrate,te=!T[B].details||j;if(F=this.getTimeToLoadFrag(N,O,d*ee,te),F<Math.min(E,d+N))break}if(F>=M||F>d*10)return;L?this.bwEstimator.sample(f-Math.min(v,C),u.loaded):this.bwEstimator.sampleTTFB(f);const $=T[B].maxBitrate;this.getBwEstimate()*P>$&&this.resetEstimator($);const G=this.findBestLevel($,p,B,0,E,1,1);G>-1&&(B=G),this.warn(`Fragment ${s.sn}${i?" part "+i.index:""} of level ${h} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${E.toFixed(3)} s
      Estimated load time for current fragment: ${M.toFixed(3)} s
      Estimated load time for down switch fragment: ${F.toFixed(3)} s
      TTFB estimate: ${C|0} ms
      Current BW estimate: ${X(I)?I|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${B} @ ${$|0} bps`),a.nextLoadLevel=a.nextAutoLevel=B,this.clearTimer();const Y=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===B&&B>0){const ee=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${B>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${ee.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,B>p){let te=this.findBestLevel(this.hls.levels[p].bitrate,p,B,0,ee,1,1);te===-1&&(te=p),this.hls.nextLoadLevel=this.hls.nextAutoLevel=te,this.resetEstimator(this.hls.levels[te].bitrate)}}};y||M>F*2?Y():this.timer=self.setInterval(Y,F*1e3),a.trigger(A.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:i,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new t4(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.FRAG_LOADING,this.onFragLoading,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this),e.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(A.LEVEL_LOADED,this.onLevelLoaded,this),e.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(A.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.FRAG_LOADING,this.onFragLoading,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this),e.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(A.LEVEL_LOADED,this.onLevelLoaded,this),e.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(A.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(A.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var s;this.fragCurrent=n,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case z.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:s,partCurrent:i}=this;if(n&&s&&n.sn===s.sn&&n.level===s.level){const a=performance.now(),o=i?i.stats:n.stats,l=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,n,s){const i=e+n/t,a=s?e+this.lastLevelLoadSec:0;return i+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:s}=t.stats,i=s.end-s.first;X(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const s=n?n.stats:t.stats;if(t.type===Z.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const i=n?n.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+s.loaded,l=(a.loaded?a.loaded.duration:0)+i;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const i={stats:s,frag:t,part:n,id:t.type};this.onFragBuffered(A.FRAG_BUFFERED,i),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:s}=t,i=s!=null&&s.stats.loaded?s.stats:n.stats;if(i.aborted||this.ignoreFragment(n))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Z.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,s,1,1);if(i>-1)return i;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const i=n&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,i)&&a[e].loadError<=a[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:s,config:i,minAutoLevel:a}=n,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;if(c){const y=this.findBestLevel(l,a,s,c,0,u,d);if(y>=0)return this.rebufferNotice=-1,y}let f=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay;if(!c){const y=this.bitrateTestDelay;y&&(f=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-y,this.info(`bitrate test took ${Math.round(1e3*y)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),u=d=1)}const p=this.findBestLevel(l,a,s,c,f,u,d);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`)),p>-1)return p;const h=n.levels[a],g=n.loadLevelObj;return g&&(h==null?void 0:h.bitrate)<g.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,s,i,a,o){var l;const c=s+i,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:f,partCurrent:p}=this,{levels:h,allAudioTracks:g,loadLevel:y,config:b}=this.hls;if(h.length===1)return 0;const m=h[d],v=!!((l=this.hls.latestLevelDetails)!=null&&l.live),S=y===-1||u===-1;let E,C="SDR",L=(m==null?void 0:m.frameRate)||0;const{audioPreference:I,videoPreference:T}=b,w=this.audioTracksByGroup||(this.audioTracksByGroup=ES(g));let R=-1;if(S){if(this.firstSelection!==-1)return this.firstSelection;const O=this.codecTiers||(this.codecTiers=K4(h,w,t,n)),j=H4(O,C,e,I,T),{codecSet:P,videoRanges:F,minFramerate:B,minBitrate:$,minIndex:G,preferHDR:Y}=j;R=G,E=P,C=Y?F[F.length-1]:F[0],L=B,e=Math.max(e,$),this.log(`picked start tier ${je(j)}`)}else E=m==null?void 0:m.codecSet,C=m==null?void 0:m.videoRange;const _=p?p.duration:f?f.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,N=[];for(let O=n;O>=t;O--){var M;const j=h[O],P=O>d;if(!j)continue;if(b.useMediaCapabilities&&!j.supportedResult&&!j.supportedPromise){const te=navigator.mediaCapabilities;typeof(te==null?void 0:te.decodingInfo)=="function"&&O4(j,w,C,L,e,I)?(j.supportedPromise=bS(j,w,te,this.supportedCache),j.supportedPromise.then(se=>{if(!this.hls)return;j.supportedResult=se;const we=this.hls.levels,le=we.indexOf(j);se.error?this.warn(`MediaCapabilities decodingInfo error: "${se.error}" for level ${le} ${je(se)}`):se.supported?se.decodingInfoResults.some(he=>he.smooth===!1||he.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${le} not smooth or powerEfficient: ${je(se)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${le} ${je(se)}`),le>-1&&we.length>1&&(this.log(`Removing unsupported level ${le}`),this.hls.removeLevel(le),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(se=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${se}`)})):j.supportedResult=vS}if((E&&j.codecSet!==E||C&&j.videoRange!==C||P&&L>j.frameRate||!P&&L>0&&L<j.frameRate||(M=j.supportedResult)!=null&&(M=M.decodingInfoResults)!=null&&M.some(te=>te.smooth===!1))&&(!S||O!==R)){N.push(O);continue}const F=j.details,B=(p?F==null?void 0:F.partTarget:F==null?void 0:F.averagetargetduration)||_;let $;P?$=o*e:$=a*e;const G=_&&s>=_*2&&i===0?j.averageBitrate:j.maxBitrate,Y=this.getTimeToLoadFrag(k,$,G*B,F===void 0);if($>=G&&(O===u||j.loadError===0&&j.fragmentError===0)&&(Y<=k||!X(Y)||v&&!this.bitrateTestDelay||Y<c)){const te=this.forcedAutoLevel;return O!==y&&(te===-1||te!==y)&&(N.length&&this.trace(`Skipped level(s) ${N.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${h[N[0]].codecs}" ${h[N[0]].videoRange}; not compatible with "${E}" ${C}`),this.info(`switch candidate:${d}->${O} adjustedbw(${Math.round($)})-bitrate=${Math.round($-G)} ttfb:${k.toFixed(1)} avgDuration:${B.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Y.toFixed(1)} firstSelection:${S} codecSet:${j.codecSet} videoRange:${j.videoRange} hls.loadLevel:${y}`)),S&&(this.firstSelection=O),O}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const wS={search:function(r,e){let t=0,n=r.length-1,s=null,i=null;for(;t<=n;){s=(t+n)/2|0,i=r[s];const a=e(i);if(a>0)t=s+1;else if(a<0)n=s-1;else return i}return null}};function Q4(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!X(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const s=r[r.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let i=0;i<r.length;++i){const a=r[i];if(J4(e,t,a))return a}return null}function Ps(r,e,t=0,n=0,s=.005){let i=null;if(r){i=e[1+r.sn-e[0].sn]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),i&&r.level!==i.level&&i.end<=r.end&&(i=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(i=e[0]);if(i&&((!r||r.level===i.level)&&D0(t,n,i)===0||Z4(i,r,Math.min(s,n))))return i;const a=wS.search(e,D0.bind(null,t,n));return a&&(a!==r||!i)?a:i}function Z4(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((s,i)=>(i[0]==="INF"&&(s+=parseFloat(i[1])),s),t);return r.start<=n}return!1}function D0(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function J4(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function TS(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:s}=r;s&&(n=n.concat(s));let i;return wS.search(n,a=>a.cc<e?1:a.cc>e?-1:(i=a,a.end<=t?1:a.start>t?-1:0)),i||null}return null}function fc(r){switch(r.details){case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_TIMEOUT:case z.LEVEL_LOAD_TIMEOUT:case z.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function AS(r){return r.details.startsWith("key")}function IS(r){return AS(r)&&!!r.frag&&!r.frag.decryptdata}function N0(r,e){const t=fc(e);return r.default[`${t?"timeout":"error"}Retry`]}function Rp(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function O0(r){return ke(ke({},r),{errorRetry:null,timeoutRetry:null})}function hc(r,e,t,n){if(!r)return!1;const s=n==null?void 0:n.code,i=e<r.maxNumRetry&&(eP(s)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,i):i}function eP(r){return qf(r)||!!r&&(r<400||r>499)}function qf(r){return r===0&&navigator.onLine===!1}var pt={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Kt={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class tP extends fr{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(A.ERROR,this.onError,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(A.ERROR,this.onError,this),e.off(A.ERROR,this.onErrorOut,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Z.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const s=e.audioGroups;if(s)return this.hls.allAudioTracks.filter(a=>s.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const s=this.hls,i=t.context;switch(t.details){case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case z.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=fi();return}case z.FRAG_GAP:case z.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=pt.SendAlternateToPenaltyBox;return}case z.LEVEL_EMPTY_ERROR:case z.LEVEL_PARSING_ERROR:{var a;const l=t.parent===Z.MAIN?t.level:s.loadLevel;t.details===z.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l))}return;case z.LEVEL_LOAD_ERROR:case z.LEVEL_LOAD_TIMEOUT:typeof(i==null?void 0:i.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level));return;case z.AUDIO_TRACK_LOAD_ERROR:case z.AUDIO_TRACK_LOAD_TIMEOUT:case z.SUBTITLE_LOAD_ERROR:case z.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const l=s.loadLevelObj;if(l&&(i.type===Se.AUDIO_TRACK&&l.hasAudioGroup(i.groupId)||i.type===Se.SUBTITLE_TRACK&&l.hasSubtitleGroup(i.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=pt.SendAlternateToPenaltyBox,t.errorAction.flags=Kt.MoveAllAlternatesMatchingHost;return}}return;case z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:pt.SendAlternateToPenaltyBox,flags:Kt.MoveAllAlternatesMatchingHDCP};return;case z.KEY_SYSTEM_SESSION_UPDATE_FAILED:case z.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case z.KEY_SYSTEM_NO_SESSION:t.errorAction={action:pt.SendAlternateToPenaltyBox,flags:Kt.MoveAllAlternatesMatchingKey};return;case z.BUFFER_ADD_CODEC_ERROR:case z.REMUX_ALLOC_ERROR:case z.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:s.loadLevel)}return;case z.INTERNAL_EXCEPTION:case z.BUFFER_APPENDING_ERROR:case z.BUFFER_FULL_ERROR:case z.LEVEL_SWITCH_ERROR:case z.BUFFER_STALLED_ERROR:case z.BUFFER_SEEK_OVER_HOLE:case z.BUFFER_NUDGE_ON_STALL:t.errorAction=fi();return}t.type===re.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=fi())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,s=N0(n.config.playlistLoadPolicy,e),i=this.playlistError++;if(hc(s,i,fc(e),e.response))return{action:pt.RetryRequest,flags:Kt.None,retryConfig:s,retryCount:i};const o=this.getLevelSwitchAction(e,t);return s&&(o.retryConfig=s,o.retryCount=i),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),s=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:a}=t.config,o=N0(AS(e)?a:i,e),l=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(s&&(e.details!==z.FRAG_GAP&&s.fragmentError++,!IS(e)&&hc(o,l,fc(e),e.response)))return{action:pt.RetryRequest,flags:Kt.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const s=this.hls.levels[t];if(s){var i,a;const c=e.details;s.loadError++,c===z.BUFFER_APPEND_ERROR&&s.fragmentError++;let u=-1;const{levels:d,loadLevel:f,minAutoLevel:p,maxAutoLevel:h}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const g=(i=e.frag)==null?void 0:i.type,b=(g===Z.AUDIO&&c===z.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===z.BUFFER_ADD_CODEC_ERROR||c===z.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:C})=>s.audioCodec!==C),v=e.sourceBufferName==="video"&&(c===z.BUFFER_ADD_CODEC_ERROR||c===z.BUFFER_APPEND_ERROR)&&d.some(({codecSet:C,audioCodec:L})=>s.codecSet!==C&&s.audioCodec===L),{type:S,groupId:E}=(a=e.context)!=null?a:{};for(let C=d.length;C--;){const L=(C+f)%d.length;if(L!==f&&L>=p&&L<=h&&d[L].loadError===0){var o,l;const I=d[L];if(c===z.FRAG_GAP&&g===Z.MAIN&&e.frag){const T=d[L].details;if(T){const w=Ps(e.frag,T.fragments,e.frag.start);if(w!=null&&w.gap)continue}}else{if(S===Se.AUDIO_TRACK&&I.hasAudioGroup(E)||S===Se.SUBTITLE_TRACK&&I.hasSubtitleGroup(E))continue;if(g===Z.AUDIO&&(o=s.audioGroups)!=null&&o.some(T=>I.hasAudioGroup(T))||g===Z.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(T=>I.hasSubtitleGroup(T))||b&&s.audioCodec===I.audioCodec||v&&s.codecSet===I.codecSet||!b&&s.codecSet!==I.codecSet)continue}u=L;break}}if(u>-1&&n.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:pt.SendAlternateToPenaltyBox,flags:Kt.None,nextAutoLevel:u}}return{action:pt.SendAlternateToPenaltyBox,flags:Kt.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case pt.DoNothing:break;case pt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==z.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:s}=n,i=n.nextAutoLevel;switch(s){case Kt.None:this.switchLevel(e,i);break;case Kt.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),c=t.levels[l],u=c==null?void 0:c.attrs["HDCP-LEVEL"];if(n.hdcpLevel=u,u==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(u){t.maxHdcpLevel=Wf[Wf.indexOf(u)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Kt.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const c=this.hls.levels,u=c.length;for(let f=u;f--;)if(this.variantHasKey(c[f],l)){var a,o;this.log(`Banned key found in level ${f} (${c[f].bitrate}bps) or audio group "${(a=c[f].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${Lt(l.keyId||[])}`),c[f].fragmentError++,c[f].loadError++,this.log(`Removing level ${f} with key error (${e.error})`),this.hls.removeLevel(f)}const d=e.frag;if(this.hls.levels.length<u)n.resolved=!0;else if(d&&d.type!==Z.MAIN){const f=d.decryptdata;f&&!l.matches(f)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===z.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=Kf(e.mimeType),s=this.hls.levels;for(let i=s.length;i--;)s[i][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${i} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(i))}}}function fi(r){const e={action:pt.DoNothing,flags:Kt.None};return r&&(e.resolved=!0),e}var ot={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class rP{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.BUFFER_APPENDED,this.onBufferAppended,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.BUFFER_APPENDED,this.onBufferAppended,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let s=n.length;s--;){const i=n[s];if(!i)break;if(i.start<=e&&e<=i.end&&i.loaded)return i}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:s}=this,i=Object.keys(s);for(let a=i.length;a--;){const o=s[i[a]];if((o==null?void 0:o.body.type)===t&&(!n||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,n,s,i){this.timeRanges&&(this.timeRanges[e]=t);const a=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||i)){l.body.type===n&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(u=>{const d=!this.isTimeBuffered(u.startPTS,u.endPTS,t);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,s=$s(n),i=this.fragments[s];if(!i||i.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(o=>{const l=n.elementaryStreams[o];if(!l)return;const c=t[o],u=a||l.partial===!0;i.range[o]=this.getBufferedTimes(n,e.part,u,c)}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),jo(i)||this.removeParts(n.sn-1,n.type)):this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=M0(n,s=>s.fragment.sn>=e))}fragBuffered(e,t){const n=$s(e);let s=this.fragments[n];!s&&t&&(s=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,n,s){const i={time:[],partial:n},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<s.length;u++){const d=s.start(u)-this.bufferPadding,f=s.end(u)+this.bufferPadding;if(c>=d&&l<=f){i.time.push({startPTS:Math.max(a,s.start(u)),endPTS:Math.min(o,s.end(u))});break}else if(a<f&&o>d){const p=Math.max(a,s.start(u)),h=Math.min(o,s.end(u));h>p&&(i.partial=!0,i.time.push({startPTS:p,endPTS:h}))}else if(o<=d)break}return i}getPartialFragment(e){let t=null,n,s,i,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&jo(u)&&(s=u.body.start-o,i=u.body.end+o,e>=s&&e<=i&&(n=Math.min(e-s,i-e),a<=n&&(t=u.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||jo(t))}getState(e){const t=$s(e),n=this.fragments[t];return n?n.buffered?jo(n)?ot.PARTIAL:ot.OK:ot.APPENDING:ot.NOT_LOADED}isTimeBuffered(e,t,n){let s,i;for(let a=0;a<n.length;a++){if(s=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=s&&t<=i)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,s=t.part?null:t,i=$s(n);this.fragments[i]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:s,timeRanges:i,type:a}=t;if(n.sn==="initSegment")return;const o=n.type;if(s){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(s)}this.timeRanges=i;const l=i[a];this.detectEvictedFragments(a,l,o,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=$s(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let s=n.length;s--;){const i=t[n[s]];if((i==null?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==n||s&&!l.gap||l.start<t&&l.end>e&&(o.buffered||i)&&this.removeFragment(l)})}removeFragment(e){const t=$s(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const s=e.sn;this.activePartLists[e.type]=M0(n,i=>i.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function jo(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function $s(r){return`${r.type}_${r.level}_${r.sn}`}function M0(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var es={cbc:0,ctr:1};class nP{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case es.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case es.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function sP(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class iP{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let s=0;s<4;s++)n[s]=t.getUint32(s*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,s=n[0],i=n[1],a=n[2],o=n[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],f=l[3],p=new Uint32Array(256);let h=0,g=0,y=0;for(y=0;y<256;y++)y<128?p[y]=y<<1:p[y]=y<<1^283;for(y=0;y<256;y++){let b=g^g<<1^g<<2^g<<3^g<<4;b=b>>>8^b&255^99,e[h]=b,t[b]=h;const m=p[h],v=p[m],S=p[v];let E=p[b]*257^b*16843008;s[h]=E<<24|E>>>8,i[h]=E<<16|E>>>16,a[h]=E<<8|E>>>24,o[h]=E,E=S*16843009^v*65537^m*257^h*16843008,c[b]=E<<24|E>>>8,u[b]=E<<16|E>>>16,d[b]=E<<8|E>>>24,f[b]=E,h?(h=m^p[p[p[S^m]]],g^=p[p[g]]):h=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,s=0;for(;s<t.length&&n;)n=t[s]===this.key[s],s++;if(n)return;this.key=t;const i=this.keySize=t.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const a=this.ksRows=(i+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,f=this.rcon,p=this.invSubMix,h=p[0],g=p[1],y=p[2],b=p[3];let m,v;for(o=0;o<a;o++){if(o<i){m=c[o]=t[o];continue}v=m,o%i===0?(v=v<<8|v>>>24,v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[v&255],v^=f[o/i|0]<<24):i>6&&o%i===4&&(v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[v&255]),c[o]=m=(c[o-i]^v)>>>0}for(l=0;l<a;l++)o=a-l,l&3?v=c[o]:v=c[o-4],l<4||o<=4?u[l]=v:u[l]=h[d[v>>>24]]^g[d[v>>>16&255]]^y[d[v>>>8&255]]^b[d[v&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const s=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],f=this.uint8ArrayToUint32Array_(n);let p=f[0],h=f[1],g=f[2],y=f[3];const b=new Int32Array(e),m=new Int32Array(b.length);let v,S,E,C,L,I,T,w,R,_,k,N,M,O;const j=this.networkToHostOrderSwap;for(;t<b.length;){for(R=j(b[t]),_=j(b[t+1]),k=j(b[t+2]),N=j(b[t+3]),L=R^i[0],I=N^i[1],T=k^i[2],w=_^i[3],M=4,O=1;O<s;O++)v=l[L>>>24]^c[I>>16&255]^u[T>>8&255]^d[w&255]^i[M],S=l[I>>>24]^c[T>>16&255]^u[w>>8&255]^d[L&255]^i[M+1],E=l[T>>>24]^c[w>>16&255]^u[L>>8&255]^d[I&255]^i[M+2],C=l[w>>>24]^c[L>>16&255]^u[I>>8&255]^d[T&255]^i[M+3],L=v,I=S,T=E,w=C,M=M+4;v=a[L>>>24]<<24^a[I>>16&255]<<16^a[T>>8&255]<<8^a[w&255]^i[M],S=a[I>>>24]<<24^a[T>>16&255]<<16^a[w>>8&255]<<8^a[L&255]^i[M+1],E=a[T>>>24]<<24^a[w>>16&255]<<16^a[L>>8&255]<<8^a[I&255]^i[M+2],C=a[w>>>24]<<24^a[L>>16&255]<<16^a[I>>8&255]<<8^a[T&255]^i[M+3],m[t]=j(v^p),m[t+1]=j(C^h),m[t+2]=j(E^g),m[t+3]=j(S^y),p=R,h=_,g=k,y=N,t=t+4}return m.buffer}}class aP{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=oP(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function oP(r){switch(r){case es.cbc:return"AES-CBC";case es.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const lP=16;class kp{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?sP(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,s){return this.useSoftware?new Promise((i,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,n,s);const l=this.flush();l?i(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,s)}softwareDecrypt(e,t,n,s){const{currentIV:i,currentResult:a,remainderData:o}=this;if(s!==es.cbc||t.byteLength!==16)return _e.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=ur(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;i&&(n=i);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new iP),c.expandKey(t);const u=a;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,n,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,s));this.key=t,this.fastAesKey=new aP(this.subtle,t,s)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new nP(this.subtle,new Uint8Array(n),s).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(_e.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,s)))}onWebCryptoError(e,t,n,s){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,s);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%lP;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(_e.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const F0=Math.pow(2,17);class cP{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new rn({type:re.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(h=>h[0]==="GAP")){l($0(e));return}else e.gap=!1;const c=this.loader=i?new i(s):new a(s),u=j0(e);e.loader=c;const d=O0(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:F0};e.stats=c.stats;const p={onSuccess:(h,g,y,b)=>{this.resetLoader(e,c);let m=h.data;y.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(m.slice(0,16)),m=m.slice(16)),o({frag:e,part:null,payload:m,networkDetails:b})},onError:(h,g,y,b)=>{this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ke({url:n,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:y,stats:b}))},onAbort:(h,g,y)=>{this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:y,stats:h}))},onTimeout:(h,g,y)=>{this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:y,stats:h}))}};t&&(p.onProgress=(h,g,y,b)=>t({frag:e,part:null,payload:y,networkDetails:b})),c.load(u,f,p)})}loadPart(e,t,n){this.abort();const s=this.config,i=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l($0(e,t));return}const c=this.loader=i?new i(s):new a(s),u=j0(e,t);e.loader=c;const d=O0(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:F0};t.stats=c.stats,c.load(u,f,{onSuccess:(p,h,g,y)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const b={frag:e,part:t,payload:p.data,networkDetails:y};n(b),o(b)},onError:(p,h,g,y)=>{this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ke({url:u.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:y}))},onAbort:(p,h,g)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,h,g)=>{this.resetLoader(e,c),l(new rn({type:re.NETWORK_ERROR,details:z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:p}))}})})}updateStatsFromPart(e,t){const n=e.stats,s=t.stats,i=s.total;if(n.loaded+=s.loaded,i){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/i),l),d=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=s.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function j0(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,i=t.byteRangeEndOffset;if(X(s)&&X(i)){var a;let o=s,l=i;if(r.sn==="initSegment"&&uP((a=r.decryptdata)==null?void 0:a.method)){const c=i-s;c%16&&(l=i+(16-c%16)),s!==0&&(n.resetIV=!0,o=s-16)}n.rangeStart=o,n.rangeEnd=l}return n}function $0(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:re.MEDIA_ERROR,details:z.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new rn(n)}function uP(r){return r==="AES-128"||r==="AES-256"}class rn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class LS extends fr{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class _p{constructor(e,t,n,s=0,i=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=$o(),this.buffering={audio:$o(),video:$o(),audiovideo:$o()},this.level=e,this.sn=t,this.id=n,this.size=s,this.part=i,this.partial=a}}function $o(){return{start:0,executeStart:0,executeEnd:0,end:0}}const B0={length:0,start:()=>0,end:()=>0};class fe{static isBuffered(e,t){if(e){const n=fe.getBuffered(e);for(let s=n.length;s--;)if(t>=n.start(s)&&t<=n.end(s))return!0}return!1}static bufferedRanges(e){if(e){const t=fe.getBuffered(e);return fe.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const s=fe.bufferedRanges(e);if(s.length)return fe.bufferedInfo(s,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((u,d)=>u.start-d.start||d.end-u.end);let s=-1,i=[];if(n)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(s=u);const d=i.length;if(d){const f=i[d-1].end;e[u].start-f<n?e[u].end>f&&(i[d-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}else i=e;let a=0,o,l=t,c=t;for(let u=0;u<i.length;u++){const d=i[u].start,f=i[u].end;if(s===-1&&t>=d&&t<=f&&(s=u),t+n>=d&&t<f)l=d,c=f,a=c-t;else if(t+n<d){o=d;break}}return{len:a,start:l||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||B0}catch(t){return _e.log("failed to get media.buffered",t),B0}}}const CS=/\{\$([a-zA-Z0-9-_]+)\}/g;function U0(r){return CS.test(r)}function Yf(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(CS,n=>{const s=n.substring(2,n.length-1),i=t==null?void 0:t[s];return i===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),n):i})}return e}function z0(r,e,t){let n=r.variableList;n||(r.variableList=n={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(s))i=a.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=e.NAME,i=e.VALUE;s in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=i||""}function dP(r,e,t){const n=e.IMPORT;if(t&&n in t){let s=r.variableList;s||(r.variableList=s={}),s[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const fP=/^(\d+)x(\d+)$/,V0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ke{constructor(e,t){typeof e=="string"&&(e=Ke.parseAttrList(e,t)),Me(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)n[s]=parseInt(t.slice(s*2,s*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((s,i)=>(s[i.toLowerCase()]=!0,s),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=fP.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const s={},i='"';for(V0.lastIndex=0;(n=V0.exec(e))!==null;){const a=n[1].trim();let o=n[2];const l=o.indexOf(i)===0&&o.lastIndexOf(i)===o.length-1;let c=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(l||c))o=Yf(t,o);else if(!c&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":_e.warn(`${e}: attribute ${a} is missing quotes`)}s[a]=o}return s}}const hP="com.apple.hls.interstitial";function pP(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function mP(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class RS{constructor(e,t,n=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(s=t==null?void 0:t.tagOrder)!=null?s:n,t){const i=t.attr;for(const a in i)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==i[a]){_e.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Me(new Ke({}),i,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);X(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(_e.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(X(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===hP}get isValid(){return!!this.id&&!this._badValueForSameId&&X(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const gP=10;class xP{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?X(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||gP}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function pc(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function G0(r,e){return!r&&!e?!0:!r||!e?!1:pc(r,e)}function hi(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function Pp(r){switch(r){case"AES-128":case"AES-256":return es.cbc;case"AES-256-CTR":return es.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function Dp(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function Xf(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function vP(r){const e=Xf(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function kS(r){const e=function(n,s,i){const a=n[s];n[s]=n[i],n[i]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function _S(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),s=n[n.length-1].split(",");if(s.length===2){const i=s[0]==="base64",a=s[1];i?(n.splice(-1,1),t=Dp(a)):t=vP(a)}}return t}const mc=typeof self<"u"?self:void 0;var qe={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},mt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function vl(r){switch(r){case mt.FAIRPLAY:return qe.FAIRPLAY;case mt.PLAYREADY:return qe.PLAYREADY;case mt.WIDEVINE:return qe.WIDEVINE;case mt.CLEARKEY:return qe.CLEARKEY}}function Qu(r){switch(r){case qe.FAIRPLAY:return mt.FAIRPLAY;case qe.PLAYREADY:return mt.PLAYREADY;case qe.WIDEVINE:return mt.WIDEVINE;case qe.CLEARKEY:return mt.CLEARKEY}}function ta(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[qe.FAIRPLAY,qe.WIDEVINE,qe.PLAYREADY,qe.CLEARKEY].filter(s=>!!e[s]):[];return!n[qe.WIDEVINE]&&t&&n.push(qe.WIDEVINE),n}const PS=function(r){return mc!=null&&(r=mc.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function yP(r,e,t,n){let s;switch(r){case qe.FAIRPLAY:s=["cenc","sinf"];break;case qe.WIDEVINE:case qe.PLAYREADY:s=["cenc"];break;case qe.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return bP(s,e,t,n)}function bP(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs=${i}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(i=>({contentType:`video/mp4; codecs=${i}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function SP(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function DS(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=Dp(o).subarray(0,16);return kS(l),l}}return null}let Bo={};class Es{static clearKeyUriToKeyIdMap(){Bo={}}static setKeyIdForUri(e,t){Bo[e]=t}constructor(e,t,n,s=[1],i=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!hi(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(oS(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&pc(e.keyFormatVersions,this.keyFormatVersions)&&G0(e.iv,this.iv)&&G0(e.keyId,this.keyId)}isSupported(){if(this.method){if(hi(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case mt.FAIRPLAY:case mt.WIDEVINE:case mt.PLAYREADY:case mt.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(hi(this.method)){let i=this.iv;return i||(typeof e!="number"&&(_e.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),i=wP(e)),new Es(this.method,this.uri,"identity",this.keyFormatVersions,i)}if(this.keyId){const i=Bo[this.uri];if(i&&!pc(this.keyId,i)&&Es.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=_S(this.uri);if(n)switch(this.keyFormat){case mt.WIDEVINE:if(this.pssh=n,!this.keyId){const i=I4(n.buffer);if(i.length){var s;const a=i[0];this.keyId=(s=a.kids)!=null&&s.length?a.kids[0]:null}}this.keyId||(this.keyId=H0(t));break;case mt.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=A4(i,null,n),this.keyId=DS(n);break}default:{let i=n.subarray(0,16);if(i.length!==16){const a=new Uint8Array(16);a.set(i,16-i.length),i=a}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i;i=EP(t),i||(i=H0(t),i||(i=Bo[this.uri])),i&&(this.keyId=i,Es.setKeyIdForUri(this.uri,i))}return this}}function EP(r){const e=r==null?void 0:r[mt.WIDEVINE];return e?e.keyId:null}function H0(r){const e=r==null?void 0:r[mt.PLAYREADY];if(e){const t=_S(e.uri);if(t)return DS(t)}return null}function wP(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const K0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,W0=/#EXT-X-MEDIA:(.*)/g,TP=/^#EXT(?:INF|-X-TARGETDURATION):/m,Zu=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),AP=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Br{static findGroup(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(s.id===t)return s}}static resolve(e,t){return Tp.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return TP.test(e)}static parseMasterPlaylist(e,t){const n=U0(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},i=[];if(K0.lastIndex=0,!e.startsWith("#EXTM3U"))return s.playlistParsingError=new Error("no EXTM3U delimiter"),s;let a;for(;(a=K0.exec(e))!=null;)if(a[1]){var o;const c=new Ke(a[1],s),u=Yf(s,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:Br.resolve(u,t)},f=c.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),X0(c.CODECS,d);const p=c["SUPPLEMENTAL-CODECS"];p&&(d.supplemental={},X0(p,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||i.push(d),s.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new Ke(u,s),f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=q0(u,t,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):_e.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new Ke(u,s);z0(s,d,t)}break}case"CONTENT-STEERING":{const d=new Ke(u,s);s.contentSteering={uri:Br.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Y0(u);break}}}const l=i.length>0&&i.length<s.levels.length;return s.levels=l?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,n){let s;const i={},a=n.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(W0.lastIndex=0;(s=W0.exec(e))!==null;){const c=new Ke(s[1],n),u=c.TYPE;if(u){const d=o[u],f=i[u]||[];i[u]=f;const p=c.LANGUAGE,h=c["ASSOC-LANGUAGE"],g=c.CHANNELS,y=c.CHARACTERISTICS,b=c["INSTREAM-ID"],m={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||p||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:p,url:c.URI?Br.resolve(c.URI,t):""};if(h&&(m.assocLang=h),g&&(m.channels=g),y&&(m.characteristics=y),b&&(m.instreamId=b),d!=null&&d.length){const v=Br.findGroup(d,m.groupId)||d[0];Q0(m,v,"audioCodec"),Q0(m,v,"textCodec")}f.push(m)}}return i}static parseLevelPlaylist(e,t,n,s,i,a){var o;const l={url:t},c=new xP(t),u=c.fragments,d=[];let f=null,p=0,h=0,g=0,y=0,b=0,m=null,v=new qu(s,l),S,E,C,L=-1,I=!1,T=null,w;if(Zu.lastIndex=0,c.m3u8=e,c.hasVariableRefs=U0(e),((o=Zu.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(S=Zu.exec(e))!==null;){I&&(I=!1,v=new qu(s,l),v.playlistOffset=g,v.setStart(g),v.sn=p,v.cc=y,b&&(v.bitrate=b),v.level=n,f&&(v.initSegment=f,f.rawProgramDateTime&&(v.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),T&&(v.setByteRange(T),T=null)));const N=S[1];if(N){v.duration=parseFloat(N);const M=(" "+S[2]).slice(1);v.title=M||null,v.tagList.push(M?["INF",N,M]:["INF",N])}else if(S[3]){if(X(v.duration)){v.playlistOffset=g,v.setStart(g),C&&J0(v,C,c),v.sn=p,v.level=n,v.cc=y,u.push(v);const M=(" "+S[3]).slice(1);v.relurl=Yf(c,M),Qf(v,m,d),m=v,g+=v.duration,p++,h=0,I=!0}}else{if(S=S[0].match(AP),!S){_e.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<S.length&&S[E]===void 0;E++);const M=(" "+S[E]).slice(1),O=(" "+S[E+1]).slice(1),j=S[E+2]?(" "+S[E+2]).slice(1):null;switch(M){case"BYTERANGE":m?v.setByteRange(O,m):v.setByteRange(O);break;case"PROGRAM-DATE-TIME":v.rawProgramDateTime=O,v.tagList.push(["PROGRAM-DATE-TIME",O]),L===-1&&(L=u.length);break;case"PLAYLIST-TYPE":c.type&&Zr(c,M,S),c.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?Zr(c,M,S):u.length>0&&ex(c,M,S),p=c.startSN=parseInt(O);break;case"SKIP":{c.skippedSegments&&Zr(c,M,S);const P=new Ke(O,c),F=P.decimalInteger("SKIPPED-SEGMENTS");if(X(F)){c.skippedSegments+=F;for(let $=F;$--;)u.push(null);p+=F}const B=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(B.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&Zr(c,M,S),c.targetduration=Math.max(parseInt(O),1);break;case"VERSION":c.version!==null&&Zr(c,M,S),c.version=parseInt(O);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||Zr(c,M,S),c.live=!1;break;case"#":(O||j)&&v.tagList.push(j?[O,j]:[O]);break;case"DISCONTINUITY":y++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([M]);break;case"BITRATE":v.tagList.push([M,O]),b=parseInt(O)*1e3,X(b)?v.bitrate=b:b=0;break;case"DATERANGE":{const P=new Ke(O,c),F=new RS(P,c.dateRanges[P.ID],c.dateRangeTagCount);c.dateRangeTagCount++,F.isValid||c.skippedSegments?c.dateRanges[F.id]=F:_e.warn(`Ignoring invalid DATERANGE tag: "${O}"`),v.tagList.push(["EXT-X-DATERANGE",O]);break}case"DEFINE":{{const P=new Ke(O,c);"IMPORT"in P?dP(c,P,a):z0(c,P,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?Zr(c,M,S):u.length>0&&ex(c,M,S),c.startCC=y=parseInt(O);break;case"KEY":{const P=q0(O,t,c);if(P.isSupported()){if(P.method==="NONE"){C=void 0;break}C||(C={});const F=C[P.keyFormat];F!=null&&F.matches(P)||(F&&(C=Me({},C)),C[P.keyFormat]=P)}else _e.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${O}"`);break}case"START":c.startTimeOffset=Y0(O);break;case"MAP":{const P=new Ke(O,c);if(v.duration){const F=new qu(s,l);Z0(F,P,n,C),f=F,v.initSegment=f,f.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=f.rawProgramDateTime)}else{const F=v.byteRangeEndOffset;if(F){const B=v.byteRangeStartOffset;T=`${F-B}@${B}`}else T=null;Z0(v,P,n,C),f=v,I=!0}f.cc=y;break}case"SERVER-CONTROL":{w&&Zr(c,M,S),w=new Ke(O),c.canBlockReload=w.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=w.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&w.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=w.optionalFloat("PART-HOLD-BACK",0),c.holdBack=w.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&Zr(c,M,S);const P=new Ke(O);c.partTarget=P.decimalFloatingPoint("PART-TARGET");break}case"PART":{let P=c.partList;P||(P=c.partList=[]);const F=h>0?P[P.length-1]:void 0,B=h++,$=new Ke(O,c),G=new d4($,v,l,B,F);P.push(G),v.duration+=G.duration;break}case"PRELOAD-HINT":{const P=new Ke(O,c);c.preloadHint=P;break}case"RENDITION-REPORT":{const P=new Ke(O,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(P);break}default:_e.warn(`line parsed but not handled: ${S}`);break}}}m&&!m.relurl?(u.pop(),g-=m.duration,c.partList&&(c.fragmentHint=m)):c.partList&&(Qf(v,m,d),v.cc=y,c.fragmentHint=v,C&&J0(v,C,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const R=u.length,_=u[0],k=u[R-1];if(g+=c.skippedSegments*c.targetduration,g>0&&R&&k){c.averagetargetduration=g/R;const N=k.sn;c.endSN=N!=="initSegment"?N:0,c.live||(k.endList=!0),L>0&&(LP(u,L),_&&d.unshift(_))}return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,d.length&&c.dateRangeTagCount&&_&&NS(d,c),c.endCC=y,c}}function NS(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];r.push(o),t++}else return;const n=r[t-1],s=e.live?1/0:e.totalduration,i=Object.keys(e.dateRanges);for(let o=i.length;o--;){const l=e.dateRanges[i[o]],c=l.startDate.getTime();l.tagAnchor=n.ref;for(let u=t;u--;){var a;if(((a=r[u])==null?void 0:a.sn)<e.startSN)break;const d=IP(e,c,r,u,s);if(d!==-1){l.tagAnchor=e.fragments[d].ref;break}}}}function IP(r,e,t,n,s){const i=t[n];if(i){const o=i.programDateTime;if(e>=o||n===0){var a;const l=(((a=t[n+1])==null?void 0:a.start)||s)-i.start;if(e<=o+l*1e3){const c=t[n].sn-r.startSN;if(c<0)return-1;const u=r.fragments;if(u.length>t.length){const f=(t[n+1]||u[u.length-1]).sn-r.startSN;for(let p=f;p>c;p--){const h=u[p].programDateTime;if(e>=h&&e<h+u[p].duration*1e3)return p}}return c}}}return-1}function q0(r,e,t){var n,s;const i=new Ke(r,t),a=(n=i.METHOD)!=null?n:"",o=i.URI,l=i.hexadecimalInteger("IV"),c=i.KEYFORMATVERSIONS,u=(s=i.KEYFORMAT)!=null?s:"identity";o&&i.IV&&!l&&_e.error(`Invalid IV: ${i.IV}`);const d=o?Br.resolve(o,e):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Es(a,d,u,f,l,i.KEYID)}function Y0(r){const t=new Ke(r).decimalFloatingPoint("TIME-OFFSET");return X(t)?t:null}function X0(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const s=t.filter(i=>Lp(i,n));s.length&&(e[`${n}Codec`]=s.map(i=>i.split("/")[0]).join(","),t=t.filter(i=>s.indexOf(i)===-1))}),e.unknownCodecs=t}function Q0(r,e,t){const n=e[t];n&&(r[t]=n)}function LP(r,e){let t=r[e];for(let n=e;n--;){const s=r[n];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function Qf(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function Z0(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function J0(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&n.push(r)}function Zr(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function ex(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Ju(r,e){const t=e.startPTS;if(X(t)){let n=0,s;e.sn>r.sn?(n=t-r.start,s=r):(n=r.start-t,s=e),s.duration!==n&&s.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function OS(r,e,t,n,s,i,a){n-t<=0&&(a.warn("Fragment should have a positive duration",e),n=t+e.duration,i=s+e.duration);let l=t,c=n;const u=e.startPTS,d=e.endPTS;if(X(u)){const b=Math.abs(u-t);r&&b>r.totalduration?a.warn(`media timestamps and playlist times differ by ${b}s for level ${e.level} ${r.url}`):X(e.deltaPTS)?e.deltaPTS=Math.max(b,e.deltaPTS):e.deltaPTS=b,l=Math.max(t,u),t=Math.min(t,u),s=e.startDTS!==void 0?Math.min(s,e.startDTS):s,c=Math.min(n,d),n=Math.max(n,d),i=e.endDTS!==void 0?Math.max(i,e.endDTS):i}const f=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=l,e.startDTS=s,e.endPTS=n,e.minEndPTS=c,e.endDTS=i;const p=e.sn;if(!r||p<r.startSN||p>r.endSN)return 0;let h;const g=p-r.startSN,y=r.fragments;for(y[g]=e,h=g;h>0;h--)Ju(y[h],y[h-1]);for(h=g;h<y.length-1;h++)Ju(y[h],y[h+1]);return r.fragmentHint&&Ju(y[y.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,f}function CP(r,e,t){if(r===e)return;let n=null;const s=r.fragments;for(let u=s.length-1;u>=0;u--){const d=s[u].initSegment;if(d){n=d;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let i;_P(r,e,(u,d,f,p)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const h=u.cc-d.cc;for(let g=f;g<p.length;g++)p[g].cc+=h;e.endCC=p[p.length-1].cc}X(u.startPTS)&&X(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(i=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,n=u.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&o.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(u.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(u=>!u),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=RP(r.dateRanges,e,t));const u=r.fragments.filter(d=>d.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<o.length;d++)o[d].programDateTime===null&&Qf(o[d],o[d-1],u);NS(u,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var l;const u=jS(r,e.startSN-1);e.startCC=(l=u==null?void 0:u.cc)!=null?l:a[0].cc}kP(r.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),i?OS(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS,t):MS(r,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const u=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=u),e.driftEndTime=c,e.driftEnd=u}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function RP(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:s}=e,i=Me({},r);s&&s.forEach(l=>{delete i[l]});const o=Object.keys(i).length;return o?(Object.keys(n).forEach(l=>{const c=i[l],u=new RS(n[l].attr,c);u.isValid?(i[l]=u,c||(u.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${je(n[l].attr)}"`)}),i):n}function kP(r,e,t){if(r&&e){let n=0;for(let s=0,i=r.length;s<=i;s++){const a=r[s],o=e[s+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):n--}}}function _P(r,e,t){const n=e.skippedSegments,s=Math.max(r.startSN,e.startSN)-e.startSN,i=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=s;c<=i;c++){const u=l[a+c];let d=o[c];if(n&&!d&&u&&(d=e.fragments[c]=u),u&&d){t(u,d,c,o);const f=u.relurl,p=d.relurl;if(f&&PP(f,p)){e.playlistParsingError=tx(`media sequence mismatch ${d.sn}:`,r,e,u,d);return}else if(u.cc!==d.cc){e.playlistParsingError=tx(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,r,e,u,d);return}}}}function tx(r,e,t,n,s){return new Error(`${r} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function MS(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,s=r.fragments,i=n>=0;let a=0;if(i&&n<s.length)a=s[n].start;else if(i&&e.startSN===r.endSN+1)a=r.fragmentEnd;else if(i&&t)a=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=r.fragmentStart;else return;Zf(e,a)}function Zf(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function FS(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const i=n[n.length-1].duration*1e3;i<t&&(t=i)}}else t/=2;return Math.round(t)}function jS(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function rx(r,e,t){return r?$S(r.partList,e,t):null}function $S(r,e,t){if(r)for(let n=r.length;n--;){const s=r[n];if(s.index===t&&s.fragment.sn===e)return s}return null}function BS(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(s=>{s.level=t,s.initSegment&&(s.initSegment.level=t)})})}function PP(r,e){return r!==e&&e?nx(r)!==nx(e):!1}function nx(r){return r.replace(/\?[^?]*$/,"")}function pa(r,e){for(let n=0,s=r.length;n<s;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function DP(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function sx(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function US(r,e){const t=e.fragments;for(let n=0,s=t.length;n<s;n++)sx(t[n],r);e.fragmentHint&&sx(e.fragmentHint,r),e.alignedSliding=!0}function NP(r,e){r&&(zS(e,r),e.alignedSliding||gc(e,r),!e.alignedSliding&&!e.skippedSegments&&MS(r,e,!1))}function zS(r,e){if(!DP(e,r))return;const t=Math.min(e.endCC,r.endCC),n=pa(e.fragments,t),s=pa(r.fragments,t);if(!n||!s)return;_e.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const i=n.start-s.start;US(i,r)}function gc(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let s,i;const a=Math.min(e.endCC,r.endCC);e.startCC<a&&r.startCC<a&&(s=pa(n,a),i=pa(t,a)),(!s||!i)&&(s=n[Math.floor(n.length/2)],i=pa(t,s.cc)||t[Math.floor(t.length/2)]);const o=s.programDateTime,l=i.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(i.start-s.start);US(c,r)}function Ct(r,e,t){Ft(r,e,t),r.addEventListener(e,t)}function Ft(r,e,t){r.removeEventListener(e,t)}const OP={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},H={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Np extends LS{constructor(e,t,n,s,i){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=H.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:c,state:u}=this,d=l?l.currentTime:0,f=fe.bufferInfo(c||l,d,a.maxBufferHole),p=!f.len;if(this.log(`Media seeking to ${X(d)?d.toFixed(3):d}, state: ${u}, ${p?"out of":"in"} buffer`),this.state===H.ENDED)this.resetLoadingState();else if(o){const h=a.maxFragLookUpTolerance,g=o.start-h,y=o.start+o.duration+h;if(p||y<f.start||g>f.end){const b=d>y;(d<g||b)&&(b&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const h=this.lastCurrentTime;if(d>h&&(this.lastCurrentTime=d),!this.loadingParts){const g=Math.max(f.end,d),y=this.shouldLoadParts(this.getLevelDetails(),g);y&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${g.toFixed(2)}`),this.loadingParts=y)}}this.hls.hasEnoughToStart||(this.log(`Setting ${p?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,p&&(this.startPosition=d)),p&&this.state===H.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new cP(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new kp(e.config)}registerListeners(){const{hls:e}=this;e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===H.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=H.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,s=this.config.timelineOffset||0;if(n<=s)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=fe.bufferedInfo(i,e.start,0));const a=e.nextStart;if(a&&a>s&&a<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const u=l[l.length-1];return fe.isBuffered(this.media,u.start+u.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Ct(n,"seeking",this.onMediaSeeking),Ct(n,"ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===H.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Ft(s,"seeking",this.onMediaSeeking),Ft(s,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=H.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const s=i=>{const a=i.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${i.part?" part: "+i.part.index:""} of ${this.fragInfo(a,!1,i.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,t,n,s).then(i=>{if(!i)return;const a=this.state,o=i.frag;if(this.fragContextChanged(o)){(a===H.FRAG_LOADING||!this.fragCurrent&&a===H.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=H.IDLE);return}"payload"in i&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(A.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===H.STOPPED||this.state===H.ERROR||(this.warn(`Frag error: ${(i==null?void 0:i.message)||i}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===ot.APPENDING){const i=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,i),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===ot.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:n};this.hls.trigger(A.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const s=n==null?void 0:n.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:s}=this,{frag:i,payload:a}=n,o=i.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&hi(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,Pp(o.method)).catch(c=>{throw s.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:i}),c}).then(c=>{const u=self.performance.now();return s.trigger(A.FRAG_DECRYPTED,{frag:i,payload:c,stats:{tstart:l,tdecrypt:u}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===H.STOPPED||this.state===H.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==H.STOPPED&&(this.state=H.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,s;const i=e.tracks;if(i&&!t.encrypted&&((n=i.audio)!=null&&n.encrypted||(s=i.video)!=null&&s.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(A.ERROR,{type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?OP.toString(fe.getBuffered(n)):"(detached)"})`),rt(e)){var s;if(e.type!==Z.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=H.IDLE;return}}const i=(s=this.levels)==null?void 0:s[e.level];i!=null&&i.fragmentError&&(this.log(`Resetting level fragment error count of ${i.fragmentError} on frag buffered`),i.fragmentError=0)}this.state=H.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:s,partsLoaded:i}=e,a=!i||i.length===0||i.some(l=>!l),o=new _p(n.level,n.sn,n.stats.chunkCount+1,0,s?s.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,s){var i;this.fragCurrent=e;const a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=H.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(A.KEY_LOADED,f),this.state===H.KEY_LOADING&&(this.state=H.IDLE),f}),this.hls.trigger(A.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(rt(e)&&(!l||e.sn!==l.sn)){const f=this.shouldLoadParts(t.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=f)}if(n=Math.max(e.start,n||0),this.loadingParts&&rt(e)){const f=a.partList;if(f&&s){n>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const p=this.getNextPart(f,e,n);if(p>-1){const h=f[p];e=this.fragCurrent=h.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${h.index} (${p}/${f.length-1}) of ${this.fragInfo(e,!1,h)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=H.FRAG_LOADING;let g;return o?g=o.then(y=>!y||this.fragContextChanged(y.frag)?null:this.doFragPartsLoad(e,h,t,s)).catch(y=>this.handleFragLoadError(y)):g=this.doFragPartsLoad(e,h,t,s).catch(y=>this.handleFragLoadError(y)),this.hls.trigger(A.FRAG_LOADING,{frag:e,part:h,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):g}else if(!e.url||this.loadedEndOfParts(f,n))return Promise.resolve(null)}}if(rt(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=a.partList)==null?void 0:c.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),X(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=H.FRAG_LOADING;const u=this.config.progressive;let d;return u&&o?d=o.then(f=>!f||this.fragContextChanged(f.frag)?null:this.fragmentLoader.load(e,s)).catch(f=>this.handleFragLoadError(f)):d=Promise.all([this.fragmentLoader.load(e,u?s:void 0),o]).then(([f])=>(!u&&s&&s(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(A.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,n,s){return new Promise((i,a)=>{var o;const l=[],c=(o=n.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const p=f.part;this.hls.trigger(A.FRAG_LOADED,f);const h=rx(n.details,e.sn,d.index+1)||$S(c,e.sn,d.index+1);if(h)u(h);else return i({frag:e,part:p,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===z.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===re.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(A.ERROR,t)}else this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==H.PARSING){!this.fragCurrent&&this.state!==H.STOPPED&&this.state!==H.ERROR&&(this.state=H.IDLE);return}const{frag:n,part:s,level:i}=t,a=self.performance.now();n.stats.parsing.end=a,s&&(s.stats.parsing.end=a);const o=this.getLevelDetails(),c=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(n,s,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===Z.SUBTITLE)return!1;const a=i.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=a){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:s,sn:i,part:a}=e;if(!(t!=null&&t[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const o=t[s],l=o.details,c=a>-1?rx(l,i,a):null,u=c?c.fragment:jS(l,i,n);return u?(n&&n!==u&&(u.stats=n.stats),{frag:u,part:c,level:o}):null}bufferFragmentData(e,t,n,s,i){if(this.state!==H.PARSING)return;const{data1:a,data2:o}=e;let l=a;if(o&&(l=ur(a,o)),!l.length)return;const c=this.initPTS[t.cc],u=c?-c.baseTime/c.timescale:void 0,d={type:e.type,frag:t,part:n,chunkMeta:s,offset:u,parent:t.type,data:l};if(this.hls.trigger(A.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!fe.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,s=fe.bufferInfo(t,n,0),i=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),o=Math.max(Math.min(e.start-a,s.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var n;const s=this.getLoadPosition();if(!X(s))return null;const a=this.lastCurrentTime>s||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,a)}getFwdBufferInfoAtPos(e,t,n,s){const i=fe.bufferInfo(e,t,s);if(i.len===0&&i.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(i.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(i.nextStart,a.end)-t,s);return fe.bufferInfo(e,t,o)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,s=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-t*3,n.maxMaxBufferLength/2,s);return i>=s?(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0):!1}getAppendedFrag(e,t=Z.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,s=n.length;if(!s)return null;const{config:i}=this,a=n[0].start,o=i.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const d=i.initialLiveManifestSize;if(s<d)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);const f=this.hls.startPosition,p=this.hls.liveSyncPosition,h=l?(f!==-1&&f>=a?f:p)||l.start:e;this.log(`Setting startPosition to ${h} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${p} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=h}}else e<=a&&(l=n[0]);if(!l){const d=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,d,t)}let u=this.filterReplacedPrimary(l,t);if(!u&&l){const d=l.sn-t.startSN;u=this.filterReplacedPrimary(n[d+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===ot.OK||n===ot.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,s,i){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,s,0);if(o!==null&&n.len+o.len>=i){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(ix(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(ix(this.config)&&e.type!==Z.SUBTITLE){const n=this.hls.interstitialsManager,s=n==null?void 0:n.bufferingItem;if(s){const a=s.event;if(a){if(a.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&(t==null?void 0:t.live)===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const i=n==null?void 0:n.playerQueue;if(i)for(let a=i.length;a--;){const o=i[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let s=-1,i=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,s>-1&&n<c.start)break;const u=c.loaded;u?s=-1:(i||(c.independent||a)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),s=o),i=u}return s}loadedEndOfParts(e,t){let n;for(let s=e.length;s--;){if(n=e[s],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let s=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),s=Q4(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const a=t[i-e.startSN];n.cc===a.cc&&(s=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=TS(e,n.cc,n.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,n){const{config:s}=this;let{fragPrevious:i}=this,{fragments:a,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=s,u=n.partList,d=!!(this.loadingParts&&u!=null&&u.length&&l);d&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let f;if(e<t){var p;const g=e<this.lastCurrentTime||e>t-c||(p=this.media)!=null&&p.paused||!this.startFragRequested?0:c;f=Ps(i,a,e,g)}else f=a[a.length-1];if(f){const h=f.sn-n.startSN,g=this.fragmentTracker.getState(f);if((g===ot.OK||g===ot.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!d||u[0].fragment.sn>f.sn||!n.live)&&f.level===i.level){const b=a[h+1];f.sn<o&&this.fragmentTracker.getState(b)!==ot.OK?f=b:f=null}}return f}alignPlaylists(e,t,n){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,a=!t,o=e.alignedSliding&&X(i);if(a||!o&&!i){NP(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),l}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const s=this.timelineOffset;if(n===-1){const i=this.startTimeOffset!==null,a=i?this.startTimeOffset:e.startTimeOffset;a!==null&&X(a)?(n=t+a,a<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${i?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+s}this.nextLoadPosition=n+s}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&rt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==H.FRAG_LOADING_WAITING_RETRY)&&(this.state=H.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const b=this.getCurrentContext(t.chunkMeta);b&&(t.frag=b.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var i;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const a=t.details===z.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(s,!0);const o=t.errorAction;if(!o){this.state=H.ERROR;return}const{action:l,flags:c,retryCount:u=0,retryConfig:d}=o,f=!!d,p=f&&l===pt.RetryRequest,h=f&&!o.resolved&&c===Kt.MoveAllAlternatesMatchingHost,g=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!p&&h&&rt(s)&&!s.endList&&g&&!IS(t))this.resetFragmentErrors(e),this.treatAsGap(s),o.resolved=!0;else if((p||h)&&u<d.maxNumRetry){var y;const b=qf((y=t.response)==null?void 0:y.code),m=Rp(d,u);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+m,this.state=H.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,b){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${m}ms`)}else if(d)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!a&&l!==pt.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${u})`);return}else l===pt.SendAlternateToPenaltyBox?this.state=H.WAITING_LEVEL:this.state=H.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!qf(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=H.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===H.PARSING||this.state===H.PARSED){const t=e.frag,n=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,n),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len,(t==null?void 0:t.duration)||10);const a=!i;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Z.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==H.STOPPED&&(this.state=H.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const s=fe.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,n),this.state===H.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==H.STOPPED&&(this.state=H.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,s){const i=n.details;if(!i){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const f=s?0:OS(i,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS,this);return this.hls.trigger(A.LEVEL_PTS_UPDATED,{details:i,level:n,drift:f,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)){var o;if(n.fragmentError===0&&this.treatAsGap(e,n),((o=this.transmuxer)==null?void 0:o.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=H.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(A.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Z.MAIN?"level":"track"}fragInfo(e,t=!0,n){var s,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((s=t&&!n?e.startPTS:(n||e).start)!=null?s:NaN).toFixed(3)}-${((i=t&&!n?e.endPTS:(n||e).end)!=null?i:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function ix(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class VS{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=MP(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function MP(r,e){const t=new Uint8Array(e);let n=0;for(let s=0;s<r.length;s++){const i=r[s];t.set(i,n),n+=i.length}return t}var ed={exports:{}},ax;function FP(){return ax||(ax=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,d||l,f),h=t?t+c:c;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,h=new Array(p);f<p;f++)h[f]=d[f].fn;return h},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,f,p,h){var g=t?t+c:c;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,m,v;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,f),!0;case 5:return y.fn.call(y.context,u,d,f,p),!0;case 6:return y.fn.call(y.context,u,d,f,p,h),!0}for(v=1,m=new Array(b-1);v<b;v++)m[v-1]=arguments[v];y.fn.apply(y.context,m)}else{var S=y.length,E;for(v=0;v<S;v++)switch(y[v].once&&this.removeListener(c,y[v].fn,void 0,!0),b){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,f);break;default:if(!m)for(E=1,m=new Array(b-1);E<b;E++)m[E-1]=arguments[E];y[v].fn.apply(y[v].context,m)}}return!0},o.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,f){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var h=this._events[p];if(h.fn)h.fn===u&&(!f||h.once)&&(!d||h.context===d)&&a(this,p);else{for(var g=0,y=[],b=h.length;g<b;g++)(h[g].fn!==u||f&&!h[g].once||d&&h[g].context!==d)&&y.push(h[g]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o}(ed)),ed.exports}var jP=FP(),Op=c4(jP);const Va="1.6.13",Li={};function $P(){return typeof __HLS_WORKER_BUNDLE__=="function"}function BP(){const r=Li[Va];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),s={worker:new self.Worker(t),objectURL:t,clientCount:1};return Li[Va]=s,s}function UP(r){const e=Li[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,s={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Li[r]=s,s}function zP(r){const e=Li[r||Va];if(e&&e.clientCount--===1){const{worker:n,objectURL:s}=e;delete Li[r||Va],s&&self.URL.revokeObjectURL(s),n.terminate()}}function GS(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function Mp(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function tu(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function Ga(r,e){const t=e;let n=0;for(;Mp(r,e);){n+=10;const s=tu(r,e+6);n+=s,GS(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function VP(r,e,t,n){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=e[t+2],a=i>>2&15;if(a>12){const p=new Error(`invalid ADTS sampling index:${a}`);r.emit(A.ERROR,A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!0,error:p,reason:p.message});return}const o=(i>>6&3)+1,l=e[t+3]>>6&3|(i&1)<<2,c="mp4a.40."+o,u=s[a];let d=a;(o===5||o===29)&&(d-=3);const f=[o<<3|(d&14)>>1,(d&1)<<7|l<<3];return _e.log(`manifest codec:${n}, parsed codec:${c}, channels:${l}, rate:${u} (ADTS object type:${o} sampling index:${a})`),{config:f,samplerate:u,channelCount:l,codec:c,parsedCodec:c,manifestCodec:n}}function HS(r,e){return r[e]===255&&(r[e+1]&246)===240}function KS(r,e){return r[e+1]&1?7:9}function Fp(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function GP(r,e){return e+5<r.length}function xc(r,e){return e+1<r.length&&HS(r,e)}function HP(r,e){return GP(r,e)&&HS(r,e)&&Fp(r,e)<=r.length-e}function KP(r,e){if(xc(r,e)){const t=KS(r,e);if(e+t>=r.length)return!1;const n=Fp(r,e);if(n<=t)return!1;const s=e+n;return s===r.length||xc(r,s)}return!1}function WS(r,e,t,n,s){if(!r.samplerate){const i=VP(e,t,n,s);if(!i)return;Me(r,i)}}function qS(r){return 1024*9e4/r}function WP(r,e){const t=KS(r,e);if(e+t<=r.length){const n=Fp(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function YS(r,e,t,n,s){const i=qS(r.samplerate),a=n+s*i,o=WP(e,t);let l;if(o){const{frameLength:d,headerLength:f}=o,p=f+d,h=Math.max(0,t+p-e.length);h?(l=new Uint8Array(p-f),l.set(e.subarray(t+f,e.length),0)):l=e.subarray(t+f,t+p);const g={unit:l,pts:a};return h||r.samples.push(g),{sample:g,length:p,missing:h}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}function qP(r,e){return Mp(r,e)&&tu(r,e+6)+10<=r.length-e}function YP(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function td(r,e=0,t=1/0){return XP(r,e,t,Uint8Array)}function XP(r,e,t,n){const s=QP(r);let i=1;"BYTES_PER_ELEMENT"in n&&(i=n.BYTES_PER_ELEMENT);const a=ZP(r)?r.byteOffset:0,o=(a+r.byteLength)/i,l=(a+e)/i,c=Math.floor(Math.max(0,Math.min(l,o))),u=Math.floor(Math.min(c+Math.max(t,0),o));return new n(s,c,u-c)}function QP(r){return r instanceof ArrayBuffer?r:r.buffer}function ZP(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function JP(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const s=Jt(td(r.data,1,n)),i=r.data[2+n],a=r.data.subarray(3+n).indexOf(0);if(a===-1)return;const o=Jt(td(r.data,3+n,a));let l;return s==="-->"?l=Jt(td(r.data,4+n+a)):l=YP(r.data.subarray(4+n+a)),e.mimeType=s,e.pictureType=i,e.description=o,e.data=l,e}function eD(r){if(r.size<2)return;const e=Jt(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function tD(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=Jt(r.data.subarray(t),!0);t+=n.length+1;const s=Jt(r.data.subarray(t));return{key:r.type,info:n,data:s}}const e=Jt(r.data.subarray(1));return{key:r.type,info:"",data:e}}function rD(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=Jt(r.data.subarray(t),!0);t+=n.length+1;const s=Jt(r.data.subarray(t));return{key:r.type,info:n,data:s}}const e=Jt(r.data);return{key:r.type,info:"",data:e}}function nD(r){return r.type==="PRIV"?eD(r):r.type[0]==="W"?rD(r):r.type==="APIC"?JP(r):tD(r)}function sD(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=tu(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const Uo=10,iD=10;function XS(r){let e=0;const t=[];for(;Mp(r,e);){const n=tu(r,e+6);r[e+5]>>6&1&&(e+=Uo),e+=Uo;const s=e+n;for(;e+iD<s;){const i=sD(r.subarray(e)),a=nD(i);a&&t.push(a),e+=i.size+Uo}GS(r,e)&&(e+=Uo)}return t}function QS(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function aD(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function jp(r){const e=XS(r);for(let t=0;t<e.length;t++){const n=e[t];if(QS(n))return aD(n)}}let Xt=function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r}({});function Nr(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class $p{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=ur(this.cachedData,e),this.cachedData=null);let n=Ga(e,0),s=n?n.length:0,i;const a=this._audioTrack,o=this._id3Track,l=n?jp(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&X(l))&&(this.basePTS=oD(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xt.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const u=this.appendFrame(a,e,s);u?(this.frameIndex++,this.lastPTS=u.sample.pts,s+=u.length,i=s):s=c}else qP(e,s)?(n=Ga(e,s),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xt.audioId3,duration:Number.POSITIVE_INFINITY}),s+=n.length,i=s):s++;if(s===c&&i!==c){const u=e.slice(i);this.cachedData?this.cachedData=ur(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:Nr(),id3Track:o,textTrack:Nr()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Nr(),id3Track:this._id3Track,textTrack:Nr()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const oD=(r,e,t)=>{if(X(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let zo=null;const lD=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],cD=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],uD=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],dD=[0,1,1,4];function ZS(r,e,t,n,s){if(t+24>e.length)return;const i=JS(e,t);if(i&&t+i.frameLength<=e.length){const a=i.samplesPerFrame*9e4/i.sampleRate,o=n+s*a,l={unit:e.subarray(t,t+i.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=i.channelCount,r.samplerate=i.sampleRate,r.samples.push(l),{sample:l,length:i.frameLength,missing:0}}}function JS(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,s=r[e+2]>>4&15,i=r[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&i!==3){const a=r[e+2]>>1&1,o=r[e+3]>>6,l=t===3?3-n:n===3?3:4,c=lD[l*14+s-1]*1e3,d=cD[(t===3?0:t===2?1:2)*3+i],f=o===3?1:2,p=uD[t][n],h=dD[n],g=p*8*h,y=Math.floor(p*c/d+a)*h;if(zo===null){const v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);zo=v?parseInt(v[1]):0}return!!zo&&zo<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:d,channelCount:f,frameLength:y,samplesPerFrame:g}}}function Bp(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function eE(r,e){return e+1<r.length&&Bp(r,e)}function fD(r,e){return Bp(r,e)&&4<=r.length-e}function tE(r,e){if(e+1<r.length&&Bp(r,e)){const n=JS(r,e);let s=4;n!=null&&n.frameLength&&(s=n.frameLength);const i=e+s;return i===r.length||eE(r,i)}return!1}class hD extends $p{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,s){super.resetInitSegment(e,t,n,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=Ga(e,0);let s=(n==null?void 0:n.length)||0;if(tE(e,s))return!1;for(let i=e.length;s<i;s++)if(KP(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return HP(e,t)}appendFrame(e,t,n){WS(e,this.observer,t,n,e.manifestCodec);const s=YS(e,t,n,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const rE=(r,e)=>{let t=0,n=5;e+=n;const s=new Uint32Array(1),i=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=r[e];const o=Math.min(n,8),l=8-o;i[0]=4278190080>>>24+l<<l,s[0]=(a[0]&i[0])>>l,t=t?t<<o|s[0]:s[0],e+=1,n-=o}return t};class pD extends $p{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,s){super.resetInitSegment(e,t,n,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const s=nE(e,t,n,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=Ga(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&jp(t)!==void 0&&rE(e,n)<16}}function nE(r,e,t,n,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const i=e[t+4]>>6;if(i>=3)return-1;const o=[48e3,44100,32e3][i],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+i]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const p=(e[t+6]<<8|e[t+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][d]+p,y=e[t+5]>>3,b=e[t+5]&7,m=new Uint8Array([i<<6|y<<1|b>>2,(b&3)<<6|d<<3|p<<2|l>>4,l<<4&224]),v=1536/o*9e4,S=n+s*v,E=e.subarray(t,t+u);return r.config=m,r.channelCount=g,r.samplerate=o,r.samples.push({unit:E,pts:S}),u}class mD extends $p{resetInitSegment(e,t,n,s){super.resetInitSegment(e,t,n,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Ga(e,0);let n=(t==null?void 0:t.length)||0;if(t&&e[n]===11&&e[n+1]===119&&jp(t)!==void 0&&rE(e,n)<=16)return!1;for(let s=e.length;n<s;n++)if(tE(e,n))return _e.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return fD(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return ZS(e,t,n,this.basePTS,this.frameIndex)}}const gD=/\/emsg[-/]ID3/i;class xD{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,s){const i=this.videoTrack=Nr("video",1),a=this.audioTrack=Nr("audio",1),o=this.txtTrack=Nr("text",1);if(this.id3Track=Nr("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=hS(e);if(l.video){const{id:c,timescale:u,codec:d,supplemental:f}=l.video;i.id=c,i.timescale=o.timescale=u,i.codec=d,i.supplemental=f}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=uS.text,i.sampleDuration=0,i.duration=a.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return p4(e)}demux(e,t){this.timeOffset=t;let n=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=ur(this.remainderData,e));const o=S4(n);this.remainderData=o.remainder,s.samples=o.valid||new Uint8Array}else s.samples=n;const a=this.extractID3Track(s,t);return i.samples=T0(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return n.samples=T0(e,t),{videoTrack:t,audioTrack:Nr(),id3Track:s,textTrack:Nr()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const s=ye(e.samples,["emsg"]);s&&s.forEach(i=>{const a=w4(i);if(gD.test(a.schemeIdUri)){const o=ox(a,t);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Xt.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=ox(a,t);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Xt.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function ox(r,e){return X(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class vD{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new kp(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,es.cbc)}decryptAacSample(e,t,n){const s=e[t].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)n.set(e.subarray(i,i+16),s);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(n.subarray(s,s+16),i);return e}decryptAvcSample(e,t,n,s,i){const a=gS(i.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{i.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,s)}).catch(s)}decryptAvcSamples(e,t,n,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){s();return}const i=e[t].units;for(;!(n>=i.length);n++){const a=i[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,s,a),!this.decrypter.isSync()))return}}}}class sE{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,s;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const i=n.units;s=i[i.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,s=n.length;if(s){const i=n[s-1];e.pts=i.pts,e.dts=i.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const s=t.byteLength;let i=e.naluState||0;const a=i,o=[];let l=0,c,u,d,f=-1,p=0;for(i===-1&&(f=0,p=this.getNALuType(t,0),i=0,l=1);l<s;){if(c=t[l++],!i){i=c?0:1;continue}if(i===1){i=c?0:2;continue}if(!c)i=3;else if(c===1){if(u=l-i-1,f>=0){const h={data:t.subarray(f,u),type:p};o.push(h)}else{const h=this.getLastNalUnit(e.samples);h&&(a&&l<=4-a&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-a)),u>0&&(h.data=ur(h.data,t.subarray(0,u)),h.state=0))}l<s?(d=this.getNALuType(t,l),f=l,p=d,i=0):i=-1}else i=0}if(f>=0&&i>=0){const h={data:t.subarray(f,s),type:p,state:i};o.push(h)}if(o.length===0){const h=this.getLastNalUnit(e.samples);h&&(h.data=ur(h.data,t))}return e.naluState=i,o}}class ma{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,s=new Uint8Array(4),i=Math.min(4,t);if(i===0)throw new Error("no bytes available");s.set(e.subarray(n,n+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&_e.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class yD extends sE{parsePES(e,t,n,s){const i=this.parseNALu(e,n.data,s);let a=this.VideoSample,o,l=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(c=>{var u,d;switch(c.type){case 1:{let g=!1;o=!0;const y=c.data;if(l&&y.length>4){const b=this.readSliceType(y);(b===2||b===4||b===7||b===9)&&(g=!0)}if(g){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=g;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,Ip(c.data,1,n.pts,t.samples);break}case 7:{var p,h;o=!0,l=!0;const g=c.data,y=this.readSPS(g);if(!e.sps||e.width!==y.width||e.height!==y.height||((p=e.pixelRatio)==null?void 0:p[0])!==y.pixelRatio[0]||((h=e.pixelRatio)==null?void 0:h[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[g];const b=g.subarray(1,4);let m="avc1.";for(let v=0;v<3;v++){let S=b[v].toString(16);S.length<2&&(S="0"+S),m+=S}e.codec=m}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new ma(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,s=8,i;for(let a=0;a<e;a++)s!==0&&(i=t.readEG(),s=(n+i+256)%256),n=s===0?n:s}readSPS(e){const t=new ma(e);let n=0,s=0,i=0,a=0,o,l,c;const u=t.readUByte.bind(t),d=t.readBits.bind(t),f=t.readUEG.bind(t),p=t.readBoolean.bind(t),h=t.skipBits.bind(t),g=t.skipEG.bind(t),y=t.skipUEG.bind(t),b=this.skipScalingList.bind(this);u();const m=u();if(d(5),h(3),u(),y(),m===100||m===110||m===122||m===244||m===44||m===83||m===86||m===118||m===128){const I=f();if(I===3&&h(1),y(),y(),h(1),p())for(l=I!==3?8:12,c=0;c<l;c++)p()&&(c<6?b(16,t):b(64,t))}y();const v=f();if(v===0)f();else if(v===1)for(h(1),g(),g(),o=f(),c=0;c<o;c++)g();y(),h(1);const S=f(),E=f(),C=d(1);C===0&&h(1),h(1),p()&&(n=f(),s=f(),i=f(),a=f());let L=[1,1];if(p()&&p())switch(u()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((S+1)*16-n*2-s*2),height:(2-C)*(E+1)*16-(C?2:4)*(i+a),pixelRatio:L}}}class bD extends sE{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,s){const i=this.parseNALu(e,n.data,s);let a=this.VideoSample,o,l=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(c=>{var u,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,Ip(c.data,2,n.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Me(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const p=this.readSPS(c.data);e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.codec=p.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const h in p.params)e.params[h]=p.params[h]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const p=this.readPPS(c.data);for(const h in p)e.params[h]=p[h]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}a&&o&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(t[n]=e[s],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new ma(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:s}}readSPS(e){const t=new ma(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const s=t.readBits(2),i=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),f=t.readUByte(),p=t.readUByte(),h=t.readUByte(),g=t.readUByte(),y=t.readUByte(),b=t.readUByte(),m=[],v=[];for(let Q=0;Q<n;Q++)m.push(t.readBoolean()),v.push(t.readBoolean());if(n>0)for(let Q=n;Q<8;Q++)t.readBits(2);for(let Q=0;Q<n;Q++)m[Q]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),v[Q]&&t.readUByte();t.readUEG();const S=t.readUEG();S==3&&t.skipBits(1);const E=t.readUEG(),C=t.readUEG(),L=t.readBoolean();let I=0,T=0,w=0,R=0;L&&(I+=t.readUEG(),T+=t.readUEG(),w+=t.readUEG(),R+=t.readUEG());const _=t.readUEG(),k=t.readUEG(),N=t.readUEG(),M=t.readBoolean();for(let Q=M?0:n;Q<=n;Q++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let K=0;K<4;K++)for(let Ne=0;Ne<(K===3?2:6);Ne++)if(!t.readBoolean())t.readUEG();else{const xe=Math.min(64,1<<4+(K<<1));K>1&&t.readEG();for(let ce=0;ce<xe;ce++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const P=t.readUEG();let F=0;for(let Q=0;Q<P;Q++){let K=!1;if(Q!==0&&(K=t.readBoolean()),K){Q===P&&t.readUEG(),t.readBoolean(),t.readUEG();let Ne=0;for(let Re=0;Re<=F;Re++){const xe=t.readBoolean();let ce=!1;xe||(ce=t.readBoolean()),(xe||ce)&&Ne++}F=Ne}else{const Ne=t.readUEG(),Re=t.readUEG();F=Ne+Re;for(let xe=0;xe<Ne;xe++)t.readUEG(),t.readBoolean();for(let xe=0;xe<Re;xe++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Q=t.readUEG();for(let K=0;K<Q;K++){for(let Ne=0;Ne<N+4;Ne++)t.readBits(1);t.readBits(1)}}let $=0,G=1,Y=1,ee=!0,te=1,se=0;t.readBoolean(),t.readBoolean();let we=!1;if(t.readBoolean()){if(t.readBoolean()){const Oe=t.readUByte(),Ae=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],At=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Oe>0&&Oe<16?(G=Ae[Oe-1],Y=At[Oe-1]):Oe===255&&(G=t.readBits(16),Y=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),we=t.readBoolean(),we&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(te=t.readBits(32),se=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const At=t.readBoolean(),Vt=t.readBoolean();let et=!1;(At||Vt)&&(et=t.readBoolean(),et&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),et&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Xr=0;Xr<=n;Xr++){ee=t.readBoolean();const Ms=ee||t.readBoolean();let co=!1;Ms?t.readEG():co=t.readBoolean();const uo=co?1:t.readUEG()+1;if(At)for(let as=0;as<uo;as++)t.readUEG(),t.readUEG(),et&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(Vt)for(let as=0;as<uo;as++)t.readUEG(),t.readUEG(),et&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),$=t.readUEG())}let he=E,De=C;if(L){let Q=1,K=1;S===1?Q=K=2:S==2&&(Q=2),he=E-Q*T-Q*I,De=C-K*R-K*w}const Qe=s?["A","B","C"][s]:"",$e=o<<24|l<<16|c<<8|u;let ie=0;for(let Q=0;Q<32;Q++)ie=(ie|($e>>Q&1)<<31-Q)>>>0;let be=ie.toString(16);return a===1&&be==="2"&&(be="6"),{codecString:`hvc1.${Qe}${a}.${be}.${i?"H":"L"}${b}.B0`,params:{general_tier_flag:i,general_profile_idc:a,general_profile_space:s,general_profile_compatibility_flags:[o,l,c,u],general_constraint_indicator_flags:[d,f,p,h,g,y],general_level_idc:b,bit_depth:_+8,bit_depth_luma_minus8:_,bit_depth_chroma_minus8:k,min_spatial_segmentation_idc:$,chroma_format_idc:S,frame_rate:{fixed:ee,fps:se/te}},width:he,height:De,pixelRatio:[G,Y]}}readPPS(e){const t=new ma(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),i=t.readBoolean();let a=1;return i&&s?a=0:i?a=3:s&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const ct=188;class kn{constructor(e,t,n,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=s,this.videoParser=null}static probe(e,t){const n=kn.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(ct*5,t-ct)+1,s=0;for(;s<n;){let i=!1,a=-1,o=0;for(let l=s;l<t;l+=ct)if(e[l]===71&&(t-l===ct||e[l+ct]===71)){if(o++,a===-1&&(a=l,a!==0&&(n=Math.min(a+ct*99,e.length-ct)+1)),i||(i=Jf(e,l)===0),i&&o>1&&(a===0&&o>2||l+ct>n))return a}else{if(o)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:uS[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=kn.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=kn.createTrack("audio",s),this._id3Track=kn.createTrack("id3"),this._txtTrack=kn.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,s=!1){n||(this.sampleAes=null);let i;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,f=o.pid,p=l.pid,h=o.pesData,g=l.pesData,y=null,b=this.pmtParsed,m=this._pmtId,v=e.length;if(this.remainderData&&(e=ur(this.remainderData,e),v=e.length,this.remainderData=null),v<ct&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const S=Math.max(0,kn.syncOffset(e));v-=(v-S)%ct,v<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let E=0;for(let L=S;L<v;L+=ct)if(e[L]===71){const I=!!(e[L+1]&64),T=Jf(e,L),w=(e[L+3]&48)>>4;let R;if(w>1){if(R=L+5+e[L+4],R===L+ct)continue}else R=L+4;switch(T){case u:I&&(d&&(i=Bs(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,c,i,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(R,L+ct)),d.size+=L+ct-R);break;case f:if(I){if(h&&(i=Bs(h,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,i);break;case"mp3":this.parseMPEGPES(o,i);break;case"ac3":this.parseAC3PES(o,i);break}h={data:[],size:0}}h&&(h.data.push(e.subarray(R,L+ct)),h.size+=L+ct-R);break;case p:I&&(g&&(i=Bs(g,this.logger))&&this.parseID3PES(l,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(R,L+ct)),g.size+=L+ct-R);break;case 0:I&&(R+=e[R]+1),m=this._pmtId=SD(e,R);break;case m:{I&&(R+=e[R]+1);const _=ED(e,R,this.typeSupported,n,this.observer,this.logger);u=_.videoPid,u>0&&(a.pid=u,a.segmentCodec=_.segmentVideoCodec),f=_.audioPid,f>0&&(o.pid=f,o.segmentCodec=_.segmentAudioCodec),p=_.id3Pid,p>0&&(l.pid=p),y!==null&&!b&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${y}'. Backtracking to sync byte @${S} to parse all TS packets.`),y=null,L=S-188),b=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=T;break}}else E++;E>0&&eh(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=h,l.pesData=g;const C={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return s&&this.extractRemainingSamples(C),C}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:s,textTrack:i}=e,a=n.pesData,o=t.pesData,l=s.pesData;let c;if(a&&(c=Bs(a,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,i,c,!0),n.pesData=null)):n.pesData=a,o&&(c=Bs(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=Bs(l,this.logger))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=l}demuxSampleAes(e,t,n){const s=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new vD(this.observer,this.config,t);return this.decrypt(s,i)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new yD:e==="hevc"&&(this.videoParser=new bD))}decrypt(e,t){return new Promise(n=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const s=this.aacOverFlow;let i=t.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)i=ur(s.sample.unit,i);else{const p=f-d;s.sample.unit.set(i.subarray(0,d),p),e.samples.push(s.sample),n=s.missing}}let a,o;for(a=n,o=i.length;a<o-1&&!xc(i,a);a++);if(a!==n){let d;const f=a<o-1;if(f?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",eh(this.observer,new Error(d),f,this.logger),!f)return}WS(e,this.observer,i,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(s){const d=qS(e.samplerate);l=s.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=YS(e,i,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!xc(i,a);a++);}parseMPEGPES(e,t){const n=t.data,s=n.length;let i=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<s;)if(eE(n,a)){const l=ZS(e,n,a,o,i);if(l)a+=l.length,i++;else break}else a++}parseAC3PES(e,t){{const n=t.data,s=t.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const i=n.length;let a=0,o=0,l;for(;o<i&&(l=nE(e,n,o,s,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Me({},t,{type:this._videoTrack?Xt.emsg:Xt.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Jf(r,e){return((r[e+1]&31)<<8)+r[e+2]}function SD(r,e){return(r[e+10]&31)<<8|r[e+11]}function ED(r,e,t,n,s,i){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(r[e+1]&15)<<8|r[e+2],l=e+3+o-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<l;){const u=Jf(r,e),d=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){rd("ADTS AAC",i);break}case 15:a.audioPid===-1&&(a.audioPid=u);break;case 21:a.id3Pid===-1&&(a.id3Pid=u);break;case 219:if(!n){rd("H.264",i);break}case 27:a.videoPid===-1&&(a.videoPid=u);break;case 3:case 4:!t.mpeg&&!t.mp3?i.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="mp3");break;case 193:if(!n){rd("AC-3",i);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="ac3"):i.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let f=e+5,p=d;for(;p>2;){switch(r[f]){case 106:t.ac3!==!0?i.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=u,a.segmentAudioCodec="ac3");break}const g=r[f+1]+2;f+=g,p-=g}}break;case 194:case 135:return eh(s,new Error("Unsupported EC-3 in M2TS found"),void 0,i),a;case 36:a.videoPid===-1&&(a.videoPid=u,a.segmentVideoCodec="hevc",i.log("HEVC in M2TS found"));break}e+=d+5}return a}function eh(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit(A.ERROR,A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function rd(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function Bs(r,e){let t=0,n,s,i,a,o;const l=r.data;if(!r||r.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=ur(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(s=(n[4]<<8)+n[5],s&&s>r.size-6)return null;const u=n[7];u&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,u&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),i=n[8];let d=i+9;if(r.size<=d)return null;r.size-=d;const f=new Uint8Array(r.size);for(let p=0,h=l.length;p<h;p++){n=l[p];let g=n.byteLength;if(d)if(d>g){d-=g;continue}else n=n.subarray(d),g-=d,d=0;f.set(n,t),t+=g}return s&&(s-=i+3),{data:f,pts:a,dts:o,len:s}}return null}class wD{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Tn=Math.pow(2,32)-1;class U{static init(){U.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in U.types)U.types.hasOwnProperty(e)&&(U.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);U.HDLR_TYPES={video:t,audio:n};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);U.STTS=U.STSC=U.STCO=i,U.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),U.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),U.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);U.FTYP=U.box(U.types.ftyp,a,l,a,o),U.DINF=U.box(U.types.dinf,U.box(U.types.dref,s))}static box(e,...t){let n=8,s=t.length;const i=s;for(;s--;)n+=t[s].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),s=0,n=8;s<i;s++)a.set(t[s],n),n+=t[s].byteLength;return a}static hdlr(e){return U.box(U.types.hdlr,U.HDLR_TYPES[e])}static mdat(e){return U.box(U.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Tn+1)),s=Math.floor(t%(Tn+1));return U.box(U.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return U.box(U.types.mdia,U.mdhd(e.timescale||0,e.duration||0),U.hdlr(e.type),U.minf(e))}static mfhd(e){return U.box(U.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?U.box(U.types.minf,U.box(U.types.smhd,U.SMHD),U.DINF,U.stbl(e)):U.box(U.types.minf,U.box(U.types.vmhd,U.VMHD),U.DINF,U.stbl(e))}static moof(e,t,n){return U.box(U.types.moof,U.mfhd(e),U.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=U.trak(e[t]);return U.box.apply(null,[U.types.moov,U.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(U.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=U.trex(e[t]);return U.box.apply(null,[U.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Tn+1)),s=Math.floor(t%(Tn+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return U.box(U.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let s,i;for(s=0;s<t.length;s++)i=t[s].flags,n[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return U.box(U.types.sdtp,n)}static stbl(e){return U.box(U.types.stbl,U.stsd(e),U.box(U.types.stts,U.STTS),U.box(U.types.stsc,U.STSC),U.box(U.types.stsz,U.STSZ),U.box(U.types.stco,U.STCO))}static avc1(e){let t=[],n=[],s,i,a;for(s=0;s<e.sps.length;s++)i=e.sps[s],a=i.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],a=i.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(i));const o=U.box(U.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return U.box(U.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,U.box(U.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),U.box(U.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return U.box(U.types.mp4a,U.audioStsd(e),U.box(U.types.esds,U.esds(e)))}static mp3(e){return U.box(U.types[".mp3"],U.audioStsd(e))}static ac3(e){return U.box(U.types["ac-3"],U.audioStsd(e),U.box(U.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return U.box(U.types.stsd,U.STSD,U.mp4a(e));if(t==="ac3"&&e.config)return U.box(U.types.stsd,U.STSD,U.ac3(e));if(t==="mp3"&&e.codec==="mp3")return U.box(U.types.stsd,U.STSD,U.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return U.box(U.types.stsd,U.STSD,U.avc1(e));if(t==="hevc"&&e.vps)return U.box(U.types.stsd,U.STSD,U.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),s=e.width||0,i=e.height||0,a=Math.floor(n/(Tn+1)),o=Math.floor(n%(Tn+1));return U.box(U.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,t){const n=U.sdtp(e),s=e.id,i=Math.floor(t/(Tn+1)),a=Math.floor(t%(Tn+1));return U.box(U.types.traf,U.box(U.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),U.box(U.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,a>>24,a>>16&255,a>>8&255,a&255])),U.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,U.box(U.types.trak,U.tkhd(e),U.mdia(e))}static trex(e){const t=e.id;return U.box(U.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],s=n.length,i=12+16*s,a=new Uint8Array(i);let o,l,c,u,d,f;for(t+=8+i,a.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<s;o++)l=n[o],c=l.duration,u=l.size,d=l.flags,f=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*o);return U.box(U.types.trun,a)}static initSegment(e){U.types||U.init();const t=U.moov(e);return ur(U.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],s=4,i=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let a=i.length;for(let h=0;h<n.length;h+=1){a+=3;for(let g=0;g<n[h].length;g+=1)a+=2+n[h][g].length}const o=new Uint8Array(a);o.set(i,0),a=i.length;const l=n.length-1;for(let h=0;h<n.length;h+=1){o.set(new Uint8Array([32+h|(h===l?128:0),0,n[h].length]),a),a+=3;for(let g=0;g<n[h].length;g+=1)o.set(new Uint8Array([n[h][g].length>>8,n[h][g].length&255]),a),a+=2,o.set(n[h][g],a),a+=n[h][g].length}const c=U.box(U.types.hvcC,o),u=e.width,d=e.height,f=e.pixelRatio[0],p=e.pixelRatio[1];return U.box(U.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,U.box(U.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),U.box(U.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,p>>24,p>>16&255,p>>8&255,p&255])))}}U.types=void 0;U.HDLR_TYPES=void 0;U.STTS=void 0;U.STSC=void 0;U.STCO=void 0;U.STSZ=void 0;U.VMHD=void 0;U.SMHD=void 0;U.STSD=void 0;U.FTYP=void 0;U.DINF=void 0;const iE=9e4;function Up(r,e,t=1,n=!1){const s=r*e*t;return n?Math.round(s):s}function TD(r,e,t=1,n=!1){return Up(r,e,1/t,n)}function Yi(r,e=!1){return Up(r,1e3,1/iE,e)}function AD(r,e=1){return Up(r,iE,1/e)}function lx(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const ID=10*1e3,LD=1024,CD=1152,RD=1536;let Us=null,nd=null;function cx(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class yl extends fr{constructor(e,t,n,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Us===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Us=a?parseInt(a[1]):0}if(nd===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);nd=i?parseInt(i[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&lx(t)} > ${e&&lx(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,s=e.reduce((i,a)=>{let o=a.pts,l=o-i;return l<-4294967296&&(t=!0,o=Wt(o,n),l=o-i),l>0?i:o},n);return t&&this.debug("PTS rollover detected"),s}remux(e,t,n,s,i,a,o,l){let c,u,d,f,p,h,g=i,y=i;const b=e.pid>-1,m=t.pid>-1,v=t.samples.length,S=e.samples.length>0,E=o&&v>0||v>1;if((!b||S)&&(!m||E)||this.ISGenerated||o){if(this.ISGenerated){var L,I,T,w;const N=this.videoTrackConfig;(N&&(t.width!==N.width||t.height!==N.height||((L=t.pixelRatio)==null?void 0:L[0])!==((I=N.pixelRatio)==null?void 0:I[0])||((T=t.pixelRatio)==null?void 0:T[1])!==((w=N.pixelRatio)==null?void 0:w[1]))||!N&&E||this.nextAudioTs===null&&S)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,i,a));const R=this.isVideoContiguous;let _=-1,k;if(E&&(_=kD(t.samples),!R&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,_>0){this.warn(`Dropped ${_} out of ${v} video samples due to a missing keyframe`);const N=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(_),t.dropped+=_,y+=(t.samples[0].pts-N)/t.inputTimeScale,k=y}else _===-1&&(this.warn(`No keyframe found out of ${v} video samples`),h=!1);if(this.ISGenerated){if(S&&E){const N=this.getVideoStartPts(t.samples),O=(Wt(e.samples[0].pts,N)-N)/t.inputTimeScale;g+=Math.max(0,O),y+=Math.max(0,-O)}if(S){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,i,a)),u=this.remuxAudio(e,g,this.isAudioContiguous,a,m||E||l===Z.AUDIO?y:void 0),E){const N=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,i,a)),c=this.remuxVideo(t,y,R,N)}}else E&&(c=this.remuxVideo(t,y,R,0));c&&(c.firstKeyFrame=_,c.independent=_!==-1,c.firstKeyFramePTS=k)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(p=aE(n,i,this._initPTS,this._initDTS)),s.samples.length&&(f=oE(s,i,this._initPTS))),{audio:u,video:c,initSegment:d,independent:h,text:f,id3:p}}computeInitPts(e,t,n,s){const i=Math.round(n*t);let a=Wt(e,i);if(a<i+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(i-a)/t} ${s}`);a<i+t;)a+=8589934592;return a-i}generateIS(e,t,n,s){const i=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||s,d="audio/mp4",f,p,h,g=-1;if(u&&(f=p=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):U.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(g=e.id,h=e.inputTimeScale,!c||h!==c.timescale?f=p=this.computeInitPts(i[0].pts,h,n,"audio"):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:U.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(g=t.id,h=t.inputTimeScale,!c||h!==c.timescale){const y=this.getVideoStartPts(a),b=Wt(a[0].dts,y),m=this.computeInitPts(b,h,n,"video"),v=this.computeInitPts(y,h,n,"video");p=Math.min(p,m),f=Math.min(f,v)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(c&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${n} ${f/h} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${f/h} (${f}/${h}) trackId: ${g}`),this._initPTS={baseTime:f,timescale:h,trackId:g},this._initDTS={baseTime:p,timescale:h,trackId:g}):f=h=void 0,{tracks:l,initPTS:f,timescale:h,trackId:g}}remuxVideo(e,t,n,s){const i=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS,u=c.baseTime*i/c.timescale;let d=this.nextVideoTs,f=8,p=this.videoSampleDuration,h,g,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,m=!1;if(!n||d===null){const $=u+t*i,G=a[0].pts-Wt(a[0].dts,a[0].pts);Us&&d!==null&&Math.abs($-G-(d+u))<15e3?n=!0:d=$-G-u}const v=d+u;for(let $=0;$<l;$++){const G=a[$];G.pts=Wt(G.pts,v),G.dts=Wt(G.dts,v),G.dts<a[$>0?$-1:$].dts&&(m=!0)}m&&a.sort(function($,G){const Y=$.dts-G.dts,ee=$.pts-G.pts;return Y||ee}),h=a[0].dts,g=a[a.length-1].dts;const S=g-h,E=S?Math.round(S/(l-1)):p||e.inputTimeScale/30;if(n){const $=h-v,G=$>E,Y=$<-1;if((G||Y)&&(G?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Yi($,!0)} ms (${$}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Yi(-$,!0)} ms (${$}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!Y||v>=a[0].pts||Us)){h=v;const ee=a[0].pts-$;if(G)a[0].dts=h,a[0].pts=ee;else{let te=!0;for(let se=0;se<a.length&&!(a[se].dts>ee&&te);se++){const we=a[se].pts;if(a[se].dts-=$,a[se].pts-=$,se<a.length-1){const le=a[se+1].pts,he=a[se].pts,De=le<=he,Qe=le<=we;te=De==Qe}}}this.log(`Video: Initial PTS/DTS adjusted: ${Yi(ee,!0)}/${Yi(h,!0)}, delta: ${Yi($,!0)} ms`)}}h=Math.max(0,h);let C=0,L=0,I=h;for(let $=0;$<l;$++){const G=a[$],Y=G.units,ee=Y.length;let te=0;for(let se=0;se<ee;se++)te+=Y[se].data.length;L+=te,C+=ee,G.length=te,G.dts<I?(G.dts=I,I+=E/4|0||1):I=G.dts,y=Math.min(G.pts,y),b=Math.max(G.pts,b)}g=a[l-1].dts;const T=L+4*C+8;let w;try{w=new Uint8Array(T)}catch($){this.observer.emit(A.ERROR,A.ERROR,{type:re.MUX_ERROR,details:z.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:T,reason:`fail allocating video mdat ${T}`});return}const R=new DataView(w.buffer);R.setUint32(0,T),w.set(U.types.mdat,4);let _=!1,k=Number.POSITIVE_INFINITY,N=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY;for(let $=0;$<l;$++){const G=a[$],Y=G.units;let ee=0;for(let we=0,le=Y.length;we<le;we++){const he=Y[we],De=he.data,Qe=he.data.byteLength;R.setUint32(f,Qe),f+=4,w.set(De,f),f+=Qe,ee+=4+Qe}let te;if($<l-1)p=a[$+1].dts-G.dts,te=a[$+1].pts-G.pts;else{const we=this.config,le=$>0?G.dts-a[$-1].dts:E;if(te=$>0?G.pts-a[$-1].pts:E,we.stretchShortVideoTrack&&this.nextAudioTs!==null){const he=Math.floor(we.maxBufferHole*i),De=(s?y+s*i:this.nextAudioTs+u)-G.pts;De>he?(p=De-le,p<0?p=le:_=!0,this.log(`It is approximately ${De/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=le}else p=le}const se=Math.round(G.pts-G.dts);k=Math.min(k,p),M=Math.max(M,p),N=Math.min(N,te),O=Math.max(O,te),o.push(cx(G.key,p,ee,se))}if(o.length){if(Us){if(Us<70){const $=o[0].flags;$.dependsOn=2,$.isNonSync=0}}else if(nd&&O-N<M-k&&E/M<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let $=h;for(let G=0,Y=o.length;G<Y;G++){const ee=$+o[G].duration,te=$+o[G].cts;if(G<Y-1){const se=ee+o[G+1].cts;o[G].duration=se-te}else o[G].duration=G?o[G-1].duration:E;o[G].cts=0,$=ee}}}p=_||!p?E:p;const j=g+p;this.nextVideoTs=d=j-u,this.videoSampleDuration=p,this.isVideoContiguous=!0;const B={data1:U.moof(e.sequenceNumber++,h,Me(e,{samples:o})),data2:w,startPTS:(y-u)/i,endPTS:(b+p-u)/i,startDTS:(h-u)/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,B}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return CD;case"ac3":return RD;default:return LD}}remuxAudio(e,t,n,s,i){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],h=i!==void 0;let g=e.samples,y=f?0:8,b=this.nextAudioTs||-1;const m=d.baseTime*a/d.timescale,v=m+t*a;if(this.isAudioContiguous=n=n||g.length&&b>0&&(s&&Math.abs(v-(b+m))<9e3||Math.abs(Wt(g[0].pts,v)-(b+m))<20*u),g.forEach(function(O){O.pts=Wt(O.pts,v)}),!n||b<0){const O=g.length;if(g=g.filter(j=>j.pts>=0),O!==g.length&&this.warn(`Removed ${g.length-O} of ${O} samples (initPTS ${m} / ${a})`),!g.length)return;i===0?b=0:s&&!h?b=Math.max(0,v-m):b=g[0].pts-m}if(e.segmentCodec==="aac"){const O=this.config.maxAudioFramesDrift;for(let j=0,P=b+m;j<g.length;j++){const F=g[j],B=F.pts,$=B-P,G=Math.abs(1e3*$/a);if($<=-O*u&&h)j===0&&(this.warn(`Audio frame @ ${(B/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*$/a)} ms.`),this.nextAudioTs=b=B-m,P=B);else if($>=O*u&&G<ID&&h){let Y=Math.round($/u);for(P=B-Y*u;P<0&&Y&&u;)Y--,P+=u;j===0&&(this.nextAudioTs=b=P-m),this.warn(`Injecting ${Y} audio frames @ ${((P-m)/a).toFixed(3)}s due to ${Math.round(1e3*$/a)} ms gap.`);for(let ee=0;ee<Y;ee++){let te=wD.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);te||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),te=F.unit.subarray()),g.splice(j,0,{unit:te,pts:P}),P+=u,j++}}F.pts=P,P+=u}}let S=null,E=null,C,L=0,I=g.length;for(;I--;)L+=g[I].unit.byteLength;for(let O=0,j=g.length;O<j;O++){const P=g[O],F=P.unit;let B=P.pts;if(E!==null){const G=p[O-1];G.duration=Math.round((B-E)/l)}else if(n&&e.segmentCodec==="aac"&&(B=b+m),S=B,L>0){L+=y;try{C=new Uint8Array(L)}catch(G){this.observer.emit(A.ERROR,A.ERROR,{type:re.MUX_ERROR,details:z.REMUX_ALLOC_ERROR,fatal:!1,error:G,bytes:L,reason:`fail allocating audio mdat ${L}`});return}f||(new DataView(C.buffer).setUint32(0,L),C.set(U.types.mdat,4))}else return;C.set(F,y);const $=F.byteLength;y+=$,p.push(cx(!0,c,$,0)),E=B}const T=p.length;if(!T)return;const w=p[p.length-1];b=E-m,this.nextAudioTs=b+l*w.duration;const R=f?new Uint8Array(0):U.moof(e.sequenceNumber++,S/l,Me({},e,{samples:p}));e.samples=[];const _=(S-m)/a,k=b/a,M={data1:R,data2:C,startPTS:_,endPTS:k,startDTS:_,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:T};return this.isAudioContiguous=!0,M}}function Wt(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function kD(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function aE(r,e,t,n){const s=r.samples.length;if(!s)return;const i=r.inputTimeScale;for(let o=0;o<s;o++){const l=r.samples[o];l.pts=Wt(l.pts-t.baseTime*i/t.timescale,e*i)/i,l.dts=Wt(l.dts-n.baseTime*i/n.timescale,e*i)/i}const a=r.samples;return r.samples=[],{samples:a}}function oE(r,e,t){const n=r.samples.length;if(!n)return;const s=r.inputTimeScale;for(let a=0;a<n;a++){const o=r.samples[a];o.pts=Wt(o.pts-t.baseTime*s/t.timescale,e*s)/s}r.samples.sort((a,o)=>a.pts-o.pts);const i=r.samples;return r.samples=[],{samples:i}}class _D extends fr{constructor(e,t,n,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,s){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,s),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:i,video:a}=this.initData=hS(e);if(t)v4(e,t);else{const l=i||a;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}i&&(n=ux(i,Fe.AUDIO,this)),a&&(s=ux(a,Fe.VIDEO,this));const o={};i&&a?o.audiovideo={container:"video/mp4",codec:n+","+s,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:i?o.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:s,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,s,i,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};X(u)||(u=this.lastEndTime=i||0);const f=t.samples;if(!f.length)return d;const p={initPTS:void 0,timescale:void 0,trackId:void 0};let h=this.initData;if((o=h)!=null&&o.length||(this.generateInitSegment(f),h=this.initData),!((l=h)!=null&&l.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const g=b4(f,h,this),y=h.audio?g[h.audio.id]:null,b=h.video?g[h.video.id]:null,m=Vo(b,1/0),v=Vo(y,1/0),S=Vo(b,0,!0),E=Vo(y,0,!0);let C=i,L=0;const I=y&&(!b||!c&&v<m||c&&c.trackId===h.audio.id),T=I?y:b;if(T){const P=T.timescale,F=T.start-i*P,B=I?h.audio.id:h.video.id;C=T.start/P,L=I?E-v:S-m,(a||!c)&&(PD(c,C,i,L)||P!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${i} ${F/P} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${C-i} (${F}/${P}) trackId: ${B}`),c=null,p.initPTS=F,p.timescale=P,p.trackId=B)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${i}`);c?(p.initPTS=c.baseTime,p.timescale=c.timescale,p.trackId=c.trackId):((!p.timescale||p.trackId===void 0||p.initPTS===void 0)&&(this.warn("Could not set initPTS"),p.initPTS=C,p.timescale=1,p.trackId=-1),this.initPTS=c={baseTime:p.initPTS,timescale:p.timescale,trackId:p.trackId});const w=C-c.baseTime/c.timescale,R=w+L;L>0?this.lastEndTime=R:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const _=!!h.audio,k=!!h.video;let N="";_&&(N+="audio"),k&&(N+="video");const M=(h.audio?h.audio.encrypted:!1)||(h.video?h.video.encrypted:!1),O={data1:f,startPTS:w,startDTS:w,endPTS:R,endDTS:R,type:N,hasAudio:_,hasVideo:k,nb:1,dropped:0,encrypted:M};d.audio=_&&!k?O:void 0,d.video=k?O:void 0;const j=b==null?void 0:b.sampleCount;if(j){const P=b.keyFrameIndex,F=P!==-1;O.nb=j,O.dropped=P===0||this.isVideoContiguous?0:F?P:j,O.independent=F,O.firstKeyFrame=P,F&&b.keyFrameStart&&(O.firstKeyFramePTS=(b.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(d.independent=F),this.isVideoContiguous||(this.isVideoContiguous=F),O.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${P}/${j} dropped: ${O.dropped} start: ${O.firstKeyFramePTS||"NA"}`)}return d.initSegment=p,d.id3=aE(n,i,c,c),s.samples.length&&(d.text=oE(s,i,c)),d}}function Vo(r,e,t=!1){return(r==null?void 0:r.start)!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function PD(r,e,t,n){if(r===null)return!0;const s=Math.max(n,1),i=e-r.baseTime/r.timescale;return Math.abs(i-t)>s}function ux(r,e,t){const n=r.codec;return n&&n.length>4?n:e===Fe.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?cc(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let nn;try{nn=self.performance.now.bind(self.performance)}catch{nn=Date.now}const bl=[{demux:xD,remux:_D},{demux:kn,remux:yl},{demux:hD,remux:yl},{demux:mD,remux:yl}];bl.splice(2,0,{demux:pD,remux:yl});class dx{constructor(e,t,n,s,i,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,s){const i=n.transmuxing;i.executeStart=nn();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:f,timeOffset:p,initSegmentChange:h}=s||o,{audioCodec:g,videoCodec:y,defaultInitPts:b,duration:m,initSegmentData:v}=l,S=DD(a,t);if(S&&hi(S.method)){const I=this.getDecrypter(),T=Pp(S.method);if(I.isSync()){let w=I.softwareDecrypt(a,S.key.buffer,S.iv.buffer,T);if(n.part>-1){const _=I.flush();w=_&&_.buffer}if(!w)return i.executeEnd=nn(),sd(n);a=new Uint8Array(w)}else return this.asyncResult=!0,this.decryptionPromise=I.webCryptoDecrypt(a,S.key.buffer,S.iv.buffer,T).then(w=>{const R=this.push(w,null,n);return this.decryptionPromise=null,R}),this.decryptionPromise}const E=this.needsProbing(u,d);if(E){const I=this.configureTransmuxer(a);if(I)return this.logger.warn(`[transmuxer] ${I.message}`),this.observer.emit(A.ERROR,A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),i.executeEnd=nn(),sd(n)}(u||d||h||E)&&this.resetInitSegment(v,g,y,m,t),(u||h||E)&&this.resetInitialTimestamp(b),c||this.resetContiguity();const C=this.transmux(a,S,p,f,n);this.asyncResult=Ha(C);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,i.executeEnd=nn(),C}flush(e){const t=e.transmuxing;t.executeStart=nn();const{decrypter:n,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const a=[],{timeOffset:o}=s;if(n){const d=n.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){t.executeEnd=nn();const d=[sd(e)];return this.asyncResult?Promise.resolve(d):d}const u=l.flush(o);return Ha(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:s,videoTrack:i,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Z.MAIN?"level":"track"} ${n.level}`);const u=this.remuxer.remux(s,i,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:n}),n.transmuxing.executeEnd=nn()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,s,i){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,n,s),o.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,s,i){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,s,i):a=this.transmuxUnencrypted(e,n,s,i),a}transmuxUnencrypted(e,t,n,s){const{audioTrack:i,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,o,l,t,n,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,n,s,i){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:s}=this;let i;for(let d=0,f=bl.length;d<f;d++){var a;if((a=bl[d].demux)!=null&&a.probe(e,this.logger)){i=bl[d];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=i.remux,u=i.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(n,t,s,this.logger)),(!o||!(o instanceof u))&&(this.demuxer=new u(n,t,s,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new kp(this.config)),e}}function DD(r,e){let t=null;return r.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const sd=r=>({remuxResult:{},chunkMeta:r});function Ha(r){return"then"in r&&r.then instanceof Function}class ND{constructor(e,t,n,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=s,this.defaultInitPts=i||null}}class OD{constructor(e,t,n,s,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=a}}let fx=0;class lE{constructor(e,t,n,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=fx++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,u=this.hls;if(!(!u||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const f=(d=this.workerContext)==null?void 0:d.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{u.logger[c.data.logType]&&u.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,u.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=s;const a=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===A.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new Op,this.observer.on(A.FRAG_DECRYPTED,a),this.observer.on(A.ERROR,a);const o=L0(i.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(i.workerPath||$P()){try{i.workerPath?(l.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=UP(i.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=BP());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:je(i)})}catch(u){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new dx(this.observer,o,i,"",t,e.logger)}return}}this.transmuxer=new dx(this.observer,o,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=fx++;const t=this.hls.config,n=L0(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:je(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),zP(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,s,i,a,o,l,c,u){var d,f;c.transmuxing.start=self.performance.now();const{instanceNo:p,transmuxer:h}=this,g=a?a.start:i.start,y=i.decryptdata,b=this.frag,m=!(b&&i.cc===b.cc),v=!(b&&c.level===b.level),S=b?c.sn-b.sn:-1,E=this.part?c.part-this.part.index:-1,C=S===0&&c.id>1&&c.id===(b==null?void 0:b.stats.chunkCount),L=!v&&(S===1||S===0&&(E===1||C&&E<=0)),I=self.performance.now();(v||S||i.stats.parsing.start===0)&&(i.stats.parsing.start=I),a&&(E||!L)&&(a.stats.parsing.start=I);const T=!(b&&((d=i.initSegment)==null?void 0:d.url)===((f=b.initSegment)==null?void 0:f.url)),w=new OD(m,L,l,v,g,T);if(!L||m||T){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===Z.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${m}
        trackSwitch: ${v}
        contiguous: ${L}
        accurateTimeOffset: ${l}
        timeOffset: ${g}
        initSegmentChange: ${T}`);const R=new ND(n,s,t,o,u);this.configureTransmuxer(R)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:p,cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:w},e instanceof ArrayBuffer?[e]:[]);else if(h){const R=h.push(e,y,c,w);Ha(R)?R.then(_=>{this.handleTransmuxComplete(_)}).catch(_=>{this.transmuxerError(_,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(R)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const s=n.flush(e);Ha(s)?s.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const hx=100;class MD extends Np{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Z.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(A.LEVEL_LOADED,this.onLevelLoaded,this),e.on(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(A.BUFFER_RESET,this.onBufferReset,this),e.on(A.BUFFER_CREATED,this.onBufferCreated,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(A.FRAG_LOADING,this.onFragLoading,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(A.LEVEL_LOADED,this.onLevelLoaded,this),e.off(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(A.BUFFER_RESET,this.onBufferReset,this),e.off(A.BUFFER_CREATED,this.onBufferCreated,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(A.FRAG_LOADING,this.onFragLoading,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:s,timescale:i,trackId:a}){if(n===Z.MAIN){const o=t.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:s,timescale:i,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${s/i} (${s}/${i}) trackId: ${a}`),this.mainAnchor=t,this.state===H.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(t,l)):this.state===H.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const s=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&(s==null?void 0:s.cc)===t.cc)return;const i=(s||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),l=TS(a,i,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===H.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=H.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(hx),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=H.IDLE):this.state=H.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case H.IDLE:this.doTickIdle();break;case H.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e==null?void 0:e[t],s=n==null?void 0:n.details;if(s&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(s))break;this.state=H.WAITING_INIT_PTS}break}case H.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case H.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:s,complete:i}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=H.FRAG_LOADING;const o=s.flush().buffer,l={frag:t,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),i&&super._handleFragmentLoadComplete(l)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=H.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:s,trackId:i}=this,a=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[i]))return;const o=n[i],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=H.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Fe.AUDIO,Z.AUDIO));const u=this.getFwdBufferInfo(c,Z.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){t.trigger(A.BUFFER_EOS,{type:"audio"}),this.state=H.ENDED;return}const d=u.len,f=t.maxBufferLength,p=l.fragments,h=p[0].start,g=this.getLoadPosition(),y=this.flushing?g:u.end;if(this.switchingTrack&&s){const v=g;l.PTSKnown&&v<h&&(u.end>h||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=h+.05)}if(d>=f&&!this.switchingTrack&&y<p[p.length-1].start)return;let b=this.getNextFragment(y,l);if(b&&this.isLoopLoading(b,y)&&(b=this.getNextFragmentLoopLoading(b,l,u,Z.MAIN,f)),!b){this.bufferFlushed=!0;return}let m=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&m&&rt(b)&&!b.endList&&(!l.live||!this.loadingParts&&y<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(m)===ot.OK&&(this.mainFragLoading=m=null),m&&rt(m))){if(b.start>m.end){const S=this.fragmentTracker.getFragAtPos(y,Z.MAIN);S&&S.end>m.end&&(m=S,this.mainFragLoading={frag:S,targetBufferTime:null})}if(b.start>m.end)return}this.loadFragment(b,o,y)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new za(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==H.STOPPED&&(this.setInterval(hx),this.state=H.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(A.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:s}=this,{details:i,id:a,groupId:o,track:l}=t;if(!s){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||i.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==H.STOPPED&&(this.state=H.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const u=s[a];let d=0;if(i.live||(n=u.details)!=null&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;if(u.details){var f;d=this.alignPlaylists(i,u.details,(f=this.levelLastLoaded)==null?void 0:f.details)}i.alignedSliding||(zS(i,c),i.alignedSliding||gc(i,c),d=i.fragmentStart)}u.details=i,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(A.AUDIO_TRACK_UPDATED,{details:i,id:a,groupId:t.groupId}),this.state===H.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=H.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:s,payload:i}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new lE(this.hls,Z.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[n.cc],h=(t=n.initSegment)==null?void 0:t.data;if(p!==void 0){const y=s?s.index:-1,b=y!==-1,m=new _p(n.level,n.sn,n.stats.chunkCount,i.byteLength,y,b);f.push(i,h,d,"",n,s,u.totalduration,!1,m,p)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:g}=this.waitingData=this.waitingData||{frag:n,part:s,cache:new VS,complete:!1};g.push(new Uint8Array(i)),this.state!==H.STOPPED&&(this.state=H.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Z.MAIN&&rt(t.frag)&&(this.mainFragLoading=t,this.state===H.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:s}=t;if(n.type!==Z.AUDIO){!this.audioOnly&&n.type===Z.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(rt(n)){this.fragPrevious=n;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(A.AUDIO_TRACK_SWITCHED,ke({},i)))}this.fragBufferedComplete(n,s),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=H.ERROR;return}switch(t.details){case z.FRAG_GAP:case z.FRAG_PARSING_ERROR:case z.FRAG_DECRYPT_ERROR:case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Z.AUDIO,t);break;case z.AUDIO_TRACK_LOAD_ERROR:case z.AUDIO_TRACK_LOAD_TIMEOUT:case z.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===H.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Se.AUDIO_TRACK&&(this.state=H.IDLE);break;case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case z.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case z.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Fe.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Fe.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===H.ENDED&&(this.state=H.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Z.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:s}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:f,text:p,id3:h,initSegment:g}=i;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=H.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const y=l.initSegment||l;if(this.unhandledEncryptionError(g,l))return;this._bufferInitSegment(u,g.tracks,y,a),s.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:n,tracks:g.tracks})}if(f){const{startPTS:y,endPTS:b,startDTS:m,endDTS:v}=f;c&&(c.elementaryStreams[Fe.AUDIO]={startPTS:y,endPTS:b,startDTS:m,endDTS:v}),l.setElementaryStreamInfo(Fe.AUDIO,y,b,m,v),this.bufferFragmentData(f,l,c,a)}if(h!=null&&(t=h.samples)!=null&&t.length){const y=Me({id:n,frag:l,details:d},h);s.trigger(A.FRAG_PARSING_METADATA,y)}if(p){const y=Me({id:n,frag:l,details:d},p);s.trigger(A.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,t,n,s){if(this.state!==H.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const i=t.audio;i.id=Z.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${a}/${i.codec}]`),a&&a.split(",").length===1&&(i.levelCodec=a),this.hls.trigger(A.BUFFER_CODECS,t);const o=i.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:s,parent:n.type,data:o};this.hls.trigger(A.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,n){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===ot.NOT_LOADED||s===ot.PARTIAL){var i;if(!rt(e))this._loadInitSegment(e,t);else if((i=t.details)!=null&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=H.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&gc(t.details,a)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:s,characteristics:i,audioCodec:a,channels:o}=this.bufferedTrack;Ss({name:t,lang:n,assocLang:s,characteristics:i,audioCodec:a,channels:o},e,ds)||(dc(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(A.AUDIO_TRACK_SWITCHED,ke({},e))}}class zp extends fr{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const s=t==null?void 0:t.renditionReports;if(s){let i=-1;for(let a=0;a<s.length;a++){const o=s[a];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){i=a;break}else l===e.substring(0,l.length)&&(i=a)}if(i!==-1){const a=s[i],o=parseInt(a["LAST-MSN"])||t.lastPartSn;let l=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=n&&C0(n);return new R0(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:s,stats:i}=t,a=self.performance.now(),o=i.loading.first?Math.max(0,a-i.loading.first):0;s.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==s.appliedTimelineOffset){const u=Math.max(l||0,0);s.appliedTimelineOffset=u,s.fragments.forEach(d=>{d.setStart(d.playlistOffset+u)})}if(s.live||n!=null&&n.live){const u="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(n),n&&s.fragments.length>0){CP(n,s,this);const m=s.playlistParsingError;if(m){this.warn(m);const v=this.hls;if(!v.config.ignorePlaylistParsingErrors){var c;const{networkDetails:S}=t;v.trigger(A.ERROR,{type:re.NETWORK_ERROR,details:z.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:m,reason:m.message,level:t.level||void 0,parent:(c=s.fragments[0])==null?void 0:c.type,networkDetails:S,stats:i});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=i.loading.start);const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,p=(s.edge-f)*1e3,h=FS(s,p);if(s.requestScheduled+h<a?s.requestScheduled=a:s.requestScheduled+=h,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let g,y,b;if(s.canBlockReload&&s.endSN&&s.advanced){const m=this.hls.config.lowLatencyMode,v=s.lastPartSn,S=s.endSN,E=s.lastPartIndex,C=E!==-1,L=v===S;C?L?(y=S+1,b=m?0:E):(y=v,b=m?E+1:s.maxPartIndex):y=S+1;const I=s.age,T=I+s.ageHeader;let w=Math.min(T-s.partTarget,s.targetduration*1.5);if(w>0){if(T>s.targetduration*3)this.log(`Playlist last advanced ${I.toFixed(2)}s ago. Omitting segment and part directives.`),y=void 0,b=void 0;else if(n!=null&&n.tuneInGoal&&T-s.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${w} with playlist age: ${s.age}`),w=0;else{const R=Math.floor(w/s.targetduration);if(y+=R,b!==void 0){const _=Math.round(w%s.targetduration/s.partTarget);b+=_}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${I.toFixed(2)}s goal: ${w} skip sn ${R} to part ${b}`)}s.tuneInGoal=w}if(g=this.getDeliveryDirectives(s,t.deliveryDirectives,y,b),m||!L){s.requestScheduled=a,this.loadingPlaylist(u,g);return}}else(s.canBlockReload||s.canSkipUntil)&&(g=this.getDeliveryDirectives(s,t.deliveryDirectives,y,b));g&&y!==void 0&&s.canBlockReload&&(s.requestScheduled=i.loading.first+Math.max(h-o*2,h/2)),this.scheduleLoading(u,g,s)}else this.clearTimer()}scheduleLoading(e,t,n){const s=n||e.details;if(!s){this.loadingPlaylist(e,t);return}const i=self.performance.now(),a=s.requestScheduled;if(i>=a){this.loadingPlaylist(e,t);return}const o=a-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,n,s){let i=C0(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,s=t.part,i=xl.No),new R0(n,s,i)}checkRetry(e){const t=e.details,n=fc(e),s=e.errorAction,{action:i,retryCount:a=0,retryConfig:o}=s||{},l=!!s&&!!o&&(i===pt.RetryRequest||!s.resolved&&i===pt.SendAlternateToPenaltyBox);if(l){var c;if(a>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=Rp(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}function cE(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Ka(r[t].attrs,e[t].attrs))return!1;return!0}function Ka(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>r[s]!==e[s])}function th(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class FD extends zp{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.LEVEL_LOADING,this.onLevelLoading,this),e.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.LEVEL_LOADING,this.onLevelLoading,this),e.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(A.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:s,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==s){this.warn(`Audio track with id:${n} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,s=this.groupIds;let i=this.currentTrack;if(!n||(s==null?void 0:s.length)!==(n==null?void 0:n.length)||n!=null&&n.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(f=>f.default)&&(this.selectDefaultTrack=!1),o.forEach((f,p)=>{f.id=p});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!i&&l){const f=$r(l,o,ds);if(f>-1)i=o[f];else{const p=$r(l,this.tracks);i=this.tracks[p]}}let c=this.findTrackId(i);c===-1&&i&&(c=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(A.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const f=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(f.message),this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,t){t.fatal||!t.context||t.context.type===Se.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const s=this.currentTrack;if(s&&Ss(e,s,ds))return s;const i=$r(e,this.tracksInGroup,ds);if(i>-1){const a=this.tracksInGroup[i];return this.setAudioTrack(i),a}else if(s){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=Y4(e,t.levels,n,a,ds);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=$r(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=t[e],i=s.details&&!s.details.live;if(e===this.trackId&&s===n&&i||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(A.AUDIO_TRACK_SWITCHING,ke({},s)),i))return;const a=this.switchParams(s.url,n==null?void 0:n.details,s.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const s=t[n];if(!(this.selectDefaultTrack&&!s.default)&&(!e||Ss(e,s,ds)))return n}if(e){const{name:n,lang:s,assocLang:i,characteristics:a,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(Ss({name:n,lang:s,assocLang:i,characteristics:a,audioCodec:o,channels:l},u,ds))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Ka(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Ka(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&dc(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,s=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(A.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:s,deliveryDirectives:t||null,track:e})}}class jD{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const s=this.queues[t];s.push(e),s.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(i){var n;if(s.onError(i),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],s=n==null?void 0:n.buffer;return s?`SourceBuffer${s.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const px=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,uE="HlsJsTrackRemovedError";class $D extends Error{constructor(e){super(e),this.name=uE}}class BD extends fr{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:s,mediaSource:i}=this;n&&this.log("Media source opened"),!(!s||!i)&&(i.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(A.MEDIA_ATTACHED,{media:s,mediaSource:i}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:s}=this;n!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=l4(Jn(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.BUFFER_RESET,this.onBufferReset,this),e.on(A.BUFFER_APPENDING,this.onBufferAppending,this),e.on(A.BUFFER_CODECS,this.onBufferCodecs,this),e.on(A.BUFFER_EOS,this.onBufferEos,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(A.FRAG_PARSED,this.onFragParsed,this),e.on(A.FRAG_CHANGED,this.onFragChanged,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.BUFFER_RESET,this.onBufferReset,this),e.off(A.BUFFER_APPENDING,this.onBufferAppending,this),e.off(A.BUFFER_CODECS,this.onBufferCodecs,this),e.off(A.BUFFER_EOS,this.onBufferEos,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(A.FRAG_PARSED,this.onFragParsed,this),e.off(A.FRAG_CHANGED,this.onFragChanged,this),e.off(A.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const i=this.isUpdating();i||this.operationQueue.removeBlockers();const a=this.isQueued();(i||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${i?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?Me(n,s.tracks):this.sourceBuffers.forEach(i=>{const[a]=i;a&&(n[a]=Me({},this.tracks[a]),this.removeBuffer(a)),i[0]=i[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const s=Jn(this.appendSource);if(s){const i=!!t.mediaSource;(i||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(a),i)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&a instanceof l,mx(n),UD(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,s=t.tracks,i=s?Object.keys(s):null,a=i?i.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(s&&i&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${je(n,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${je(s,(l,c)=>l==="initSegment"?void 0:c)}}`),!aS(s,n)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,c=this.details,u=Math.max(l,(c==null?void 0:c.fragments[0].start)||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(n)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching(A.MEDIA_DETACHING,{}),this.onMediaAttaching(A.MEDIA_ATTACHING,t),e.currentTime=u;return}this.transferData=void 0,i.forEach(l=>{const c=l,u=s[c];if(u){const d=u.buffer;if(d){const f=this.fragmentTracker,p=u.id;if(f.hasFragments(p)||f.hasParts(p)){const y=fe.getBuffered(d);f.detectEvictedFragments(c,y,p,null,!0)}const h=id(c),g=[c,d];this.sourceBuffers[h]=g,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,u)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:i,_objectUrl:a}=this;if(i){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=i.readyState==="open";try{const l=i.sourceBuffers;for(let c=l.length;c--;)o&&l[c].abort(),i.removeSourceBuffer(l[c]);o&&i.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(s.removeAttribute("src"),this.appendSource&&mx(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(A.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(i){this.warn(`onBufferReset ${e}`,i)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[id(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new jD(this.tracks)}onBufferCodecs(e,t){var n;const s=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in t&&(s.audio||s.video)||s.audiovideo&&("audio"in t||"video"in t),o=!a&&this.sourceBufferCount&&this.media&&i.some(l=>!s[l]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(s)}" and "${i}" SourceBuffers`);return}i.forEach(l=>{var c,u;const d=t[l],{id:f,codec:p,levelCodec:h,container:g,metadata:y,supplemental:b}=d;let m=s[l];const v=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[l],S=v!=null&&v.buffer?v:m,E=(S==null?void 0:S.pendingCodec)||(S==null?void 0:S.codec),C=S==null?void 0:S.levelCodec;m||(m=s[l]={buffer:void 0,listeners:[],codec:p,supplemental:b,container:g,levelCodec:h,metadata:y,id:f});const L=gl(E,C),I=L==null?void 0:L.replace(px,"$1");let T=gl(p,h);const w=(u=T)==null?void 0:u.replace(px,"$1");T&&L&&I!==w&&(l.slice(0,5)==="audio"&&(T=cc(T,this.appendSource)),this.log(`switching codec ${E} to ${T}`),T!==(m.pendingCodec||m.codec)&&(m.pendingCodec=T),m.container=g,this.appendChangeType(l,g,T))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const s=`${t};codecs=${n}`,i={label:`change-type=${s}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),o.changeType(s),a.codec=n,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,s=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,Z.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>s||l!=null&&l.buffer&&fe.isBuffered(l.buffer,s)||((o=this.fragmentTracker.getAppendedFrag(s,Z.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:s,type:i,parent:a,frag:o,part:l,chunkMeta:c,offset:u}=t,d=c.buffering[i],{sn:f,cc:p}=o,h=self.performance.now();d.start=h;const g=o.stats.buffering,y=l?l.stats.buffering:null;g.start===0&&(g.start=h),y&&y.start===0&&(y.start=h);const b=n.audio;let m=!1;i==="audio"&&(b==null?void 0:b.container)==="audio/mpeg"&&(m=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const v=n.video,S=v==null?void 0:v.buffer;if(S&&f!=="initSegment"){const L=l||o,I=this.blockedAudioAppend;if(i==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(v.ending||v.ended)){const w=L.start+L.duration*.05,R=S.buffered,_=this.currentOp("video");!R.length&&!_?this.blockAudio(L):!_&&!fe.isBuffered(S,w)&&this.lastVideoAppendEnd<w&&this.blockAudio(L)}else if(i==="video"){const T=L.end;if(I){const w=I.frag.start;(T>w||T<this.lastVideoAppendEnd||fe.isBuffered(S,w))&&this.unblockAudio()}this.lastVideoAppendEnd=T}}const E=(l||o).start,C={label:`append-${i}`,execute:()=>{var L;d.executeStart=self.performance.now();const I=(L=this.tracks[i])==null?void 0:L.buffer;I&&(m?this.updateTimestampOffset(I,E,.1,i,f,p):u!==void 0&&X(u)&&this.updateTimestampOffset(I,u,1e-6,i,f,p)),this.appendExecutor(s,i)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();d.executeEnd=d.end=L,g.first===0&&(g.first=L),y&&y.first===0&&(y.first=L);const I={};this.sourceBuffers.forEach(([T,w])=>{T&&(I[T]=fe.getBuffered(w))}),this.appendErrors[i]=0,i==="audio"||i==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(A.BUFFER_APPENDED,{type:i,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:I})},onError:L=>{var I;const T={type:re.MEDIA_ERROR,parent:o.type,details:z.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:o,part:l,chunkMeta:c,error:L,err:L,fatal:!1},w=(I=this.media)==null?void 0:I.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR||L.name=="QuotaExceededError"||"quota"in L)T.details=z.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!w)T.errorAction=fi(!0);else if(L.name===uE&&this.sourceBufferCount===0)T.errorAction=fi(!0);else{const R=++this.appendErrors[i];this.warn(`Failed ${R}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${w||"no media error"})`),(R>=this.hls.config.appendErrorMaxRetry||w)&&(T.fatal=!0)}this.hls.trigger(A.ERROR,T)}};this.log(`queuing "${i}" append sn: ${f}${l?" p: "+l.index:""} of ${o.type===Z.MAIN?"level":"track"} ${o.level} cc: ${p}`),this.append(C,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(A.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:n,startOffset:s,endOffset:i}=t;n?this.append(this.getFlushOp(n,s,i),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,s,i),a)})}onFragParsed(e,t){const{frag:n,part:s}=t,i=[],a=s?s.elementaryStreams:n.elementaryStreams;a[Fe.AUDIOVIDEO]?i.push("audiovideo"):(a[Fe.AUDIO]&&i.push("audio"),a[Fe.VIDEO]&&i.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const c=s?s.stats:n.stats;this.hls.trigger(A.FRAG_BUFFERED,{frag:n,part:s,stats:c,id:n.type})};i.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,i).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const s=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(A.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(A.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===z.BUFFER_APPEND_ERROR&&t.frag){var n;const s=(n=t.errorAction)==null?void 0:n.nextAutoLevel;X(s)&&s!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const s=e.config,i=n.currentTime,a=t.levelTargetDuration,o=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(X(o)&&o>=0){const c=Math.max(o,a),u=Math.floor(i/a)*a-c;this.flushBackBuffer(i,a,u)}const l=s.frontBufferFlushThreshold;if(X(l)&&l>0){const c=Math.max(s.maxBufferLength,l),u=Math.max(c,a),d=Math.floor(i/a)*a+u;this.flushFrontBuffer(i,a,d)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([s,i])=>{if(i){const o=fe.getBuffered(i);if(o.length>0&&n>o.start(0)){var a;this.hls.trigger(A.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[s];if((a=this.details)!=null&&a.live)this.hls.trigger(A.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:s})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([s,i])=>{if(i){const a=fe.getBuffered(i),o=a.length;if(o<2)return;const l=a.start(o-1),c=a.end(o-1);if(n>l||e>=l&&e<=c)return;this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||(n==null?void 0:n.readyState)!=="open")return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),u=Math.max(c,s);return{duration:1/0,start:c,end:u}}return{duration:1/0}}const i=(e=this.overrides)==null?void 0:e.duration;if(i)return X(i)?{duration:i}:null;const a=this.media.duration,o=X(n.duration)?n.duration:0;return s>o&&s>a||!X(a)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:n}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(X(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${n}.`),s.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${je(n)}`),this.tracksReady){var s;const i=(s=this.transferData)==null?void 0:s.tracks;i&&Object.keys(i).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const s=this.tracks[t];e[t]={buffer:n,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(A.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const i in e){const a=i,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),c=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${je(o)}`);try{const u=n.addSourceBuffer(c),d=id(a),f=[a,u];t[d]=f,o.buffer=u}catch(u){var s;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(a),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[a],this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:a,mimeType:c,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let s=e.codec;n&&(t==="video"||t==="audiovideo")&&Ba(n,"video")&&(s=k4(s,n));const i=gl(s,e.levelCodec);return i?t.slice(0,5)==="audio"?cc(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(i,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(A.BUFFER_FLUSHED,{type:i})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n==null?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${s}`,t),this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const i=this.currentOp(e);i&&i.onError(s)}updateTimestampOffset(e,t,n,s,i,a){const o=t-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:s,mediaSource:i}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!s||!i||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=X(s.duration)?s.duration:1/0,c=X(i.duration)?i.duration:1/0,u=Math.max(0,t),d=Math.min(n,l,c);d>u&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),o.remove(u,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],s=n==null?void 0:n.buffer;if(!s)throw new $D(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,s=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const s=(n=this.tracks[t])==null?void 0:n.buffer;!s||s.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const s=this.tracks[e];if(!s)return;const i=s.buffer;if(!i)return;const a=n.bind(this,e);s.listeners.push({event:t,listener:a}),i.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(s=>{n.removeEventListener(s.event,s.listener)}),t.listeners.length=0)}}function mx(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function UD(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function id(r){return r==="audio"?1:0}class Vp{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(A.BUFFER_CODECS,this.onBufferCodecs,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(A.BUFFER_CODECS,this.onBufferCodecs,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&X(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,Vp.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const s=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let i=e.length-1;const a=Math.max(t,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&s(l,e[o+1])){i=o;break}}return i}}const zD={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Dt=zD,VD={HLS:"h"},GD=VD;class Wr{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof Wr?n:new Wr(n))),this.value=e,this.params=t}}const HD="Dict";function KD(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function WD(r,e,t,n){return new Error(`failed to ${r} "${KD(e)}" as ${t}`,{cause:n})}function qr(r,e,t){return WD("serialize",r,e,t)}class dE{constructor(e){this.description=e}}const gx="Bare Item",qD="Boolean";function YD(r){if(typeof r!="boolean")throw qr(r,qD);return r?"?1":"?0"}function XD(r){return btoa(String.fromCharCode(...r))}const QD="Byte Sequence";function ZD(r){if(ArrayBuffer.isView(r)===!1)throw qr(r,QD);return`:${XD(r)}:`}const JD="Integer";function eN(r){return r<-999999999999999||999999999999999<r}function fE(r){if(eN(r))throw qr(r,JD);return r.toString()}function tN(r){return`@${fE(r.getTime()/1e3)}`}function hE(r,e){if(r<0)return-hE(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const s=Math.floor(r*t);return(s%2===0?s:s+1)/t}else return Math.round(r*t)/t}const rN="Decimal";function nN(r){const e=hE(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw qr(r,rN);const t=e.toString();return t.includes(".")?t:`${t}.0`}const sN="String",iN=/[\x00-\x1f\x7f]+/;function aN(r){if(iN.test(r))throw qr(r,sN);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function oN(r){return r.description||r.toString().slice(7,-1)}const lN="Token";function xx(r){const e=oN(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw qr(e,lN);return e}function rh(r){switch(typeof r){case"number":if(!X(r))throw qr(r,gx);return Number.isInteger(r)?fE(r):nN(r);case"string":return aN(r);case"symbol":return xx(r);case"boolean":return YD(r);case"object":if(r instanceof Date)return tN(r);if(r instanceof Uint8Array)return ZD(r);if(r instanceof dE)return xx(r);default:throw qr(r,gx)}}const cN="Key";function nh(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw qr(r,cN);return r}function Gp(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${nh(e)}`:`;${nh(e)}=${rh(t)}`).join("")}function pE(r){return r instanceof Wr?`${rh(r.value)}${Gp(r.params)}`:rh(r)}function uN(r){return`(${r.value.map(pE).join(" ")})${Gp(r.params)}`}function dN(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw qr(r,HD);const t=r instanceof Map?r.entries():Object.entries(r),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([s,i])=>{i instanceof Wr||(i=new Wr(i));let a=nh(s);return i.value===!0?a+=Gp(i.params):(a+="=",Array.isArray(i.value)?a+=uN(i):a+=pE(i)),a}).join(`,${n}`)}function mE(r,e){return dN(r,e)}const Cr="CMCD-Object",Ze="CMCD-Request",os="CMCD-Session",An="CMCD-Status",fN={br:Cr,ab:Cr,d:Cr,ot:Cr,tb:Cr,tpb:Cr,lb:Cr,tab:Cr,lab:Cr,url:Cr,pb:Ze,bl:Ze,tbl:Ze,dl:Ze,ltc:Ze,mtp:Ze,nor:Ze,nrr:Ze,rc:Ze,sn:Ze,sta:Ze,su:Ze,ttfb:Ze,ttfbb:Ze,ttlb:Ze,cmsdd:Ze,cmsds:Ze,smrt:Ze,df:Ze,cs:Ze,ts:Ze,cid:os,pr:os,sf:os,sid:os,st:os,v:os,msd:os,bs:An,bsd:An,cdn:An,rtp:An,bg:An,pt:An,ec:An,e:An},hN={REQUEST:Ze};function pN(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(s=>e[s]=t),e},{})}function mN(r,e){const t={};if(!r)return t;const n=Object.keys(r),s=e?pN(e):{};return n.reduce((i,a)=>{var o;const l=fN[a]||s[a]||hN.REQUEST,c=(o=i[l])!==null&&o!==void 0?o:i[l]={};return c[a]=r[a],i},t)}function gN(r){return["ot","sf","st","e","sta"].includes(r)}function xN(r){return typeof r=="number"?X(r):r!=null&&r!==""&&r!==!1}const gE="event";function vN(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const s=t.pathname.split("/").slice(1),i=n.pathname.split("/").slice(1,-1);for(;s[0]===i[0];)s.shift(),i.shift();for(;i.length;)i.shift(),s.unshift("..");return s.join("/")+t.search+t.hash}const Sl=r=>Math.round(r),sh=(r,e)=>Array.isArray(r)?r.map(t=>sh(t,e)):r instanceof Wr&&typeof r.value=="string"?new Wr(sh(r.value,e),r.params):(e.baseUrl&&(r=vN(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),Go=r=>Sl(r/100)*100,yN=(r,e)=>{let t=r;return e.version>=2&&(r instanceof Wr&&typeof r.value=="string"?t=new Wr([r]):typeof r=="string"&&(t=[r])),sh(t,e)},bN={br:Sl,d:Sl,bl:Go,dl:Go,mtp:Go,nor:yN,rtp:Go,tb:Sl},xE="request",vE="response",Hp=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],SN=["e"],EN=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function ru(r){return EN.test(r)}function wN(r){return Hp.includes(r)||SN.includes(r)||ru(r)}const yE=["d","dl","nor","ot","rtp","su"];function TN(r){return Hp.includes(r)||yE.includes(r)||ru(r)}const AN=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function IN(r){return Hp.includes(r)||yE.includes(r)||AN.includes(r)||ru(r)}const LN=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function CN(r){return LN.includes(r)||ru(r)}const RN={[vE]:IN,[gE]:wN,[xE]:TN};function bE(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,s=e.reportingMode||xE,i=n===1?CN:RN[s];let a=Object.keys(r).filter(i);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const l=s===vE||s===gE;l&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const c=Me({},bN,e.formatters),u={version:n,reportingMode:s,baseUrl:e.baseUrl};return a.sort().forEach(d=>{let f=r[d];const p=c[d];if(typeof p=="function"&&(f=p(f,u)),d==="v"){if(n===1)return;f=n}d=="pr"&&f===1||(l&&d==="ts"&&!X(f)&&(f=Date.now()),xN(f)&&(gN(d)&&typeof f=="string"&&(f=new dE(f)),t[d]=f))}),t}function kN(r,e={}){const t={};if(!r)return t;const n=bE(r,e),s=mN(n,e==null?void 0:e.customHeaderMap);return Object.entries(s).reduce((i,[a,o])=>{const l=mE(o,{whitespace:!1});return l&&(i[a]=l),i},t)}function _N(r,e,t){return Me(r,kN(e,t))}const PN="CMCD";function DN(r,e={}){return r?mE(bE(r,e),{whitespace:!1}):""}function NN(r,e={}){if(!r)return"";const t=DN(r,e);return encodeURIComponent(t)}function ON(r,e={}){if(!r)return"";const t=NN(r,e);return`${PN}=${t}`}const vx=/CMCD=[^&#]+/;function MN(r,e,t){const n=ON(e,t);if(!n)return r;if(vx.test(r))return r.replace(vx,n);const s=r.includes("?")?"&":"?";return`${r}${s}${n}`}class FN{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:Dt.MANIFEST,su:!this.initialized})}catch(i){this.hls.logger.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const{frag:i,part:a}=s,o=this.hls.levels[i.level],l=this.getObjectType(i),c={d:(a||i).duration*1e3,ot:l};(l===Dt.VIDEO||l===Dt.AUDIO||l==Dt.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const u=a?this.getNextPart(a):this.getNextFrag(i);u!=null&&u.url&&u.url!==i.url&&(c.nor=u.url),this.apply(s,c)}catch(i){this.hls.logger.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHED,this.onMediaDetached,this),e.on(A.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHED,this.onMediaDetached,this),e.off(A.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,s;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:GD.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Me(t,this.createData());const n=t.ot===Dt.INIT||t.ot===Dt.VIDEO||t.ot===Dt.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((a,o)=>(s.includes(o)&&(a[o]=t[o]),a),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),_N(e.headers,t,i)):e.url=MN(e.url,t,i)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const s=e.sn-n.startSN;return n.fragments[s+1]}}getNextPart(e){var t;const{index:n,fragment:s}=e,i=(t=this.hls.levels[s.level])==null||(t=t.details)==null?void 0:t.partList;if(i){const{sn:a}=s;for(let o=i.length-1;o>=0;o--){const l=i[o];if(l.index===n&&l.fragment.sn===a)return i[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Dt.TIMED_TEXT;if(e.sn==="initSegment")return Dt.INIT;if(t==="audio")return Dt.AUDIO;if(t==="main")return this.hls.audioTracks.length?Dt.VIDEO:Dt.MUXED}getTopBandwidth(e){let t=0,n;const s=this.hls;if(e===Dt.AUDIO)n=s.audioTracks;else{const i=s.maxAutoLevel,a=i>-1?i+1:s.levels.length;n=s.levels.slice(0,a)}return n.forEach(i=>{i.bitrate>t&&(t=i.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===Dt.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:fe.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,a,o){t(i),this.loader.load(i,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,a,o){t(i),this.loader.load(i,a,o)}}}}const jN=3e5;class $N extends fr{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===pt.SendAlternateToPenaltyBox&&n.flags===Kt.MoveAllAlternatesMatchingHost){const s=this.levels;let i=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&s?a=this.getPathwayForGroupId(o,c,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!i&&s&&(i=this.pathways()),i&&i.length>1&&(this.updatePathwayPriority(i),n.resolved=this.pathwayId!==a),t.details===z.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${s&&s.length} priorities: ${je(i)} penalized: ${je(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,s=performance.now();Object.keys(n).forEach(i=>{s-n[i]>jN&&delete n[i]});for(let i=0;i<e.length;i++){const a=e[i];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,BS(t),this.hls.trigger(A.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const s=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<s.length;i++)if(t===Se.AUDIO_TRACK&&s[i].hasAudioGroup(e)||t===Se.SUBTITLE_TRACK&&s[i].hasSubtitleGroup(e))return s[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},s={};e.forEach(i=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=i;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=new Ke(u.attrs);d["PATHWAY-ID"]=a;const f=d.AUDIO&&`${d.AUDIO}_clone_${a}`,p=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;f&&(n[d.AUDIO]=f,d.AUDIO=f),p&&(s[d.SUBTITLES]=p,d.SUBTITLES=p);const h=SE(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new za({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:h,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let y=1;y<u.audioGroups.length;y++)g.addGroupId("audio",`${u.audioGroups[y]}_clone_${a}`);if(u.subtitleGroups)for(let y=1;y<u.subtitleGroups.length;y++)g.addGroupId("text",`${u.subtitleGroups[y]}_clone_${a}`);return g});t.push(...c),yx(this.audioTracks,n,l,a),yx(this.subtitleTracks,s,l,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+u)}const i={responseType:"json",url:s.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,f,p)=>{this.log(`Loaded steering manifest: "${s}"`);const h=u.data;if((h==null?void 0:h.VERSION)!==1){this.log(`Steering VERSION ${h.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=h.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":b}=h;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),y&&this.clonePathways(y);const m={steeringManifest:h,url:s.toString()};this.hls.trigger(A.STEERING_MANIFEST_LOADED,m),b&&this.updatePathwayPriority(b)},onError:(u,d,f,p)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let h=this.timeToLoad*1e3;if(u.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const y=g.getResponseHeader("Retry-After");y&&(h=parseFloat(y)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,h)},onTimeout:(u,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const s=(n=this.hls)==null?void 0:n.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function yx(r,e,t,n){r&&Object.keys(e).forEach(s=>{const i=r.filter(a=>a.groupId===s).map(a=>{const o=Me({},a);return o.details=void 0,o.attrs=new Ke(o.attrs),o.url=o.attrs.URI=SE(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[s],o.attrs["PATHWAY-ID"]=n,o});r.push(...i)})}function SE(r,e,t,n){const{HOST:s,PARAMS:i,[t]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(r=o));const l=new self.URL(r);return s&&!o&&(l.host=s),i&&Object.keys(i).sort().forEach(c=>{c&&l.searchParams.set(c,i[c])}),l.href}class pi extends fr{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=pi.CDMCleanupPromise?[pi.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:s}=t,i=`"${t.type}" event: init data type: "${n}"`;if(this.debug(i),s!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=ta(this.config));const o=a.map(Qu).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=vl(a);if(n!=="sinf"||o!==qe.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let l;try{const p=it(new Uint8Array(s)),h=Dp(JSON.parse(p).sinf),g=mS(h);if(!g)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(g.subarray(8,24))}catch(p){this.warn(`${i} Failed to parse sinf: ${p}`);return}const c=Lt(l),{keyIdToKeySessionPromise:u,mediaKeySessions:d}=this;let f=u[c];for(let p=0;p<d.length;p++){const h=d[p],g=h.decryptdata;if(!g.keyId)continue;const y=Lt(g.keyId);if(pc(l,g.keyId)||g.uri.replace(/-/g,"").indexOf(c)!==-1){if(f=u[y],!f)continue;if(g.pssh)break;delete u[y],g.pssh=new Uint8Array(s),g.keyId=l,f=u[c]=f.then(()=>this.generateRequestWithPreferredKeySession(h,n,s,"encrypted-event-key-match")),f.catch(b=>this.handleError(b));break}}f||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(A.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(A.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,s=t==null?void 0:t[e];if(s)return s.licenseUrl;if(e===qe.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t==null?void 0:t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,o,l)=>!!a&&l.indexOf(a)===o,s=t.map(a=>a.audioCodec).filter(n),i=t.map(a=>a.videoCodec).filter(n);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,s,i).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Ht?o(d):o(new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${n}`;return PS===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return n(e,t)}getMediaKeysPromise(e,t,n){var s;const i=yP(e,t,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(s=a)==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${je(i)}`),o=this.requestMediaKeySystemAccess(e,i);const l=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const u=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=l.mediaKeys=c.createMediaKeys().then(f=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,u.then(p=>p?this.setMediaKeysServerCertificate(f,e,p):f)));return d.catch(f=>{this.error(`Failed to create media-keys for "${e}"}: ${f}`)}),d})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Lt(e.keyId||[])} keyUri: ${e.uri}`);const s=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),s=Ho(t),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Lt(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Qu(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const i=Qu(s);i?t(i):n(new Error(`Unable to find format for key-system "${s}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=ta(this.config),n=e.map(vl).filter(s=>!!s&&t.indexOf(s)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const s=BN(e,t[n]);if(s)return s}}loadKey(e){const t=e.keyInfo.decryptdata,n=Ho(t),s=this.bannedKeyIds[n];if(s||this.getKeyStatus(t)==="internal-error"){const o=bx(s||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(l,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:t}))))).then(l=>{const c="cenc",u=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,c,u,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return a.catch(o=>{if(o instanceof Ht){const l=ke({},o.data);this.getKeyStatus(t)==="internal-error"&&(l.decryptdata=t);const c=new Ht(l,o.message);this.handleError(c,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Ht){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Lt(n.keyId||[])})`:""}`),this.hls.trigger(A.ERROR,e.data)}else this.error(e.message),this.hls.trigger(A.ERROR,{type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Ho(e),n=this.keyIdToKeySessionPromise[t];if(!n){const s=vl(e.keyFormat),i=s?[s]:ta(this.config);return this.attemptKeySystemAccess(i)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=ta(this.config)),e.length===0)throw new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${je({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>n.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,t,n,s){var i;const a=(i=this.config.drmSystems)==null||(i=i[e.keySystem])==null?void 0:i.generateRequest;if(a)try{const h=a.call(this.hls,t,n,e);if(!h)throw new Error("Invalid response from configured generateRequest filter");t=h.initDataType,n=h.initData?h.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(h){if(this.warn(h.message),this.hls&&this.hls.config.debug)throw h}if(n===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const o=Ho(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${s}" keyId: ${o} URI: ${l} (init data type: ${t} length: ${n.byteLength})`);const c=new Op,u=e._onmessage=h=>{const g=e.mediaKeysSession;if(!g){c.emit("error",new Error("invalid state"));return}const{messageType:y,message:b}=h;this.log(`"${y}" message event for session "${g.sessionId}" message size: ${b.byteLength}`),y==="license-request"||y==="license-renewal"?this.renewLicense(e,b).catch(m=>{c.eventNames().length?c.emit("error",m):this.handleError(m)}):y==="license-release"?e.keySystem===qe.FAIRPLAY&&this.updateKeySession(e,Xf("acknowledged")).then(()=>this.removeSession(e)).catch(m=>this.handleError(m)):this.warn(`unhandled media key message type "${y}"`)},d=(h,g)=>{g.keyStatus=h;let y;h.startsWith("usable")?c.emit("resolved"):h==="internal-error"||h==="output-restricted"||h==="output-downscaled"?y=bx(h,g.decryptdata):h==="expired"?y=new Error(`key expired (keyId: ${o})`):h==="released"?y=new Error("key released"):h==="status-pending"||this.warn(`unhandled key status change "${h}" (keyId: ${o})`),y&&(c.eventNames().length?c.emit("error",y):this.handleError(y))},f=e._onkeystatuseschange=h=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const y=this.getKeyStatuses(e);if(!Object.keys(y).some(S=>y[S]!=="status-pending"))return;if(y[o]==="expired"){this.log(`Expired key ${je(y)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let m=y[o];if(m)d(m,e);else{var v;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(v=e.keyStatusTimeouts)[o]||(v[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const E=this.getKeyStatus(e.decryptdata);if(E&&E!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${E} from other session.`),d(E,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),m="internal-error",d(m,e)},1e3)),this.log(`No status for keyId ${o} (${je(y)}).`)}};Ct(e.mediaKeysSession,"message",u),Ct(e.mediaKeysSession,"keystatuseschange",f);const p=new Promise((h,g)=>{c.on("error",g),c.on("resolved",h)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(h=>{throw new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_SESSION,error:h,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${h}`)}).then(()=>p).catch(h=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw h}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,s)=>{if(typeof s=="string"&&typeof n=="object"){const o=s;s=n,n=o}const i="buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s);e.keySystem===qe.PLAYREADY&&i.length===16&&kS(i);const a=Lt(i);n==="internal-error"&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,s=new n(t),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:i},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,p,h,g)=>{a(f.data)},onError:(f,p,h,g)=>{o(new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:ke({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,p,h)=>{o(new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,p,h)=>{o(new Error("aborted"))}};s.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((s,i)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),s(e)}).catch(a=>{i(new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(s=>{throw new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:s,fatal:!1},s.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(n,"application/xml"),i=s.querySelectorAll("HttpHeader");if(i.length>0){let u;for(let d=0,f=i.length;d<f;d++){var a,o;u=i[d];const p=(a=u.querySelector("name"))==null?void 0:a.textContent,h=(o=u.querySelector("value"))==null?void 0:o.textContent;p&&h&&e.setRequestHeader(p,h)}}const l=s.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return Xf(atob(c))}setupLicenseXHR(e,t,n,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,s)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),i.call(this.hls,e,t,n,s)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}s(l)}else{const l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)i(new Ht({type:re.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==qe.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)}).catch(i)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Ct(n,"encrypted",this.onMediaEncrypted),Ct(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Ft(e,"encrypted",this.onMediaEncrypted),Ft(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Es.clearKeyUriToKeyIdMap();const s=n.length;pi.CDMCleanupPromise=Promise.all(n.map(i=>this.removeSession(i)).concat((t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(i=>{this.log(`Could not clear media keys: ${i}`),this.hls&&this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${i}`)})}))||Promise.resolve())).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`),this.hls&&this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${i}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:s}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Lt((s==null?void 0:s.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(c=>self.clearTimeout(a[c]));const{drmSystemOptions:o}=this.config;return(SP(o)?new Promise((c,u)=>{self.setTimeout(()=>u(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(u)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}pi.CDMCleanupPromise=void 0;function Ho(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return Lt(r.keyId)}function BN(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class Ht extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function bx(r,e){const t=r==="output-restricted",n=t?z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:z.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Ht({type:re.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class UN{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(A.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(A.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const s=performance.now();if(t){if(this.lastTime){const i=s-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/i,c=this.hls;if(c.trigger(A.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(A.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function EE(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function wE(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){_e.debug(`[texttrack-utils]: ${n}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,r.addCue(s)}catch(s){_e.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}t==="disabled"&&(r.mode=t)}function ri(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function ih(r,e,t,n){const s=r.mode;if(s==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const i=VN(r.cues,e,t);for(let a=0;a<i.length;a++)(!n||n(i[a]))&&r.removeCue(i[a])}s==="disabled"&&(r.mode=s)}function zN(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,s=t,i;for(;n<=s;)if(i=Math.floor((s+n)/2),e<r[i].startTime)s=i-1;else if(e>r[i].startTime&&n<t)n=i+1;else return i;return r[n].startTime-e<e-r[s].startTime?n:s}function VN(r,e,t){const n=[],s=zN(r,e);if(s>-1)for(let i=s,a=r.length;i<a;i++){const o=r[i];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function El(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class GN extends zp{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=El(this.media.textTracks);for(let i=0;i<n.length;i++)if(n[i].mode==="hidden")t=n[i];else if(n[i].mode==="showing"){t=n[i];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.LEVEL_LOADING,this.onLevelLoading,this),e.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.LEVEL_LOADING,this.onLevelLoading,this),e.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(A.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;El(n.textTracks).forEach(a=>{ri(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:s,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==s){this.warn(`Subtitle track with id:${n} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,s=this.groupIds;let i=this.currentTrack;if(!n||(s==null?void 0:s.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!n||n.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!i&&o){this.selectDefaultTrack=!1;const u=$r(o,a);if(u>-1)i=a[u];else{const d=$r(o,this.tracks);i=this.tracks[d]}}let l=this.findTrackId(i);l===-1&&i&&(l=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(A.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const i=t[s];if(!(n&&!i.default||!n&&!e)&&(!e||Ss(i,e)))return s}if(e){for(let s=0;s<t.length;s++){const i=t[s];if(Ka(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const i=t[s];if(Ka(e.attrs,i.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const s=t[n];if(th(s,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Se.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Ss(e,n))return n;const s=$r(e,this.tracksInGroup);if(s>-1){const i=this.tracksInGroup[s];return this.setSubtitleTrack(s),i}else{if(n)return null;{const i=$r(e,t);if(i>-1)return t[i]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,s=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(A.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=El(e.textTracks),n=this.currentTrack;let s;if(n&&(s=t.filter(i=>th(n,i))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(i=>{i.mode!=="disabled"&&i!==s&&(i.mode="disabled")}),s){const i=this.subtitleDisplay?"showing":"hidden";s.mode!==i&&(s.mode=i)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!X(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:e});return}const i=!!s.details&&!s.details.live;if(e===this.trackId&&s===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:a,groupId:o="",name:l,type:c,url:u}=s;this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(s.url,n==null?void 0:n.details,s.details);this.loadPlaylist(d)}}function HN(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?i:i&3|8).toString(16)})}}}function ga(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const mi=.025;let vc=function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r}({});function KN(r,e,t){return`${r.identifier}-${t+1}-${ga(e)}`}class WN{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return ad(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=ad(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=X(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return ad(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<mi))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?vc.Range:vc.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return qN(this)}}function ad(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<mi)?e.start:e.start+e.duration}function TE(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function od(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function qN(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function zs(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class YN{constructor(e,t,n,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(A.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=s;const a=()=>{this.hasDetails=!0};i.once(A.LEVEL_LOADED,a),i.once(A.AUDIO_TRACK_LOADED,a),i.once(A.SUBTITLE_TRACK_LOADED,a),i.on(A.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(A.BUFFER_APPENDED,()=>{const u=this.bufferedEnd;this.reachedPlayout(u)&&(this._bufferedEosTime=u,i.trigger(A.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=TE(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),s=this.timelineOffset,i=fe.bufferInfo(e,s,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=fe.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var s;(s=this.hls)==null||s.on(e,t)}once(e,t,n){var s;(s=this.hls)==null||s.once(e,t)}off(e,t,n){var s;(s=this.hls)==null||s.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${zs(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Sx=.033;class XN extends fr{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(i=s[n])!=null&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let s=0;s<n.length;s++){let i=n[s];if(t&&t!=="primary"&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return s}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let s=e;s<=t&&n[s];s++){const i=n[s].event;if(i!=null&&i.restrictions.jump&&!i.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var n;if(((n=t[s].event)==null?void 0:n.identifier)===e)return s}return-1}findAssetIndex(e,t){const n=e.assetList,s=n.length;if(s>1)for(let i=0;i<s;i++){const a=n[i];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&(t<o+(a.duration||0)||i===s-1))return i}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,s=n[n.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:s}=n,i=this.events,a=this.parseDateRanges(s,{url:n.url},t),o=Object.keys(s),l=i?i.filter(c=>!o.includes(c.identifier)):[];a.length&&a.sort((c,u)=>{const d=c.cue.pre,f=c.cue.post,p=u.cue.pre,h=u.cue.post;if(d&&!p)return-1;if(p&&!d||f&&!h)return 1;if(h&&!f)return-1;if(!d&&!p&&!f&&!h){const g=c.startTime,y=u.startTime;if(g!==y)return g-y}return c.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=a,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,t=[],n=!1){const s=this.events||[];if(s.length||t.length||this.length<2){const i=this.items,a=this.parseSchedule(s,e);(n||t.length||(i==null?void 0:i.length)!==a.length||a.some((l,c)=>Math.abs(l.playout.start-i[c].playout.start)>.005||Math.abs(l.playout.end-i[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const s=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const o=i[a],l=e[o];if(l.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(l):(c=new WN(l,t),this.eventMap[o]=c,n===!1&&(c.appendInPlace=n)),s.push(c)}}return s}parseSchedule(e,t){const n=[],s=t.main.details,i=s.live?1/0:s.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,c=0;if(e.forEach((u,d)=>{const f=u.cue.pre,p=u.cue.post,h=e[d-1]||null,g=u.appendInPlace,y=p?i:u.startOffset,b=u.duration,m=u.timelineOccupancy===vc.Range?b:0,v=u.resumptionOffset,S=(h==null?void 0:h.startTime)===y,E=y+u.cumulativeDuration;let C=g?E+b:y+v;if(f||!p&&y<=0){const I=c;c+=m,u.timelineStart=E;const T=a;a+=b,n.push({event:u,start:E,end:C,playout:{start:T,end:a},integrated:{start:I,end:c}})}else if(y<=i){if(!S){const w=y-l;if(w>Sx){const R=l,_=c;c+=w;const k=a;a+=w;const N={previousEvent:e[d-1]||null,nextEvent:u,start:R,end:R+w,playout:{start:k,end:a},integrated:{start:_,end:c}};n.push(N)}else w>0&&h&&(h.cumulativeDuration+=w,n[n.length-1].end=y)}p&&(C=E),u.timelineStart=E;const I=c;c+=m;const T=a;a+=b,n.push({event:u,start:E,end:C,playout:{start:T,end:a},integrated:{start:I,end:c}})}else return;const L=u.resumeTime;p||L>i?l=i:l=L}),l<i){var o;const u=l,d=c,f=i-l;c+=f;const p=a;a+=f,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:u+f,playout:{start:p,end:a},integrated:{start:d,end:c}})}this.setDurations(i,a,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:i,playout:{start:0,end:i},integrated:{start:0,end:i}}),this.setDurations(i,i,i);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,s=n.live?1/0:n.edge;let i=0,a=-1;e.forEach((o,l)=>{const c=o.cue.pre,u=o.cue.post,d=c?0:u?s:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=i:(i=0,a=d),!u&&o.snapOptions.in&&(o.resumeAnchor=Ps(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<Sx&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const p=X(o.resumeOffset)?o.resumeOffset:o.duration;i+=p})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(n-s)>mi?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${s}`),!1):!Object.keys(t).some(a=>{const o=t[a].details,l=o.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${l}`),!1;const c=Ps(null,o.fragments,n);if(!c)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const u=a==="audio"?.175:0;return Math.abs(c.start-n)<mi+u||Math.abs(c.end-n)<mi+u?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,s=!1,i=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],l=t+n;o.startOffset=n,o.timelineStart=l,s||(s=o.duration===null),i||(i=!!o.error);const c=o.error?0:o.duration||0;n+=c}s&&!i?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function pr(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class QN{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let s;try{s=TE(n,this.hls.sessionId,e.baseUrl)}catch(f){const p=this.assignAssetListError(e,z.ASSET_LIST_LOAD_ERROR,f,n);this.hls.trigger(A.ERROR,p);return}t&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,a=i.loader,o=new a(i),l={responseType:"json",url:s.href},c=i.interstitialAssetListLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,p,h,g)=>{const y=f.data,b=y==null?void 0:y.ASSETS;if(!Array.isArray(b)){const m=this.assignAssetListError(e,z.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),h.url,p,g);this.hls.trigger(A.ERROR,m);return}e.assetListResponse=y,this.hls.trigger(A.ASSET_LIST_LOADED,{event:e,assetListResponse:y,networkDetails:g})},onError:(f,p,h,g)=>{const y=this.assignAssetListError(e,z.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${p.url})`),p.url,g,h);this.hls.trigger(A.ERROR,y)},onTimeout:(f,p,h)=>{const g=this.assignAssetListError(e,z.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${p.url})`),p.url,f,h);this.hls.trigger(A.ERROR,g)}};return o.load(l,u,d),this.hls.trigger(A.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,n,s,i,a){return e.error=n,{type:re.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:n,networkDetails:a,stats:i}}}function Ex(r){r==null||r.play().catch(()=>{})}function Ko(r,e){return`[${r}] Advancing timeline position to ${e}`}class ZN extends fr{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const s=n-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const a=s<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-s)&&this.updateSchedule(!0),this.checkBuffer(),a&&n<o.start||n>=o.end){var l;const p=this.findItemIndex(o);let h=this.schedule.findItemIndexAtTime(n);if(h===-1&&(h=p+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${n} (resolving from ${p} to ${h})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a&&h>p){const g=this.schedule.findJumpRestrictedIndex(p+1,h);if(g>p){this.setSchedulePosition(g);return}}this.setSchedulePosition(h);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const p=o.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,p))}return}const u=c.timelineStart,d=c.duration||0;if(a&&n<u||n>=u+d){var f;(f=o.event)!=null&&f.appendInPlace&&(this.clearInterstitial(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,c)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(n>=s.end){this.timelinePos=s.end;const o=this.findItemIndex(s);this.setSchedulePosition(o+1)}const i=this.playingAsset;if(!i)return;const a=i.timelineStart+(i.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,i)},this.onScheduleUpdate=(n,s)=>{const i=this.schedule;if(!i)return;const a=this.playingItem,o=i.events||[],l=i.items||[],c=i.durations,u=n.map(g=>g.identifier),d=!!(o.length||u.length);(d||s)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(g=>pr(g))} pos: ${this.timelinePos}`),u.length&&this.log(`Removed events ${u}`);let f=null,p=null;a&&(f=this.updateItem(a,this.timelinePos),this.itemsMatch(a,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h&&(p=this.updateItem(h,this.bufferedPos),this.itemsMatch(h,p)?this.bufferingItem=p:h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))),n.forEach(g=>{g.assetList.forEach(y=>{this.clearAssetPlayer(y.identifier,null)})}),this.playerQueue.forEach(g=>{if(g.interstitial.appendInPlace){const y=g.assetItem.timelineStart,b=g.timelineOffset-y;if(b)try{g.timelineOffset=y}catch(m){Math.abs(b)>mi&&this.warn(`${m} ("${g.assetId}" ${g.timelineOffset}->${y})`)}}}),d||s){if(this.hls.trigger(A.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:c,removedIds:u}),this.isInterstitial(a)&&u.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(f,a),h&&p!==f&&this.trimInPlace(p,h),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new QN(e),this.schedule=new XN(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(A.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(A.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(A.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(A.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(A.BUFFER_APPENDED,this.onBufferAppended,this),e.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(A.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(A.MEDIA_ENDED,this.onMediaEnded,this),e.on(A.ERROR,this.onError,this),e.on(A.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(A.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(A.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(A.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(A.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(A.BUFFER_CODECS,this.onBufferCodecs,this),e.off(A.BUFFER_APPENDED,this.onBufferAppended,this),e.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(A.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(A.MEDIA_ENDED,this.onMediaEnded,this),e.off(A.ERROR,this.onError,this),e.off(A.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Ft(e,"play",this.onPlay),Ft(e,"pause",this.onPause),Ft(e,"seeking",this.onSeeking),Ft(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Ct(n,"seeking",this.onSeeking),Ct(n,"timeupdate",this.onTimeupdate),Ct(n,"play",this.onPlay),Ct(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!s){this.clearScheduleState();const i=this.findItemIndex(n);this.setSchedulePosition(i)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,s=this.media;if(this.media=null,!n&&(s&&this.removeMediaListeners(s),this.detachedData)){const i=this.getBufferingPlayer();i&&(this.log(`Removing schedule state for detachedData and ${i}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,i.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=d=>d&&e.getAssetPlayer(d.identifier),s=(d,f,p,h,g)=>{if(d){let y=d[f].start;const b=d.event;if(b){if(f==="playout"||b.timelineOccupancy!==vc.Point){const m=n(p);(m==null?void 0:m.interstitial)===b&&(y+=m.assetItem.startOffset+m[g])}}else{const m=h==="bufferedPos"?a():e[h];y+=m-d.start}return y}return 0},i=(d,f)=>{var p;if(d!==0&&f!=="primary"&&(p=e.schedule)!=null&&p.length){var h;const g=e.schedule.findItemIndexAtTime(d),y=(h=e.schedule.items)==null?void 0:h[g];if(y){const b=y[f].start-y.start;return d+b}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var f,p;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((p=e.schedule)==null?void 0:p.durations[d])||0},l=(d,f)=>{var p,h;const g=e.effectivePlayingItem;if(g!=null&&(p=g.event)!=null&&p.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${f}"`);const y=e.effectivePlayingItem,b=e.schedule.findItemIndexAtTime(d,f),m=(h=e.schedule.items)==null?void 0:h[b],v=e.getBufferingPlayer(),S=v==null?void 0:v.interstitial,E=S==null?void 0:S.appendInPlace,C=y&&e.itemsMatch(y,m);if(y&&(E||C)){const L=n(e.playingAsset),I=(L==null?void 0:L.media)||e.primaryMedia;if(I){const T=f==="primary"?I.currentTime:s(y,f,e.playingAsset,"timelinePos","currentTime"),w=d-T,R=(E?T:I.currentTime)+w;if(R>=0&&(!L||E||R<=L.duration)){I.currentTime=R;return}}}if(m){let L=d;if(f!=="primary"){const T=m[f].start,w=d-T;L=m.start+w}const I=!e.isInterstitial(m);if((!e.isInterstitial(y)||y.event.appendInPlace)&&(I||m.event.appendInPlace)){const T=e.media||(E?v==null?void 0:v.media:null);T&&(T.currentTime=L)}else if(y){const T=e.findItemIndex(y);if(b>T){const R=e.schedule.findJumpRestrictedIndex(T+1,b);if(R>T){e.setSchedulePosition(R);return}}let w=0;if(I)e.timelinePos=L,e.checkBuffer();else{const R=m.event.assetList,_=d-(m[f]||m).start;for(let k=R.length;k--;){const N=R[k];if(N.duration&&_>=N.startOffset&&_<N.startOffset+N.duration){w=k;break}}}e.setSchedulePosition(b,w)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const f=t();return e.isInterstitial(f)?f:null},u={get bufferedEnd(){const d=t(),f=e.bufferingItem;if(f&&f===d){var p;return s(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((p=e.bufferingAsset)==null?void 0:p.startOffset)||0}return 0},get currentTime(){const d=c(),f=e.effectivePlayingItem;return f&&f===d?s(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(d){const f=c(),p=e.effectivePlayingItem;p&&p===f&&l(d+p.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const f=(d=c())==null?void 0:d.event.assetList;return f?f.map(p=>e.getAssetPlayer(p.identifier)):[]},get playingIndex(){var d;const f=(d=c())==null?void 0:d.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return c()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return i(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,f=d==null?void 0:d.event;if(f&&!f.restrictions.skip){const p=e.findItemIndex(d);if(f.appendInPlace){const h=d.playout.start+d.event.duration;l(h+.001,"playout")}else e.advanceAfterAssetEnded(f,p,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(s=this.primaryMedia);const i=(t=s)==null?void 0:t.currentTime;if(!(i===void 0||!X(i)))return i}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,s=e.media;if(n&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s){this.detachedData={media:s};return}const i=e.transferMedia();this.log(`transfer MediaSource from ${e} ${je(i)}`),this.detachedData=i}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var n,s;if(e.media===t)return;let i=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource;let u;if(a.media)l&&(i=a.transferMedia(),this.detachedData=i),u="Primary";else if(c){const h=this.getBufferingPlayer();h?(i=h.transferMedia(),u=`${h}`):u="detached MediaSource"}else u="detached media";if(!i){if(c)i=this.detachedData,this.log(`using detachedData: MediaSource ${je(i)}`);else if(!this.detachedData||a.media===t){const h=this.playerQueue;h.length>1&&h.forEach(g=>{if(o&&g.interstitial.appendInPlace!==l){const y=g.interstitial;this.clearInterstitial(g.interstitial,null),y.appendInPlace=!1,y.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${y}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=i&&"mediaSource"in i&&((s=i.mediaSource)==null?void 0:s.readyState)!=="closed",f=d&&i?i:t;this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${u} (media.currentTime: ${t.currentTime})`);const p=this.schedule;if(f===i&&p){const h=o&&e.assetId===p.assetIdAtEnd;f.overrides={duration:p.duration,endOfStream:!o||h,cueRemoval:!o}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,s=this.effectivePlayingItem;if(n===-1){const i=this.hls.startPosition;if(this.log(Ko("checkStart",i)),this.timelinePos=i,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(i>=0||!this.primaryLive){const a=this.timelinePos=i>0?i:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(s&&!this.playingItem){const i=e.findItemIndex(s);this.setSchedulePosition(i)}}advanceAssetBuffering(e,t){const n=e.event,s=n.findAssetIndex(t),i=od(n,s);if(!n.isAssetPastPlayoutLimit(i))this.bufferedToEvent(e,i);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,n){const s=od(e,n);if(e.isAssetPastPlayoutLimit(s)){if(this.schedule){const i=this.schedule.items;if(i){const a=t+1,o=i.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(Ko("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const i=e.assetList[s];i&&this.advanceInPlace(i.timelineStart)}this.setSchedulePosition(t,s)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const s=t.parentIdentifier,i=n.getEvent(s);if(i){const a=n.findEventIndex(s),o=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,a,o-1)}}setSchedulePosition(e,t){var n;const s=(n=this.schedule)==null?void 0:n.items;if(!s||this.playbackDisabled)return;const i=e>=0?s[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i&&pr(i)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const u=a.event,d=this.playingAsset,f=d==null?void 0:d.identifier,p=f?this.getAssetPlayer(f):null;if(p&&f&&(!this.eventItemsMatch(a,i)||t!==void 0&&f!==u.assetList[t].identifier)){var l;const h=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${h+1}/${u.assetList.length} ${zs(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(A.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:h,event:u,schedule:s.slice(0),scheduleIndex:e,player:p}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),h);return}this.retreiveMediaSource(f,i),p.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(a,i)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${pr(a)}`),u.hasPlayed=!0,this.hls.trigger(A.INTERSTITIAL_ENDED,{event:u,schedule:s.slice(0),scheduleIndex:e}),u.cue.once)){var c;this.updateSchedule();const h=(c=this.schedule)==null?void 0:c.items;if(i&&h){const g=this.findItemIndex(i);this.advanceSchedule(g,h,t,a,o)}return}}this.advanceSchedule(e,s,t,a,o)}advanceSchedule(e,t,n,s,i){const a=this.schedule;if(!a)return;const o=t[e]||null,l=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{const d=u.interstitial,f=a.findEventIndex(d.identifier);(f<e||f>e+1)&&this.clearInterstitial(d,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const u=o.event;if(n===void 0){n=a.findAssetIndex(u,this.timelinePos);const h=od(u,n-1);if(u.isAssetPastPlayoutLimit(h)||u.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(u,e,n);return}n=h}const d=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let f=this.preloadAssets(u,n);if(this.eventItemsMatch(o,d||s)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${pr(o)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(A.INTERSTITIAL_STARTED,{event:u,schedule:t.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const p=u.assetList[n];if(!p){this.advanceAfterAssetEnded(u,e,n||0);return}if(f||(f=this.getAssetPlayer(p.identifier)),f===null||f.destroyed){const h=u.assetList.length;this.warn(`asset ${n+1}/${h} player destroyed ${u}`),f=this.createAssetPlayer(u,p,n),f.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(f,n,t,e,l),this.shouldPlay&&Ex(f.media)}else o?(this.resumePrimary(o,e,s),this.shouldPlay&&Ex(this.hls.media)):i&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var s,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${pr(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(Ko("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const a=(i=this.schedule)==null?void 0:i.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${pr(e)}`),this.hls.trigger(A.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const s=this.primaryDetails;if(t===0)return this.hls.startPosition;if(s&&(n<s.fragmentStart||n>s.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:fe.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,s),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Ko("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((n=s.mainForwardBufferInfo)==null?void 0:n.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(A.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(A.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const s=ke(ke({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=ke(ke({},this.altSelection),{},{audio:n});return}const i=ke(ke({},s),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=ke(ke({},this.altSelection),{},{subtitles:n});return}const i=ke(ke({},s),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=_0(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setAudioOption(t)||s.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=_0(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setSubtitleOption(t)||t.id!==-1&&s.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let s=0;s<t.length;s++){const i=t[s];if(i.cue.post){var n;const a=this.schedule.findEventIndex(i.identifier),o=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const s=(n=this.schedule)==null?void 0:n.items;if(e&&s){const i=this.findItemIndex(e,t);return s[i]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((i,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(i.identifier,null)});const n=e.end+.25,s=fe.bufferInfo(this.primaryMedia,n,0);(s.end>n||(s.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${pr(e)} (was ${pr(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const s=fe.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,n,e)}updateBufferedPos(e,t,n){const s=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!s)return;if(t.length===1&&this.itemsMatch(t[0],i)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const u=this.findItemIndex(i),d=Math.min(u+1,t.length-1),f=t[d];if((l===-1&&i&&e>=i.end||(c=f.event)!=null&&c.appendInPlace&&e+.01>=f.start)&&(l=d),this.isInterstitial(i)){const p=i.event;if(d-o>1&&p.appendInPlace===!1||p.assetList.length===0&&p.assetListLoader)return}if(this.bufferedPos=e,l>u&&l>o)this.bufferedToItem(f);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&f.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else n&&a&&!this.itemsMatch(a,i)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const i=this.getAssetPlayer(s.identifier);return!(i!=null&&i.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:s,events:i}=n;if(!s||!i)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${pr(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const c=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((u,d)=>{const f=this.getAssetPlayer(u.identifier);f&&(d===c&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(A.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,s=n.assetList.length===0&&!n.assetListLoader,i=n.cue.once;if(s||!i){const a=this.preloadAssets(n,t);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,t){const n=e.assetUrl,s=e.assetList.length,i=s===0&&!e.assetListLoader,a=e.cue.once;if(i){const l=e.timelineStart;if(e.appendInPlace){var o;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(o=f.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const f=u-l;f>0&&(c=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:s} ${e}${c?` live-start: ${u} start-offset: ${c}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!a&&s){for(let c=t;c<s;c++){const u=e.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,c)}const l=e.assetList[t];if(l){const c=this.getAssetPlayer(l.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(s=>{this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,s,i,a){const o={parentIdentifier:e.identifier,identifier:KN(e,a,t),duration:i,startOffset:n,timelineStart:s,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,n){const s=this.hls,i=s.userConfig;let a=i.videoPreference;const o=s.loadLevelObj||s.levels[s.currentLevel];(a||o)&&(a=Me({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=s.audioTracks[s.audioTrack],c=s.subtitleTracks[s.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const S=this.timelinePos-t.timelineStart;if(S>1){const E=t.duration;E&&S<E&&(u=S)}}const d=t.identifier,f=ke(ke({},i),{},{maxMaxBufferLength:Math.min(180,s.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||i.audioPreference,subtitlePreference:c||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(f.timelineOffset=t.timelineStart));const p=f.cmcd;p!=null&&p.sessionId&&p.contentId&&(f.cmcd=Me({},p,{contentId:ga(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const h=new YN(this.HlsPlayerClass,f,e,t);this.playerQueue.push(h),e.assetList[n]=t;let g=!0;const y=S=>{if(S.live){var E;const I=new Error(`Interstitials MUST be VOD assets ${e}`),T={fatal:!0,type:re.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:I},w=((E=this.schedule)==null?void 0:E.findEventIndex(e.identifier))||-1;this.handleAssetItemError(T,e,w,n,I.message);return}const C=S.edge-S.fragmentStart,L=t.duration;(g||L===null||C>L)&&(g=!1,this.log(`Interstitial asset "${d}" duration change ${L} > ${C}`),t.duration=C,this.updateSchedule())};h.on(A.LEVEL_UPDATED,(S,{details:E})=>y(E)),h.on(A.LEVEL_PTS_UPDATED,(S,{details:E})=>y(E)),h.on(A.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const b=(S,E)=>{const C=this.getAssetPlayer(d);if(C&&E.tracks){C.off(A.BUFFER_CODECS,b),C.tracks=E.tracks;const L=this.primaryMedia;this.bufferingAsset===C.assetItem&&L&&!C.media&&this.bufferAssetPlayer(C,L)}};h.on(A.BUFFER_CODECS,b);const m=()=>{var S;const E=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${E}`),!E||!this.schedule)return;const C=this.schedule.findEventIndex(e.identifier),L=(S=this.schedule.items)==null?void 0:S[C];this.isInterstitial(L)&&this.advanceAssetBuffering(L,t)};h.on(A.BUFFERED_TO_END,m);const v=S=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const C=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,C,S)};return h.once(A.MEDIA_ENDED,v(n)),h.once(A.PLAYOUT_LIMIT_REACHED,v(1/0)),h.on(A.ERROR,(S,E)=>{if(!this.schedule)return;const C=this.getAssetPlayer(d);if(E.details===z.BUFFER_STALLED_ERROR){if(C!=null&&C.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${E.error} ${e}`)}),h.on(A.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const E=new Error(`Asset player destroyed unexpectedly ${d}`),C={fatal:!0,type:re.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:E};this.handleAssetItemError(C,e,this.schedule.findEventIndex(e.identifier),n,E.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${zs(t)}`),this.hls.trigger(A.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:h}),h}clearInterstitial(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const s=this.playerQueue[n];this.log(`clear ${s} toSegment: ${t&&pr(t)}`),this.transferMediaFromPlayer(s,t),this.playerQueue.splice(n,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,s,i){const{interstitial:a,assetItem:o,assetId:l}=e,c=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,n[s]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${zs(o)}`),this.hls.trigger(A.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,s;if(!this.schedule)return;const{interstitial:i,assetItem:a}=e,o=this.schedule.findEventIndex(i.identifier),l=(n=this.schedule.items)==null?void 0:n[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const u=i.appendInPlace;if(u&&(c==null?void 0:c.interstitial.appendInPlace)===!1)return;const d=(c==null?void 0:c.tracks)||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(u&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!aS(d,e.tracks)){const f=new Error(`Asset ${zs(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),p={fatal:!0,type:re.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},h=i.findAssetIndex(a);this.handleAssetItemError(p,i,o,h,f.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const s=n.currentTime,i=t.findAssetIndex(e,s),a=e.assetList[i];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const l=o.currentTime||s-a.timelineStart,c=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+c} in ${o} ${e} (media.currentTime: ${s})`),l&&(c/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const u=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,u,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,s,i){if(e.details===z.BUFFER_STALLED_ERROR)return;const a=t.assetList[s]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&zs(a)} ${e.error}`),!this.schedule)return;const o=(a==null?void 0:a.identifier)||"",l=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[l]||null,u=this.schedule.items,d=Me({},e,{fatal:!1,errorAction:fi(!0),asset:a,assetListIndex:s,event:t,schedule:u,scheduleIndex:n,player:c});if(this.hls.trigger(A.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const f=this.playingAsset,p=this.bufferingAsset,h=new Error(i);if(a&&(this.clearAssetPlayer(o,null),a.error=h),!t.assetList.some(g=>!g.error))t.error=h;else for(let g=s;g<t.assetList.length;g++)this.resetAssetPlayer(t.assetList[g].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):f&&f.identifier===o?this.advanceAfterAssetEnded(t,n,s):p&&p.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,p)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${pr(n)} error: ${e.error}`);let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const i=this.updateItem(n,s);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const a=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var n,s;const i=t.event,a=i.identifier,o=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(a)))return;const l=i.timelineStart,c=i.duration;let u=0;o.forEach((g,y)=>{const b=parseFloat(g.DURATION);this.createAsset(i,y,u,l+u,b,g.URI),u+=b}),i.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${i}`);const d=this.waitingItem,f=(d==null?void 0:d.event.identifier)===a;this.updateSchedule();const p=(s=this.bufferingItem)==null?void 0:s.event;if(f){var h;const g=this.schedule.findEventIndex(a),y=(h=this.schedule.items)==null?void 0:h[g];if(y){if(!this.playingItem&&this.timelinePos>y.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==g){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.updateSchedule(!0),this.primaryFallback(i);return}this.setBufferingItem(y)}this.setSchedulePosition(g)}else if((p==null?void 0:p.identifier)===a){const g=i.assetList[0];if(g){const y=this.getAssetPlayer(g.identifier);if(p.appendInPlace){const b=this.primaryMedia;y&&b&&this.bufferAssetPlayer(y,b)}else y&&y.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case z.ASSET_LIST_PARSING_ERROR:case z.ASSET_LIST_LOAD_ERROR:case z.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case z.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const wx=500;class JN extends Np{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Z.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(A.LEVEL_LOADED,this.onLevelLoaded,this),e.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(A.LEVEL_LOADED,this.onLevelLoaded,this),e.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=H.IDLE,this.setInterval(wx),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:s}=t;if(this.fragContextChanged(n)||(rt(n)&&(this.fragPrevious=n),this.state=H.IDLE),!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const o=n.start;for(let c=0;c<i.length;c++)if(o>=i[c].start&&o<=i[c].end){a=i[c];break}const l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},i.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:s}=t;if(n===0&&s!==Number.POSITIVE_INFINITY){const i=s-1;if(i<=0)return;t.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=i){a.shift();continue}else if(a[o].start<i)a[o].start=i;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,i,Z.SUBTITLE)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===Z.SUBTITLE&&(t.details===z.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==H.STOPPED&&(this.state=H.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&cE(this.levels,t)){this.levels=t.map(n=>new za(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const s=new za(n);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Z.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==H.STOPPED&&this.setInterval(wx)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:s,levels:i}=this,{details:a,id:o}=t;if(!i){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=i[o];if(o>=i.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(n=l.details)!=null&&n.live){if(a.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const f=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(gc(a,d),c=a.fragmentStart):f&&(c=f.start,Zf(a,c));else{var u;c=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&f&&(c=f.start,Zf(a,c))}d&&!this.startFragRequested&&this.setStartPosition(d,c)}l.details=a,this.levelLastLoaded=l,o===s&&(this.hls.trigger(A.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===H.IDLE&&(Ps(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,s=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&s!=null&&s.key&&s.iv&&hi(s.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer,Pp(s.method)).catch(o=>{throw i.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();i.trigger(A.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=H.IDLE})}}doTick(){if(!this.media){this.state=H.IDLE;return}if(this.state===H.IDLE){const{currentTrackId:e,levels:t}=this,n=t==null?void 0:t[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:s}=this,i=this.getLoadPosition(),a=fe.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole),{end:o,len:l}=a,c=n.details,u=this.hls.maxBufferLength+c.levelTargetDuration;if(l>u)return;const d=c.fragments,f=d.length,p=c.edge;let h=null;const g=this.fragPrevious;if(o<p){const m=s.maxFragLookUpTolerance,v=o>p-m?0:m;h=Ps(g,d,Math.max(d[0].start,o),v),!h&&g&&g.start<d[0].start&&(h=d[0])}else h=d[f-1];if(h=this.filterReplacedPrimary(h,n.details),!h)return;const y=h.sn-c.startSN,b=d[y-1];if(b&&b.cc===h.cc&&this.fragmentTracker.getState(b)===ot.NOT_LOADED&&(h=b),this.fragmentTracker.getState(h)===ot.NOT_LOADED){const m=this.mapToInitFragWhenRequired(h);m&&this.loadFragment(m,n,o)}}}loadFragment(e,t,n){rt(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new e5(this.tracksBuffered[this.currentTrackId]||[])}}class e5{constructor(e){this.buffered=void 0;const t=(n,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const t5={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},AE=r=>String.fromCharCode(t5[r]||r),mr=15,Jr=100,r5={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},n5={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s5={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},i5={25:2,26:4,29:6,30:8,31:10,27:13,28:15},a5=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class o5{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;_e.log(`${this.time} [${e}] ${n}`)}}}const ls=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class IE{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const s=t[n];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class l5{constructor(){this.uchar=" ",this.penState=new IE}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class c5{constructor(e){this.chars=[],this.pos=0,this.currPenState=new IE,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Jr;t++)this.chars.push(new l5);this.logger=e}equals(e){for(let t=0;t<Jr;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Jr;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Jr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Jr&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Jr)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=AE(e);if(this.pos>=Jr){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Jr;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Jr;n++){const s=this.chars[n].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class ld{constructor(e){this.rows=[],this.currRow=mr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<mr;t++)this.rows.push(new c5(e));this.logger=e}reset(){for(let e=0;e<mr;e++)this.rows[e].clear();this.currRow=mr-1}equals(e){let t=!0;for(let n=0;n<mr;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<mr;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<mr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+je(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<mr;o++)this.rows[o].clear();const i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[i].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[i+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,a=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+je(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",s=-1;for(let i=0;i<mr;i++){const a=this.rows[i].getTextString();a&&(s=i+1,e?t.push("Row "+s+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class Tx{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ld(n),this.nonDisplayedMemory=new ld(n),this.lastOutputScreen=new ld(n),this.currRollUpRow=this.displayedMemory.rows[mr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[mr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[n]}this.logger.log(2,"MIDROW: "+je(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Ax{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=d5(),this.logger=void 0;const s=this.logger=new o5;this.channels=[null,new Tx(e,t,s),new Tx(e+1,n,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const s=t[n]&127,i=t[n+1]&127;let a=!1,o=null;if(s===0&&i===0)continue;this.logger.log(3,()=>"["+ls([t[n],t[n+1]])+"] -> ("+ls([s,i])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(u5(s,i,l)){Wo(null,null,l),this.logger.log(3,()=>"Repeated command ("+ls([s,i])+") is dropped");continue}Wo(s,i,this.cmdHistory),a=this.parseCmd(s,i),a||(a=this.parseMidrow(s,i)),a||(a=this.parsePAC(s,i)),a||(a=this.parseBackgroundAttributes(s,i))}else Wo(null,null,l);if(!a&&(o=this.parseChars(s,i),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+ls([s,i])+" orig: "+ls([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(n||s))return!1;const i=e===20||e===21||e===23?1:2,a=this.channels[i];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=i,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[n];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+ls([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,i=(e===16||e===24)&&t>=64&&t<=95;if(!(s||i))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?r5[e]:s5[e]:n=a===1?n5[e]:i5[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,s.underline=(n&1)===1,n<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((n-16)/2)*4,s}parseChars(e,t){let n,s=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let a;i===17?a=t+80:i===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+AE(a)+"' in channel "+n),s=[a]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+ls(s).join(",")),s}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(n||s))return!1;let i;const a={};e===16||e===24?(i=Math.floor((t-32)/2),a.background=a5[i],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Wo(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Wo(r,e,t){t.a=r,t.b=e}function u5(r,e,t){return t.a===r&&t.b===e}function d5(){return{a:null,b:null}}var Kp=function(){if(mc!=null&&mc.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function s(o){return t(e,o)}function i(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let f="",p=!1,h=o,g=l,y=c,b=null,m="",v=!0,S="auto",E="start",C=50,L="middle",I=50,T="middle";Object.defineProperty(u,"id",i({},d,{get:function(){return f},set:function(w){f=""+w}})),Object.defineProperty(u,"pauseOnExit",i({},d,{get:function(){return p},set:function(w){p=!!w}})),Object.defineProperty(u,"startTime",i({},d,{get:function(){return h},set:function(w){if(typeof w!="number")throw new TypeError("Start time must be set to a number.");h=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",i({},d,{get:function(){return g},set:function(w){if(typeof w!="number")throw new TypeError("End time must be set to a number.");g=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",i({},d,{get:function(){return y},set:function(w){y=""+w,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",i({},d,{get:function(){return b},set:function(w){b=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",i({},d,{get:function(){return m},set:function(w){const R=n(w);if(R===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",i({},d,{get:function(){return v},set:function(w){v=!!w,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",i({},d,{get:function(){return S},set:function(w){if(typeof w!="number"&&w!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");S=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",i({},d,{get:function(){return E},set:function(w){const R=s(w);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");E=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",i({},d,{get:function(){return C},set:function(w){if(w<0||w>100)throw new Error("Position must be between 0 and 100.");C=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",i({},d,{get:function(){return L},set:function(w){const R=s(w);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");L=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",i({},d,{get:function(){return I},set:function(w){if(w<0||w>100)throw new Error("Size must be between 0 and 100.");I=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",i({},d,{get:function(){return T},set:function(w){const R=s(w);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");T=R,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class f5{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function LE(r){function e(n,s,i,a){return(n|0)*3600+(s|0)*60+(i|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class h5{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let s=0;s<n.length;++s)if(t===n[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function CE(r,e,t,n){const s=n?r.split(n):[r];for(const i in s){if(typeof s[i]!="string")continue;const a=s[i].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const ah=new Kp(0,0,""),qo=ah.align==="middle"?"middle":"center";function p5(r,e,t){const n=r;function s(){const o=LE(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function i(o,l){const c=new h5;CE(o,function(f,p){let h;switch(f){case"region":for(let g=t.length-1;g>=0;g--)if(t[g].id===p){c.set(f,t[g].region);break}break;case"vertical":c.alt(f,p,["rl","lr"]);break;case"line":h=p.split(","),c.integer(f,h[0]),c.percent(f,h[0])&&c.set("snapToLines",!1),c.alt(f,h[0],["auto"]),h.length===2&&c.alt("lineAlign",h[1],["start",qo,"end"]);break;case"position":h=p.split(","),c.percent(f,h[0]),h.length===2&&c.alt("positionAlign",h[1],["start",qo,"end","line-left","line-right","auto"]);break;case"size":c.percent(f,p);break;case"align":c.alt(f,p,["start",qo,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&ah.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",qo);let d=c.get("position","auto");d==="auto"&&ah.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=s(),a(),i(r,e)}function RE(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class m5{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new f5,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let i=t.buffer,a=0;for(i=RE(i);a<i.length&&i[a]!=="\r"&&i[a]!==`
`;)++a;const o=i.slice(0,a);return i[a]==="\r"&&++a,i[a]===`
`&&++a,t.buffer=i.slice(a),o}function s(i){CE(i,function(a,o){},/:/)}try{let i="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;i=n();const o=i.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?s(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Kp(0,0,""),t.state="CUE",i.indexOf("-->")===-1){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{p5(i,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=i.indexOf("-->")!==-1;if(!i||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=i}continue;case"BADCUE":i||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const g5=/\r\n|\n\r|\n|\r/g,cd=function(e,t,n=0){return e.slice(n,n+t.length)===t},x5=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!X(t)||!X(n)||!X(s)||!X(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*s,t+=60*60*1e3*i,t};function Wp(r,e,t){return ga(r.toString())+ga(e.toString())+ga(t)}const v5=function(e,t,n){let s=e[t],i=e[s.prevCC];if(!i||!i.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(a=i)!=null&&a.new;){var a;e.ccOffset+=s.start-i.start,s.new=!1,s=i,i=e[s.prevCC]}e.presentationOffset=n};function y5(r,e,t,n,s,i,a){const o=new m5,l=Jt(new Uint8Array(r)).trim().replace(g5,`
`).split(`
`),c=[],u=e?AD(e.baseTime,e.timescale):0;let d="00:00.000",f=0,p=0,h,g=!0;o.oncue=function(y){const b=t[n];let m=t.ccOffset;const v=(f-u)/9e4;if(b!=null&&b.new&&(p!==void 0?m=t.ccOffset=b.start:v5(t,n,v)),v){if(!e){h=new Error("Missing initPTS for VTT MPEGTS");return}m=v-t.presentationOffset}const S=y.endTime-y.startTime,E=Wt((y.startTime+m-p)*9e4,s*9e4)/9e4;y.startTime=Math.max(E,0),y.endTime=Math.max(E+S,0);const C=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(C)),y.id||(y.id=Wp(y.startTime,y.endTime,C)),y.endTime>0&&c.push(y)},o.onparsingerror=function(y){h=y},o.onflush=function(){if(h){a(h);return}i(c)},l.forEach(y=>{if(g)if(cd(y,"X-TIMESTAMP-MAP=")){g=!1,y.slice(16).split(",").forEach(b=>{cd(b,"LOCAL:")?d=b.slice(6):cd(b,"MPEGTS:")&&(f=parseInt(b.slice(7)))});try{p=x5(d)/1e3}catch(b){h=b}return}else y===""&&(g=!1);o.parse(y+`
`)}),o.flush()}const ud="stpp.ttml.im1t",kE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,_E=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,b5={left:"start",center:"center",right:"end",start:"start",end:"end"};function Ix(r,e,t,n){const s=ye(new Uint8Array(r),["mdat"]);if(s.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(o=>Jt(o)),a=TD(e.baseTime,1,e.timescale);try{i.forEach(o=>t(S5(o,a)))}catch(o){n(o)}}function S5(r,e){const s=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||i[f],d),{}),o=s.getAttribute("xml:space")!=="preserve",l=Lx(dd(s,"styling","style")),c=Lx(dd(s,"layout","region")),u=dd(s,"body","[begin]");return[].map.call(u,d=>{const f=PE(d,o);if(!f||!d.hasAttribute("begin"))return null;const p=hd(d.getAttribute("begin"),a),h=hd(d.getAttribute("dur"),a);let g=hd(d.getAttribute("end"),a);if(p===null)throw Cx(d);if(g===null){if(h===null)throw Cx(d);g=p+h}const y=new Kp(p-e,g-e,f);y.id=Wp(y.startTime,y.endTime,y.text);const b=c[d.getAttribute("region")],m=l[d.getAttribute("style")],v=E5(b,m,l),{textAlign:S}=v;if(S){const E=b5[S];E&&(y.lineAlign=E),y.align=S}return Me(y,v),y}).filter(d=>d!==null)}function dd(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function Lx(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function PE(r,e){return[].slice.call(r.childNodes).reduce((t,n,s)=>{var i;return n.nodeName==="br"&&s?t+`
`:(i=n.childNodes)!=null&&i.length?PE(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function E5(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(s=t[a]),i.reduce((o,l)=>{const c=fd(e,n,l)||fd(r,n,l)||fd(s,n,l);return c&&(o[l]=c),o},{})}function fd(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function Cx(r){return new Error(`Could not parse ttml timestamp ${r}`)}function hd(r,e){if(!r)return null;let t=LE(r);return t===null&&(kE.test(r)?t=w5(r,e):_E.test(r)&&(t=T5(r,e))),t}function w5(r,e){const t=kE.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function T5(r,e){const t=_E.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Yo{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class A5{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=kx(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(A.FRAG_LOADING,this.onFragLoading,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this),e.on(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(A.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(A.FRAG_LOADING,this.onFragLoading,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this),e.off(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(A.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Yo(this,"textTrack1"),t=new Yo(this,"textTrack2"),n=new Yo(this,"textTrack3"),s=new Yo(this,"textTrack4");this.cea608Parser1=new Ax(1,e,t),this.cea608Parser2=new Ax(3,n,s)}addCues(e,t,n,s,i){let a=!1;for(let o=i.length;o--;){const l=i[o],c=I5(l[0],l[1],t,n);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],n),a=!0,c/(n-t)>.5))return}if(a||i.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,s)}else{const o=this.Cues.newCue(null,t,n,s);this.hls.trigger(A.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:s,timescale:i,trackId:a}){const{unparsedVttFrags:o}=this;n===Z.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:i,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(A.FRAG_LOADED,l):this.hls.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let s=0;s<n.textTracks.length;s++){const i=n.textTracks[s];if(Rx(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:s}=this,{label:i,languageCode:a}=t[e],o=this.getExistingTrack(i,a);if(o)n[e]=o,ri(n[e]),EE(n[e],s);else{const l=this.createTextTrack("captions",i,a);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,s={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,n){const s=this.media;if(s)return s.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:s}=this;Object.keys(s).forEach(i=>{ri(s[i]),delete s[i]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=kx(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)ri(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],s=n.some(i=>i.textCodec===ud);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(cE(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?El(a.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(o){let d=null;for(let f=0;f<o.length;f++)if(o[f]&&Rx(o[f],l)){d=o[f],o[f]=null;break}d&&(u=d)}if(u)ri(u);else{const d=DE(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const s=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!s)return;const i=`textTrack${s[1]}`,a=this.captionsProperties[i];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Z.MAIN){var n,s;const{cea608Parser1:i,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:c}=t.frag,u=(n=(s=t.part)==null?void 0:s.index)!=null?n:-1;i&&a&&(c!==o+1||c===o&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(i.reset(),a.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:n,payload:s}=t;if(n.type===Z.SUBTITLE)if(s.byteLength){const i=n.decryptdata,a="stats"in t;if(i==null||!i.encrypted||a){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===ud?this._parseIMSC1(n,s):this._parseVTTs(t)}}else this.hls.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;Ix(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),n.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{n.logger.log(`Failed to parse IMSC1: ${s}`),n.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:n,payload:s}=e,{initPTS:i,unparsedVttFrags:a}=this,o=i.length-1;if(!i[n.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=n.initSegment)!=null&&t.data?ur(n.initSegment.data,new Uint8Array(s)).buffer:s;y5(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,u=>{this._appendCues(u,n.level),l.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,s),l.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&o>n.cc)&&l.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:u})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||Ix(t,this.initPTS[e.cc],()=>{n.textCodec=ud,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(i=>wE(s,i))}else{const s=this.tracks[t];if(!s)return;const i=s.default?"default":"subtitles"+t;n.trigger(A.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Z.SUBTITLE&&this.onFragLoaded(A.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:s}=t;if(!(n.type===Z.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let i=0;i<s.length;i++){const a=s[i].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(s[i].pts,o[0]),this.cea608Parser2.addData(s[i].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:s,type:i}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!i||i==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>ih(o[l],t,n))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>ih(o[l],t,s))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let s=2;for(let i=0;i<n;i++){const a=e[s++],o=127&e[s++],l=127&e[s++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function DE(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function Rx(r,e){return!!r&&r.kind===DE(e)&&th(e,r)}function I5(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function kx(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const L5=/\s/,C5={newCue(r,e,t,n){const s=[];let i,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(i=n.rows[f],o=!0,l=0,c="",!i.isEmpty()){var d;for(let g=0;g<i.chars.length;g++)L5.test(i.chars[g].uchar)&&o?l++:(c+=i.chars[g].uchar,o=!1);i.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const p=RE(c.trim()),h=Wp(e,t,p);r!=null&&(d=r.cues)!=null&&d.getCueById(h)||(a=new u(e,t,p),a.id=h,a.line=f+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(a))}return r&&s.length&&(s.sort((f,p)=>f.line==="auto"||p.line==="auto"?0:f.line>8&&p.line>8?p.line-f.line:f.line-p.line),s.forEach(f=>wE(r,f))),s}};function R5(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const k5=/(\d+)-(\d+)\/(\d+)/;class _x{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||N5,this.controller=new self.AbortController,this.stats=new Ap}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=_5(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=l&&X(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout),(Ha(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var f;this.response=this.loader=d;const p=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},c-(p-s.loading.start)),!d.ok){const{status:g,statusText:y}=d;throw new O5(y||"fetch, bad network response",g,d)}s.loading.first=p,s.total=D5(d.headers)||s.total;const h=(f=this.callbacks)==null?void 0:f.onProgress;return h&&X(t.highWaterMark)?this.loadProgressively(d,s,e,t.highWaterMark,h):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var f,p;const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const g=d[o];g&&(s.loaded=s.total=g);const y={url:h.url,data:d,code:h.status},b=(f=this.callbacks)==null?void 0:f.onProgress;b&&!X(t.highWaterMark)&&b(s,e,d,h),(p=this.callbacks)==null||p.onSuccess(y,s,e,h)}).catch(d=>{var f;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const p=d&&d.code||0,h=d?d.message:null;(f=this.callbacks)==null||f.onError({code:p,text:h},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,s=0,i){const a=new VS,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&i(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<s||a.dataLength?(a.push(u),a.dataLength>=s&&i(t,n,a.flush().buffer,e)):i(t,n,u.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function _5(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Me({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function P5(r){const e=k5.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function D5(r){const e=r.get("Content-Range");if(e){const n=P5(e);if(X(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function N5(r,e){return new self.Request(r.url,e)}class O5 extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const M5=/^age:\s*[\d.]+\s*$/im;class NE{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Ap,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return i(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:a.message},t,n,s)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:a}=n.loadPolicy;if(s)for(const o in s)e.setRequestHeader(o,s[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&X(i)?i:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const s=t.readyState,i=this.config;if(!n.aborted&&s>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,u=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const h=u??t.response;if(h!=null){var a,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const g=t.responseType==="arraybuffer"?h.byteLength:h.length;n.loaded=n.total=g,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const y=(a=this.callbacks)==null?void 0:a.onProgress;y&&y(n,e,h,t);const b={url:t.responseURL,data:h,code:c};(o=this.callbacks)==null||o.onSuccess(b,n,e,t);return}}const d=i.loadPolicy.errorRetry,f=n.retry,p={url:e.url,data:void 0,code:c};if(hc(d,f,!1,p))this.retry(d);else{var l;_e.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(hc(e,t,!0))this.retry(e);else{var n;_e.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Rp(e,n.retry),n.retry++,_e.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&M5.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const F5={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},j5=ke(ke({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:NE,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:X4,bufferController:BD,capLevelController:Vp,errorController:tP,fpsController:UN,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:PS,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:F5},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},$5()),{},{subtitleStreamController:JN,subtitleTrackController:GN,timelineController:A5,audioStreamController:MD,audioTrackController:FD,emeController:pi,cmcdController:FN,contentSteeringController:$N,interstitialsController:ZN});function $5(){return{cueHandler:C5,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function B5(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=oh(r),s=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,c=[];i.forEach(u=>{const d=`${a}Loading${u}`,f=e[d];if(f!==void 0&&l){c.push(d);const p=n[o].default;switch(e[o]={default:p},u){case"TimeOut":p.maxLoadTimeMs=f,p.maxTimeToFirstByteMs=f;break;case"MaxRetry":p.errorRetry.maxNumRetry=f,p.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":p.errorRetry.retryDelayMs=f,p.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":p.errorRetry.maxRetryDelayMs=f,p.timeoutRetry.maxRetryDelayMs=f;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${je(e[o])}`)}),ke(ke({},n),e)}function oh(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(oh):Object.keys(r).reduce((e,t)=>(e[t]=oh(r[t]),e),{}):r}function U5(r,e){const t=r.loader;t!==_x&&t!==NE?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):R5()&&(r.loader=_x,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const wl=2,z5=.1,V5=.05,G5=100;class H5 extends LS{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(G5),this.mediaSource=t.mediaSource;const n=this.media=t.media;Ct(n,"playing",this.onMediaPlaying),Ct(n,"waiting",this.onMediaWaiting),Ct(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Ft(n,"playing",this.onMediaPlaying),Ft(n,"waiting",this.onMediaWaiting),Ft(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,s;const i=(n=this.hls)==null?void 0:n.config;if(!i)return;const a=this.media;if(!a)return;const{seeking:o}=a,l=this.seeking&&!o,c=!this.seeking&&o,u=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!u&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||l){l&&this.stallResolved(e);return}if(u){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!1}));return}if(!fe.getBuffered(a).length){this.nudgeRetry=0;return}const d=fe.bufferInfo(a,e,0),f=d.nextStart||0,p=this.fragmentTracker;if(o&&p&&this.hls){const C=Px(this.hls.inFlightFragments,e),L=d.len>wl,I=!f||C||f-e>wl&&!p.getPartialFragment(e);if(L||I)return;this.moved=!1}const h=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&p){if(!(d.len>0)&&!f)return;const L=Math.max(f,d.start||0)-e,T=!!(h!=null&&h.live)?h.targetduration*2:wl,w=Xo(e,p);if(L>0&&(L<=T||w)){a.paused||this._trySkipBufferHole(w);return}}const g=i.detectStallWithCurrentTimeMs,y=self.performance.now(),b=this.waiting;let m=this.stalled;if(m===null)if(b>0&&y-b<g)m=this.stalled=b;else{this.stalled=y;return}const v=y-m;if(!o&&(v>=g||b)&&this.hls){var S;if(((S=this.mediaSource)==null?void 0:S.readyState)==="ended"&&!(h!=null&&h.live)&&Math.abs(e-((h==null?void 0:h.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const E=fe.bufferInfo(a,e,i.maxBufferHole);this._tryFixBufferStall(E,v,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(A.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&s&&s.length>1&&e>s.end(0)){const i=fe.bufferedInfo(fe.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&t>=i.start){const a=fe.timeRangesToArray(s),o=fe.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=fe.bufferedInfo(a,e,0).bufferedIndex,c=a[o].end,u=a[o+1].start;if((l===-1||l>o)&&u-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${u} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;let f=Xo(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const p=fe.bufferInfo(this.media,e,0);this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:f,buffer:p.len,bufferInfo:p})}}}}}_tryFixBufferStall(e,t,n){var s,i;const{fragmentTracker:a,media:o}=this,l=(s=this.hls)==null?void 0:s.config;if(!o||!a||!l)return;const c=(i=this.hls)==null?void 0:i.latestLevelDetails,u=Xo(n,a);if((u||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const d=e.buffered,f=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||f))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,s=e.nextStart;if(n&&s){const i=n.getFragAtPos(t,Z.MAIN),a=n.getFragAtPos(s,Z.MAIN);if(i&&a)return a.sn-i.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:s,stalled:i}=this;if(!s&&i!==null&&n&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${je(e)})`);this.warn(a.message),t.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:s}=this,i=(t=this.hls)==null?void 0:t.config;if(!s||!n||!i)return 0;const a=s.currentTime,o=fe.bufferInfo(s,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const u=o.len<=i.maxBufferHole,d=o.len>0&&o.len<1&&s.readyState<3,f=l-a;if(f>0&&(u||d)){if(f>i.maxBufferHole){let h=!1;if(a===0){const g=n.getAppendedFrag(0,Z.MAIN);g&&l<g.end&&(h=!0)}if(!h&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||Px(this.hls.inFlightFragments,l))return 0;let y=!1,b=e.end;for(;b<l;){const m=Xo(b,n);if(m)b+=m.duration;else{y=!0;break}}if(y)return 0}}const p=Math.max(l+V5,a+z5);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${p}`),this.moved=!0,s.currentTime=p,!(e!=null&&e.gap)){const h=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${p}`),g={type:re.MEDIA_ERROR,details:z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?g.part=e:g.frag=e),this.hls.trigger(A.ERROR,g)}return p}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:s}=this,i=t==null?void 0:t.config;if(!n||!i)return 0;const a=n.currentTime;if(this.nudgeRetry++,s<i.nudgeMaxRetry){const o=a+(s+1)*i.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),n.currentTime=o,t.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${i.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Px(r,e){const t=Dx(r.main);if(t&&t.start<=e)return t;const n=Dx(r.audio);return n&&n.start<=e?n:null}function Dx(r){if(!r)return null;switch(r.state){case H.IDLE:case H.STOPPED:case H.ENDED:case H.ERROR:return null}return r.frag}function Xo(r,e){return e.getAppendedFrag(r,Z.MAIN)||e.getPartialFragment(r)}const K5=.25;function lh(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function pd(r,e,t,n,s){let i=new r(e,t,"");try{i.value=n,s&&(i.type=s)}catch{i=new r(e,t,je(s?ke({type:s},n):n))}return i}const Qo=(()=>{const r=lh();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class W5{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(A.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(A.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(A.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&ri(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return EE(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:s}=this.hls.config;if(!n&&!s)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=lh();if(a)for(let o=0;o<i.length;o++){const l=i[o].type;if(l===Xt.emsg&&!n||!s)continue;const c=XS(i[o].data),u=i[o].pts;let d=u+i[o].duration;d>Qo&&(d=Qo),d-u<=0&&(d=u+K5);for(let p=0;p<c.length;p++){const h=c[p];if(!QS(h)){this.updateId3CueEnds(u,l);const g=pd(a,u,d,h,l);g&&this.id3Track.addCue(g)}}}}updateId3CueEnds(e,t){var n;const s=(n=this.id3Track)==null?void 0:n.cues;if(s)for(let i=s.length;i--;){const a=s[i];a.type===t&&a.startTime<e&&a.endTime===Qo&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:s}){const{id3Track:i,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(i&&(o||l)){let c;s==="audio"?c=u=>u.type===Xt.audioId3&&l:s==="video"?c=u=>u.type===Xt.emsg&&o:c=u=>u.type===Xt.audioId3&&l||u.type===Xt.emsg&&o,ih(i,t,n,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:s,enableDateRangeMetadataCues:i,interstitialsController:a}=this.hls.config;if(!i)return;const o=lh();if(n&&s&&!a){const{fragmentStart:g,fragmentEnd:y}=e;let b=this.assetCue;b?(b.startTime=g,b.endTime=y):o&&(b=this.assetCue=pd(o,g,y,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),b&&(b.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(b),b.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:c}=e,u=Object.keys(c);let d=this.dateRangeCuesAppended;if(l&&t){var f;if((f=l.cues)!=null&&f.length){const g=Object.keys(d).filter(y=>!u.includes(y));for(let y=g.length;y--;){var p;const b=g[y],m=(p=d[b])==null?void 0:p.cues;delete d[b],m&&Object.keys(m).forEach(v=>{const S=m[v];if(S){S.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(S)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const h=e.fragments[e.fragments.length-1];if(!(u.length===0||!X(h==null?void 0:h.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let g=0;g<u.length;g++){const y=u[g],b=c[y],m=b.startTime,v=d[y],S=(v==null?void 0:v.cues)||{};let E=(v==null?void 0:v.durationKnown)||!1,C=Qo;const{duration:L,endDate:I}=b;if(I&&L!==null)C=m+L,E=!0;else if(b.endOnNext&&!E){const w=u.reduce((R,_)=>{if(_!==b.id){const k=c[_];if(k.class===b.class&&k.startDate>b.startDate&&(!R||b.startDate<R.startDate))return k}return R},null);w&&(C=w.startTime,E=!0)}const T=Object.keys(b.attr);for(let w=0;w<T.length;w++){const R=T[w];if(!pP(R))continue;const _=S[R];if(_)E&&!(v!=null&&v.durationKnown)?_.endTime=C:Math.abs(_.startTime-m)>.01&&(_.startTime=m,_.endTime=C);else if(o){let k=b.attr[R];mP(R)&&(k=oS(k));const M=pd(o,m,C,{key:R,data:k},Xt.dateRange);M&&(M.id=y,this.id3Track.addCue(M),S[R]=M,a&&(R==="X-ASSET-LIST"||R==="X-ASSET-URL")&&M.addEventListener("enter",this.onEventCueEnter))}}d[y]={cues:S,dateRange:b,durationKnown:E}}}}}class q5{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:a}=this.config;if(!i||a===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const l=s-o,c=Math.min(this.maxLatency,o+n.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),f=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,p=Math.min(d,Math.max(1,f));this.changeMediaPlaybackRate(t,p)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&n||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=i!==void 0?i:a*s);const u=s;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const s=n.edge,i=e-t-this.edgeStalled,a=s-n.totalduration,o=s-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(A.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(A.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===z.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,s;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class Y5 extends zp{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.LEVEL_LOADED,this.onLevelLoaded,this),e.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this),e.on(A.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.LEVEL_LOADED,this.onLevelLoaded,this),e.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this),e.off(A.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,s=[],i={},a={};let o=!1,l=!1,c=!1;t.levels.forEach(u=>{const d=u.attrs;let{audioCodec:f,videoCodec:p}=u;f&&(u.audioCodec=f=cc(f,n)||void 0),p&&(p=u.videoCodec=_4(p));const{width:h,height:g,unknownCodecs:y}=u,b=(y==null?void 0:y.length)||0;if(o||(o=!!(h&&g)),l||(l=!!p),c||(c=!!f),b||f&&!this.isAudioSupported(f)||p&&!this.isVideoSupported(p)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:m,"FRAME-RATE":v,"HDCP-LEVEL":S,"PATHWAY-ID":E,RESOLUTION:C,"VIDEO-RANGE":L}=d,T=`${`${E||"."}-`}${u.bitrate}-${C}-${v}-${m}-${L}-${S}`;if(i[T])if(i[T].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const w=a[T]+=1;u.attrs["PATHWAY-ID"]=new Array(w+1).join(".");const R=this.createLevel(u);i[T]=R,s.push(R)}else i[T].addGroupId("audio",d.AUDIO),i[T].addGroupId("text",d.SUBTITLES);else{const w=this.createLevel(u);i[T]=w,a[T]=1,s.push(w)}}),this.filterAndSortMediaOptions(s,t,o,l,c)}createLevel(e){const t=new za(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(s.message),t.supportedResult=yS(s,[])}return t}isAudioSupported(e){return Ba(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Ba(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,s,i){var a;let o=[],l=[],c=e;const u=((a=t.stats)==null?void 0:a.parsing)||{};if((n||s)&&i&&(c=c.filter(({videoCodec:m,videoRange:v,width:S,height:E})=>(!!m||!!(S&&E))&&U4(v))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let m="no level with compatible codecs found in manifest",v=m;t.levels.length&&(v=`one or more CODECS in variant not supported: ${je(t.levels.map(E=>E.attrs.CODECS).filter((E,C,L)=>L.indexOf(E)===C))}`,this.warn(v),m+=` (${v})`);const S=new Error(m);this.hls.trigger(A.ERROR,{type:re.MEDIA_ERROR,details:z.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:S,reason:v})}}),u.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(m=>!m.audioCodec||this.isAudioSupported(m.audioCodec)),Nx(o)),t.subtitles&&(l=t.subtitles,Nx(l));const d=c.slice(0);c.sort((m,v)=>{if(m.attrs["HDCP-LEVEL"]!==v.attrs["HDCP-LEVEL"])return(m.attrs["HDCP-LEVEL"]||"")>(v.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&m.height!==v.height)return m.height-v.height;if(m.frameRate!==v.frameRate)return m.frameRate-v.frameRate;if(m.videoRange!==v.videoRange)return uc.indexOf(m.videoRange)-uc.indexOf(v.videoRange);if(m.videoCodec!==v.videoCodec){const S=A0(m.videoCodec),E=A0(v.videoCodec);if(S!==E)return E-S}if(m.uri===v.uri&&m.codecSet!==v.codecSet){const S=lc(m.codecSet),E=lc(v.codecSet);if(S!==E)return E-S}return m.averageBitrate!==v.averageBitrate?m.averageBitrate-v.averageBitrate:0});let f=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length)){for(let m=0;m<d.length;m++)if(d[m].pathwayId===c[0].pathwayId){f=d[m];break}}this._levels=c;for(let m=0;m<c.length;m++)if(c[m]===f){var p;this._firstLevel=m;const v=f.bitrate,S=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${v}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const E=Math.min(v,this.hls.config.abrEwmaDefaultEstimateMax);E>S&&S===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const h=i&&!s,g=this.hls.config,y=!!(g.audioStreamController&&g.audioTrackController),b={levels:c,audioTracks:o,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:s,altAudio:y&&!h&&o.some(m=>!!m.url)};u.end=performance.now(),this.hls.trigger(A.MANIFEST_PARSED,b)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&s&&i===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${i?" with Pathway "+i:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(A.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,s==null?void 0:s.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(s=>t.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===Se.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Z.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(i=>!!n[i]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,t){var n;const{level:s,details:i}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${s}`),(o=t.deliveryDirectives)!=null&&o.skip&&(i.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(s,t,l)}else(n=t.deliveryDirectives)!=null&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(A.LEVEL_LOADING,{url:n,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((i,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(o=>o.level=-1)),!1));BS(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=n.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(A.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(A.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function Nx(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function OE(){return self.SourceBuffer||self.WebKitSourceBuffer}function ME(){if(!Jn())return!1;const e=OE();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function X5(){if(!ME())return!1;const r=Jn();return typeof(r==null?void 0:r.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(Ua(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(Ua(e,"audio"))))}function Q5(){var r;const e=OE();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const Z5=100;class J5 extends Np{constructor(e,t,n){super(e,t,n,"stream-controller",Z.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,i=s?s.currentTime:null;if(i===null||!X(i)||(this.log(`Media seeked to ${i.toFixed(3)}`),!this.getBufferedFrag(i)))return;const a=this.getFwdBufferInfoAtPos(s,i,Z.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${i} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.LEVEL_LOADING,this.onLevelLoading,this),e.on(A.LEVEL_LOADED,this.onLevelLoaded,this),e.on(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(A.BUFFER_CREATED,this.onBufferCreated,this),e.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.LEVEL_LOADED,this.onLevelLoaded,this),e.off(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(A.BUFFER_CREATED,this.onBufferCreated,this),e.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:s}=this;if(this.stopLoad(),this.setInterval(Z5),this.level=-1,!this.startFragRequested){let i=s.startLevel;i===-1&&(s.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=s.firstAutoLevel),s.nextLoadLevel=i,this.level=s.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=H.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=H.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case H.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e==null?void 0:e[t],s=n==null?void 0:n.details;if(s&&(!s.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(s))break;this.state=H.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=H.IDLE;break}break}case H.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===H.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:s}=this;if(t===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[i]))return;const a=n[i],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const g={};this.altAudio===2&&(g.type="video"),this.hls.trigger(A.BUFFER_EOS,g),this.state=H.ENDED;return}if(!this.buffering)return;e.loadLevel!==i&&e.manualLevel===-1&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const c=a.details;if(!c||this.state===H.WAITING_LEVEL||this.waitForLive(a)){this.level=i,this.state=H.WAITING_LEVEL,this.startFragRequested=!1;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:o.end;let p=this.getNextFragment(f,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&rt(p)&&this.fragmentTracker.getState(p)!==ot.OK){var h;const y=((h=this.backtrackFragment)!=null?h:p).sn-c.startSN,b=c.fragments[y-1];b&&p.cc===b.cc&&(p=b,this.fragmentTracker.removeFragment(b))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,f)){if(!p.gap){const y=this.audioOnly&&!this.altAudio?Fe.AUDIO:Fe.VIDEO,b=(y===Fe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;b&&this.afterBufferFlushed(b,y,Z.MAIN)}p=this.getNextFragmentLoopLoading(p,c,o,Z.MAIN,d)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,a,f))}loadFragment(e,t,n){const s=this.fragmentTracker.getState(e);s===ot.NOT_LOADED||s===ot.PARTIAL?rt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Z.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<i.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case H.KEY_LOADING:case H.FRAG_LOADING:case H.FRAG_LOADING_WAITING_RETRY:case H.PARSING:case H.PARSED:this.state=H.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Ct(n,"playing",this.onMediaPlaying),Ct(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Ft(n,"playing",this.onMediaPlaying),Ft(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(A.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,s=!1;for(let i=0;i<t.levels.length;i++){const a=t.levels[i].audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,s=s||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&s&&!Q5(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==H.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=H.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:s,startFragRequested:i}=this,a=t.level,o=t.details,l=o.totalduration;if(!s){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const c=t.levelInfo,u=this.fragCurrent;u&&(this.state===H.FRAG_LOADING||this.state===H.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&this.abortCurrentFrag();let d=0;if(o.live||(n=c.details)!=null&&n.live){var f;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(c.details=o,this.levelLastLoaded=c,i||this.setStartPosition(o,d),this.hls.trigger(A.LEVEL_UPDATED,{details:o,level:a}),this.state===H.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=H.IDLE}i&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const s=this.hls.liveSyncPosition,i=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=i>=a-t.maxFragLookUpTolerance&&i<=o;if(s!==null&&n.duration>s&&(i<s||!l)){const u=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||i<o-u)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),n.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const d=fe.bufferInfo(n,s,0);if(!((c=d.buffered)!=null&&c.length)){n.currentTime=s;return}if(d.start<=i){n.currentTime=s;return}const{nextStart:p}=fe.bufferedInfo(d.buffered,i,0);p&&(n.currentTime=p)}else n.currentTime=s}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:s,payload:i}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=n.initSegment)==null?void 0:t.data,f=this._getAudioCodec(o),p=this.transmuxer=this.transmuxer||new lE(this.hls,Z.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=s?s.index:-1,g=h!==-1,y=new _p(n.level,n.sn,n.stats.chunkCount,i.byteLength,h,g),b=this.initPTS[n.cc];p.push(i,d,f,c,n,s,l.totalduration,u,y,b)}onAudioTrackSwitching(e,t){const n=this.hls,s=this.altAudio===2;if(dc(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),n.once(A.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(A.AUDIO_TRACK_SWITCHED,t)}),n.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(A.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=dc(t.url,this.hls);if(n){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let s,i,a=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(i=o,s=l,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:s}=t,i=n.type===Z.MAIN;if(i){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===H.PARSED&&(this.state=H.IDLE);return}const o=s?s.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),rt(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,s)}const a=this.media;a&&(!this._hasEnoughToStart&&fe.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=H.ERROR;return}switch(t.details){case z.FRAG_GAP:case z.FRAG_PARSING_ERROR:case z.FRAG_DECRYPT_ERROR:case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Z.MAIN,t);break;case z.LEVEL_LOAD_ERROR:case z.LEVEL_LOAD_TIMEOUT:case z.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===H.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Se.LEVEL&&(this.state=H.IDLE);break;case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case z.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case z.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=H.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Fe.AUDIO||!this.altAudio){const n=(t===Fe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,Z.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const s=this.timelineOffset;s&&n&&(n+=s);const i=this.getLevelDetails(),a=fe.getBuffered(e),o=a.length?a.start(0):0,l=o-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<c||this.loadingParts&&l<2*((i==null?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:s}=this,i=n==null?void 0:n.frag;if(!i||this.fragContextChanged(i))return;t.fragmentError=0,this.state=H.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=i.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),s.trigger(A.FRAG_LOADED,n),i.bitrateTest=!1}).catch(n=>{this.state===H.STOPPED||this.state===H.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:s,chunkMeta:i}=e,a=this.getCurrentContext(i);if(!a){this.resetWhenMissingContext(i);return}const{frag:o,part:l,level:c}=a,{video:u,text:d,id3:f,initSegment:p}=s,{details:h}=c,g=this.altAudio?void 0:s.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=H.PARSING,p){const y=p.tracks;if(y){const S=o.initSegment||o;if(this.unhandledEncryptionError(p,o))return;this._bufferInitSegment(c,y,S,i),n.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:t,tracks:y})}const b=p.initPTS,m=p.timescale,v=this.initPTS[o.cc];if(X(b)&&(!v||v.baseTime!==b||v.timescale!==m)){const S=p.trackId;this.initPTS[o.cc]={baseTime:b,timescale:m,trackId:S},n.trigger(A.INIT_PTS_FOUND,{frag:o,id:t,initPTS:b,timescale:m,trackId:S})}}if(u&&h){g&&u.type==="audiovideo"&&this.logMuxedErr(o);const y=h.fragments[o.sn-1-h.startSN],b=o.sn===h.startSN,m=!y||o.cc>y.cc;if(s.independent!==!1){const{startPTS:v,endPTS:S,startDTS:E,endDTS:C}=u;if(l)l.elementaryStreams[u.type]={startPTS:v,endPTS:S,startDTS:E,endDTS:C};else if(u.firstKeyFrame&&u.independent&&i.id===1&&!m&&(this.couldBacktrack=!0),u.dropped&&u.independent){const L=this.getMainFwdBufferInfo(),I=(L?L.end:this.getLoadPosition())+this.config.maxBufferHole,T=u.firstKeyFramePTS?u.firstKeyFramePTS:v;if(!b&&I<T-this.config.maxBufferHole&&!m){this.backtrack(o);return}else m&&(o.gap=!0);o.setElementaryStreamInfo(u.type,o.start,S,o.start,C,!0)}else b&&v-(h.appliedTimelineOffset||0)>wl&&(o.gap=!0);o.setElementaryStreamInfo(u.type,v,S,E,C),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,i,b||m)}else if(b||m)o.gap=!0;else{this.backtrack(o);return}}if(g){const{startPTS:y,endPTS:b,startDTS:m,endDTS:v}=g;l&&(l.elementaryStreams[Fe.AUDIO]={startPTS:y,endPTS:b,startDTS:m,endDTS:v}),o.setElementaryStreamInfo(Fe.AUDIO,y,b,m,v),this.bufferFragmentData(g,o,l,i)}if(h&&f!=null&&f.samples.length){const y={id:t,frag:o,details:h,samples:f.samples};n.trigger(A.FRAG_PARSING_METADATA,y)}if(h&&d){const y={id:t,frag:o,details:h,samples:d.samples};n.trigger(A.FRAG_PARSING_USERDATA,y)}}logMuxedErr(e){this.warn(`${rt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,s){if(this.state!==H.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:a,audiovideo:o}=t;if(i){const c=e.audioCodec;let u=gl(i.codec,c);u==="mp4a"&&(u="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const f=i.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),c&&c!==u&&this.log(`Swapping manifest audio codec "${c}" for "${u}"`),i.levelCodec=u,i.id=Z.MAIN,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${u||""}/${c||""}/${i.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=Z.MAIN;const c=a.codec;if((c==null?void 0:c.length)===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger(A.BUFFER_CODECS,t),!this.hls)return;l.forEach(c=>{const d=t[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(A.BUFFER_APPENDING,{type:c,data:d,frag:n,part:null,chunkMeta:s,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Z.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e==null?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=H.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(fe.isBuffered(e,n)?t=this.getAppendedFrag(n):fe.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,i=t.level;(!s||t.sn!==s.sn||s.level!==i)&&(this.fragPlaying=t,this.hls.trigger(A.FRAG_CHANGED,{frag:t}),(!s||s.level!==i)&&this.hls.trigger(A.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return X(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(X(t)){const n=this.getLevelDetails(),s=this.currentFrag||(n?Ps(null,n.fragments,t):null);if(s){const i=s.programDateTime;if(i!==null){const a=i+(t-s.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class eO extends fr{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const s=this.keyIdToKeyInfo[n].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=z.KEY_LOAD_ERROR,n,s,i){return new rn({type:re.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:s})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let s=0,i=t.length;s<i;s++){const a=t[s];if(e.cc<=a.cc&&(!rt(e)||!rt(a)||e.sn<a.sn)||!n&&s==i-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const l=vl(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const s=ta(this.config);if(s.length)return this.emeController.getKeySystemAccess(s)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,s;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,z.KEY_LOAD_ERROR,c))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,z.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=md(i);let l=this.keyIdToKeyInfo[o];if((n=l)!=null&&n.decryptdata.key)return i.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(s=l)!=null&&s.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(u=>{const{keyInfo:d}=u;return i.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${i.keyId?" keyId: "+Lt(i.keyId):""} URI: ${i.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,z.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var s;if(!e.decryptdata.keyId&&(s=t.initSegment)!=null&&s.data){const a=y4(t.initSegment.data);if(a.length){const o=a[0];o.some(l=>l!==0)&&(this.log(`Using keyId found in init segment ${Lt(o)}`),e.decryptdata.keyId=o,Es.setKeyIdForUri(e.decryptdata.uri,o))}}const i=this.emeController.loadKey(n);return(e.keyLoadPromise=i.then(a=>(e.mediaKeySessionContext=a,n))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=t),a})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,s=n.loader,i=new s(n);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,p,h,g)=>{const{frag:y,keyInfo:b}=h,m=md(b.decryptdata);if(!y.decryptdata||b!==this.keyIdToKeyInfo[m])return o(this.createKeyLoadError(y,z.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));b.decryptdata.key=y.decryptdata.key=new Uint8Array(f.data),y.keyLoader=null,b.loader=null,a({frag:y,keyInfo:b})},onError:(f,p,h,g)=>{this.resetLoader(p),o(this.createKeyLoadError(t,z.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),h,ke({url:l.url,data:void 0},f)))},onTimeout:(f,p,h)=>{this.resetLoader(p),o(this.createKeyLoadError(t,z.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),h))},onAbort:(f,p,h)=>{this.resetLoader(p),o(this.createKeyLoadError(t,z.INTERNAL_ABORTED,new Error("key loading aborted"),h))}};i.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:n,url:s}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null);const a=md(n.decryptdata)||s;delete this.keyIdToKeyInfo[a],i&&i.destroy()}}function md(r){if(r.keyFormat!==mt.FAIRPLAY){const e=r.keyId;if(e)return Lt(e)}return r.uri}function Ox(r){const{type:e}=r;switch(e){case Se.AUDIO_TRACK:return Z.AUDIO;case Se.SUBTITLE_TRACK:return Z.SUBTITLE;default:return Z.MAIN}}function gd(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class tO{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_LOADING,this.onLevelLoading,this),e.on(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_LOADING,this.onLevelLoading,this),e.off(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,s=t.loader,i=n||s,a=new i(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Se.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:s,pathwayId:i,url:a,deliveryDirectives:o,levelInfo:l}=t;this.load({id:n,level:s,pathwayId:i,responseType:"text",type:Se.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:n,groupId:s,url:i,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:s,level:null,responseType:"text",type:Se.AUDIO_TRACK,url:i,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:s,url:i,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:s,level:null,responseType:"text",type:Se.SUBTITLE_TRACK,url:i,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const n=this.loaders[Se.LEVEL];if(n){const s=n.context;s&&!t.levels.some(i=>i===s.levelOrTrack)&&(n.abort(),delete this.loaders[Se.LEVEL])}}load(e){var t;const n=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=this.hls.logger,u=s.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===Se.MANIFEST?i=n.manifestLoadPolicy.default:i=Me({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),X((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Se.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Se.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Se.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const f=Math.max(u*3,d*.8)*1e3;i=Me({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const a=i.errorRetry||i.timeoutRetry||{},o={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,f)=>{const p=this.getInternalLoader(d);this.resetInternalLoader(d.type);const h=c.data;u.parsing.start=performance.now(),Br.isMediaPlaylist(h)||d.type!==Se.MANIFEST?this.handleTrackOrLevelPlaylist(c,u,d,f||null,p):this.handleMasterPlaylist(c,u,d,f)},onError:(c,u,d,f)=>{this.handleNetworkError(u,d,!1,c,f)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};s.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,s){const i=this.hls,a=e.data,o=gd(e,n),l=Br.parseMasterPlaylist(a,o);if(l.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,s,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:f,startTimeOffset:p,variableList:h}=l;this.variableList=h,u.forEach(m=>{const{unknownCodecs:v}=m;if(v){const{preferManagedMediaSource:S}=this.hls.config;let{audioCodec:E,videoCodec:C}=m;for(let L=v.length;L--;){const I=v[L];Ba(I,"audio",S)?(m.audioCodec=E=E?`${E},${I}`:I,Ii.audio[E.substring(0,4)]=2,v.splice(L,1)):Ba(I,"video",S)&&(m.videoCodec=C=C?`${C},${I}`:I,Ii.video[C.substring(0,4)]=2,v.splice(L,1))}}});const{AUDIO:g=[],SUBTITLES:y,"CLOSED-CAPTIONS":b}=Br.parseMasterPlaylistMedia(a,o,l);g.length&&!g.some(v=>!v.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ke({}),bitrate:0,url:""})),i.trigger(A.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:y,captions:b,contentSteering:c,url:o,stats:t,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:p,variableList:h})}handleTrackOrLevelPlaylist(e,t,n,s,i){const a=this.hls,{id:o,level:l,type:c}=n,u=gd(e,n),d=X(l)?l:X(o)?o:0,f=Ox(n),p=Br.parseLevelPlaylist(e.data,u,d,f,0,this.variableList);if(c===Se.MANIFEST){const h={attrs:new Ke({}),bitrate:0,details:p,name:"",url:u};p.requestScheduled=t.loading.start+FS(p,0),a.trigger(A.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:u,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=p,this.handlePlaylistLoaded(p,e,t,n,s,i)}handleManifestParsingError(e,t,n,s,i){this.hls.trigger(A.ERROR,{type:re.NETWORK_ERROR,details:z.MANIFEST_PARSING_ERROR,fatal:t.type===Se.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:s,stats:i})}handleNetworkError(e,t,n=!1,s,i){let a=`A network ${n?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Se.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Se.AUDIO_TRACK||e.type===Se.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=z.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Se.MANIFEST:l=n?z.MANIFEST_LOAD_TIMEOUT:z.MANIFEST_LOAD_ERROR,c=!0;break;case Se.LEVEL:l=n?z.LEVEL_LOAD_TIMEOUT:z.LEVEL_LOAD_ERROR,c=!1;break;case Se.AUDIO_TRACK:l=n?z.AUDIO_TRACK_LOAD_TIMEOUT:z.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Se.SUBTITLE_TRACK:l=n?z.SUBTITLE_TRACK_LOAD_TIMEOUT:z.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:re.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:i};if(s){const f=(t==null?void 0:t.url)||e.url;d.response=ke({url:f,data:void 0},s)}this.hls.trigger(A.ERROR,d)}handlePlaylistLoaded(e,t,n,s,i,a){const o=this.hls,{type:l,level:c,levelOrTrack:u,id:d,groupId:f,deliveryDirectives:p}=s,h=gd(t,s),g=Ox(s);let y=typeof s.level=="number"&&g===Z.MAIN?c:void 0;const b=e.playlistParsingError;if(b){if(this.hls.logger.warn(`${b} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(A.ERROR,{type:re.NETWORK_ERROR,details:z.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:b,reason:b.message,response:t,context:s,level:y,parent:g,networkDetails:i,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const m=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(A.ERROR,{type:re.NETWORK_ERROR,details:z.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:s,level:y,parent:g,networkDetails:i,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Se.MANIFEST:case Se.LEVEL:if(y){if(!u)y=0;else if(u!==o.levels[y]){const m=o.levels.indexOf(u);m>-1&&(y=m)}}o.trigger(A.LEVEL_LOADED,{details:e,levelInfo:u||o.levels[0],level:y||0,id:d||0,stats:n,networkDetails:i,deliveryDirectives:p,withoutMultiVariant:l===Se.MANIFEST});break;case Se.AUDIO_TRACK:o.trigger(A.AUDIO_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:f||"",stats:n,networkDetails:i,deliveryDirectives:p});break;case Se.SUBTITLE_TRACK:o.trigger(A.SUBTITLE_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:f||"",stats:n,networkDetails:i,deliveryDirectives:p});break}}}class an{static get version(){return Va}static isMSESupported(){return ME()}static isSupported(){return X5()}static getMediaSource(){return Jn()}static get Events(){return A}static get MetadataSchema(){return Xt}static get ErrorTypes(){return re}static get ErrorDetails(){return z}static get DefaultConfig(){return an.defaultConfig?an.defaultConfig:j5}static set DefaultConfig(e){an.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Op,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=o4(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=B5(an.DefaultConfig,e,t);this.userConfig=e,n.progressive&&U5(n,t);const{abrController:s,bufferController:i,capLevelController:a,errorController:o,fpsController:l}=n,c=new o(this),u=this.abrController=new s(this),d=new rP(this),f=n.interstitialsController,p=f?this.interstitialsController=new f(this,an):null,h=this.bufferController=new i(this,d),g=this.capLevelController=new a(this),y=new l(this),b=new tO(this),m=n.contentSteeringController,v=m?new m(this):null,S=this.levelController=new Y5(this,v),E=new W5(this),C=new eO(this.config,this.logger),L=this.streamController=new J5(this,d,C),I=this.gapController=new H5(this,d);g.setStreamController(L),y.setStreamController(L);const T=[b,S,L];p&&T.splice(1,0,p),v&&T.splice(1,0,v),this.networkControllers=T;const w=[u,h,I,g,y,E,d];this.audioTrackController=this.createController(n.audioTrackController,T);const R=n.audioStreamController;R&&T.push(this.audioStreamController=new R(this,d,C)),this.subtitleTrackController=this.createController(n.subtitleTrackController,T);const _=n.subtitleStreamController;_&&T.push(this.subtititleStreamController=new _(this,d,C)),this.createController(n.timelineController,w),C.emeController=this.emeController=this.createController(n.emeController,w),this.cmcdController=this.createController(n.cmcdController,w),this.latencyController=this.createController(q5,w),this.coreComponents=w,T.push(c);const k=c.onErrorOut;typeof k=="function"&&this.on(A.ERROR,k,c),this.on(A.MANIFEST_LOADED,b.onManifestLoaded,b)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,s){this._emitter.off(e,t,n,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const s=e===A.ERROR;this.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,fatal:s,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(A.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const i=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(A.ERROR,{type:re.OTHER_ERROR,details:z.ATTACH_MEDIA_ERROR,fatal:!0,error:i});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,s=t?e:{media:n};this._media=n,this.trigger(A.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(A.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(A.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,s=this._url=Tp.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&n&&(n!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(A.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Z.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Z.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Z.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=HN()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){B4(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let s=0;s<n;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,n)for(let i=s;i--;){const a=e[i].attrs["HDCP-LEVEL"];if(a&&a<=n)return i}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=ES(t);return bS(e,n,navigator.mediaCapabilities)}}an.defaultConfig=void 0;/*!
 * artplayer.js v5.3.0
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2025 Harvey Zack
 * Released under the MIT License.
 */(function(r,e,t,n,s,i,a,o){var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},c=typeof l[n]=="function"&&l[n],u=c.i||{},d=c.cache||{},f=typeof fs<"u"&&typeof fs.require=="function"&&fs.require.bind(fs);function p(y,b){if(!d[y]){if(!r[y]){if(s[y])return s[y];var m=typeof l[n]=="function"&&l[n];if(!b&&m)return m(y,!0);if(c)return c(y,!0);if(f&&typeof y=="string")return f(y);var v=Error("Cannot find module '"+y+"'");throw v.code="MODULE_NOT_FOUND",v}E.resolve=function(C){var L=r[y][1][C];return L??C},E.cache={};var S=d[y]=new p.Module(y);r[y][0].call(S.exports,E,S,S.exports,l)}return d[y].exports;function E(C){var L=E.resolve(C);return L===!1?{}:p(L)}}p.isParcelRequire=!0,p.Module=function(y){this.id=y,this.bundle=p,this.require=f,this.exports={}},p.modules=r,p.cache=d,p.parent=c,p.distDir=void 0,p.publicUrl=void 0,p.devServer=void 0,p.i=u,p.register=function(y,b){r[y]=[function(m,v){v.exports=b},{}]},Object.defineProperty(p,"root",{get:function(){return l[n]}}),l[n]=p;for(var h=0;h<e.length;h++)p(e[h]);{var g=p(t);typeof jE=="object"&&typeof fs<"u"?fs.exports=g:typeof define=="function"&&define.amd&&define(function(){return g})}})({esqvp:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("bundle-text:./style/index.less"),a=s.interopDefault(i),o=r("option-validator"),l=s.interopDefault(o),c=r("../package.json"),u=r("./config"),d=s.interopDefault(u),f=r("./contextmenu"),p=s.interopDefault(f),h=r("./control"),g=s.interopDefault(h),y=r("./events"),b=s.interopDefault(y),m=r("./hotkey"),v=s.interopDefault(m),S=r("./i18n"),E=s.interopDefault(S),C=r("./icons"),L=s.interopDefault(C),I=r("./info"),T=s.interopDefault(I),w=r("./layer"),R=s.interopDefault(w),_=r("./loading"),k=s.interopDefault(_),N=r("./mask"),M=s.interopDefault(N),O=r("./notice"),j=s.interopDefault(O),P=r("./player"),F=s.interopDefault(P),B=r("./plugins"),$=s.interopDefault(B),G=r("./scheme"),Y=s.interopDefault(G),ee=r("./setting"),te=s.interopDefault(ee),se=r("./storage"),we=s.interopDefault(se),le=r("./subtitle"),he=s.interopDefault(le),De=r("./template"),Qe=s.interopDefault(De),$e=r("./utils"),ie=r("./utils/emitter"),be=s.interopDefault(ie);let ue=0,Q=[];class K extends be.default{constructor(Re,xe){if(super(),!$e.isBrowser)throw Error("Artplayer can only be used in the browser environment");this.id=++ue;let ce=$e.mergeDeep(K.option,Re);if(ce.container=Re.container,this.option=(0,l.default)(ce,Y.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new Qe.default(this),this.events=new b.default(this),this.storage=new we.default(this),this.icons=new L.default(this),this.i18n=new E.default(this),this.notice=new j.default(this),this.player=new F.default(this),this.layers=new R.default(this),this.controls=new g.default(this),this.contextmenu=new p.default(this),this.subtitle=new he.default(this),this.info=new T.default(this),this.loading=new k.default(this),this.hotkey=new v.default(this),this.mask=new M.default(this),this.setting=new te.default(this),this.plugins=new $.default(this),typeof xe=="function"&&this.on("ready",()=>xe.call(this,this)),K.DEBUG){let Oe=Ae=>console.log(`[ART.${this.id}] -> ${Ae}`);Oe(`Version@${K.version}`);for(let Ae=0;Ae<d.default.events.length;Ae++)this.on(`video:${d.default.events[Ae]}`,At=>Oe(`Event@${At.type}`))}Q.push(this)}static get instances(){return Q}static get version(){return c.version}static get config(){return d.default}static get utils(){return $e}static get scheme(){return Y.default}static get Emitter(){return be.default}static get validator(){return l.default}static get kindOf(){return l.default.kindOf}static get html(){return Qe.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,gesture:!0,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:Re=>Re},moreVideoAttr:{controls:!1,preload:$e.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator==null?void 0:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(Re=!0){K.REMOVE_SRC_WHEN_DESTROY&&this.video.removeAttribute("src"),this.events.destroy(),this.template.destroy(Re),Q.splice(Q.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}t.default=K,K.STYLE=a.default,K.DEBUG=!1,K.CONTEXTMENU=!0,K.NOTICE_TIME=2e3,K.SETTING_WIDTH=250,K.SETTING_ITEM_WIDTH=200,K.SETTING_ITEM_HEIGHT=35,K.RESIZE_TIME=200,K.SCROLL_TIME=200,K.SCROLL_GAP=50,K.AUTO_PLAYBACK_MAX=10,K.AUTO_PLAYBACK_MIN=5,K.AUTO_PLAYBACK_TIMEOUT=3e3,K.RECONNECT_TIME_MAX=5,K.RECONNECT_SLEEP_TIME=1e3,K.CONTROL_HIDE_TIME=3e3,K.DBCLICK_TIME=300,K.DBCLICK_FULLSCREEN=!0,K.MOBILE_DBCLICK_PLAY=!0,K.MOBILE_CLICK_PLAY=!1,K.AUTO_ORIENTATION_TIME=200,K.INFO_LOOP_TIME=1e3,K.FAST_FORWARD_VALUE=3,K.FAST_FORWARD_TIME=1e3,K.TOUCH_MOVE_RATIO=.5,K.VOLUME_STEP=.1,K.SEEK_STEP=5,K.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],K.ASPECT_RATIO=["default","4:3","16:9"],K.FLIP=["normal","horizontal","vertical"],K.FULLSCREEN_WEB_IN_BODY=!1,K.LOG_VERSION=!0,K.USE_RAF=!1,K.REMOVE_SRC_WHEN_DESTROY=!0,$e.isBrowser&&(window.Artplayer=K,$e.setStyleText("artplayer-style",a.default),setTimeout(()=>{K.LOG_VERSION&&console.log(`%c ArtPlayer %c ${K.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"2wh8D","option-validator":"g7VGh","../package.json":"lh3R5","./config":"eJfh8","./contextmenu":"9zso8","./control":"dp1yk","./events":"jmVSD","./hotkey":"dswts","./i18n":"d9ktO","./icons":"fFHY0","./info":"kZ0F8","./layer":"j9lbi","./loading":"bMjWd","./mask":"k1nkQ","./notice":"fPVaU","./player":"uR0Sw","./plugins":"cjxJL","./scheme":"biLjm","./setting":"bwLGT","./storage":"kwqbK","./subtitle":"k5613","./template":"fwOA1","./utils":"aBlEo","./utils/emitter":"4NM7P","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2wh8D":[function(r,e,t,n){e.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;width:100%;height:100%;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);width:100%;bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;width:100%;height:100%;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{width:100%;height:50%;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;width:100%;height:100%;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;width:100%;height:auto;padding:var(--art-padding);pointer-events:none;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-dragging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{width:15px;height:15px;fill:var(--art-theme)}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],g7VGh:[function(r,e,t,n){e.exports=function(){function s(d){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}var i=Object.prototype.toString,a=function(d){if(d===void 0)return"undefined";if(d===null)return"null";var f=s(d);if(f==="boolean")return"boolean";if(f==="string")return"string";if(f==="number")return"number";if(f==="symbol")return"symbol";if(f==="function")return o(d)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(d):d instanceof Array)return"array";if(d.constructor&&typeof d.constructor.isBuffer=="function"&&d.constructor.isBuffer(d))return"buffer";if(function(p){try{if(typeof p.length=="number"&&typeof p.callee=="function")return!0}catch(h){if(h.message.indexOf("callee")!==-1)return!0}return!1}(d))return"arguments";if(d instanceof Date||typeof d.toDateString=="function"&&typeof d.getDate=="function"&&typeof d.setDate=="function")return"date";if(d instanceof Error||typeof d.message=="string"&&d.constructor&&typeof d.constructor.stackTraceLimit=="number")return"error";if(d instanceof RegExp||typeof d.flags=="string"&&typeof d.ignoreCase=="boolean"&&typeof d.multiline=="boolean"&&typeof d.global=="boolean")return"regexp";switch(o(d)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof d.throw=="function"&&typeof d.return=="function"&&typeof d.next=="function")return"generator";switch(f=i.call(d)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return f.slice(8,-1).toLowerCase().replace(/\s/g,"")};function o(d){return d.constructor?d.constructor.name:null}function l(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return c(d,f,p),u(d,f,p),function(h,g,y){var b=a(g),m=a(h);if(b==="object"){if(m!=="object")throw Error("[Type Error]: '".concat(y.join("."),"' require 'object' type, but got '").concat(m,"'"));Object.keys(g).forEach(function(v){var S=h[v],E=g[v],C=y.slice();C.push(v),c(S,E,C),u(S,E,C),l(S,E,C)})}if(b==="array"){if(m!=="array")throw Error("[Type Error]: '".concat(y.join("."),"' require 'array' type, but got '").concat(m,"'"));h.forEach(function(v,S){var E=h[S],C=g[S]||g[0],L=y.slice();L.push(S),c(E,C,L),u(E,C,L),l(E,C,L)})}}(d,f,p),d}function c(d,f,p){if(a(f)==="string"){var h=a(d);if(f[0]==="?"&&(f=f.slice(1)+"|undefined"),!(-1<f.indexOf("|")?f.split("|").map(function(g){return g.toLowerCase().trim()}).filter(Boolean).some(function(g){return h===g}):f.toLowerCase().trim()===h))throw Error("[Type Error]: '".concat(p.join("."),"' require '").concat(f,"' type, but got '").concat(h,"'"))}}function u(d,f,p){if(a(f)==="function"){var h=f(d,a(d),p);if(h!==!0){var g=a(h);throw g==="string"?Error(h):g==="error"?h:Error("[Validator Error]: The scheme for '".concat(p.join("."),"' validator require return true, but got '").concat(h,"'"))}}}return l.kindOf=a,l}()},{}],lh3R5:[function(r,e,t,n){e.exports=JSON.parse('{"name":"artplayer","version":"5.3.0","description":"ArtPlayer.js is a modern and full featured HTML5 video player","author":"Harvey Zack <laozhaochaguan@gmail.com>","license":"MIT","homepage":"https://artplayer.org","repository":{"type":"git","url":"git+https://github.com/zhw2590582/ArtPlayer.git"},"bugs":{"url":"https://github.com/zhw2590582/ArtPlayer/issues"},"keywords":["html5","video","player"],"exports":{".":{"types":"./types/artplayer.d.ts","import":"./dist/artplayer.mjs","require":"./dist/artplayer.js"},"./legacy":{"types":"./types/artplayer.d.ts","import":"./dist/artplayer.legacy.js","require":"./dist/artplayer.legacy.js"},"./i18n/*":{"types":"./types/i18n.d.ts","import":"./dist/i18n/*.mjs","require":"./dist/i18n/*.js"}},"main":"./dist/artplayer.js","module":"./dist/artplayer.mjs","types":"./types/artplayer.d.ts","typesVersions":{"*":{"i18n/*":["types/i18n.d.ts"],"legacy":["types/artplayer.d.ts"]}},"legacy":"./dist/artplayer.legacy.js","browserslist":"last 1 Chrome version","dependencies":{"option-validator":"^2.0.6"}}')},{}],eJfh8:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default={properties:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],loqXi:[function(r,e,t,n){t.interopDefault=function(s){return s&&s.__esModule?s:{default:s}},t.defineInteropFlag=function(s){Object.defineProperty(s,"__esModule",{value:!0})},t.exportAll=function(s,i){return Object.keys(s).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:function(){return s[a]}})}),i},t.export=function(s,i,a){Object.defineProperty(s,i,{enumerable:!0,get:a})}},{}],"9zso8":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("../utils"),a=r("../utils/component"),o=s.interopDefault(a),l=r("./aspectRatio"),c=s.interopDefault(l),u=r("./close"),d=s.interopDefault(u),f=r("./flip"),p=s.interopDefault(f),h=r("./info"),g=s.interopDefault(h),y=r("./playbackRate"),b=s.interopDefault(y),m=r("./version"),v=s.interopDefault(m);class S extends o.default{constructor(C){super(C),this.name="contextmenu",this.$parent=C.template.$contextmenu,i.isMobile||this.init()}init(){let{option:C,proxy:L,template:{$player:I,$contextmenu:T}}=this.art;C.playbackRate&&this.add((0,b.default)({name:"playbackRate",index:10})),C.aspectRatio&&this.add((0,c.default)({name:"aspectRatio",index:20})),C.flip&&this.add((0,p.default)({name:"flip",index:30})),this.add((0,g.default)({name:"info",index:40})),this.add((0,v.default)({name:"version",index:50})),this.add((0,d.default)({name:"close",index:60}));for(let w=0;w<C.contextmenu.length;w++)this.add(C.contextmenu[w]);L(I,"contextmenu",w=>{if(!this.art.constructor.CONTEXTMENU)return;w.preventDefault(),this.show=!0;let R=w.clientX,_=w.clientY,{height:k,width:N,left:M,top:O}=(0,i.getRect)(I),{height:j,width:P}=(0,i.getRect)(T),F=R-M,B=_-O;R+P>M+N&&(F=N-P),_+j>O+k&&(B=k-j),(0,i.setStyles)(T,{top:`${B}px`,left:`${F}px`})}),L(I,"click",w=>{(0,i.includeFromEvent)(w,T)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}t.default=S},{"../utils":"aBlEo","../utils/component":"idCEj","./aspectRatio":"6XHP2","./close":"eF6AX","./flip":"7Wg1P","./info":"fjRnU","./playbackRate":"hm1DY","./version":"aJBeL","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aBlEo:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./compatibility");s.exportAll(i,t);var a=r("./dom");s.exportAll(a,t);var o=r("./error");s.exportAll(o,t);var l=r("./file");s.exportAll(l,t);var c=r("./format");s.exportAll(c,t);var u=r("./property");s.exportAll(u,t);var d=r("./subtitle");s.exportAll(d,t);var f=r("./time");s.exportAll(f,t)},{"./compatibility":"jg0yq","./dom":"eANXw","./error":"4FwTI","./file":"i2JbS","./format":"dy9GH","./property":"jY49c","./subtitle":"ke7ox","./time":"f7gsx","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jg0yq:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"userAgent",()=>i),s.export(t,"isSafari",()=>a),s.export(t,"isIOS",()=>o),s.export(t,"isIOS13",()=>l),s.export(t,"isMobile",()=>c),s.export(t,"isBrowser",()=>u);let i=(globalThis==null?void 0:globalThis.CUSTOM_USER_AGENT)??(typeof navigator<"u"?navigator.userAgent:""),a=/^(?:(?!chrome|android).)*safari/i.test(i),o=/iPad|iPhone|iPod/i.test(i)&&!window.MSStream,l=o||i.includes("Macintosh")&&navigator.maxTouchPoints>=1,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(i)||l,u=typeof window<"u"&&typeof document<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eANXw:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"query",()=>a),s.export(t,"queryAll",()=>o),s.export(t,"addClass",()=>l),s.export(t,"removeClass",()=>c),s.export(t,"hasClass",()=>u),s.export(t,"append",()=>d),s.export(t,"remove",()=>f),s.export(t,"setStyle",()=>p),s.export(t,"setStyles",()=>h),s.export(t,"getStyle",()=>g),s.export(t,"siblings",()=>y),s.export(t,"inverseClass",()=>b),s.export(t,"tooltip",()=>m),s.export(t,"isInViewport",()=>v),s.export(t,"includeFromEvent",()=>S),s.export(t,"replaceElement",()=>E),s.export(t,"createElement",()=>C),s.export(t,"getIcon",()=>L),s.export(t,"setStyleText",()=>I),s.export(t,"supportsFlex",()=>T),s.export(t,"getRect",()=>w),s.export(t,"loadImg",()=>R),s.export(t,"getComposedPath",()=>_);var i=r("./compatibility");function a(k,N=document){return N.querySelector(k)}function o(k,N=document){return Array.from(N.querySelectorAll(k))}function l(k,N){return k.classList.add(N)}function c(k,N){return k.classList.remove(N)}function u(k,N){return k.classList.contains(N)}function d(k,N){return N instanceof Element?k.appendChild(N):k.insertAdjacentHTML("beforeend",String(N)),k.lastElementChild||k.lastChild}function f(k){return k.parentNode.removeChild(k)}function p(k,N,M){return k.style[N]=M,k}function h(k,N){for(let M in N)p(k,M,N[M]);return k}function g(k,N,M=!0){let O=window.getComputedStyle(k,null).getPropertyValue(N);return M?Number.parseFloat(O):O}function y(k){return Array.from(k.parentElement.children).filter(N=>N!==k)}function b(k,N){y(k).forEach(M=>c(M,N)),l(k,N)}function m(k,N,M="top"){i.isMobile||(k.setAttribute("aria-label",N),l(k,"hint--rounded"),l(k,`hint--${M}`))}function v(k,N=0){let M=k.getBoundingClientRect(),O=window.innerHeight||document.documentElement.clientHeight,j=window.innerWidth||document.documentElement.clientWidth,P=M.top-N<=O&&M.top+M.height+N>=0,F=M.left-N<=j+N&&M.left+M.width+N>=0;return P&&F}function S(k,N){return _(k).includes(N)}function E(k,N){return N.parentNode.replaceChild(k,N),k}function C(k){return document.createElement(k)}function L(k="",N=""){let M=C("i");return l(M,"art-icon"),l(M,`art-icon-${k}`),d(M,N),M}function I(k,N){let M=document.getElementById(k);M||((M=document.createElement("style")).id=k,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.head.appendChild(M)}):(document.head||document.documentElement).appendChild(M)),M.textContent=N}function T(){let k=document.createElement("div");return k.style.display="flex",k.style.display==="flex"}function w(k){return k.getBoundingClientRect()}function R(k,N){return new Promise((M,O)=>{let j=new Image;j.onload=function(){if(N&&N!==1){let P=document.createElement("canvas"),F=P.getContext("2d");P.width=j.width*N,P.height=j.height*N,F.drawImage(j,0,0,P.width,P.height),P.toBlob(B=>{let $=URL.createObjectURL(B),G=new Image;G.onload=function(){M(G)},G.onerror=function(){URL.revokeObjectURL($),O(Error(`Image load failed: ${k}`))},G.src=$})}else M(j)},j.onerror=function(){O(Error(`Image load failed: ${k}`))},j.src=k})}function _(k){if(k.composedPath)return k.composedPath();let N=[],M=k.target;for(;M;)N.push(M),M=M.parentNode;return N.includes(window)||window===void 0||N.push(window),N}},{"./compatibility":"jg0yq","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4FwTI":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"ArtPlayerError",()=>i),s.export(t,"errorHandle",()=>a);class i extends Error{constructor(l,c){super(l),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c||this.constructor),this.name="ArtPlayerError"}}function a(o,l){if(!o)throw new i(l);return o}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],i2JbS:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a,o){let l=document.createElement("a");l.style.display="none",l.href=a,l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l)}s.defineInteropFlag(t),s.export(t,"getExt",()=>function a(o){return o.includes("?")?a(o.split("?")[0]):o.includes("#")?a(o.split("#")[0]):o.trim().toLowerCase().split(".").pop()}),s.export(t,"download",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dy9GH:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(u,d,f){return Math.max(Math.min(u,Math.max(d,f)),Math.min(d,f))}function a(u){return u.charAt(0).toUpperCase()+u.slice(1)}function o(u){if(!u)return"00:00";let d=Math.floor(u/3600),f=Math.floor((u-3600*d)/60),p=Math.floor(u-3600*d-60*f);return(d>0?[d,f,p]:[f,p]).map(h=>h<10?`0${h}`:String(h)).join(":")}function l(u){return u.replace(/[&<>'"]/g,d=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[d]||d)}function c(u){let d={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},f=RegExp(`(${Object.keys(d).join("|")})`,"g");return u.replace(f,p=>d[p]||p)}s.defineInteropFlag(t),s.export(t,"clamp",()=>i),s.export(t,"capitalize",()=>a),s.export(t,"secondToTime",()=>o),s.export(t,"escape",()=>l),s.export(t,"unescape",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jY49c:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"def",()=>i),s.export(t,"has",()=>o),s.export(t,"get",()=>l),s.export(t,"mergeDeep",()=>function c(...u){let d=f=>f&&typeof f=="object"&&!Array.isArray(f);return u.reduce((f,p)=>(Object.keys(p).forEach(h=>{let g=f[h],y=p[h];Array.isArray(g)&&Array.isArray(y)?f[h]=g.concat(...y):d(g)&&d(y)?f[h]=c(g,y):f[h]=y}),f),{})});let i=Object.defineProperty,{hasOwnProperty:a}=Object.prototype;function o(c,u){return a.call(c,u)}function l(c,u){return Object.getOwnPropertyDescriptor(c,u)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ke7ox:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(l){return`WEBVTT \r
\r
`.concat(l.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(c,u,d)=>{let f=d.slice(0,3);return d.length===1&&(f=`${d}00`),d.length===2&&(f=`${d}0`),`${u},${f}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/\{[\s\S]*?\}/g,"").concat(`\r
\r
`))}function a(l){return URL.createObjectURL(new Blob([l],{type:"text/vtt"}))}function o(l){let c=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function u(d=""){return d.split(/[:.]/).map((f,p,h)=>{if(p===h.length-1){if(f.length===1)return`.${f}00`;if(f.length===2)return`.${f}0`}else if(f.length===1)return(p===0?"0":":0")+f;return p===0?f:p===h.length-1?`.${f}`:`:${f}`}).join("")}return`WEBVTT ${l.split(/\r?\n/).map(d=>{let f=d.match(c);return f?{start:u(f[1].trim()),end:u(f[2].trim()),text:f[5].replace(/\{[\s\S]*?\}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(p=>p.trim()).join(`
`)}:null}).filter(d=>d).map((d,f)=>d?`${f+1} ${d.start} --> ${d.end} ${d.text}`:"").filter(d=>d.trim()).join(`

`)}`}s.defineInteropFlag(t),s.export(t,"srtToVtt",()=>i),s.export(t,"vttToBlob",()=>a),s.export(t,"assToVtt",()=>o)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f7gsx:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(l=0){return new Promise(c=>setTimeout(c,l))}function a(l,c){let u;return function(...d){let f=()=>(u=null,l.apply(this,d));clearTimeout(u),u=setTimeout(f,c)}}function o(l,c){let u=!1;return function(...d){u||(l.apply(this,d),u=!0,setTimeout(()=>{u=!1},c))}}s.defineInteropFlag(t),s.export(t,"sleep",()=>i),s.export(t,"debounce",()=>a),s.export(t,"throttle",()=>o)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],idCEj:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("option-validator"),a=s.interopDefault(i),o=r("../scheme"),l=r("./dom"),c=r("./error");t.default=class{constructor(u){this.id=0,this.art=u,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,l.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(u){let{$player:d}=this.art.template,f=`art-${this.name}-show`;u?(0,l.addClass)(d,f):(0,l.removeClass)(d,f),this.art.emit(this.name,u)}toggle(){this.show=!this.show}add(u){let d=typeof u=="function"?u(this.art):u;if(d.html=d.html||"",(0,a.default)(d,o.ComponentOption),!this.$parent||!this.name||d.disable)return;let f=d.name||`${this.name}${this.id}`,p=this.cache.get(f);(0,c.errorHandle)(!p,`Can't add an existing [${f}] to the [${this.name}]`),this.id+=1;let h=(0,l.createElement)("div");(0,l.addClass)(h,`art-${this.name}`),(0,l.addClass)(h,`art-${this.name}-${f}`);let g=Array.from(this.$parent.children);h.dataset.index=d.index||this.id;let y=g.find(m=>Number(m.dataset.index)>=Number(h.dataset.index));y?y.insertAdjacentElement("beforebegin",h):(0,l.append)(this.$parent,h),d.html&&(0,l.append)(h,d.html),d.style&&(0,l.setStyles)(h,d.style),d.tooltip&&(0,l.tooltip)(h,d.tooltip);let b=[];if(d.click){let m=this.art.events.proxy(h,"click",v=>{v.preventDefault(),d.click.call(this.art,this,v)});b.push(m)}return d.selector&&["left","right"].includes(d.position)&&this.selector(d,h,b),this[f]=h,this.cache.set(f,{$ref:h,events:b,option:d}),d.mounted&&d.mounted.call(this.art,h),h}remove(u){let d=this.cache.get(u);(0,c.errorHandle)(d,`Can't find [${u}] from the [${this.name}]`),d.option.beforeUnmount&&d.option.beforeUnmount.call(this.art,d.$ref);for(let f=0;f<d.events.length;f++)this.art.events.remove(d.events[f]);this.cache.delete(u),delete this[u],(0,l.remove)(d.$ref)}update(u){let d=this.cache.get(u.name);return d&&(u=Object.assign(d.option,u),this.remove(u.name)),this.add(u)}}},{"option-validator":"g7VGh","../scheme":"biLjm","./dom":"eANXw","./error":"4FwTI","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],biLjm:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"ComponentOption",()=>p);var i=r("../utils");let a="array",o="boolean",l="string",c="number",u="object",d="function";function f(h,g,y){return(0,i.errorHandle)(g===l||g===c||h instanceof Element,`${y.join(".")} require '${l}' or 'Element' type`)}let p={html:f,disable:`?${o}`,name:`?${l}`,index:`?${c}`,style:`?${u}`,click:`?${d}`,mounted:`?${d}`,tooltip:`?${l}|${c}`,width:`?${c}`,selector:`?${a}`,onSelect:`?${d}`,switch:`?${o}`,onSwitch:`?${d}`,range:`?${a}`,onRange:`?${d}`,onChange:`?${d}`};t.default={id:l,container:f,url:l,poster:l,type:l,theme:l,lang:l,volume:c,isLive:o,muted:o,autoplay:o,autoSize:o,autoMini:o,loop:o,flip:o,playbackRate:o,aspectRatio:o,screenshot:o,setting:o,hotkey:o,pip:o,mutex:o,backdrop:o,fullscreen:o,fullscreenWeb:o,subtitleOffset:o,miniProgressBar:o,useSSR:o,playsInline:o,lock:o,gesture:o,fastForward:o,autoPlayback:o,autoOrientation:o,airplay:o,proxy:`?${d}`,plugins:[d],layers:[p],contextmenu:[p],settings:[p],controls:[{...p,position:(h,g,y)=>{let b=["top","left","right"];return(0,i.errorHandle)(b.includes(h),`${y.join(".")} only accept ${b.toString()} as parameters`)}}],quality:[{default:`?${o}`,html:l,url:l}],highlight:[{time:c,text:l}],thumbnails:{url:l,number:c,column:c,width:c,height:c,scale:c},subtitle:{url:l,name:l,type:l,style:u,escape:o,encoding:l,onVttLoad:d},moreVideoAttr:u,i18n:u,icons:u,cssVar:u,customType:u}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6XHP2":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>{let{i18n:c,constructor:{ASPECT_RATIO:u}}=l,d=u.map(f=>`<span data-value="${f}">${f==="default"?c.get("Default"):f}</span>`).join("");return{...o,html:`${c.get("Aspect Ratio")}: ${d}`,click:(f,p)=>{let{value:h}=p.target.dataset;h&&(l.aspectRatio=h,f.show=!1)},mounted:f=>{let p=(0,i.query)('[data-value="default"]',f);p&&(0,i.inverseClass)(p,"art-current"),l.on("aspectRatio",h=>{let g=(0,i.queryAll)("span",f).find(y=>y.dataset.value===h);g&&(0,i.inverseClass)(g,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eF6AX:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){return o=>({...a,html:o.i18n.get("Close"),click:l=>{l.show=!1}})}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7Wg1P":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>{let{i18n:c,constructor:{FLIP:u}}=l,d=u.map(f=>`<span data-value="${f}">${c.get((0,i.capitalize)(f))}</span>`).join("");return{...o,html:`${c.get("Video Flip")}: ${d}`,click:(f,p)=>{let{value:h}=p.target.dataset;h&&(l.flip=h.toLowerCase(),f.show=!1)},mounted:f=>{let p=(0,i.query)('[data-value="normal"]',f);p&&(0,i.inverseClass)(p,"art-current"),l.on("flip",h=>{let g=(0,i.queryAll)("span",f).find(y=>y.dataset.value===h);g&&(0,i.inverseClass)(g,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fjRnU:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){return o=>({...a,html:o.i18n.get("Video Info"),click:l=>{o.info.show=!0,l.show=!1}})}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],hm1DY:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>{let{i18n:c,constructor:{PLAYBACK_RATE:u}}=l,d=u.map(f=>`<span data-value="${f}">${f===1?c.get("Normal"):f.toFixed(1)}</span>`).join("");return{...o,html:`${c.get("Play Speed")}: ${d}`,click:(f,p)=>{let{value:h}=p.target.dataset;h&&(l.playbackRate=Number(h),f.show=!1)},mounted:f=>{let p=(0,i.query)('[data-value="1"]',f);p&&(0,i.inverseClass)(p,"art-current"),l.on("video:ratechange",()=>{let h=(0,i.queryAll)("span",f).find(g=>Number(g.dataset.value)===l.playbackRate);h&&(0,i.inverseClass)(h,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aJBeL:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>function(a){return{...a,html:`<a href="https://artplayer.org" target="_blank">ArtPlayer ${i.version}</a>`}});var i=r("../../package.json")},{"../../package.json":"lh3R5","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dp1yk:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("../utils"),a=r("../utils/component"),o=s.interopDefault(a),l=r("./airplay"),c=s.interopDefault(l),u=r("./fullscreen"),d=s.interopDefault(u),f=r("./fullscreenWeb"),p=s.interopDefault(f),h=r("./pip"),g=s.interopDefault(h),y=r("./playAndPause"),b=s.interopDefault(y),m=r("./progress"),v=s.interopDefault(m),S=r("./screenshot"),E=s.interopDefault(S),C=r("./setting"),L=s.interopDefault(C),I=r("./time"),T=s.interopDefault(I),w=r("./volume"),R=s.interopDefault(w);class _ extends o.default{constructor(N){super(N),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:M}=N,{$player:O,$bottom:j}=this.art.template;N.on("mousemove",()=>{i.isMobile||(this.show=!0)}),N.on("click",()=>{i.isMobile?this.toggle():this.show=!0}),N.on("document:mousemove",P=>{this.isHover=(0,i.includeFromEvent)(P,j)}),N.on("video:timeupdate",()=>{!N.setting.show&&!this.isHover&&!N.isInput&&N.playing&&this.show&&Date.now()-this.timer>=M.CONTROL_HIDE_TIME&&(this.show=!1)}),N.on("control",P=>{P?((0,i.removeClass)(O,"art-hide-cursor"),(0,i.addClass)(O,"art-hover"),this.timer=Date.now()):((0,i.addClass)(O,"art-hide-cursor"),(0,i.removeClass)(O,"art-hover"))}),this.init()}init(){let{option:N}=this.art;N.isLive||this.add((0,v.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,b.default)({name:"playAndPause",position:"left",index:10})),this.add((0,R.default)({name:"volume",position:"left",index:20})),N.isLive||this.add((0,T.default)({name:"time",position:"left",index:30})),N.quality.length&&(0,i.sleep)().then(()=>{this.art.quality=N.quality}),N.screenshot&&!i.isMobile&&this.add((0,E.default)({name:"screenshot",position:"right",index:20})),N.setting&&this.add((0,L.default)({name:"setting",position:"right",index:30})),N.pip&&this.add((0,g.default)({name:"pip",position:"right",index:40})),N.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,c.default)({name:"airplay",position:"right",index:50})),N.fullscreenWeb&&this.add((0,p.default)({name:"fullscreenWeb",position:"right",index:60})),N.fullscreen&&this.add((0,d.default)({name:"fullscreen",position:"right",index:70}));for(let M=0;M<N.controls.length;M++)this.add(N.controls[M])}add(N){let M=typeof N=="function"?N(this.art):N,{$progress:O,$controlsLeft:j,$controlsRight:P}=this.art.template;switch(M.position){case"top":this.$parent=O;break;case"left":this.$parent=j;break;case"right":this.$parent=P;break;default:(0,i.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(M)}check(N){N.$control_value.innerHTML=N.html;for(let M=0;M<N.$control_option.length;M++){let O=N.$control_option[M];O.default=O===N,O.default&&(0,i.inverseClass)(O.$control_item,"art-current")}}selector(N,M,O){let{proxy:j}=this.art.events;(0,i.addClass)(M,"art-control-selector");let P=(0,i.createElement)("div");(0,i.addClass)(P,"art-selector-value"),(0,i.append)(P,N.html),M.textContent="",(0,i.append)(M,P);let F=(0,i.createElement)("div");(0,i.addClass)(F,"art-selector-list"),(0,i.append)(M,F);for(let $=0;$<N.selector.length;$++){let G=N.selector[$],Y=(0,i.createElement)("div");(0,i.addClass)(Y,"art-selector-item"),G.default&&(0,i.addClass)(Y,"art-current"),Y.dataset.index=$,Y.dataset.value=G.value,Y.innerHTML=G.html,(0,i.append)(F,Y),(0,i.def)(G,"$control_option",{get:()=>N.selector}),(0,i.def)(G,"$control_item",{get:()=>Y}),(0,i.def)(G,"$control_value",{get:()=>P})}let B=j(F,"click",async $=>{let G=(0,i.getComposedPath)($),Y=N.selector.find(ee=>ee.$control_item===G.find(te=>ee.$control_item===te));this.check(Y),N.onSelect&&(P.innerHTML=await N.onSelect.call(this.art,Y,Y.$control_item,$))});O.push(B)}}t.default=_},{"../utils":"aBlEo","../utils/component":"idCEj","./airplay":"amOzz","./fullscreen":"3GuBU","./fullscreenWeb":"jj1KV","./pip":"jMeHN","./playAndPause":"u3h8M","./progress":"1XZSS","./screenshot":"dIscA","./setting":"aqA0g","./time":"ihweO","./volume":"fJVWn","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],amOzz:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("AirPlay"),mounted:c=>{let{proxy:u,icons:d}=l;(0,i.append)(c,d.airplay),u(c,"click",()=>l.airplay())}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3GuBU":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("Fullscreen"),mounted:c=>{let{proxy:u,icons:d,i18n:f}=l,p=(0,i.append)(c,d.fullscreenOn),h=(0,i.append)(c,d.fullscreenOff);(0,i.setStyle)(h,"display","none"),u(c,"click",()=>{l.fullscreen=!l.fullscreen}),l.on("fullscreen",g=>{g?((0,i.tooltip)(c,f.get("Exit Fullscreen")),(0,i.setStyle)(p,"display","none"),(0,i.setStyle)(h,"display","inline-flex")):((0,i.tooltip)(c,f.get("Fullscreen")),(0,i.setStyle)(p,"display","inline-flex"),(0,i.setStyle)(h,"display","none"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jj1KV:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("Web Fullscreen"),mounted:c=>{let{proxy:u,icons:d,i18n:f}=l,p=(0,i.append)(c,d.fullscreenWebOn),h=(0,i.append)(c,d.fullscreenWebOff);(0,i.setStyle)(h,"display","none"),u(c,"click",()=>{l.fullscreenWeb=!l.fullscreenWeb}),l.on("fullscreenWeb",g=>{g?((0,i.tooltip)(c,f.get("Exit Web Fullscreen")),(0,i.setStyle)(p,"display","none"),(0,i.setStyle)(h,"display","inline-flex")):((0,i.tooltip)(c,f.get("Web Fullscreen")),(0,i.setStyle)(p,"display","inline-flex"),(0,i.setStyle)(h,"display","none"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jMeHN:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("PIP Mode"),mounted:c=>{let{proxy:u,icons:d,i18n:f}=l;(0,i.append)(c,d.pip),u(c,"click",()=>{l.pip=!l.pip}),l.on("pip",p=>{(0,i.tooltip)(c,f.get(p?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],u3h8M:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,mounted:c=>{let{proxy:u,icons:d,i18n:f}=l,p=(0,i.append)(c,d.play),h=(0,i.append)(c,d.pause);function g(){(0,i.setStyle)(p,"display","flex"),(0,i.setStyle)(h,"display","none")}function y(){(0,i.setStyle)(p,"display","none"),(0,i.setStyle)(h,"display","flex")}(0,i.tooltip)(p,f.get("Play")),(0,i.tooltip)(h,f.get("Pause")),u(p,"click",()=>{l.play()}),u(h,"click",()=>{l.pause()}),l.playing?y():g(),l.on("video:playing",()=>{y()}),l.on("video:pause",()=>{g()})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"1XZSS":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"getPosFromEvent",()=>a),s.export(t,"setCurrentTime",()=>o),s.export(t,"default",()=>l);var i=r("../utils");function a(c,u){let{$progress:d}=c.template,{left:f}=(0,i.getRect)(d),p=i.isMobile?u.touches[0].clientX:u.clientX,h=(0,i.clamp)(p-f,0,d.clientWidth),g=h/d.clientWidth*c.duration,y=(0,i.secondToTime)(g),b=(0,i.clamp)(h/d.clientWidth,0,1);return{second:g,time:y,width:h,percentage:b}}function o(c,u){if(c.isRotate){let d=u.touches[0].clientY/c.height,f=d*c.duration;c.emit("setBar","played",d,u),c.seek=f}else{let{second:d,percentage:f}=a(c,u);c.emit("setBar","played",f,u),c.seek=d}}function l(c){return u=>{let{icons:d,option:f,proxy:p}=u;return{...c,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:h=>{let g=null,y=!1,b=(0,i.query)(".art-progress-hover",h),m=(0,i.query)(".art-progress-loaded",h),v=(0,i.query)(".art-progress-played",h),S=(0,i.query)(".art-progress-highlight",h),E=(0,i.query)(".art-progress-indicator",h),C=(0,i.query)(".art-progress-tip",h);function L(I,T){let{width:w,time:R}=T||a(u,I);C.textContent=R;let _=C.clientWidth;w<=_/2?(0,i.setStyle)(C,"left",0):w>h.clientWidth-_/2?(0,i.setStyle)(C,"left",`${h.clientWidth-_}px`):(0,i.setStyle)(C,"left",`${w-_/2}px`)}d.indicator?(0,i.append)(E,d.indicator):(0,i.setStyle)(E,"backgroundColor","var(--art-theme)"),u.on("setBar",function(I,T,w){let R=I==="played"&&w&&i.isMobile;I==="loaded"&&(0,i.setStyle)(m,"width",`${100*T}%`),I==="hover"&&(0,i.setStyle)(b,"width",`${100*T}%`),I==="played"&&((0,i.setStyle)(v,"width",`${100*T}%`),(0,i.setStyle)(E,"left",`${100*T}%`)),R&&((0,i.setStyle)(C,"display","flex"),L(w,{width:h.clientWidth*T,time:(0,i.secondToTime)(T*u.duration)}),clearTimeout(g),g=setTimeout(()=>{(0,i.setStyle)(C,"display","none")},500))}),u.on("video:loadedmetadata",function(){S.textContent="";for(let I=0;I<f.highlight.length;I++){let T=f.highlight[I],w=(0,i.clamp)(T.time,0,u.duration)/u.duration*100,R=`<span data-text="${T.text}" data-time="${T.time}" style="left: ${w}%"></span>`;(0,i.append)(S,R)}}),u.constructor.USE_RAF?u.on("raf",()=>{u.emit("setBar","played",u.played),u.emit("setBar","loaded",u.loaded)}):(u.on("video:timeupdate",()=>{u.emit("setBar","played",u.played)}),u.on("video:progress",()=>{u.emit("setBar","loaded",u.loaded)}),u.on("video:ended",()=>{u.emit("setBar","played",1)})),u.emit("setBar","loaded",u.loaded||0),i.isMobile||(p(h,"click",I=>{I.target!==E&&o(u,I)}),p(h,"mousemove",I=>{let{percentage:T}=a(u,I);if(u.emit("setBar","hover",T,I),(0,i.setStyle)(C,"display","flex"),(0,i.includeFromEvent)(I,S)){let{width:w}=a(u,I),{text:R}=I.target.dataset;C.textContent=R;let _=C.clientWidth;w<=_/2?(0,i.setStyle)(C,"left",0):w>h.clientWidth-_/2?(0,i.setStyle)(C,"left",`${h.clientWidth-_}px`):(0,i.setStyle)(C,"left",`${w-_/2}px`)}else L(I)}),p(h,"mouseleave",I=>{(0,i.setStyle)(C,"display","none"),u.emit("setBar","hover",0,I)}),p(h,"mousedown",I=>{y=I.button===0}),u.on("document:mousemove",I=>{if(y){let{second:T,percentage:w}=a(u,I);u.emit("setBar","played",w,I),u.seek=T}}),u.on("document:mouseup",()=>{y&&(y=!1)}))}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dIscA:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("Screenshot"),mounted:c=>{let{proxy:u,icons:d}=l;(0,i.append)(c,d.screenshot),u(c,"click",()=>{l.screenshot()})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aqA0g:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,tooltip:l.i18n.get("Show Setting"),mounted:c=>{let{proxy:u,icons:d,i18n:f}=l;(0,i.append)(c,d.setting),u(c,"click",()=>{l.setting.toggle(),l.setting.resize()}),l.on("setting",p=>{(0,i.tooltip)(c,f.get(p?"Hide Setting":"Show Setting"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ihweO:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,style:i.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:c=>{function u(){let f=`${(0,i.secondToTime)(l.currentTime)} / ${(0,i.secondToTime)(l.duration)}`;f!==c.textContent&&(c.textContent=f)}u();let d=["video:loadedmetadata","video:timeupdate","video:progress"];for(let f=0;f<d.length;f++)l.on(d[f],u)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fJVWn:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return l=>({...o,mounted:c=>{let{proxy:u,icons:d}=l,f=(0,i.append)(c,d.volume),p=(0,i.append)(c,d.volumeClose),h=(0,i.append)(c,'<div class="art-volume-panel"></div>'),g=(0,i.append)(h,'<div class="art-volume-inner"></div>'),y=(0,i.append)(g,'<div class="art-volume-val"></div>'),b=(0,i.append)(g,'<div class="art-volume-slider"></div>'),m=(0,i.append)(b,'<div class="art-volume-handle"></div>'),v=(0,i.append)(m,'<div class="art-volume-loaded"></div>'),S=(0,i.append)(b,'<div class="art-volume-indicator"></div>');function E(L){let{top:I,height:T}=(0,i.getRect)(b);return 1-(L.clientY-I)/T}function C(){if(l.muted||l.volume===0)(0,i.setStyle)(f,"display","none"),(0,i.setStyle)(p,"display","flex"),(0,i.setStyle)(S,"top","100%"),(0,i.setStyle)(v,"top","100%"),y.textContent=0;else{let L=100*l.volume;(0,i.setStyle)(f,"display","flex"),(0,i.setStyle)(p,"display","none"),(0,i.setStyle)(S,"top",`${100-L}%`),(0,i.setStyle)(v,"top",`${100-L}%`),y.textContent=Math.floor(L)}}if(C(),l.on("video:volumechange",C),u(f,"click",()=>{l.muted=!0}),u(p,"click",()=>{l.muted=!1}),i.isMobile)(0,i.setStyle)(h,"display","none");else{let L=!1;u(b,"mousedown",I=>{L=I.button===0,l.volume=E(I)}),l.on("document:mousemove",I=>{L&&(l.muted=!1,l.volume=E(I))}),l.on("document:mouseup",()=>{L&&(L=!1)})}}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jmVSD:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./clickInit"),a=s.interopDefault(i),o=r("./gestureInit"),l=s.interopDefault(o),c=r("./globalInit"),u=s.interopDefault(c),d=r("./hoverInit"),f=s.interopDefault(d),p=r("./moveInit"),h=s.interopDefault(p),g=r("./resizeInit"),y=s.interopDefault(g),b=r("./updateInit"),m=s.interopDefault(b),v=r("./viewInit"),S=s.interopDefault(v);t.default=class{constructor(E){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,a.default)(E,this),(0,f.default)(E,this),(0,h.default)(E,this),(0,y.default)(E,this),(0,l.default)(E,this),(0,S.default)(E,this),(0,u.default)(E,this),(0,m.default)(E,this)}proxy(E,C,L,I={}){if(Array.isArray(C))return C.map(w=>this.proxy(E,w,L,I));E.addEventListener(C,L,I);let T=()=>E.removeEventListener(C,L,I);return this.destroyEvents.push(T),T}hover(E,C,L){C&&this.proxy(E,"mouseenter",C),L&&this.proxy(E,"mouseleave",L)}remove(E){let C=this.destroyEvents.indexOf(E);C>-1&&(E(),this.destroyEvents.splice(C,1))}destroy(){for(let E=0;E<this.destroyEvents.length;E++)this.destroyEvents[E]()}}},{"./clickInit":"i8G6V","./gestureInit":"9wEzB","./globalInit":"ikBrS","./hoverInit":"jwNq0","./moveInit":"eqSsP","./resizeInit":"42JNz","./updateInit":"7kM1M","./viewInit":"2IW9m","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],i8G6V:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o,l){let{constructor:c,template:{$player:u,$video:d}}=o;function f(h){(0,i.includeFromEvent)(h,u)?(o.isInput=h.target.tagName==="INPUT",o.isFocus=!0,o.emit("focus",h)):(o.isInput=!1,o.isFocus=!1,o.emit("blur",h))}o.on("document:click",f),o.on("document:contextmenu",f);let p=[];l.proxy(d,"click",h=>{let g=Date.now();p.push(g);let{MOBILE_CLICK_PLAY:y,DBCLICK_TIME:b,MOBILE_DBCLICK_PLAY:m,DBCLICK_FULLSCREEN:v}=c,S=p.filter(E=>g-E<=b);switch(S.length){case 1:o.emit("click",h),i.isMobile?!o.isLock&&y&&o.toggle():o.toggle(),p=S;break;case 2:o.emit("dblclick",h),i.isMobile?!o.isLock&&m&&o.toggle():v&&(o.fullscreen=!o.fullscreen),p=[];break;default:p=[]}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"9wEzB":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>o);var i=r("../control/progress"),a=r("../utils");function o(l,c){if(a.isMobile&&!l.option.isLive){let{$video:u,$progress:d}=l.template,f=null,p=!1,h=0,g=0,y=0,b=v=>{if(v.touches.length===1&&!l.isLock){f===d&&(0,i.setCurrentTime)(l,v),p=!0;let{pageX:S,pageY:E}=v.touches[0];h=S,g=E,y=l.currentTime}},m=v=>{if(v.touches.length===1&&p&&l.duration){let{pageX:S,pageY:E}=v.touches[0],C=function(T,w,R,_){let k=w-_,N=R-T,M=0;if(2>Math.abs(N)&&2>Math.abs(k))return M;let O=180*Math.atan2(k,N)/Math.PI;return O>=-45&&O<45?M=4:O>=45&&O<135?M=1:O>=-135&&O<-45?M=2:(O>=135&&O<=180||O>=-180&&O<-135)&&(M=3),M}(h,g,S,E),L=[3,4].includes(C),I=[1,2].includes(C);if(L&&!l.isRotate||I&&l.isRotate){let T=(0,a.clamp)((S-h)/l.width,-1,1),w=(0,a.clamp)((E-g)/l.height,-1,1),R=l.isRotate?w:T,_=f===u?l.constructor.TOUCH_MOVE_RATIO:1,k=(0,a.clamp)(y+l.duration*R*_,0,l.duration);l.seek=k,l.emit("setBar","played",(0,a.clamp)(k/l.duration,0,1),v),l.notice.show=`${(0,a.secondToTime)(k)} / ${(0,a.secondToTime)(l.duration)}`}}};l.option.gesture&&(c.proxy(u,"touchstart",v=>{f=u,b(v)}),c.proxy(u,"touchmove",m)),c.proxy(d,"touchstart",v=>{f=d,b(v)}),c.proxy(d,"touchmove",m),l.on("document:touchend",()=>{p&&(h=0,g=0,y=0,p=!1,f=null)})}}},{"../control/progress":"1XZSS","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ikBrS:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a,o){let l=["click","mouseup","keydown","touchend","touchmove","mousemove","pointerup","contextmenu","pointermove","visibilitychange","webkitfullscreenchange"],c=["resize","scroll","orientationchange"],u=[];function d(f={}){for(let h=0;h<u.length;h++)o.remove(u[h]);u.length=0;let{$player:p}=a.template;l.forEach(h=>{let g=f.document||p.ownerDocument||document,y=o.proxy(g,h,b=>{a.emit(`document:${h}`,b)});u.push(y)}),c.forEach(h=>{var b;let g=f.window||((b=p.ownerDocument)==null?void 0:b.defaultView)||window,y=o.proxy(g,h,m=>{a.emit(`window:${h}`,m)});u.push(y)})}d(),o.bindGlobalEvents=d}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jwNq0:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o,l){let{$player:c}=o.template;l.hover(c,u=>{(0,i.addClass)(c,"art-hover"),o.emit("hover",!0,u)},u=>{(0,i.removeClass)(c,"art-hover"),o.emit("hover",!1,u)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eqSsP:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a,o){let{$player:l}=a.template;o.proxy(l,"mousemove",c=>{a.emit("mousemove",c)})}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"42JNz":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o,l){let{option:c,constructor:u}=o;o.on("resize",()=>{let{aspectRatio:f,notice:p}=o;o.state==="standard"&&c.autoSize&&o.autoSize(),o.aspectRatio=f,p.show=""});let d=(0,i.debounce)(()=>o.emit("resize"),u.RESIZE_TIME);o.on("window:orientationchange",()=>d()),o.on("window:resize",()=>d()),screen&&screen.orientation&&screen.orientation.onchange&&l.proxy(screen.orientation,"change",()=>d())}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7kM1M":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){if(a.constructor.USE_RAF){let o=null;(function l(){a.playing&&a.emit("raf"),a.isDestroy||(o=requestAnimationFrame(l))})(),a.on("destroy",()=>{cancelAnimationFrame(o)})}}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2IW9m":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{option:l,constructor:c,template:{$container:u}}=o,d=(0,i.throttle)(()=>{o.emit("view",(0,i.isInViewport)(u,c.SCROLL_GAP))},c.SCROLL_TIME);o.on("window:scroll",()=>d()),o.on("view",f=>{l.autoMini&&(o.mini=!f)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dswts:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=r("./utils");t.default=class{constructor(i){this.art=i,this.keys={},i.option.hotkey&&!s.isMobile&&this.init()}init(){let{constructor:i}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=i.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=i.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=i.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=i.VOLUME_STEP}),this.art.on("document:keydown",a=>{if(this.art.isFocus){let o=document.activeElement.tagName.toUpperCase(),l=document.activeElement.getAttribute("contenteditable");if(o!=="INPUT"&&o!=="TEXTAREA"&&l!==""&&l!=="true"&&!a.altKey&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey){let c=this.keys[a.code];if(c){a.preventDefault();for(let u=0;u<c.length;u++)c[u].call(this.art,a);this.art.emit("hotkey",a)}}}this.art.emit("keydown",a)})}add(i,a){return this.keys[i]?this.keys[i].push(a):this.keys[i]=[a],this}remove(i,a){if(this.keys[i]){let o=this.keys[i].indexOf(a);o!==-1&&this.keys[i].splice(o,1)}return this}}},{"./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d9ktO:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("../utils"),a=r("./zh-cn"),o=s.interopDefault(a);t.default=class{constructor(l){this.art=l,this.languages={"zh-cn":o.default},this.language={},this.update(l.option.i18n)}init(){let l=this.art.option.lang.toLowerCase();this.language=this.languages[l]||{}}get(l){return this.language[l]||l}update(l){this.languages=(0,i.mergeDeep)(this.languages,l),this.init()}}},{"../utils":"aBlEo","./zh-cn":"3hyaR","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3hyaR":[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);let s={"Video Info":"",Close:"","Video Load Failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"","Video Flip":"",Horizontal:"",Vertical:"",Reconnect:"","Show Setting":"","Hide Setting":"",Screenshot:"","Play Speed":"","Aspect Ratio":"",Default:"",Normal:"",Open:"","Switch Video":"","Switch Subtitle":"",Fullscreen:"","Exit Fullscreen":"","Web Fullscreen":"","Exit Web Fullscreen":"","Mini Player":"","PIP Mode":"","Exit PIP Mode":"","PIP Not Supported":"","Fullscreen Not Supported":"","Subtitle Offset":"","Last Seen":"","Jump Play":"",AirPlay:"","AirPlay Not Available":""};t.default=s,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fFHY0:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("bundle-text:./airplay.svg"),a=s.interopDefault(i),o=r("bundle-text:./arrow-left.svg"),l=s.interopDefault(o),c=r("bundle-text:./arrow-right.svg"),u=s.interopDefault(c),d=r("bundle-text:./aspect-ratio.svg"),f=s.interopDefault(d),p=r("bundle-text:./check.svg"),h=s.interopDefault(p),g=r("bundle-text:./close.svg"),y=s.interopDefault(g),b=r("bundle-text:./config.svg"),m=s.interopDefault(b),v=r("bundle-text:./error.svg"),S=s.interopDefault(v),E=r("bundle-text:./flip.svg"),C=s.interopDefault(E),L=r("bundle-text:./fullscreen-off.svg"),I=s.interopDefault(L),T=r("bundle-text:./fullscreen-on.svg"),w=s.interopDefault(T),R=r("bundle-text:./fullscreen-web-off.svg"),_=s.interopDefault(R),k=r("bundle-text:./fullscreen-web-on.svg"),N=s.interopDefault(k),M=r("bundle-text:./loading.svg"),O=s.interopDefault(M),j=r("bundle-text:./lock.svg"),P=s.interopDefault(j),F=r("bundle-text:./pause.svg"),B=s.interopDefault(F),$=r("bundle-text:./pip.svg"),G=s.interopDefault($),Y=r("bundle-text:./play.svg"),ee=s.interopDefault(Y),te=r("bundle-text:./playback-rate.svg"),se=s.interopDefault(te),we=r("bundle-text:./screenshot.svg"),le=s.interopDefault(we),he=r("bundle-text:./setting.svg"),De=s.interopDefault(he),Qe=r("bundle-text:./state.svg"),$e=s.interopDefault(Qe),ie=r("bundle-text:./switch-off.svg"),be=s.interopDefault(ie),ue=r("bundle-text:./switch-on.svg"),Q=s.interopDefault(ue),K=r("bundle-text:./unlock.svg"),Ne=s.interopDefault(K),Re=r("bundle-text:./volume-close.svg"),xe=s.interopDefault(Re),ce=r("bundle-text:./volume.svg"),Oe=s.interopDefault(ce),Ae=r("../utils");t.default=class{constructor(At){let Vt={loading:O.default,state:$e.default,play:ee.default,pause:B.default,check:h.default,volume:Oe.default,volumeClose:xe.default,screenshot:le.default,setting:De.default,pip:G.default,arrowLeft:l.default,arrowRight:u.default,playbackRate:se.default,aspectRatio:f.default,config:m.default,lock:P.default,flip:C.default,unlock:Ne.default,fullscreenOff:I.default,fullscreenOn:w.default,fullscreenWebOff:_.default,fullscreenWebOn:N.default,switchOn:Q.default,switchOff:be.default,error:S.default,close:y.default,airplay:a.default,...At.option.icons};for(let et in Vt)(0,Ae.def)(this,et,{get:()=>(0,Ae.getIcon)(et,Vt[et])})}}},{"bundle-text:./airplay.svg":"gkZgZ","bundle-text:./arrow-left.svg":"kQyD4","bundle-text:./arrow-right.svg":"64ztm","bundle-text:./aspect-ratio.svg":"72LvA","bundle-text:./check.svg":"4QmBo","bundle-text:./close.svg":"j1hoe","bundle-text:./config.svg":"hNZaT","bundle-text:./error.svg":"dKh4l","bundle-text:./flip.svg":"lIEIE","bundle-text:./fullscreen-off.svg":"1533e","bundle-text:./fullscreen-on.svg":"76ut3","bundle-text:./fullscreen-web-off.svg":"3NzMk","bundle-text:./fullscreen-web-on.svg":"12xHc","bundle-text:./loading.svg":"iVcUF","bundle-text:./lock.svg":"1J4so","bundle-text:./pause.svg":"1KgkK","bundle-text:./pip.svg":"4h4tM","bundle-text:./play.svg":"jecAY","bundle-text:./playback-rate.svg":"anPe9","bundle-text:./screenshot.svg":"9BPYQ","bundle-text:./setting.svg":"hsI9k","bundle-text:./state.svg":"gr1ZU","bundle-text:./switch-off.svg":"6kdAr","bundle-text:./switch-on.svg":"ksdMo","bundle-text:./unlock.svg":"iz5Qc","bundle-text:./volume-close.svg":"3OZoa","bundle-text:./volume.svg":"hRYA4","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],gkZgZ:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"/><path d="M4 17h10l-5-6Z"/></svg>'},{}],kQyD4:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6Z"/></svg>'},{}],"64ztm":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6Z"/></svg>'},{}],"72LvA":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;transform:translate(0)" viewBox="0 0 88 88"><defs><clipPath id="__lottie_element_216"><path d="M0 0h88v88H0Z"/></clipPath></defs><g clip-path="url(#__lottie_element_216)"><g style="display:block"><path d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 1.4495849676166017e-7l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31C14.488-13.492 13.228-13.492 12.438-12.702m-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13ZM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8Z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></g></svg>'},{}],"4QmBo":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4Z"/></svg>'},{}],j1hoe:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733C823.467 166.4 797.867 166.4 780.8 183.466L512 452.267l-268.8-268.8C226.133 166.4 200.533 166.4 183.467 183.466c-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733Z"/></svg>'},{}],hNZaT:[function(r,e,t,n){e.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15 17h6v1h-6Zm-4 0H3v1h8v2h1v-5h-1Zm3-9h1V3h-1v2H3v1h11Zm4-3v1h3V5ZM6 14h1V9H6v2H3v1h3Zm4-2h11v-1H10Z" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],dKh4l:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.1 93.1 0 0 1 34.447 33.341M512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88m0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2"/></svg>'},{}],lIEIE:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path d="M554.667 810.667V896h-85.333v-85.333Zm-384-632.662a42.67 42.67 0 0 1 34.987 18.219l203.903 291.328a42.67 42.67 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667m682.666 0a42.667 42.667 0 0 1 42.368 37.717l.299 4.95v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.67 42.67 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.67 42.67 0 0 1 34.944-18.219M554.667 640v85.333h-85.333V640Zm-358.4-320.896V716.8L335.957 512 196.31 319.104Zm358.4 150.23v85.333h-85.333v-85.333Zm0-170.667V384h-85.333v-85.333Zm0-170.667v85.333h-85.333V128Z"/></svg>'},{}],"1533e":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="M768 298.667h170.667V384h-256V128H768ZM341.333 384h-256v-85.333H256V128h85.333ZM768 725.333V896h-85.333V640h256v85.333ZM341.333 640v256H256V725.333H85.333V640Z"/></svg>'},{}],"76ut3":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="M625.778 256H768v142.222h113.778v-256h-256ZM256 398.222V256h142.222V142.222h-256v256Zm512 227.556V768H625.778v113.778h256v-256ZM398.222 768H256V625.778H142.222v256h256Z"/></svg>'},{}],"3NzMk":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128ZM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384Zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448Z"/></svg>'},{}],"12xHc":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128Zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448Zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384Z"/></svg>'},{}],iVcUF:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" class="uil-default" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><path fill="none" d="M0 0h100v100H0Z" class="bk"/><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="translate(0 -30)"><animate attributeName="opacity" begin="-1s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(30 105.98 65)"><animate attributeName="opacity" begin="-0.9166666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(60 75.98 65)"><animate attributeName="opacity" begin="-0.8333333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(90 65 65)"><animate attributeName="opacity" begin="-0.75s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(120 58.66 65)"><animate attributeName="opacity" begin="-0.6666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(150 54.02 65)"><animate attributeName="opacity" begin="-0.5833333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="matrix(-1 0 0 -1 100 130)"><animate attributeName="opacity" begin="-0.5s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(210 45.98 65)"><animate attributeName="opacity" begin="-0.4166666666666667s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(240 41.34 65)"><animate attributeName="opacity" begin="-0.3333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-90 35 65)"><animate attributeName="opacity" begin="-0.25s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" begin="-0.16666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" begin="-0.08333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect></svg>'},{}],"1J4so":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path d="M298.667 426.667v-85.333a213.333 213.333 0 1 1 426.667 0v85.333H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667ZM512 213.333a128 128 0 0 0-128 128v85.333h256v-85.333a128 128 0 0 0-128-128"/></svg>'},{}],"1KgkK":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2m8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2"/></svg>'},{}],"4h4tM":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 1024 1024"><path d="M844.8 219.648H179.2c-6.144 0-10.24 4.608-10.24 10.752v563.2c0 5.632 4.096 10.24 10.24 10.24h256V896h-256A102.4 102.4 0 0 1 76.8 793.6V230.4c0-56.832 45.568-102.4 102.4-102.4h665.6a102.4 102.4 0 0 1 102.4 102.4v204.8h-92.16V230.4c0-6.144-4.608-10.752-10.24-10.752M614.4 588.8c-28.672 0-51.2 22.528-51.2 51.2v204.8c0 28.16 22.528 51.2 51.2 51.2H896c28.16 0 51.2-23.04 51.2-51.2V640c0-28.672-23.04-51.2-51.2-51.2Z"/></svg>'},{}],jecAY:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45"/></svg>'},{}],anPe9:[function(r,e,t,n){e.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 8v8l6-4ZM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2M5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8m0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4Zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22ZM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"9BPYQ":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10m0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8"/></svg>'},{}],hsI9k:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a7 7 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1 1 0 0 0-1.272.23l-1.008 1.225a7 7 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A7 7 0 0 0 4.4 8.6l-1.564.261A1 1 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.1 7.1 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a1 1 0 0 0 .835-.986V9.847a1 1 0 0 0-.836-.986M11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8"/></svg>'},{}],gr1ZU:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12t.788-3.9 2.137-3.175q1.35-1.35 3.175-2.137T12 2t3.9.788 3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"/></svg>'},{}],"6kdAr":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1740 1024"><path d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898m-.564-975.36A464.589 464.589 0 1 1 48.025 513.024 463.87 463.87 0 0 1 511.335 48.435Z"/></svg>'},{}],ksdMo:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1664 1024"><path fill="#648ffc" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024m0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448"/></svg>'},{}],iz5Qc:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.333a213.333 213.333 0 0 1 368.085-146.816"/></svg>'},{}],"3OZoa":[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M15 11a4 4 0 0 0-2-3.465v2.636l1.865 1.865A4 4 0 0 0 15 11"/><path d="M13.583 5.583A6 6 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8 8 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805m5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806q.322-.154.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416M11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172Z"/></svg>'},{}],hRYA4:[function(r,e,t,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39m4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8 8 0 0 0 19 11a8 8 0 0 0-4.554-7.222"/><path d="M15 11a4 4 0 0 0-2-3.465v6.93A4 4 0 0 0 15 11"/></svg>'},{}],kZ0F8:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./utils"),a=r("./utils/component"),o=s.interopDefault(a);class l extends o.default{constructor(u){super(u),this.name="info",i.isMobile||this.init()}init(){let{proxy:u,constructor:d,template:{$infoPanel:f,$infoClose:p,$video:h}}=this.art;u(p,"click",()=>{this.show=!1});let g=null,y=(0,i.queryAll)("[data-video]",f)||[];this.art.on("destroy",()=>clearTimeout(g)),function b(){for(let m=0;m<y.length;m++){let v=y[m],S=h[v.dataset.video],E=typeof S=="number"?S.toFixed(2):S;v.textContent!==E&&(v.textContent=E)}g=setTimeout(b,d.INFO_LOOP_TIME)}()}}t.default=l},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],j9lbi:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./utils/component"),a=s.interopDefault(i);class o extends a.default{constructor(c){super(c);let{option:u,template:{$layer:d}}=c;this.name="layer",this.$parent=d;for(let f=0;f<u.layers.length;f++)this.add(u.layers[f])}}t.default=o},{"./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bMjWd:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./utils"),a=r("./utils/component"),o=s.interopDefault(a);class l extends o.default{constructor(u){super(u),this.name="loading",(0,i.append)(u.template.$loading,u.icons.loading)}}t.default=l},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],k1nkQ:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./utils"),a=r("./utils/component"),o=s.interopDefault(a);class l extends o.default{constructor(u){super(u),this.name="mask";let{template:d,icons:f,events:p}=u,h=(0,i.append)(d.$state,f.state),g=(0,i.append)(d.$state,f.error);(0,i.setStyle)(g,"display","none"),u.on("destroy",()=>{(0,i.setStyle)(h,"display","none"),(0,i.setStyle)(g,"display",null)}),p.proxy(d.$state,"click",()=>u.play())}}t.default=l},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fPVaU:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=r("./utils");t.default=class{constructor(i){this.art=i,this.timer=null}set show(i){let{constructor:a,template:{$player:o,$noticeInner:l}}=this.art;i?(l.textContent=i instanceof Error?i.message.trim():i,(0,s.addClass)(o,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{l.textContent="",(0,s.removeClass)(o,"art-notice-show")},a.NOTICE_TIME)):(0,s.removeClass)(o,"art-notice-show")}get show(){let{template:{$player:i}}=this.art;return i.classList.contains("art-notice-show")}}},{"./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],uR0Sw:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("./airplayMix"),a=s.interopDefault(i),o=r("./aspectRatioMix"),l=s.interopDefault(o),c=r("./attrMix"),u=s.interopDefault(c),d=r("./autoHeightMix"),f=s.interopDefault(d),p=r("./autoSizeMix"),h=s.interopDefault(p),g=r("./cssVarMix"),y=s.interopDefault(g),b=r("./currentTimeMix"),m=s.interopDefault(b),v=r("./durationMix"),S=s.interopDefault(v),E=r("./eventInit"),C=s.interopDefault(E),L=r("./flipMix"),I=s.interopDefault(L),T=r("./fullscreenMix"),w=s.interopDefault(T),R=r("./fullscreenWebMix"),_=s.interopDefault(R),k=r("./loadedMix"),N=s.interopDefault(k),M=r("./miniMix"),O=s.interopDefault(M),j=r("./optionInit"),P=s.interopDefault(j),F=r("./pauseMix"),B=s.interopDefault(F),$=r("./pipMix"),G=s.interopDefault($),Y=r("./playbackRateMix"),ee=s.interopDefault(Y),te=r("./playedMix"),se=s.interopDefault(te),we=r("./playingMix"),le=s.interopDefault(we),he=r("./playMix"),De=s.interopDefault(he),Qe=r("./posterMix"),$e=s.interopDefault(Qe),ie=r("./qualityMix"),be=s.interopDefault(ie),ue=r("./rectMix"),Q=s.interopDefault(ue),K=r("./screenshotMix"),Ne=s.interopDefault(K),Re=r("./seekMix"),xe=s.interopDefault(Re),ce=r("./stateMix"),Oe=s.interopDefault(ce),Ae=r("./subtitleOffsetMix"),At=s.interopDefault(Ae),Vt=r("./switchMix"),et=s.interopDefault(Vt),Xr=r("./themeMix"),Ms=s.interopDefault(Xr),co=r("./thumbnailsMix"),uo=s.interopDefault(co),as=r("./toggleMix"),$E=s.interopDefault(as),BE=r("./typeMix"),UE=s.interopDefault(BE),zE=r("./urlMix"),VE=s.interopDefault(zE),GE=r("./volumeMix"),HE=s.interopDefault(GE);t.default=class{constructor(Ie){(0,VE.default)(Ie),(0,u.default)(Ie),(0,De.default)(Ie),(0,B.default)(Ie),(0,$E.default)(Ie),(0,xe.default)(Ie),(0,HE.default)(Ie),(0,m.default)(Ie),(0,S.default)(Ie),(0,et.default)(Ie),(0,ee.default)(Ie),(0,l.default)(Ie),(0,Ne.default)(Ie),(0,w.default)(Ie),(0,_.default)(Ie),(0,G.default)(Ie),(0,N.default)(Ie),(0,se.default)(Ie),(0,le.default)(Ie),(0,h.default)(Ie),(0,Q.default)(Ie),(0,I.default)(Ie),(0,O.default)(Ie),(0,$e.default)(Ie),(0,f.default)(Ie),(0,y.default)(Ie),(0,Ms.default)(Ie),(0,UE.default)(Ie),(0,Oe.default)(Ie),(0,At.default)(Ie),(0,a.default)(Ie),(0,be.default)(Ie),(0,uo.default)(Ie),(0,C.default)(Ie),(0,P.default)(Ie)}}},{"./airplayMix":"d8BTB","./aspectRatioMix":"aQNJl","./attrMix":"5DA9e","./autoHeightMix":"1swKn","./autoSizeMix":"lSbiD","./cssVarMix":"32Hp1","./currentTimeMix":"kfZbu","./durationMix":"eV1ag","./eventInit":"f8NQq","./flipMix":"ea3Qm","./fullscreenMix":"ffXE3","./fullscreenWebMix":"8tarF","./loadedMix":"f9syH","./miniMix":"dLuS7","./optionInit":"d1F69","./pauseMix":"kewk9","./pipMix":"4XzDs","./playbackRateMix":"jphfi","./playedMix":"iNpeS","./playingMix":"aBIWL","./playMix":"hRBri","./posterMix":"fgfXC","./qualityMix":"17rUP","./rectMix":"55qzI","./screenshotMix":"bC6TG","./seekMix":"j8GRO","./stateMix":"cn7iR","./subtitleOffsetMix":"2k4nP","./switchMix":"6SU6j","./themeMix":"7iMuh","./thumbnailsMix":"6P0RS","./toggleMix":"eNi78","./typeMix":"7AUBD","./urlMix":"cnlLL","./volumeMix":"iX66j","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d8BTB:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,notice:c,proxy:u,template:{$video:d}}=o,f=!0;window.WebKitPlaybackTargetAvailabilityEvent&&d.webkitShowPlaybackTargetPicker?u(d,"webkitplaybacktargetavailabilitychanged",p=>{switch(p.availability){case"available":f=!0;break;case"not-available":f=!1}}):f=!1,(0,i.def)(o,"airplay",{value(){f?(d.webkitShowPlaybackTargetPicker(),o.emit("airplay")):c.show=l.get("AirPlay Not Available")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aQNJl:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,notice:c,template:{$video:u,$player:d}}=o;(0,i.def)(o,"aspectRatio",{get:()=>d.dataset.aspectRatio||"default",set(f){if(f||(f="default"),f==="default")(0,i.setStyle)(u,"width",null),(0,i.setStyle)(u,"height",null),(0,i.setStyle)(u,"margin",null),delete d.dataset.aspectRatio;else{let p=f.split(":").map(Number),{clientWidth:h,clientHeight:g}=d,y=p[0]/p[1];h/g>y?((0,i.setStyle)(u,"width",`${y*g}px`),(0,i.setStyle)(u,"height","100%"),(0,i.setStyle)(u,"margin","0 auto")):((0,i.setStyle)(u,"width","100%"),(0,i.setStyle)(u,"height",`${h/y}px`),(0,i.setStyle)(u,"margin","auto 0")),d.dataset.aspectRatio=f}c.show=`${l.get("Aspect Ratio")}: ${f==="default"?l.get("Default"):f}`,o.emit("aspectRatio",f)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"5DA9e":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$video:l}}=o;(0,i.def)(o,"attr",{value(c,u){if(u===void 0)return l[c];l[c]=u}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"1swKn":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$container:l,$video:c}}=o;(0,i.def)(o,"autoHeight",{value(){let{clientWidth:u}=l,{videoHeight:d,videoWidth:f}=c,p=u/f*d;(0,i.setStyle)(l,"height",`${p}px`),o.emit("autoHeight",p)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],lSbiD:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{$container:l,$player:c,$video:u}=o.template;(0,i.def)(o,"autoSize",{value(){let{videoWidth:d,videoHeight:f}=u,{width:p,height:h}=(0,i.getRect)(l),g=d/f;p/h>g?((0,i.setStyle)(c,"width",`${h*g/p*100}%`),(0,i.setStyle)(c,"height","100%")):((0,i.setStyle)(c,"width","100%"),(0,i.setStyle)(c,"height",`${p/g/h*100}%`)),o.emit("autoSize",{width:o.width,height:o.height})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"32Hp1":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{$player:l}=o.template;(0,i.def)(o,"cssVar",{value:(c,u)=>u?l.style.setProperty(c,u):getComputedStyle(l).getPropertyValue(c)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kfZbu:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{$video:l}=o.template;(0,i.def)(o,"currentTime",{get:()=>l.currentTime||0,set:c=>{Number.isNaN(c=Number.parseFloat(c))||(l.currentTime=(0,i.clamp)(c,0,o.duration))}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eV1ag:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"duration",{get:()=>{let{duration:l}=o.template.$video;return l===1/0?0:l||0}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f8NQq:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var i=r("../config"),a=s.interopDefault(i),o=r("../utils");function l(c){let{i18n:u,notice:d,option:f,constructor:p,proxy:h,template:{$player:g,$video:y,$poster:b}}=c,m=0;for(let v=0;v<a.default.events.length;v++)h(y,a.default.events[v],S=>{c.emit(`video:${S.type}`,S)});c.on("video:canplay",()=>{m=0,c.loading.show=!1}),c.once("video:canplay",()=>{c.loading.show=!1,c.controls.show=!0,c.mask.show=!0,c.isReady=!0,c.emit("ready")}),c.on("video:ended",()=>{f.loop?(c.seek=0,c.play(),c.controls.show=!1,c.mask.show=!1):(c.controls.show=!0,c.mask.show=!0)}),c.on("video:error",async v=>{m<p.RECONNECT_TIME_MAX?(await(0,o.sleep)(p.RECONNECT_SLEEP_TIME),m+=1,c.url=f.url,d.show=`${u.get("Reconnect")}: ${m}`,c.emit("error",v,m)):(c.mask.show=!0,c.loading.show=!1,c.controls.show=!0,(0,o.addClass)(g,"art-error"),await(0,o.sleep)(p.RECONNECT_SLEEP_TIME),d.show=u.get("Video Load Failed"))}),c.on("video:loadedmetadata",()=>{c.emit("resize"),o.isMobile&&(c.loading.show=!1,c.controls.show=!0,c.mask.show=!0)}),c.on("video:loadstart",()=>{c.loading.show=!0,c.mask.show=!1,c.controls.show=!0}),c.on("video:pause",()=>{c.controls.show=!0,c.mask.show=!0}),c.on("video:play",()=>{c.mask.show=!1,(0,o.setStyle)(b,"display","none")}),c.on("video:playing",()=>{c.mask.show=!1}),c.on("video:progress",()=>{c.playing&&(c.loading.show=!1)}),c.on("video:seeked",()=>{c.loading.show=!1,c.mask.show=!0}),c.on("video:seeking",()=>{c.loading.show=!0,c.mask.show=!1}),c.on("video:timeupdate",()=>{c.mask.show=!1}),c.on("video:waiting",()=>{c.loading.show=!0,c.mask.show=!1})}},{"../config":"eJfh8","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ea3Qm:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$player:l},i18n:c,notice:u}=o;(0,i.def)(o,"flip",{get:()=>l.dataset.flip||"normal",set(d){d||(d="normal"),d==="normal"?delete l.dataset.flip:l.dataset.flip=d,u.show=`${c.get("Video Flip")}: ${c.get((0,i.capitalize)(d))}`,o.emit("flip",d)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ffXE3:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var i=r("../libs/screenfull"),a=s.interopDefault(i),o=r("../utils");function l(c){let{i18n:u,notice:d,template:{$video:f,$player:p}}=c;c.once("video:loadedmetadata",()=>{a.default.isEnabled?(a.default.on("change",()=>{c.emit("fullscreen",a.default.isFullscreen),a.default.isFullscreen?(c.state="fullscreen",(0,o.addClass)(p,"art-fullscreen")):(0,o.removeClass)(p,"art-fullscreen"),c.emit("resize")}),a.default.on("error",h=>{c.emit("fullscreenError",h)}),(0,o.def)(c,"fullscreen",{get:()=>a.default.isFullscreen,async set(h){h?await a.default.request(p):await a.default.exit()}})):f.webkitSupportsFullscreen?(c.on("document:webkitfullscreenchange",()=>{c.emit("fullscreen",c.fullscreen),c.emit("resize")}),(0,o.def)(c,"fullscreen",{get:()=>document.fullscreenElement===f,set(h){h?(c.state="fullscreen",f.webkitEnterFullscreen()):f.webkitExitFullscreen()}})):(0,o.def)(c,"fullscreen",{get:()=>!1,set(){d.show=u.get("Fullscreen Not Supported")}}),(0,o.def)(c,"fullscreen",(0,o.get)(c,"fullscreen"))})}},{"../libs/screenfull":"iSPAQ","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iSPAQ:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);let s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=(()=>{if(typeof document>"u")return!1;let l=s[0],c={};for(let u of s)if(u[1]in document){for(let[d,f]of u.entries())c[l[d]]=f;return c}return!1})(),a={change:i.fullscreenchange,error:i.fullscreenerror},o={request:(l=document.documentElement,c)=>new Promise((u,d)=>{let f=()=>{o.off("change",f),u()};o.on("change",f);let p=l[i.requestFullscreen](c);p instanceof Promise&&p.then(f).catch(d)}),exit:()=>new Promise((l,c)=>{if(!o.isFullscreen)return void l();let u=()=>{o.off("change",u),l()};o.on("change",u);let d=document[i.exitFullscreen]();d instanceof Promise&&d.then(u).catch(c)}),toggle:(l,c)=>o.isFullscreen?o.exit():o.request(l,c),onchange(l){o.on("change",l)},onerror(l){o.on("error",l)},on(l,c){let u=a[l];u&&document.addEventListener(u,c,!1)},off(l,c){let u=a[l];u&&document.removeEventListener(u,c,!1)},raw:i};Object.defineProperties(o,{isFullscreen:{get:()=>!!document[i.fullscreenElement]},element:{enumerable:!0,get:()=>document[i.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[i.fullscreenEnabled]}}),t.default=o},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"8tarF":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{constructor:l,template:{$container:c,$player:u}}=o,d="";(0,i.def)(o,"fullscreenWeb",{get:()=>(0,i.hasClass)(u,"art-fullscreen-web"),set(f){f?(d=u.style.cssText,l.FULLSCREEN_WEB_IN_BODY&&(0,i.append)(document.body,u),o.state="fullscreenWeb",(0,i.setStyle)(u,"width","100%"),(0,i.setStyle)(u,"height","100%"),(0,i.addClass)(u,"art-fullscreen-web"),o.emit("fullscreenWeb",!0)):(l.FULLSCREEN_WEB_IN_BODY&&(0,i.append)(c,u),d&&(u.style.cssText=d,d=""),(0,i.removeClass)(u,"art-fullscreen-web"),o.emit("fullscreenWeb",!1)),o.emit("resize")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f9syH:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{$video:l}=o.template;(0,i.def)(o,"loaded",{get:()=>o.loadedTime/l.duration}),(0,i.def)(o,"loadedTime",{get:()=>l.buffered.length?l.buffered.end(l.buffered.length-1):0})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dLuS7:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{icons:l,proxy:c,storage:u,template:{$player:d,$video:f}}=o,p=!1,h=0,g=0;function y(){let{$mini:v}=o.template;v&&((0,i.removeClass)(d,"art-mini"),(0,i.setStyle)(v,"display","none"),d.prepend(f),o.emit("mini",!1))}function b(v,S){o.playing?((0,i.setStyle)(v,"display","none"),(0,i.setStyle)(S,"display","flex")):((0,i.setStyle)(v,"display","flex"),(0,i.setStyle)(S,"display","none"))}function m(){let{$mini:v}=o.template,S=(0,i.getRect)(v),E=window.innerHeight-S.height-50,C=window.innerWidth-S.width-50;u.set("top",E),u.set("left",C),(0,i.setStyle)(v,"top",`${E}px`),(0,i.setStyle)(v,"left",`${C}px`)}(0,i.def)(o,"mini",{get:()=>(0,i.hasClass)(d,"art-mini"),set(v){if(v){o.state="mini",(0,i.addClass)(d,"art-mini");let S=function(){let{$mini:L}=o.template;if(L)return(0,i.append)(L,f),(0,i.setStyle)(L,"display","flex");{let I=(0,i.createElement)("div");(0,i.addClass)(I,"art-mini-popup"),(0,i.append)(document.body,I),o.template.$mini=I,(0,i.append)(I,f);let T=(0,i.append)(I,'<div class="art-mini-close"></div>');(0,i.append)(T,l.close),c(T,"click",y);let w=(0,i.append)(I,'<div class="art-mini-state"></div>'),R=(0,i.append)(w,l.play),_=(0,i.append)(w,l.pause);return c(R,"click",()=>o.play()),c(_,"click",()=>o.pause()),b(R,_),o.on("video:playing",()=>b(R,_)),o.on("video:pause",()=>b(R,_)),o.on("video:timeupdate",()=>b(R,_)),c(I,"mousedown",k=>{p=k.button===0,h=k.pageX,g=k.pageY}),o.on("document:mousemove",k=>{if(p){(0,i.addClass)(I,"art-mini-dragging");let N=k.pageX-h,M=k.pageY-g;(0,i.setStyle)(I,"transform",`translate(${N}px, ${M}px)`)}}),o.on("document:mouseup",()=>{if(p){p=!1,(0,i.removeClass)(I,"art-mini-dragging");let k=(0,i.getRect)(I);u.set("left",k.left),u.set("top",k.top),(0,i.setStyle)(I,"left",`${k.left}px`),(0,i.setStyle)(I,"top",`${k.top}px`),(0,i.setStyle)(I,"transform",null)}}),I}}(),E=u.get("top"),C=u.get("left");typeof E=="number"&&typeof C=="number"?((0,i.setStyle)(S,"top",`${E}px`),(0,i.setStyle)(S,"left",`${C}px`),(0,i.isInViewport)(S)||m()):m(),o.emit("mini",!0)}else y()}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d1F69:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{option:l,storage:c,template:{$video:u,$poster:d}}=o;for(let p in l.moreVideoAttr)o.attr(p,l.moreVideoAttr[p]);l.muted&&(o.muted=l.muted),l.volume&&(u.volume=(0,i.clamp)(l.volume,0,1));let f=c.get("volume");for(let p in typeof f=="number"&&(u.volume=(0,i.clamp)(f,0,1)),l.poster&&(0,i.setStyle)(d,"backgroundImage",`url(${l.poster})`),l.autoplay&&(u.autoplay=l.autoplay),l.playsInline&&(u.playsInline=!0,u["webkit-playsinline"]=!0),l.theme&&(l.cssVar["--art-theme"]=l.theme),l.cssVar)o.cssVar(p,l.cssVar[p]);o.url=l.url}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kewk9:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$video:l},i18n:c,notice:u}=o;(0,i.def)(o,"pause",{value(){let d=l.pause();return u.show=c.get("Pause"),o.emit("pause"),d}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4XzDs":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,notice:c,template:{$video:u}}=o;if(document.pictureInPictureEnabled){let{template:{$video:d},proxy:f,notice:p}=o;d.disablePictureInPicture=!1,(0,i.def)(o,"pip",{get:()=>document.pictureInPictureElement,set(h){h?(o.state="pip",d.requestPictureInPicture().catch(g=>{throw p.show=g,g})):document.exitPictureInPicture().catch(g=>{throw p.show=g,g})}}),f(d,"enterpictureinpicture",()=>{o.emit("pip",!0)}),f(d,"leavepictureinpicture",()=>{o.emit("pip",!1)})}else if(u.webkitSupportsPresentationMode){let{$video:d}=o.template;d.webkitSetPresentationMode("inline"),(0,i.def)(o,"pip",{get:()=>d.webkitPresentationMode==="picture-in-picture",set(f){f?(o.state="pip",d.webkitSetPresentationMode("picture-in-picture"),o.emit("pip",!0)):(d.webkitSetPresentationMode("inline"),o.emit("pip",!1))}})}else(0,i.def)(o,"pip",{get:()=>!1,set(){c.show=l.get("PIP Not Supported")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jphfi:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$video:l},i18n:c,notice:u}=o;(0,i.def)(o,"playbackRate",{get:()=>l.playbackRate,set(d){d?d!==l.playbackRate&&(l.playbackRate=d,u.show=`${c.get("Rate")}: ${d===1?c.get("Normal"):`${d}x`}`):o.playbackRate=1}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iNpeS:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"played",{get:()=>o.currentTime/o.duration})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aBIWL:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{$video:l}=o.template;(0,i.def)(o,"playing",{get:()=>typeof l.playing=="boolean"?l.playing:l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],hRBri:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,notice:c,option:u,constructor:{instances:d},template:{$video:f}}=o;(0,i.def)(o,"play",{async value(){let p=await f.play();if(c.show=l.get("Play"),o.emit("play"),u.mutex)for(let h=0;h<d.length;h++){let g=d[h];g!==o&&g.pause()}return p}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fgfXC:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$poster:l}}=o;(0,i.def)(o,"poster",{get:()=>{try{return l.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(c){(0,i.setStyle)(l,"backgroundImage",`url(${c})`)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"17rUP":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"quality",{set(l){let{controls:c,notice:u,i18n:d}=o,f=l.find(p=>p.default)||l[0];c.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(f==null?void 0:f.html)||"",selector:l,onSelect:async p=>(await o.switchQuality(p.url),u.show=`${d.get("Switch Video")}: ${p.html}`,p.html)})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"55qzI":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"rect",{get:()=>(0,i.getRect)(o.template.$player)});let l=["bottom","height","left","right","top","width"];for(let c=0;c<l.length;c++){let u=l[c];(0,i.def)(o,u,{get:()=>o.rect[u]})}(0,i.def)(o,"x",{get:()=>o.left+window.pageXOffset}),(0,i.def)(o,"y",{get:()=>o.top+window.pageYOffset})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bC6TG:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{notice:l,template:{$video:c}}=o,u=(0,i.createElement)("canvas");(0,i.def)(o,"getDataURL",{value:()=>new Promise((d,f)=>{try{u.width=c.videoWidth,u.height=c.videoHeight,u.getContext("2d").drawImage(c,0,0),d(u.toDataURL("image/png"))}catch(p){l.show=p,f(p)}})}),(0,i.def)(o,"getBlobUrl",{value:()=>new Promise((d,f)=>{try{u.width=c.videoWidth,u.height=c.videoHeight,u.getContext("2d").drawImage(c,0,0),u.toBlob(p=>{d(URL.createObjectURL(p))})}catch(p){l.show=p,f(p)}})}),(0,i.def)(o,"screenshot",{value:async d=>{let f=await o.getDataURL(),p=d||`artplayer_${(0,i.secondToTime)(c.currentTime)}`;return(0,i.download)(f,`${p}.png`),o.emit("screenshot",f),f}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],j8GRO:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{notice:l}=o;(0,i.def)(o,"seek",{set(c){o.currentTime=c,o.duration&&(l.show=`${(0,i.secondToTime)(o.currentTime)} / ${(0,i.secondToTime)(o.duration)}`),o.emit("seek",o.currentTime)}}),(0,i.def)(o,"forward",{set(c){o.seek=o.currentTime+c}}),(0,i.def)(o,"backward",{set(c){o.seek=o.currentTime-c}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cn7iR:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let l=["mini","pip","fullscreen","fullscreenWeb"];(0,i.def)(o,"state",{get:()=>l.find(c=>o[c])||"standard",set(c){for(let u=0;u<l.length;u++){let d=l[u];d!==c&&o[d]&&(o[d]=!1)}}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2k4nP":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{notice:l,i18n:c,template:u}=o;(0,i.def)(o,"subtitleOffset",{get:()=>{var d;return((d=u.$track)==null?void 0:d.offset)||0},set(d){let{cues:f}=o.subtitle;if(!u.$track||f.length===0)return;let p=(0,i.clamp)(d,-10,10);u.$track.offset=p;for(let h=0;h<f.length;h++){let g=f[h];g.originalStartTime=g.originalStartTime??g.startTime,g.originalEndTime=g.originalEndTime??g.endTime,g.startTime=(0,i.clamp)(g.originalStartTime+p,0,o.duration),g.endTime=(0,i.clamp)(g.originalEndTime+p,0,o.duration)}o.subtitle.update(),l.show=`${c.get("Subtitle Offset")}: ${d}s`,o.emit("subtitleOffset",d)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6SU6j":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){function l(c,u){return new Promise((d,f)=>{if(c===o.url)return;let{playing:p,aspectRatio:h,playbackRate:g}=o;o.pause(),o.url=c,o.notice.show="",o.once("video:error",f),o.once("video:loadedmetadata",()=>{o.currentTime=u}),o.once("video:canplay",async()=>{o.playbackRate=g,o.aspectRatio=h,p&&await o.play(),o.notice.show="",d()})})}(0,i.def)(o,"switchQuality",{value:c=>l(c,o.currentTime)}),(0,i.def)(o,"switchUrl",{value:c=>l(c,0)}),(0,i.def)(o,"switch",{set:o.switchUrl})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7iMuh":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"theme",{get:()=>o.cssVar("--art-theme"),set(l){o.cssVar("--art-theme",l)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6P0RS":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{events:l,option:c,template:{$progress:u,$video:d}}=o,f=null,p=null,h=!1,g=!1,y=!1;l.hover(u,()=>{y=!0},()=>{y=!1}),o.on("setBar",async(b,m,v)=>{var I;let S=(I=o.controls)==null?void 0:I.thumbnails,{url:E,scale:C}=c.thumbnails;if(!S||!E)return;let L=b==="played"&&v&&i.isMobile;if(b==="hover"||L){if(h||(h=!0,p=await(0,i.loadImg)(E,C),g=!0),!g||!y)return;let T=u.clientWidth*m;(0,i.setStyle)(S,"display","flex"),T>0&&T<u.clientWidth?function(w){var $;let R=($=o.controls)==null?void 0:$.thumbnails;if(!R)return;let{number:_,column:k,width:N,height:M,scale:O}=c.thumbnails,j=N*O||p.naturalWidth/k,P=M*O||j/(d.videoWidth/d.videoHeight),F=Math.floor(w/(u.clientWidth/_)),B=Math.ceil(F/k)-1;(0,i.setStyle)(R,"backgroundImage",`url(${p.src})`),(0,i.setStyle)(R,"height",`${P}px`),(0,i.setStyle)(R,"width",`${j}px`),(0,i.setStyle)(R,"backgroundPosition",`-${(F%k||k-1)*j}px -${B*P}px`),w<=j/2?(0,i.setStyle)(R,"left",0):w>u.clientWidth-j/2?(0,i.setStyle)(R,"left",`${u.clientWidth-j}px`):(0,i.setStyle)(R,"left",`${w-j/2}px`)}(T):i.isMobile||(0,i.setStyle)(S,"display","none"),L&&(clearTimeout(f),f=setTimeout(()=>{(0,i.setStyle)(S,"display","none")},500))}}),(0,i.def)(o,"thumbnails",{get:()=>o.option.thumbnails,set(b){b.url&&!o.option.isLive&&(o.option.thumbnails=b,clearTimeout(f),f=null,p=null,h=!1,g=!1)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eNi78:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"toggle",{value:()=>o.playing?o.pause():o.play()})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7AUBD":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){(0,i.def)(o,"type",{get:()=>o.option.type,set(l){o.option.type=l}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cnlLL:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{option:l,template:{$video:c}}=o;(0,i.def)(o,"url",{get:()=>c.src,async set(u){if(u){let d=o.url,f=l.type||(0,i.getExt)(u),p=l.customType[f];f&&p?(await(0,i.sleep)(),o.loading.show=!0,p.call(o,c,u,o)):(URL.revokeObjectURL(d),c.src=u),d!==o.url&&(o.option.url=u,o.isReady&&d&&o.once("video:canplay",()=>{o.emit("restart",u)}))}else await(0,i.sleep)(),o.loading.show=!0}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iX66j:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{template:{$video:l},i18n:c,notice:u,storage:d}=o;(0,i.def)(o,"volume",{get:()=>l.volume||0,set:f=>{l.volume=(0,i.clamp)(f,0,1),u.show=`${c.get("Volume")}: ${Number.parseInt(100*l.volume,10)}`,l.volume!==0&&d.set("volume",l.volume)}}),(0,i.def)(o,"muted",{get:()=>l.muted,set:f=>{l.muted=f,o.emit("muted",f)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cjxJL:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("../utils"),a=r("./autoOrientation"),o=s.interopDefault(a),l=r("./autoPlayback"),c=s.interopDefault(l),u=r("./fastForward"),d=s.interopDefault(u),f=r("./lock"),p=s.interopDefault(f),h=r("./miniProgressBar"),g=s.interopDefault(h);t.default=class{constructor(y){this.art=y,this.id=0;let{option:b}=y;b.miniProgressBar&&!b.isLive&&this.add(g.default),b.lock&&i.isMobile&&this.add(p.default),b.autoPlayback&&!b.isLive&&this.add(c.default),b.autoOrientation&&i.isMobile&&this.add(o.default),b.fastForward&&i.isMobile&&!b.isLive&&this.add(d.default);for(let m=0;m<b.plugins.length;m++)this.add(b.plugins[m])}add(y){this.id+=1;let b=y.call(this.art,this.art);return b instanceof Promise?b.then(m=>this.next(y,m)):this.next(y,b)}next(y,b){let m=b&&b.name||y.name||`plugin${this.id}`;return(0,i.errorHandle)(!(0,i.has)(this,m),`Cannot add a plugin that already has the same name: ${m}`),(0,i.def)(this,m,{value:b}),this}}},{"../utils":"aBlEo","./autoOrientation":"jb9jb","./autoPlayback":"21HWM","./fastForward":"4sxBO","./lock":"fjy9V","./miniProgressBar":"d0xRp","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jb9jb:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{notice:l,constructor:c,template:{$player:u,$video:d}}=o,f="art-auto-orientation",p="art-auto-orientation-fullscreen",h=!1;function g(){let{videoWidth:y,videoHeight:b}=d,m=document.documentElement.clientWidth,v=document.documentElement.clientHeight;return y>b&&m<v||y<b&&m>v}return o.on("fullscreenWeb",y=>{y?g()&&setTimeout(()=>{o.fullscreenWeb&&!(0,i.hasClass)(u,f)&&function(){let b=document.documentElement.clientWidth,m=document.documentElement.clientHeight;(0,i.setStyle)(u,"width",`${m}px`),(0,i.setStyle)(u,"height",`${b}px`),(0,i.setStyle)(u,"transform-origin","0 0"),(0,i.setStyle)(u,"transform",`rotate(90deg) translate(0, -${b}px)`),(0,i.addClass)(u,f),o.isRotate=!0,o.emit("resize")}()},Number(c.AUTO_ORIENTATION_TIME??0)):(0,i.hasClass)(u,f)&&((0,i.setStyle)(u,"width",""),(0,i.setStyle)(u,"height",""),(0,i.setStyle)(u,"transform-origin",""),(0,i.setStyle)(u,"transform",""),(0,i.removeClass)(u,f),o.isRotate=!1,o.emit("resize"))}),o.on("fullscreen",async y=>{var m;let b=!!((m=screen==null?void 0:screen.orientation)!=null&&m.lock);if(y){if(b&&g())try{let v=screen.orientation.type.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(v),h=!0,(0,i.addClass)(u,p)}catch(v){h=!1,l.show=v}}else if((0,i.hasClass)(u,p)&&(0,i.removeClass)(u,p),b&&h){try{screen.orientation.unlock()}catch{}h=!1}}),{name:"autoOrientation",get state(){return(0,i.hasClass)(u,f)}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"21HWM":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,icons:c,storage:u,constructor:d,proxy:f,template:{$poster:p}}=o,h=o.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),g=(0,i.query)(".art-auto-playback-last",h),y=(0,i.query)(".art-auto-playback-jump",h),b=(0,i.query)(".art-auto-playback-close",h);(0,i.append)(b,c.close);let m=null;function v(){let S=(u.get("times")||{})[o.option.id||o.option.url];clearTimeout(m),(0,i.setStyle)(h,"display","none"),S&&S>=d.AUTO_PLAYBACK_MIN&&((0,i.setStyle)(h,"display","flex"),g.textContent=`${l.get("Last Seen")} ${(0,i.secondToTime)(S)}`,y.textContent=l.get("Jump Play"),f(b,"click",()=>{(0,i.setStyle)(h,"display","none")}),f(y,"click",()=>{o.seek=S,o.play(),(0,i.setStyle)(p,"display","none"),(0,i.setStyle)(h,"display","none")}),o.once("video:timeupdate",()=>{m=setTimeout(()=>{(0,i.setStyle)(h,"display","none")},d.AUTO_PLAYBACK_TIMEOUT)}))}return o.on("video:timeupdate",()=>{if(o.playing){let S=u.get("times")||{},E=Object.keys(S);E.length>d.AUTO_PLAYBACK_MAX&&delete S[E[0]],S[o.option.id||o.option.url]=o.currentTime,u.set("times",S)}}),o.on("ready",v),o.on("restart",v),{name:"auto-playback",get times(){return u.get("times")||{}},clear:()=>u.del("times"),delete(S){let E=u.get("times")||{};return delete E[S],u.set("times",E),E}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4sxBO":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{constructor:l,proxy:c,template:{$player:u,$video:d}}=o,f=null,p=!1,h=1,g=()=>{clearTimeout(f),p&&(p=!1,o.playbackRate=h,(0,i.removeClass)(u,"art-fast-forward"))};return c(d,"touchstart",y=>{y.touches.length===1&&o.playing&&!o.isLock&&(f=setTimeout(()=>{p=!0,h=o.playbackRate,o.playbackRate=l.FAST_FORWARD_VALUE,(0,i.addClass)(u,"art-fast-forward")},l.FAST_FORWARD_TIME))}),o.on("document:touchmove",g),o.on("document:touchend",g),{name:"fastForward",get state(){return(0,i.hasClass)(u,"art-fast-forward")}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fjy9V:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{layers:l,icons:c,template:{$player:u}}=o;function d(){return(0,i.hasClass)(u,"art-lock")}function f(){(0,i.addClass)(u,"art-lock"),o.isLock=!0,o.emit("lock",!0)}function p(){(0,i.removeClass)(u,"art-lock"),o.isLock=!1,o.emit("lock",!1)}return l.add({name:"lock",mounted(h){let g=(0,i.append)(h,c.lock),y=(0,i.append)(h,c.unlock);(0,i.setStyle)(g,"display","none"),o.on("lock",b=>{b?((0,i.setStyle)(g,"display","inline-flex"),(0,i.setStyle)(y,"display","none")):((0,i.setStyle)(g,"display","none"),(0,i.setStyle)(y,"display","inline-flex"))})},click(){d()?p():f()}}),{name:"lock",get state(){return d()},set state(h){h?f():p()}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d0xRp:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){return o.on("control",l=>{l?(0,i.removeClass)(o.template.$player,"art-mini-progress-bar"):(0,i.addClass)(o.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bwLGT:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("../utils"),a=r("../utils/component"),o=s.interopDefault(a),l=r("./aspectRatio"),c=s.interopDefault(l),u=r("./flip"),d=s.interopDefault(u),f=r("./playbackRate"),p=s.interopDefault(f),h=r("./subtitleOffset"),g=s.interopDefault(h);class y extends o.default{constructor(m){super(m);let{option:v,controls:S,template:{$setting:E}}=m;this.name="setting",this.$parent=E,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...v.settings],v.setting&&(this.format(),this.render(),m.on("blur",()=>{this.show&&(this.show=!1,this.render())}),m.on("focus",C=>{let L=(0,i.includeFromEvent)(C,S.setting),I=(0,i.includeFromEvent)(C,this.$parent);!this.show||L||I||(this.show=!1,this.render())}),m.on("resize",()=>this.resize()))}get builtin(){let m=[],{option:v}=this.art;return v.playbackRate&&m.push((0,p.default)(this.art)),v.aspectRatio&&m.push((0,c.default)(this.art)),v.flip&&m.push((0,d.default)(this.art)),v.subtitleOffset&&m.push((0,g.default)(this.art)),m}traverse(m,v=this.option){var S;for(let E=0;E<v.length;E++){let C=v[E];m(C),(S=C.selector)!=null&&S.length&&this.traverse(m,C.selector)}}check(m){m.$parent.tooltip=m.html,this.traverse(v=>{v.default=v===m,v.default&&v.$item&&(0,i.inverseClass)(v.$item,"art-current")},m.$option),this.render(m.$parents)}format(m=this.option,v,S,E=[]){for(let C=0;C<m.length;C++){let L=m[C];if(L!=null&&L.name?((0,i.errorHandle)(!E.includes(L.name),`The [${L.name}] already exists in [setting]`),E.push(L.name)):L.name=`setting-${this.id++}`,!L.$formatted){(0,i.def)(L,"$parent",{get:()=>v}),(0,i.def)(L,"$parents",{get:()=>S}),(0,i.def)(L,"$option",{get:()=>m});let I=[];(0,i.def)(L,"$events",{get:()=>I}),(0,i.def)(L,"$formatted",{get:()=>!0})}this.format(L.selector||[],L,m,E)}this.option=m}find(m=""){let v=null;return this.traverse(S=>{S.name===m&&(v=S)}),v}resize(){var L,I;let{controls:m,constructor:{SETTING_WIDTH:v,SETTING_ITEM_HEIGHT:S},template:{$player:E,$setting:C}}=this.art;if(m.setting&&this.show){let T=((I=(L=this.active[0])==null?void 0:L.$parent)==null?void 0:I.width)||v,{left:w,width:R}=(0,i.getRect)(m.setting),{left:_,width:k}=(0,i.getRect)(E),N=w-_+R/2-T/2,M=this.active===this.option?this.active.length*S:(this.active.length+1)*S;if((0,i.setStyle)(C,"height",`${M}px`),(0,i.setStyle)(C,"width",`${T}px`),this.art.isRotate||i.isMobile)return;N+T>k?((0,i.setStyle)(C,"left",null),(0,i.setStyle)(C,"right",null)):((0,i.setStyle)(C,"left",`${N}px`),(0,i.setStyle)(C,"right","auto"))}}inactivate(m){for(let v=0;v<m.$events.length;v++)this.art.events.remove(m.$events[v]);m.$events.length=0}remove(m){let v=this.find(m);(0,i.errorHandle)(v,`Can't find [${m}] in the [setting]`);let S=v.$option.indexOf(v);v.$option.splice(S,1),this.inactivate(v),v.$item&&(0,i.remove)(v.$item),this.render()}update(m){let v=this.find(m.name);return v?(this.inactivate(v),Object.assign(v,m),this.format(),this.createItem(v,!0),this.render(),v):this.add(m)}add(m,v=this.option){return v.push(m),this.format(),this.createItem(m),this.render(),m}createHeader(m){if(!this.cache.has(m.$option))return;let v=this.cache.get(m.$option),{proxy:S,icons:{arrowLeft:E},constructor:{SETTING_ITEM_HEIGHT:C}}=this.art,L=(0,i.createElement)("div");(0,i.setStyle)(L,"height",`${C}px`),(0,i.addClass)(L,"art-setting-item"),(0,i.addClass)(L,"art-setting-item-back");let I=(0,i.append)(L,'<div class="art-setting-item-left"></div>'),T=(0,i.createElement)("div");(0,i.addClass)(T,"art-setting-item-left-icon"),(0,i.append)(T,E),(0,i.append)(I,T),(0,i.append)(I,m.$parent.html);let w=S(L,"click",()=>this.render(m.$parents));m.$parent.$events.push(w),(0,i.append)(v,L)}createItem(m,v=!1){var O,j;if(!this.cache.has(m.$option))return;let S=this.cache.get(m.$option),E=m.$item,C="selector";(0,i.has)(m,"switch")&&(C="switch"),(0,i.has)(m,"range")&&(C="range"),(0,i.has)(m,"onClick")&&(C="button");let{icons:L,proxy:I,constructor:T}=this.art,w=(0,i.createElement)("div");(0,i.addClass)(w,"art-setting-item"),(0,i.setStyle)(w,"height",`${T.SETTING_ITEM_HEIGHT}px`),w.dataset.name=m.name||"",w.dataset.value=m.value||"";let R=(0,i.append)(w,'<div class="art-setting-item-left"></div>'),_=(0,i.append)(w,'<div class="art-setting-item-right"></div>'),k=(0,i.createElement)("div");switch((0,i.addClass)(k,"art-setting-item-left-icon"),C){case"button":case"switch":case"range":(0,i.append)(k,m.icon||L.config);break;case"selector":(O=m.selector)!=null&&O.length?(0,i.append)(k,m.icon||L.config):(0,i.append)(k,L.check)}(0,i.append)(R,k),(0,i.def)(m,"$icon",{configurable:!0,get:()=>k}),(0,i.def)(m,"icon",{configurable:!0,get:()=>k.innerHTML,set(P){k.innerHTML="",(0,i.append)(k,P)}});let N=(0,i.createElement)("div");(0,i.addClass)(N,"art-setting-item-left-text"),(0,i.append)(N,m.html||""),(0,i.append)(R,N),(0,i.def)(m,"$html",{configurable:!0,get:()=>N}),(0,i.def)(m,"html",{configurable:!0,get:()=>N.innerHTML,set(P){N.innerHTML="",(0,i.append)(N,P)}});let M=(0,i.createElement)("div");switch((0,i.addClass)(M,"art-setting-item-right-tooltip"),(0,i.append)(M,m.tooltip||""),(0,i.append)(_,M),(0,i.def)(m,"$tooltip",{configurable:!0,get:()=>M}),(0,i.def)(m,"tooltip",{configurable:!0,get:()=>M.innerHTML,set(P){M.innerHTML="",(0,i.append)(M,P)}}),C){case"switch":{let P=(0,i.createElement)("div");(0,i.addClass)(P,"art-setting-item-right-icon");let F=(0,i.append)(P,L.switchOn),B=(0,i.append)(P,L.switchOff);(0,i.setStyle)(m.switch?B:F,"display","none"),(0,i.append)(_,P),(0,i.def)(m,"$switch",{configurable:!0,get:()=>P});let $=m.switch;(0,i.def)(m,"switch",{configurable:!0,get:()=>$,set(G){$=G,G?((0,i.setStyle)(B,"display","none"),(0,i.setStyle)(F,"display",null)):((0,i.setStyle)(B,"display",null),(0,i.setStyle)(F,"display","none"))}});break}case"range":{let P=(0,i.createElement)("div");(0,i.addClass)(P,"art-setting-item-right-icon");let F=(0,i.append)(P,'<input type="range">');F.value=m.range[0],F.min=m.range[1],F.max=m.range[2],F.step=m.range[3],(0,i.addClass)(F,"art-setting-range"),(0,i.append)(_,P),(0,i.def)(m,"$range",{configurable:!0,get:()=>F});let B=[...m.range];(0,i.def)(m,"range",{configurable:!0,get:()=>B,set($){B=[...$],F.value=$[0],F.min=$[1],F.max=$[2],F.step=$[3]}})}break;case"selector":if((j=m.selector)!=null&&j.length){let P=(0,i.createElement)("div");(0,i.addClass)(P,"art-setting-item-right-icon"),(0,i.append)(P,L.arrowRight),(0,i.append)(_,P)}}switch(C){case"switch":if(m.onSwitch){let P=I(w,"click",async F=>{m.switch=await m.onSwitch.call(this.art,m,w,F)});m.$events.push(P)}break;case"range":if(m.$range){if(m.onRange){let P=I(m.$range,"change",async F=>{m.range[0]=m.$range.valueAsNumber,m.tooltip=await m.onRange.call(this.art,m,w,F)});m.$events.push(P)}if(m.onChange){let P=I(m.$range,"input",async F=>{m.range[0]=m.$range.valueAsNumber,m.tooltip=await m.onChange.call(this.art,m,w,F)});m.$events.push(P)}}break;case"selector":{let P=I(w,"click",async F=>{var B;(B=m.selector)!=null&&B.length?this.render(m.selector):(this.check(m),m.$parent.onSelect&&(m.$parent.tooltip=await m.$parent.onSelect.call(this.art,m,w,F)))});m.$events.push(P),m.default&&(0,i.addClass)(w,"art-current")}break;case"button":if(m.onClick){let P=I(w,"click",async F=>{m.tooltip=await m.onClick.call(this.art,m,w,F)});m.$events.push(P)}}(0,i.def)(m,"$item",{configurable:!0,get:()=>w}),v?(0,i.replaceElement)(w,E):(0,i.append)(S,w),m.mounted&&setTimeout(()=>m.mounted.call(this.art,m.$item,m),0)}render(m=this.option){var v;if(this.active=m,this.cache.has(m)){let S=this.cache.get(m);(0,i.inverseClass)(S,"art-current")}else{let S=(0,i.createElement)("div");this.cache.set(m,S),(0,i.addClass)(S,"art-setting-panel"),(0,i.append)(this.$parent,S),(0,i.inverseClass)(S,"art-current"),(v=m[0])!=null&&v.$parent&&this.createHeader(m[0]);for(let E=0;E<m.length;E++)this.createItem(m[E])}this.resize()}}t.default=y},{"../utils":"aBlEo","../utils/component":"idCEj","./aspectRatio":"cb8VK","./flip":"ljJTO","./playbackRate":"3QcSQ","./subtitleOffset":"eB5hg","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cb8VK:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){let{i18n:o,icons:l,constructor:{SETTING_ITEM_WIDTH:c,ASPECT_RATIO:u}}=a;function d(p){return p==="default"?o.get("Default"):p}function f(){let p=a.setting.find(`aspect-ratio-${a.aspectRatio}`);a.setting.check(p)}return{width:c,name:"aspect-ratio",html:o.get("Aspect Ratio"),icon:l.aspectRatio,tooltip:d(a.aspectRatio),selector:u.map(p=>({value:p,name:`aspect-ratio-${p}`,default:p===a.aspectRatio,html:d(p)})),onSelect:p=>(a.aspectRatio=p.value,p.html),mounted:()=>{f(),a.on("aspectRatio",()=>f())}}}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ljJTO:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>a);var i=r("../utils");function a(o){let{i18n:l,icons:c,constructor:{SETTING_ITEM_WIDTH:u,FLIP:d}}=o;function f(h){return l.get((0,i.capitalize)(h))}function p(){let h=o.setting.find(`flip-${o.flip}`);o.setting.check(h)}return{width:u,name:"flip",html:l.get("Video Flip"),tooltip:f(o.flip),icon:c.flip,selector:d.map(h=>({value:h,name:`flip-${h}`,default:h===o.flip,html:f(h)})),onSelect:h=>(o.flip=h.value,h.html),mounted:()=>{p(),o.on("flip",()=>p())}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3QcSQ":[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){let{i18n:o,icons:l,constructor:{SETTING_ITEM_WIDTH:c,PLAYBACK_RATE:u}}=a;function d(p){return p===1?o.get("Normal"):p.toFixed(1)}function f(){let p=a.setting.find(`playback-rate-${a.playbackRate}`);a.setting.check(p)}return{width:c,name:"playback-rate",html:o.get("Play Speed"),tooltip:d(a.playbackRate),icon:l.playbackRate,selector:u.map(p=>({value:p,name:`playback-rate-${p}`,default:p===a.playbackRate,html:d(p)})),onSelect:p=>(a.playbackRate=p.value,p.html),mounted:()=>{f(),a.on("video:ratechange",()=>f())}}}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eB5hg:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(a){let{i18n:o,icons:l,constructor:c}=a;return{width:c.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:o.get("Subtitle Offset"),icon:l.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:u=>(a.subtitleOffset=u.range[0],`${u.range[0]}s`),mounted:(u,d)=>{a.on("subtitleOffset",f=>{d.$range.value=f,d.tooltip=`${f}s`})}}}s.defineInteropFlag(t),s.export(t,"default",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kwqbK:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(s){try{let i=JSON.parse(window.localStorage.getItem(this.name))||{};return s?i[s]:i}catch{return s?this.settings[s]:this.settings}}set(s,i){try{let a=Object.assign({},this.get(),{[s]:i});window.localStorage.setItem(this.name,JSON.stringify(a))}catch{this.settings[s]=i}}del(s){try{let i=this.get();delete i[s],window.localStorage.setItem(this.name,JSON.stringify(i))}catch{delete this.settings[s]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],k5613:[function(r,e,t,n){var s=r("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var i=r("option-validator"),a=s.interopDefault(i),o=r("./scheme"),l=s.interopDefault(o),c=r("./utils"),u=r("./utils/component"),d=s.interopDefault(u);class f extends d.default{constructor(h){super(h),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(h.option.subtitle);let g=!1;h.on("video:timeupdate",()=>{if(!this.url)return;let y=this.art.template.$video.webkitDisplayingFullscreen;typeof y=="boolean"&&y!==g&&(g=y,this.createTrack(y?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(h){this.switch(h)}get textTrack(){var h,g;return(g=(h=this.art.template.$video)==null?void 0:h.textTracks)==null?void 0:g[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(h,g){let{$subtitle:y}=this.art.template;return typeof h=="object"?(0,c.setStyles)(y,h):(0,c.setStyle)(y,h,g)}update(){let{option:{subtitle:h},template:{$subtitle:g}}=this.art;g.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),g.innerHTML=this.activeCues.map((y,b)=>y.text.split(/\r?\n/).filter(m=>m.trim()).map(m=>`<div class="art-subtitle-line" data-group="${b}">${h.escape?(0,c.escape)(m):m}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(h,g={}){let{i18n:y,notice:b,option:m}=this.art,v={...m.subtitle,...g,url:h},S=await this.init(v);return g.name&&(b.show=`${y.get("Switch Subtitle")}: ${g.name}`),S}createTrack(h,g){let{template:y,proxy:b,option:m}=this.art,{$video:v,$track:S}=y,E=(0,c.createElement)("track");E.default=!0,E.kind=h,E.src=g,E.label=m.subtitle.name||"Artplayer",E.track.mode="hidden",E.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),S.onload=null,(0,c.remove)(S),(0,c.append)(v,E),y.$track=E,this.destroyEvent=b(this.textTrack,"cuechange",()=>this.update())}async init(h){let{notice:g,template:{$subtitle:y}}=this.art;return this.textTrack?((0,a.default)(h,l.default.subtitle),h.url?(this.option=h,this.style(h.style),fetch(h.url).then(b=>b.arrayBuffer()).then(b=>{let m=new TextDecoder(h.encoding).decode(b);switch(h.type||(0,c.getExt)(h.url)){case"srt":{let v=(0,c.srtToVtt)(m),S=h.onVttLoad(v);return(0,c.vttToBlob)(S)}case"ass":{let v=(0,c.assToVtt)(m),S=h.onVttLoad(v);return(0,c.vttToBlob)(S)}case"vtt":{let v=h.onVttLoad(m);return(0,c.vttToBlob)(v)}default:return h.url}}).then(b=>(y.innerHTML="",this.url===b||(URL.revokeObjectURL(this.url),this.createTrack("metadata",b)),b)).catch(b=>{throw y.innerHTML="",g.show=b,b})):void 0):null}}t.default=f},{"option-validator":"g7VGh","./scheme":"biLjm","./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fwOA1:[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=r("../package.json"),i=r("./utils");class a{constructor(l){this.art=l;let{option:c,constructor:u}=l;c.container instanceof Element?this.$container=c.container:(this.$container=(0,i.query)(c.container),(0,i.errorHandle)(this.$container,`No container element found by ${c.container}`)),(0,i.errorHandle)((0,i.supportsFlex)(),"The current browser does not support flex layout");let d=this.$container.tagName.toLowerCase();(0,i.errorHandle)(d==="div",`Unsupported container element type, only support 'div' but got '${d}'`),(0,i.errorHandle)(u.instances.every(f=>f.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=l.id,this.init()}static get html(){return`<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">${s.version}</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>`}query(l){return(0,i.query)(l,this.$container)}init(){let{option:l}=this.art;if(l.useSSR||(this.$container.innerHTML=a.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),l.proxy){let c=l.proxy.call(this.art,this.art);(0,i.errorHandle)(c instanceof HTMLVideoElement||c instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,i.replaceElement)(c,this.$video),c.className="art-video",this.$video=c}l.backdrop&&(0,i.addClass)(this.$player,"art-backdrop"),i.isMobile&&(0,i.addClass)(this.$player,"art-mobile")}destroy(l){l?this.$container.innerHTML="":(0,i.addClass)(this.$player,"art-destroy")}}t.default=a},{"../package.json":"lh3R5","./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4NM7P":[function(r,e,t,n){r("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default=class{on(s,i,a){let o=this.e||(this.e={});return(o[s]||(o[s]=[])).push({fn:i,ctx:a}),this}once(s,i,a){let o=this;function l(...c){o.off(s,l),i.apply(a,c)}return l._=i,this.on(s,l,a)}emit(s,...i){let a=((this.e||(this.e={}))[s]||[]).slice();for(let o=0;o<a.length;o+=1)a[o].fn.apply(a[o].ctx,i);return this}off(s,i){let a=this.e||(this.e={}),o=a[s],l=[];if(o&&i)for(let c=0,u=o.length;c<u;c+=1)o[c].fn!==i&&o[c].fn._!==i&&l.push(o[c]);return l.length?a[s]=l:delete a[s],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}]},["esqvp"],"esqvp","parcelRequire4dc0",{});let{default:Pr}=parcelRequire4dc0("esqvp");const Mx=`
.artplayer-plugin-chapter .art-control-progress-inner {
    height: 100% !important;
    background-color: transparent !important;
}
.artplayer-plugin-chapter .art-control-progress-inner > .art-progress-hover,
.artplayer-plugin-chapter .art-control-progress-inner > .art-progress-loaded,
.artplayer-plugin-chapter .art-control-progress-inner > .art-progress-played {
    display: none !important;
}
.artplayer-plugin-chapter .art-control-thumbnails {
    bottom: calc(var(--art-bottom-gap) + 64px) !important;
}
.artplayer-plugin-chapter .art-chapters {
    position: absolute;
    z-index: 0;
    inset: 0;
    display: flex;
    align-items: center;
    gap: 4px;
    height: 100%;
    transform: scaleY(1.25);
}
.artplayer-plugin-chapter .art-chapters .art-chapter {
    display: flex;
    align-items: center;
    height: 100%;
}
.artplayer-plugin-chapter .art-chapters .art-chapter .art-chapter-inner {
    position: relative;
    cursor: pointer;
    width: 100%;
    height: 50%;
    border-radius: 10px;
    overflow: hidden;
    transition: height var(--art-transition-duration) ease;
    background-color: var(--art-progress-color);
}
.artplayer-plugin-chapter .art-chapters .art-chapter:hover .art-chapter-inner {
    height: 100%;
}
.artplayer-plugin-chapter .art-chapter-title {
    display: none;
    position: absolute;
    z-index: 70;
    top: -50px;
    left: 0;
    padding: 3px 5px;
    line-height: 1;
    font-size: 14px;
    border-radius: var(--art-border-radius);
    white-space: nowrap;
    background-color: var(--art-tip-background);
}
`;function FE(r={}){return e=>{const{$player:t}=e.template,{setStyle:n,append:s,clamp:i,query:a,isMobile:o,addClass:l,removeClass:c}=e.constructor.utils,u=`
                <div class="art-chapter">
                    <div class="art-chapter-inner">
                        <div class="art-progress-hover"></div>
                        <div class="art-progress-loaded"></div>
                        <div class="art-progress-played"></div>
                    </div>
                </div>
        `;let d=null,f=[];const p=e.query(".art-control-progress"),h=e.query(".art-control-progress-inner"),g=s(h,'<div class="art-chapters"></div>'),y=s(h,'<div class="art-chapter-title"></div>');function b({$chapter:v,width:S}){const E=v.dataset.title.trim();if(E){n(y,"display","flex"),y.innerText=E;const C=y.clientWidth;S<=C/2?n(y,"left",0):S>h.clientWidth-C/2?n(y,"left",`${h.clientWidth-C}px`):n(y,"left",`${S-C/2}px`)}else n(y,"display","none")}function m(v=[]){if(f=[],g.innerText="",c(t,"artplayer-plugin-chapter"),!!Array.isArray(v)&&v.length&&e.duration){v=v.sort((S,E)=>S.start-E.start);for(let S=0;S<v.length;S++){const E=v[S],C=v[S+1];if(E.end===1/0&&(E.end=e.duration),typeof E.start!="number"||typeof E.end!="number"||typeof E.title!="string")throw new Error("Illegal chapter data type");if(E.start<0||E.end>Math.ceil(e.duration)||E.start>=E.end)throw new Error("Illegal chapter time point");if(C&&E.end>C.start)throw new Error("Illegal chapter time point")}v[0].start>0&&v.unshift({start:0,end:v[0].start,title:""}),v[v.length-1].end<e.duration&&v.push({start:v[v.length-1].end,end:e.duration,title:""});for(let S=0;S<v.length-1;S++)v[S].end!==v[S+1].start&&v.splice(S+1,0,{start:v[S].end,end:v[S+1].start,title:""});f=v.map(S=>{const E=s(g,u),C=i(S.start,0,e.duration),L=i(S.end,0,e.duration),I=L-C,T=I/e.duration;return E.dataset.start=C,E.dataset.end=L,E.dataset.duration=I,E.dataset.title=S.title.trim(),E.style.width=`${T*100}%`,{$chapter:E,$hover:a(".art-progress-hover",E),$loaded:a(".art-progress-loaded",E),$played:a(".art-progress-played",E)}}),l(t,"artplayer-plugin-chapter"),e.emit("setBar","loaded",e.loaded||0)}}return e.on("setBar",(v,S,E)=>{if(f.length)for(let C=0;C<f.length;C++){const{$chapter:L,$loaded:I,$played:T,$hover:w}=f[C],R={hover:w,loaded:I,played:T}[v];if(!R)return;const _=g.clientWidth*S,k=e.duration*S,N=parseFloat(L.dataset.duration),M=parseFloat(L.dataset.start),O=parseFloat(L.dataset.end);if(k<M&&n(R,"width",0),k>O&&n(R,"width","100%"),k>=M&&k<=O){const j=(k-M)/N;n(R,"width",`${j*100}%`),o?v==="played"&&E&&(b({$chapter:L,width:_}),clearTimeout(d),d=setTimeout(()=>{n(y,"display","none")},500)):v==="hover"&&b({$chapter:L,width:_})}}}),o||e.proxy(p,"mouseleave",()=>{f.length&&n(y,"display","none")}),e.once("video:loadedmetadata",()=>m(r.chapters)),{name:"artplayerPluginChapter",update:({chapters:v})=>m(v)}}}if(typeof document<"u"){const r="artplayer-plugin-chapter",e=document.getElementById(r);if(e)e.textContent=Mx;else{const t=document.createElement("style");t.id=r,t.textContent=Mx,document.head.appendChild(t)}}typeof window<"u"&&(window.artplayerPluginChapter=FE);function rO(r){function e(t){if(!Array.isArray(t))throw new TypeError("Option must be an array of time ranges");t.forEach((n,s)=>{if(!Array.isArray(n)||n.length!==2)throw new TypeError(`Range at index ${s} must be an array of two numbers`);const[i,a]=n;if(typeof i!="number"||typeof a!="number"&&a!==1/0)throw new TypeError(`Range at index ${s} must contain valid numbers or Infinity`);if(i>a&&a!==1/0)throw new RangeError(`In range at index ${s}, start time must be less than end time`);if(s>0){const o=t[s-1][1];if(o!==1/0&&i<=o)throw new RangeError(`Range at index ${s} overlaps with the previous range`)}})}return e(r),t=>{let n=r;function s(){const a=t.duration;n=n.map(([o,l])=>[o,l===1/0?a:l])}function i(){const a=t.currentTime;for(const[o,l]of n)if(a>=o&&a<l){t.seek=l;break}}return t.on("video:timeupdate",i),t.on("video:loadedmetadata",s),{name:"autoSkip",update(a=[]){e(a),n=a,s()}}}}function nO(r,e,t){return r.length>e?String(r):(e=e-r.length,e>t.length&&(t+=t.repeat(e/t.length)),String(r)+t.slice(0,e))}function Fx(r){var e=r.split("."),t=e[0].split(":")||[],n=nO(e[1]||"0",3,"0"),s=Number(n)/1e3,i=Number(t[t.length-3]||0)*3600,a=Number(t[t.length-2]||0)*60,o=Number(t[t.length-1]||0);return i+a+o+s}async function sO(r=""){let t=(await(await fetch(r)).text()).split(/\r?\n/).filter(l=>l.trim());const n=[],s=t[0].trim().toUpperCase()==="WEBVTT";let i=0,a=2;const o=/^\d+$/;if(!s&&o.test(t[0].trim()))a=3,i=1;else if(s){const l=t[1];l&&o.test(l.trim())?(a=3,i=2):(i=1,a=2)}for(let l=i;l<t.length;l+=a){const c=t[l],u=t[l+1];if(!u.trim())continue;const d=/((?:[0-9]{2}:)?(?:[0-9]{2}:)?[0-9]{2}(?:.[0-9]{3})?)(?: ?--> ?)((?:[0-9]{2}:)?(?:[0-9]{2}:)?[0-9]{2}(?:.[0-9]{3})?)/,f=c.match(d);if(!f)continue;const p=/(.*)#(\w{4})=(.*)/i,h=u.match(p),g=Math.floor(Fx(f[1])),y=Math.floor(Fx(f[2]));let b=h[1];if(!/^\/|((https?|ftp|file):\/\/)/i.test(b)){const C=r.split("/");C.pop(),C.push(b),b=C.join("/")}const v={start:g,end:y,url:b},S=h[2].split(""),E=h[3].split(",");for(let C=0;C<S.length;C++)v[S[C]]=E[C];n.push(v)}return n}function iO(r){return async e=>{const{constructor:{utils:{setStyle:t,isMobile:n,addClass:s}},template:{$progress:i}}=e;let a=null;const o=await sO(r.vtt);function l(c,u,d){t(c,"backgroundImage",`url(${u.url})`),t(c,"height",`${u.h}px`),t(c,"width",`${u.w}px`),t(c,"backgroundPosition",`-${u.x}px -${u.y}px`),d<=u.w/2?t(c,"left",0):d>i.clientWidth-u.w/2?t(c,"left",`${i.clientWidth-u.w}px`):t(c,"left",`${d-u.w/2}px`)}return e.controls.add({name:"vtt-thumbnail",position:"top",index:20,style:r.style||{},mounted(c){s(c,"art-control-thumbnails"),e.on("setBar",async(u,d,f)=>{const p=u==="played"&&f&&n;if(u==="hover"||p){const h=i.clientWidth*d,g=d*e.duration;t(c,"display","flex");const y=o.find(b=>g>=b.start&&g<=b.end);if(!y)return t(c,"display","none");h>0&&h<i.clientWidth?l(c,y,h):n||t(c,"display","none"),p&&(clearTimeout(a),a=setTimeout(()=>{t(c,"display","none")},500))}})}}),{name:"artplayerPluginVttThumbnail"}}}const aO=`<svg viewBox="-5 -10 75 75" xmlns="http://www.w3.org/2000/svg" width="35" height="35">
<path d="M11.9199 45H7.20508V26.5391L2.60645 28.3154V24.3975L11.4219 20.7949H11.9199V45ZM30.1013 35.0059C30.1013 38.3483 29.4926 40.9049 28.2751 42.6758C27.0687 44.4466 25.3422 45.332 23.0954 45.332C20.8708 45.332 19.1498 44.4743 17.9323 42.7588C16.726 41.0322 16.1006 38.5641 16.0564 35.3545V30.7891C16.0564 27.4577 16.6596 24.9121 17.8659 23.1523C19.0723 21.3815 20.8044 20.4961 23.0622 20.4961C25.32 20.4961 27.0521 21.3704 28.2585 23.1191C29.4649 24.8678 30.0792 27.3636 30.1013 30.6064V35.0059ZM25.3864 30.1084C25.3864 28.2048 25.1983 26.777 24.822 25.8252C24.4457 24.8734 23.8591 24.3975 23.0622 24.3975C21.5681 24.3975 20.7933 26.1406 20.738 29.627V35.6533C20.738 37.6012 20.9262 39.0511 21.3025 40.0029C21.6898 40.9548 22.2875 41.4307 23.0954 41.4307C23.8591 41.4307 24.4236 40.988 24.7888 40.1025C25.1651 39.2061 25.3643 37.8392 25.3864 36.002V30.1084Z" fill="white"/>
<path d="M11.9894 5.45398V0L2 7.79529L11.9894 15.5914V10.3033H47.0886V40.1506H33.2442V45H52V5.45398H11.9894Z" fill="white"/>
</svg>`,oO=`
                        <svg viewBox="-5 -10 75 75" xmlns="http://www.w3.org/2000/svg" width="35" height="35">
<path d="M29.9199 45H25.2051V26.5391L20.6064 28.3154V24.3975L29.4219 20.7949H29.9199V45ZM48.1013 35.0059C48.1013 38.3483 47.4926 40.9049 46.2751 42.6758C45.0687 44.4466 43.3422 45.332 41.0954 45.332C38.8708 45.332 37.1498 44.4743 35.9323 42.7588C34.726 41.0322 34.1006 38.5641 34.0564 35.3545V30.7891C34.0564 27.4577 34.6596 24.9121 35.8659 23.1523C37.0723 21.3815 38.8044 20.4961 41.0622 20.4961C43.32 20.4961 45.0521 21.3704 46.2585 23.1191C47.4649 24.8678 48.0792 27.3636 48.1013 30.6064V35.0059ZM43.3864 30.1084C43.3864 28.2048 43.1983 26.777 42.822 25.8252C42.4457 24.8734 41.8591 24.3975 41.0622 24.3975C39.5681 24.3975 38.7933 26.1406 38.738 29.627V35.6533C38.738 37.6012 38.9262 39.0511 39.3025 40.0029C39.6898 40.9548 40.2875 41.4307 41.0954 41.4307C41.8591 41.4307 42.4236 40.988 42.7888 40.1025C43.1651 39.2061 43.3643 37.8392 43.3864 36.002V30.1084Z" fill="white"/>
<path d="M40.0106 5.45398V0L50 7.79529L40.0106 15.5914V10.3033H4.9114V40.1506H18.7558V45H2.01875e-06V5.45398H40.0106Z" fill="white"/>
</svg>`,lO=`<svg viewBox="0 0 512 512" width="30" height="30">
  <path d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"/>
</svg>`,cO=`<svg viewBox="0 0 512 512" width="30" height="30" transform="scale(-1, 1)">
  <path d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"/>
</svg>`,uO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24"><path d="M116.5,42.8v154.4c0,2.8-1.7,3.6-3.8,1.7l-54.1-48H29c-2.8,0-5.2-2.3-5.2-5.2V94.3c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48C114.8,39.2,116.5,39.9,116.5,42.8z"/><path d="M136.2,160v-20c11.1,0,20-8.9,20-20s-8.9-20-20-20V80c22.1,0,40,17.9,40,40S158.3,160,136.2,160z"/><path d="M216.2,120c0-44.2-35.8-80-80-80v20c33.1,0,60,26.9,60,60s-26.9,60-60,60v20C180.4,199.9,216.1,164.1,216.2,120z" fill="#fff"/></svg>',dO=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24">
    <path d="M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48.1C114.6,39.1,116.4,39.9,116.4,42.8z M212.3,96.4l-14.6-14.6l-23.6,23.6l-23.6-23.6l-14.6,14.6l23.6,23.6l-23.6,23.6l14.6,14.6l23.6-23.6l23.6,23.6l14.6-14.6L188.7,120L212.3,96.4z"
    fill="#fff"/>
</svg>
`,fO=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 16 240 240" width="28" height="28">
    <path d="M215,40H25c-2.7,0-5,2.2-5,5v150c0,2.7,2.2,5,5,5h190c2.7,0,5-2.2,5-5V45C220,42.2,217.8,40,215,40z M108.1,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C90.4,141.7,102,143.5,108.1,137.7z M152.9,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C135.2,141.7,146.8,143.5,152.9,137.7z"
    fill="#fff"/>
</svg>
`,hO='<svg width="80" height="80" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_l9ve{animation:spinner_rcyq 1.2s cubic-bezier(0.52,.6,.25,.99) infinite}.spinner_cMYp{animation-delay:.4s}.spinner_gHR3{animation-delay:.8s}@keyframes spinner_rcyq{0%{transform:translate(12px,12px) scale(0);opacity:1}100%{transform:translate(0,0) scale(1);opacity:0}}</style><path class="spinner_l9ve" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="translate(12, 12) scale(0)"/><path class="spinner_l9ve spinner_cMYp" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="translate(12, 12) scale(0)"/><path class="spinner_l9ve spinner_gHR3" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="translate(12, 12) scale(0)"/></svg>',pO=`<svg width="24" height="24" viewBox="0 0 24 24" style="margin-bottom: 3px; vertical-align: middle;" xmlns="http://www.w3.org/2000/svg">
<path d="M20 5.125V9.125H22V4.155C22 3.58616 21.5389 3.125 20.97 3.125H2.03C1.46116 3.125 1 3.58613 1 4.155V17.095C1 17.6639 1.46119 18.125 2.03 18.125H12V16.125H3V5.125H20ZM14 11.875C14 11.3227 14.4477 10.875 15 10.875H22C22.5523 10.875 23 11.3227 23 11.875V17.875C23 18.4273 22.5523 18.875 22 18.875H15C14.4477 18.875 14 18.4273 14 17.875V11.875ZM6 12.375L7.79289 10.5821L5.29288 8.0821L6.7071 6.66788L9.20711 9.16789L11 7.375V12.375H6Z" fill="white"/>
</svg>`,mO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="80" height="80"><path d="M62.8,199.5c-1,0.8-2.4,0.6-3.3-0.4c-0.4-0.5-0.6-1.1-0.5-1.8V42.6c-0.2-1.3,0.7-2.4,1.9-2.6c0.7-0.1,1.3,0.1,1.9,0.4l154.7,77.7c2.1,1.1,2.1,2.8,0,3.8L62.8,199.5z" fill="white"/></svg>',gO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24"><path d="M62.8,199.5c-1,0.8-2.4,0.6-3.3-0.4c-0.4-0.5-0.6-1.1-0.5-1.8V42.6c-0.2-1.3,0.7-2.4,1.9-2.6c0.7-0.1,1.3,0.1,1.9,0.4l154.7,77.7c2.1,1.1,2.1,2.8,0,3.8L62.8,199.5z"/></svg>',xO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24"><path d="M100,194.9c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0H65c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V45c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h30c2.6-0.2,4.8,1.8,5,4.4c0,0.2,0,0.4,0,0.6V194.9z M180,45.1c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6V195c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V45.1z"/></svg>',vO=`
<svg 
  xmlns="http://www.w3.org/2000/svg" 
  viewBox="0 0 16 16" 
  fill="currentColor" 
  width="24" 
  height="24" 
  style="vertical-align: middle;">
  <path fill-rule="evenodd" d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0m-.5 14.5V11h1v3.5a.5.5 0 0 1-1 0"/>
</svg>`,yO=`
<svg 
  xmlns="http://www.w3.org/2000/svg" 
  viewBox="0 0 240 240" 
  width="24" 
  height="24" 
  style="margin-bottom: 5px; vertical-align: middle;">
  <path d="M204,145l-25-14c0.8-3.6,1.2-7.3,1-11c0.2-3.7-0.2-7.4-1-11l25-14c2.2-1.6,3.1-4.5,2-7l-16-26c-1.2-2.1-3.8-2.9-6-2l-25,14c-6-4.2-12.3-7.9-19-11V35c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6v28c-6.7,3.1-13,6.7-19,11L56,60c-2.2-0.9-4.8-0.1-6,2L35,88c-1.6,2.2-1.3,5.3,0.9,6.9c0,0,0.1,0,0.1,0.1l25,14c-0.8,3.6-1.2,7.3-1,11c-0.2,3.7,0.2,7.4,1,11l-25,14c-2.2,1.6-3.1,4.5-2,7l16,26c1.2,2.1,3.8,2.9,6,2l25-14c5.7,4.6,12.2,8.3,19,11v28c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6v-28c7-2.3,13.5-6,19-11l25,14c2.5,1.3,5.6,0.4,7-2l15-26C206.7,149.4,206,146.7,204,145z M120,149.9c-16.5,0-30-13.4-30-30s13.4-30,30-30s30,13.4,30,30c0.3,16.3-12.6,29.7-28.9,30C120.7,149.9,120.4,149.9,120,149.9z"/>
</svg>`,bO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24" style="margin-bottom: 5px; vertical-align: middle;"><path d="M96.3,186.1c1.9,1.9,1.3,4-1.4,4.4l-50.6,8.4c-1.8,0.5-3.7-0.6-4.2-2.4c-0.2-0.6-0.2-1.2,0-1.7l8.4-50.6c0.4-2.7,2.4-3.4,4.4-1.4l14.5,14.5l28.2-28.2l14.3,14.3l-28.2,28.2L96.3,186.1z M195.8,39.1l-50.6,8.4c-2.7,0.4-3.4,2.4-1.4,4.4l14.5,14.5l-28.2,28.2l14.3,14.3l28.2-28.2l14.5,14.5c1.9,1.9,4,1.3,4.4-1.4l8.4-50.6c0.5-1.8-0.6-3.6-2.4-4.2C197,39,196.4,39,195.8,39.1L195.8,39.1z" fill="#fff"/></svg>',SO='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"width="24" height="24" style="margin-bottom: 5px; vertical-align: middle;"><path d="M109.2,134.9l-8.4,50.1c-0.4,2.7-2.4,3.3-4.4,1.4L82,172l-27.9,27.9l-14.2-14.2l27.9-27.9l-14.4-14.4c-1.9-1.9-1.3-3.9,1.4-4.4l50.1-8.4c1.8-0.5,3.6,0.6,4.1,2.4C109.4,133.7,109.4,134.3,109.2,134.9L109.2,134.9z M172.1,82.1L200,54.2L185.8,40l-27.9,27.9l-14.4-14.4c-1.9-1.9-3.9-1.3-4.4,1.4l-8.4,50.1c-0.5,1.8,0.6,3.6,2.4,4.1c0.5,0.2,1.2,0.2,1.7,0l50.1-8.4c2.7-0.4,3.3-2.4,1.4-4.4L172.1,82.1z"/></svg>',EO=`<p style="display: flex; gap: 7px; align-items: center; background-color:#1F2020; padding:5px;padding-inline:7px; border-radius:5px">
    <b style="color: #ffbade;">Powered by</b>
    <span style="font-size: 14px;">
        Zen<span style="color: #ffbade;">!</span>me
    </span>
</p>
`;function wO(r,e){let t=`
        .art-chapters {
            gap: 0px !important;
        }
    `;return r&&e&&(r.start===0&&r.end===0&&e.start===0&&e.end===0?t+="":r.start===0&&r.end===0&&e.start!==0&&e.end!==0?t+=`
                .art-chapter:nth-child(2) {
                    background-color: #fdd253;
                    transform: scaleY(0.6);
                }
            `:r.start===0&&r.end!==0&&e.start===0&&e.end===0?t+=`
                .art-chapter:nth-child(1){
                    background-color: #fdd253;
                    transform: scaleY(0.6);
                }
            `:r.start===0&&r.end!==0&&e.start!==0&&e.end!==0?t+=`
                .art-chapter:nth-child(1), 
                .art-chapter:nth-child(3) {
                    background-color: #fdd253;
                    transform: scaleY(0.6);
                }
            `:r.start!==0&&r.end!==0&&e.start===0&&e.end===0?t+=`
                .art-chapter:nth-child(2) {
                    background-color: #fdd253;
                    transform: scaleY(0.6);
                }
            `:r.start!==0&&r.end!==0&&e.start!==0&&e.end!==0&&(t+=`
                .art-chapter:nth-child(2),
                .art-chapter:nth-child(4) {
                    background-color: #fdd253;
                    transform: scaleY(0.6);
                }
            `)),t}function jx(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yc={exports:{}};yc.exports;(function(r,e){/*!
 * artplayer-plugin-hls-control.js v1.0.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(t,n,s,i,a){var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof qp<"u"?qp:{},l=typeof o[i]=="function"&&o[i],c=l.cache||{},u=typeof jx=="function"&&jx.bind(r);function d(h,g){if(!c[h]){if(!t[h]){var y=typeof o[i]=="function"&&o[i];if(!g&&y)return y(h,!0);if(l)return l(h,!0);if(u&&typeof h=="string")return u(h);var b=Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}v.resolve=function(S){var E=t[h][1][S];return E??S},v.cache={};var m=c[h]=new d.Module(h);t[h][0].call(m.exports,v,m,m.exports,this)}return c[h].exports;function v(S){var E=v.resolve(S);return E===!1?{}:d(E)}}d.isParcelRequire=!0,d.Module=function(h){this.id=h,this.bundle=d,this.exports={}},d.modules=t,d.cache=c,d.parent=l,d.register=function(h,g){t[h]=[function(y,b){b.exports=g},{}]},Object.defineProperty(d,"root",{get:function(){return o[i]}}),o[i]=d;for(var f=0;f<n.length;f++)d(n[f]);{var p=d(s);r.exports=p}})({haa6A:[function(t,n,s){var i=t("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s),i.export(s,"default",()=>d);var a=t("bundle-text:./quality.svg"),o=i.interopDefault(a),l=t("bundle-text:./audio.svg"),c=i.interopDefault(l);function u(f,p){let h=new Map;return f.filter(g=>{let y=g[p];return y===void 0||!h.has(y)&&h.set(y,1)})}function d(f={}){return p=>{let{$video:h}=p.template,{errorHandle:g}=p.constructor.utils;function y(){var b;g(((b=p.hls)==null?void 0:b.media)===h,'Cannot find instance of HLS from "art.hls"'),function(m){if(!m.levels.length)return;let v=f.quality||{},S=v.auto||"Auto",E=v.title||"Quality",C=v.getName||(R=>R.name||R.height+"P"),L=m.levels[m.currentLevel],I=L?C(L):S,T=u(m.levels.map((R,_)=>({html:C(R,_),value:_,default:m.currentLevel===_})),"html").sort((R,_)=>_.value-R.value);T.push({html:S,value:-1,default:m.currentLevel===-1});let w=R=>(m.currentLevel=R.value,p.notice.show=`${E}: ${R.html}`,v.control&&p.controls.check(R),v.setting&&p.setting.check(R),R.html);v.control&&p.controls.update({name:"hls-quality",position:"right",html:I,style:{padding:"0 10px"},selector:T,onSelect:w}),v.setting&&p.setting.update({name:"hls-quality",tooltip:I,html:E,icon:o.default,width:200,selector:T,onSelect:w})}(p.hls),function(m){if(!m.audioTracks.length)return;let v=f.audio||{},S=v.auto||"Auto",E=v.title||"Audio",C=v.getName||(R=>R.name||R.lang||R.language),L=m.audioTracks[m.audioTrack],I=L?C(L):S,T=u(m.audioTracks.map((R,_)=>({html:C(R,_),value:R.id,default:m.audioTrack===R.id})),"html"),w=R=>(m.audioTrack=R.value,p.notice.show=`${E}: ${R.html}`,v.control&&p.controls.check(R),v.setting&&p.setting.check(R),R.html);v.control&&p.controls.update({name:"hls-audio",position:"right",html:I,style:{padding:"0 10px"},selector:T,onSelect:w}),v.setting&&p.setting.update({name:"hls-audio",tooltip:I,html:E,icon:c.default,width:200,selector:T,onSelect:w})}(p.hls)}return p.on("ready",y),p.on("restart",y),{name:"artplayerPluginHlsControl",update:y}}}typeof window<"u"&&(window.artplayerPluginHlsControl=d)},{"bundle-text:./quality.svg":"5aI3W","bundle-text:./audio.svg":"kbgg8","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aI3W":[function(t,n,s){n.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18"><path fill="#fff" d="M0 96c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm323.8 106.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6-26.5-33.1c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4S78.8 416 88 416h336c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/></svg>'},{}],kbgg8:[function(t,n,s){n.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18"><path fill="#fff" d="M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6 26.5 0 48 21.5 48 48v128c0 26.5-21.5 48-48 48-44.2 0-80-35.8-80-80V288C0 146.6 114.6 32 256 32s256 114.6 256 256v112c0 44.2-35.8 80-80 80-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48 10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"/></svg>'},{}],"9pCYc":[function(t,n,s){s.interopDefault=function(i){return i&&i.__esModule?i:{default:i}},s.defineInteropFlag=function(i){Object.defineProperty(i,"__esModule",{value:!0})},s.exportAll=function(i,a){return Object.keys(i).forEach(function(o){o==="default"||o==="__esModule"||Object.prototype.hasOwnProperty.call(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:function(){return i[o]}})}),a},s.export=function(i,a,o){Object.defineProperty(i,a,{enumerable:!0,get:o})}},{}]},["haa6A"],"haa6A","parcelRequire4dc0")})(yc,yc.exports);var TO=yc.exports;const AO=ch(TO);function IO(){return r=>{const{getExt:e}=r.constructor.utils;r.setting.add({html:`
        <div class="subtitle-upload-wrapper" style="position: relative;">
          <input 
            type="file" 
            name="subtitle-upload" 
            id="subtitle-upload" 
            style="display: none;" 
          />
          <label 
            for="subtitle-upload" 
            class="subtitle-upload-label"
            style="cursor: pointer; user-select: none;"
          >
            Upload Subtitle
          </label>
        </div>
      `,icon:vO,onClick(t,n){const s=n.querySelector("input[name='subtitle-upload']"),i=n.querySelector(".subtitle-upload-label");r.proxy(s,"change",a=>{var c,u;const o=(u=(c=a.target)==null?void 0:c.files)==null?void 0:u[0];if(!o)return;const l=URL.createObjectURL(o);r.subtitle.switch(l,{type:e(o.name)}),a.target.value=null,i.textContent=o.name,r.notice.show=`Upload Subtitle ${o.name}`,t.tooltip=o.name})}})}}Pr.LOG_VERSION=!1;Pr.CONTEXTMENU=!1;const Rr={M:"KeyM",I:"KeyI",F:"KeyF",V:"KeyV",SPACE:"Space",SPACE_LEGACY:"Spacebar",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_RIGHT:"ArrowRight",ARROW_LEFT:"ArrowLeft"};function LO({streamUrl:r,subtitles:e,thumbnail:t,intro:n,outro:s,autoSkipIntro:i,autoPlay:a,autoNext:o,episodeId:l,episodes:c,playNext:u,animeInfo:d,episodeNum:f,streamInfo:p}){const h=D.useRef(null),g=D.useRef(0),y=D.useRef(null),b="https://zenime-proxy.aniverse-proxy.workers.dev/proxy?url=",m="https://proxyapi-rosy.vercel.app/m3u8-proxy?url=".split(",")||[],[v,S]=D.useState(c==null?void 0:c.findIndex(T=>{var w;return((w=T.id.match(/ep=(\d+)/))==null?void 0:w[1])===l}));D.useEffect(()=>{if((c==null?void 0:c.length)>0){const T=c.findIndex(w=>{var R;return((R=w.id.match(/ep=(\d+)/))==null?void 0:R[1])===l});S(T)}},[l,c]),D.useEffect(()=>{const T=()=>{document.querySelectorAll("style[data-chapter-styles]").forEach(k=>k.remove());const R=document.createElement("style");R.setAttribute("data-chapter-styles","true");const _=wO(n,s);return R.textContent=_,document.head.appendChild(R),()=>{R.remove()}};if(r||n||s)return T()},[r,n,s]);const E=(T,w,R)=>{if(an.isSupported()){R.hls&&R.hls.destroy();const _=new an;_.loadSource(w),_.attachMedia(T),R.hls=_,R.on("destroy",()=>_.destroy()),T.addEventListener("timeupdate",()=>{var M;const k=Math.round(T.currentTime),N=Math.round(T.duration);N>0&&k>=N&&(R.pause(),v<(c==null?void 0:c.length)-1&&o&&u((M=c[v+1].id.match(/ep=(\d+)/))==null?void 0:M[1]))})}else T.canPlayType("application/vnd.apple.mpegurl")?(T.src=w,T.addEventListener("timeupdate",()=>{var N;const _=Math.round(T.currentTime),k=Math.round(T.duration);k>0&&_>=k&&(R.pause(),v<(c==null?void 0:c.length)-1&&o&&u((N=c[v+1].id.match(/ep=(\d+)/))==null?void 0:N[1]))})):console.log("Unsupported playback format: m3u8")},C=()=>{const T=[];return((n==null?void 0:n.start)!==0||(n==null?void 0:n.end)!==0)&&T.push({start:n.start,end:n.end,title:"intro"}),((s==null?void 0:s.start)!==0||(s==null?void 0:s.end)!==0)&&T.push({start:s.start,end:s.end,title:"outro"}),T},L=T=>{var R;if(!T)return!1;const w=(R=T.tagName)==null?void 0:R.toLowerCase();return w==="input"||w==="textarea"||T.isContentEditable?!0:T.closest?!!T.closest("input, textarea, [contenteditable='true']"):!1},I=(T,w)=>{const R=h.current;if(!R||!w)return;const _=T.target;if(L(_)||!(R.contains(_)||R.contains(document.activeElement)))return;switch(T.code){case Rr.M:w.muted=!w.muted;break;case Rr.I:w.pip=!w.pip;break;case Rr.F:{T.preventDefault(),T.stopPropagation();const M=h.current,O=document,j=O.fullscreenElement||O.webkitFullscreenElement||O.mozFullScreenElement||O.msFullscreenElement;j&&(j===M||M.contains(j))?O.exitFullscreen?O.exitFullscreen():O.webkitExitFullscreen?O.webkitExitFullscreen():O.mozCancelFullScreen?O.mozCancelFullScreen():O.msExitFullscreen&&O.msExitFullscreen():M.requestFullscreen?M.requestFullscreen():M.webkitRequestFullscreen?M.webkitRequestFullscreen():M.mozRequestFullScreen?M.mozRequestFullScreen():M.msRequestFullscreen&&M.msRequestFullscreen();try{w.fullscreen=!w.fullscreen}catch{}break}case Rr.V:T.preventDefault(),T.stopPropagation(),w.subtitle.show=!w.subtitle.show;break;case Rr.SPACE:case Rr.SPACE_LEGACY:T.preventDefault(),T.stopPropagation(),w.playing?w.pause():w.play();break;case Rr.ARROW_UP:T.preventDefault(),T.stopPropagation(),w.volume=Math.min(w.volume+.1,1);break;case Rr.ARROW_DOWN:T.preventDefault(),T.stopPropagation(),w.volume=Math.max(w.volume-.1,0);break;case Rr.ARROW_RIGHT:T.preventDefault(),T.stopPropagation(),w.currentTime=Math.min(w.currentTime+10,w.duration);break;case Rr.ARROW_LEFT:T.preventDefault(),T.stopPropagation(),w.currentTime=Math.max(w.currentTime-10,0);break}};return D.useEffect(()=>{var j;if(!r||!h.current)return;const T=(j=p==null?void 0:p.streamingLink)==null?void 0:j.iframe,w={referer:T?new URL(T).origin+"/":window.location.origin+"/"},R=h.current;let _=null;try{if(!R.hasAttribute("tabindex"))R.setAttribute("tabindex","0");else{const P=parseInt(R.getAttribute("tabindex"),10);(isNaN(P)||P<0)&&R.setAttribute("tabindex","0")}R.style.outline="none"}catch{}const k=new Pr({url:m[Math.floor(Math.random()*(m==null?void 0:m.length))]+encodeURIComponent(r)+"&headers="+encodeURIComponent(JSON.stringify(w)),container:h.current,type:"m3u8",autoplay:a,volume:1,setting:!0,playbackRate:!0,pip:!0,hotkey:!1,fullscreen:!0,mutex:!0,playsInline:!0,lock:!0,airplay:!0,autoOrientation:!0,fastForward:!0,aspectRatio:!0,moreVideoAttr:{crossOrigin:"anonymous",preload:"none",playsInline:!0},plugins:[AO({quality:{setting:!0,getName:P=>P.height+"P",title:"Quality",auto:"Auto"}}),IO(),FE({chapters:C()})],subtitle:{style:{color:"#fff","font-weight":"400",left:"50%",transform:"translateX(-50%)","margin-bottom":"2rem"},escape:!1},layers:[{name:Mt,html:EO,tooltip:Mt,style:{opacity:1,position:"absolute",top:"5px",right:"5px",transition:"opacity 0.5s ease-out"}},{html:"",style:{position:"absolute",left:"50%",top:0,width:"20%",height:"100%",transform:"translateX(-50%)"},disable:!Pr.utils.isMobile,click:()=>k.toggle()},{name:"rewind",html:"",style:{position:"absolute",left:0,top:0,width:"40%",height:"100%"},disable:!Pr.utils.isMobile,click:()=>{k.controls.show=!k.controls.show}},{name:"forward",html:"",style:{position:"absolute",right:0,top:0,width:"40%",height:"100%"},disable:!Pr.utils.isMobile,click:()=>{k.controls.show=!k.controls.show}},{name:"backwardIcon",html:cO,style:{position:"absolute",left:"25%",top:"50%",transform:"translate(50%,-50%)",opacity:0,transition:"opacity 0.5s ease-in-out"},disable:!Pr.utils.isMobile},{name:"forwardIcon",html:lO,style:{position:"absolute",right:"25%",top:"50%",transform:"translate(50%, -50%)",opacity:0,transition:"opacity 0.5s ease-in-out"},disable:!Pr.utils.isMobile}],controls:[{html:aO,position:"right",tooltip:"Backward 10s",click:()=>{k.currentTime=Math.max(k.currentTime-10,0)}},{html:oO,position:"right",tooltip:"Forward 10s",click:()=>{k.currentTime=Math.min(k.currentTime+10,k.duration)}}],icons:{play:gO,pause:xO,setting:yO,volume:uO,pip:pO,volumeClose:dO,state:mO,loading:hO,fullscreenOn:bO,fullscreenOff:SO},customType:{m3u8:E}});k.on("resize",()=>{k.subtitle.style({fontSize:(k.width>500?k.width*.02:k.width*.03)+"px"})});const N=(P=30)=>{try{if(!R)return;const F=document.activeElement;R.contains(F)||(_=setTimeout(()=>{try{R.focus()}catch{}},P))}catch{}},M=()=>{!document.fullscreenElement&&!document.webkitIsFullScreen&&!document.mozFullScreen&&!document.msFullscreenElement?N(40):N(20)},O=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];return O.forEach(P=>document.addEventListener(P,M)),k.on("ready",()=>{try{R.focus()}catch{}const F=(JSON.parse(localStorage.getItem("continueWatching"))||[]).find(le=>le.episodeId===l);F!=null&&F.leftAt&&(k.currentTime=F.leftAt),k.on("video:timeupdate",()=>{g.current=Math.floor(k.currentTime)}),setTimeout(()=>{k.layers[Mt].style.opacity=0},2e3);const B=(e||[]).map(le=>({...le}));for(const le of B){const he=encodeURIComponent(le.file),De=encodeURIComponent(JSON.stringify(w));le.file=`${b}${he}&headers=${De}`}const $=B==null?void 0:B.find(le=>le.label.toLowerCase()==="english");$&&k.subtitle.switch($.file,{name:$.label,default:!0});const G=[...(n==null?void 0:n.start)!=null&&(n==null?void 0:n.end)!=null?[[n.start+1,n.end-1]]:[],...(s==null?void 0:s.start)!=null&&(s==null?void 0:s.end)!=null?[[s.start+1,s.end]]:[]];i&&k.plugins.add(rO(G));const Y=le=>I(le,k);y.current=Y,document.addEventListener("keydown",Y);const ee=()=>{try{R.focus()}catch{}};R.addEventListener("pointerdown",ee,{passive:!0});const te=()=>N(30);window.addEventListener("focus",te),k.on("destroy",()=>{try{document.removeEventListener("keydown",Y)}catch{}try{R.removeEventListener("pointerdown",ee)}catch{}try{window.removeEventListener("focus",te)}catch{}}),k.subtitle.style({fontSize:(k.width>500?k.width*.02:k.width*.03)+"px"}),t&&k.plugins.add(iO({vtt:`${b}${t}`}));const se=k.layers.rewind,we=k.layers.forward;if(Pr.utils.isMobile&&k.proxy(se,"dblclick",()=>{k.currentTime=Math.max(0,k.currentTime-10),k.layers.backwardIcon.style.opacity=1,setTimeout(()=>{k.layers.backwardIcon.style.opacity=0},300)}),Pr.utils.isMobile&&k.proxy(we,"dblclick",()=>{k.currentTime=Math.max(0,k.currentTime+10),k.layers.forwardIcon.style.opacity=1,setTimeout(()=>{k.layers.forwardIcon.style.opacity=0},300)}),(B==null?void 0:B.length)>0){const le=B.find(he=>he.label.toLowerCase()==="english"&&he.default)||B.find(he=>he.label.toLowerCase()==="english");k.setting.add({name:"captions",icon:fO,html:"Subtitle",tooltip:(le==null?void 0:le.label)||"default",position:"right",selector:[{html:"Display",switch:!0,onSwitch:he=>(he.tooltip=he.switch?"Hide":"Show",k.subtitle.show=!he.switch,!he.switch)},...B.map(he=>({default:he.label.toLowerCase()==="english"&&he===le,html:he.label,url:he.file}))],onSelect:he=>(k.subtitle.switch(he.url,{name:he.html}),he.html)})}}),()=>{if(k&&k.destroy&&k.destroy(!1),O.forEach(P=>document.removeEventListener(P,M)),y.current){try{document.removeEventListener("keydown",y.current)}catch{}y.current=null}_&&clearTimeout(_);try{const P=JSON.parse(localStorage.getItem("continueWatching"))||[],F={id:d==null?void 0:d.id,data_id:d==null?void 0:d.data_id,episodeId:l,episodeNum:f,adultContent:d==null?void 0:d.adultContent,poster:d==null?void 0:d.poster,title:d==null?void 0:d.title,japanese_title:d==null?void 0:d.japanese_title,leftAt:g.current,updatedAt:Date.now()};if(!F.data_id)return;const B=P.filter($=>$.data_id!==F.data_id);B.unshift(F),localStorage.setItem("continueWatching",JSON.stringify(B))}catch(P){console.error("Failed to save continueWatching:",P)}}},[r,e,n,s]),x.jsx("div",{ref:h,className:"w-full h-full"})}function CO({episodes:r,onEpisodeClick:e,currentEpisode:t,totalEpisodes:n}){const[s,i]=D.useState(t),{language:a}=dr(),o=D.useRef(null),l=D.useRef(null),[c,u]=D.useState(!1),[d,f]=D.useState([1,100]),[p,h]=D.useState("1-100"),[g,y]=D.useState(t),b=D.useRef(null),[m,v]=D.useState(null),S=()=>{if(l.current&&o.current){const T=o.current,w=l.current,R=T.getBoundingClientRect().top,_=T.clientHeight,k=w.getBoundingClientRect().top,N=w.clientHeight,M=k-R;T.scrollTop=T.scrollTop+M-_/2+N/2}};D.useEffect(()=>{i(g)},[g]),D.useEffect(()=>{S()},[s]),D.useEffect(()=>{const T=w=>{b.current&&!b.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);function E(T){const w=T.target.value;if(w.trim()===""){const R=C(1);f(R),h(`${R[0]}-${R[1]}`),v(null)}else if(!w||isNaN(w))v(null);else if(!isNaN(w)&&parseInt(w,10)>n&&g!==null){const R=C(g);f(R),h(`${R[0]}-${R[1]}`),v(null)}else if(!isNaN(w)&&w.trim()!==""){const R=parseInt(w,10),_=r.find(k=>(k==null?void 0:k.episode_no)===R);if(_){const k=C(R);f(k),h(`${k[0]}-${k[1]}`),v(_==null?void 0:_.id)}}else v(null)}function C(T){const R=Math.floor((T-1)/100)*100+1,_=Math.min(R+100-1,n);return[R,_]}function L(T){const w=[];for(let _=0;_<T;_+=100){const k=_+1,N=Math.min(_+100,T);w.push(`${k}-${N}`)}return w}D.useEffect(()=>{if(t&&g&&(g<d[0]||g>d[1])){const T=C(g);f(T),h(`${T[0]}-${T[1]}`)}},[t,n,g]);const I=T=>{const[w,R]=T.split("-").map(Number);f([w,R])};return D.useEffect(()=>{const T=r.find(w=>{var R;return((R=w==null?void 0:w.id.match(/ep=(\d+)/))==null?void 0:R[1])===s});T&&y(T==null?void 0:T.episode_no)},[s,r]),x.jsxs("div",{className:"relative flex flex-col w-full h-full max-[1200px]:max-h-[500px]",children:[x.jsxs("div",{className:"sticky top-0 z-10 flex flex-col gap-y-[5px] justify-start px-3 py-4 bg-[#0D0D15]",children:[x.jsx("h1",{className:"text-[13px] font-bold",children:"List of episodes:"}),n>100&&x.jsxs("div",{className:"w-full flex gap-x-4 items-center max-[1200px]:justify-between",children:[x.jsx("div",{className:"min-w-fit flex text-[13px]",children:x.jsxs("div",{onClick:()=>u(T=>!T),className:"text-white w-fit mt-1 text-[13px] relative cursor-pointer bg-[#0D0D15] flex justify-center items-center",ref:b,children:[x.jsx(oe,{icon:i3}),x.jsxs("div",{className:"w-fit flex justify-center items-center gap-x-2 ml-4",children:[x.jsxs("p",{className:"text-white text-[12px]",children:["EPS:",d[0],"-",d[1]]}),x.jsx(oe,{icon:h3,className:"mt-[2px] text-[10px]"})]}),c&&x.jsx("div",{className:"absolute flex flex-col top-full mt-[10px] left-0 z-30 bg-white w-[150px] max-h-[200px] overflow-y-auto rounded-l-[8px]",children:L(n).map((T,w)=>x.jsx("div",{onClick:()=>{I(T),h(T)},className:`hover:bg-gray-200 cursor-pointer text-black ${T===p?"bg-[#EFF0F4]":""}`,children:x.jsxs("p",{className:"font-semibold text-[12px] p-3 flex justify-between items-center",children:["EPS:",T,T===p?x.jsx(oe,{icon:b3}):null]})},w))})]})}),x.jsxs("div",{className:"border-[1px] border-[#ffffff34] rounded-sm py-[4px] px-[8px] flex items-center gap-x-[10px]",children:[x.jsx(oe,{icon:Yc,className:"text-[11px]"}),x.jsx("input",{type:"text",className:"w-full bg-transparent focus:outline-none rounded-sm text-[13px] font-bold placeholder:text-[12px] placeholder:font-medium",placeholder:"Number of Ep",onChange:E})]})]})]}),x.jsx("div",{ref:o,className:"w-full h-full overflow-y-auto",children:x.jsx("div",{className:`${n>30?"p-3 grid grid-cols-5 gap-1 max-[1200px]:grid-cols-12 max-[860px]:grid-cols-10 max-[575px]:grid-cols-8 max-[478px]:grid-cols-6 max-[350px]:grid-cols-5":""}`,children:n>30?r.slice(d[0]-1,d[1]).map((T,w)=>{var N;const R=(N=T==null?void 0:T.id.match(/ep=(\d+)/))==null?void 0:N[1],_=s===R||t===R,k=m===(T==null?void 0:T.id);return x.jsx("div",{ref:_?l:null,className:`flex items-center justify-center rounded-[3px] h-[30px] text-[13.5px] font-medium cursor-pointer group ${T!=null&&T.filler?_?"bg-[#ffbade]":"bg-gradient-to-r from-[#5a4944] to-[#645a4b]":""} md:hover:bg-[#67686F] 
                          md:hover:text-white
                       ${_?"bg-[#ffbade] text-black":"bg-[#35373D] text-gray-400"} ${k?"glow-animation":""} `,onClick:()=>{R&&(e(R),i(R),v(null))},children:x.jsx("span",{className:`${T!=null&&T.filler?"text-white md:group-hover:text-[#ffbade]":""}`,children:w+d[0]})},T==null?void 0:T.id)}):r==null?void 0:r.map((T,w)=>{var N;const R=(N=T==null?void 0:T.id.match(/ep=(\d+)/))==null?void 0:N[1],_=s===R||t===R,k=m===(T==null?void 0:T.id);return x.jsxs("div",{ref:_?l:null,className:`w-full pl-5 pr-2 py-3 flex items-center justify-start gap-x-8 cursor-pointer ${(w+1)%2&&!_?"bg-[#201F2D] text-gray-400":"bg-none"} group md:hover:bg-[#2B2A42] ${_?"text-[#ffbade] bg-[#2B2A42]":""} ${k?"glow-animation":""}`,onClick:()=>{R&&(e(R),i(R),v(null))},children:[x.jsx("p",{className:"text-[14px] font-medium",children:w+1}),x.jsxs("div",{className:"w-full flex items-center justify-between gap-x-[5px]",children:[x.jsx("h1",{className:"line-clamp-1 text-[15px] font-light group-hover:text-[#ffbade]",children:a==="EN"?T==null?void 0:T.title:T==null?void 0:T.japanese_title}),_&&x.jsx(oe,{icon:c3,className:"w-[20px] h-[20px] text-[#ffbade]"})]})]},T==null?void 0:T.id)})})})]})}function RO({servers:r,activeEpisodeNum:e,activeServerId:t,setActiveServerId:n,serverLoading:s}){const i=(r==null?void 0:r.filter(c=>c.type==="sub"))||[],a=(r==null?void 0:r.filter(c=>c.type==="dub"))||[],o=(r==null?void 0:r.filter(c=>c.type==="raw"))||[];D.useEffect(()=>{const c=localStorage.getItem("server_name");if(c){const u=r==null?void 0:r.find(d=>d.serverName===c);u?n(u.data_id):r&&r.length>0&&n(r[0].data_id)}else r&&r.length>0&&n(r[0].data_id)},[r]);const l=c=>{n(c.data_id),localStorage.setItem("server_name",c.serverName),localStorage.setItem("server_type",c.type)};return x.jsx("div",{className:"relative bg-[#11101A] p-4 w-full min-h-[100px] flex justify-center items-center max-[1200px]:bg-[#14151A]",children:s?x.jsx("div",{className:"w-full h-full rounded-lg flex justify-center items-center max-[600px]:rounded-none",children:x.jsx(Ai,{})}):r?x.jsxs("div",{className:"w-full h-full rounded-lg grid grid-cols-[minmax(0,30%),minmax(0,70%)] overflow-hidden max-[800px]:grid-cols-[minmax(0,40%),minmax(0,60%)] max-[600px]:flex max-[600px]:flex-col max-[600px]:rounded-none",children:[x.jsxs("div",{className:"h-full bg-[#ffbade] px-6 text-black flex flex-col justify-center items-center gap-y-2 max-[600px]:bg-transparent max-[600px]:h-1/2 max-[600px]:text-white max-[600px]:mb-4",children:[x.jsxs("p",{className:"text-center leading-5 font-medium text-[14px]",children:["You are watching ",x.jsx("br",{}),x.jsxs("span",{className:"font-semibold max-[600px]:text-[#ffbade]",children:["Episode ",e]})]}),x.jsx("p",{className:"leading-5 text-[14px] font-medium text-center",children:"If the current server doesn't work, please try other servers beside."})]}),x.jsxs("div",{className:"bg-[#201F31] flex flex-col max-[600px]:h-full",children:[o.length>0&&x.jsxs("div",{className:`servers px-2 flex items-center flex-wrap ml-2 max-[600px]:py-2 ${a.length===0||i.length===0?"h-1/2":"h-full"}`,children:[x.jsxs("div",{className:"flex items-center gap-x-2",children:[x.jsx(oe,{icon:p3,className:"text-[#ffbade] text-[13px]"}),x.jsx("p",{className:"font-bold text-[14px]",children:"RAW:"})]}),x.jsx("div",{className:"flex gap-x-[7px] ml-8 flex-wrap",children:o.map((c,u)=>x.jsx("div",{className:`px-6 py-[5px] rounded-lg cursor-pointer ${t===(c==null?void 0:c.data_id)?"bg-[#ffbade] text-black":"bg-[#373646] text-white"} max-[700px]:px-3`,onClick:()=>l(c),children:x.jsx("p",{className:"text-[13px] font-semibold",children:c.serverName})},u))})]}),i.length>0&&x.jsxs("div",{className:`servers px-2 flex items-center flex-wrap ml-2 max-[600px]:py-2 ${a.length===0?"h-1/2":"h-full"}`,children:[x.jsxs("div",{className:"flex items-center gap-x-2",children:[x.jsx(oe,{icon:Kr,className:"text-[#ffbade] text-[13px]"}),x.jsx("p",{className:"font-bold text-[14px]",children:"SUB:"})]}),x.jsx("div",{className:"flex gap-x-[7px] ml-8 flex-wrap",children:i.map((c,u)=>x.jsx("div",{className:`px-6 py-[5px] rounded-lg cursor-pointer ${t===(c==null?void 0:c.data_id)?"bg-[#ffbade] text-black":"bg-[#373646] text-white"} max-[700px]:px-3`,onClick:()=>l(c),children:x.jsx("p",{className:"text-[13px] font-semibold",children:c.serverName})},u))})]}),a.length>0&&x.jsxs("div",{className:`servers px-2 flex items-center flex-wrap ml-2 max-[600px]:py-2 ${i.length===0?"h-1/2 ":"h-full"}`,children:[x.jsxs("div",{className:"flex items-center gap-x-3",children:[x.jsx(oe,{icon:Hr,className:"text-[#ffbade] text-[13px]"}),x.jsx("p",{className:"font-bold text-[14px]",children:"DUB:"})]}),x.jsx("div",{className:"flex gap-x-[7px] ml-8 flex-wrap",children:a.map((c,u)=>x.jsx("div",{className:`px-6 py-[5px] rounded-lg cursor-pointer ${t===(c==null?void 0:c.data_id)?"bg-[#ffbade] text-black":"bg-[#373646] text-white"} max-[700px]:px-3`,onClick:()=>l(c),children:x.jsx("p",{className:"text-[13px] font-semibold",children:c.serverName})},u))})]})]})]}):x.jsxs("p",{className:"text-center font-medium text-[15px] absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none",children:["Could not load servers ",x.jsx("br",{}),"Either reload or try again after sometime"]})})}const xd=({label:r,isActive:e,onClick:t})=>x.jsxs("button",{className:"flex gap-x-2",onClick:t,children:[x.jsx("h1",{className:"capitalize text-[13px]",children:r}),x.jsx("span",{className:`capitalize text-[13px] ${e?"text-[#ffbade]":"text-red-500"}`,children:e?"on":"off"})]});function kO({autoPlay:r,setAutoPlay:e,autoSkipIntro:t,setAutoSkipIntro:n,autoNext:s,setAutoNext:i,episodeId:a,episodes:o=[],onButtonClick:l}){const[c,u]=D.useState(o==null?void 0:o.findIndex(d=>{var f;return((f=d.id.match(/ep=(\d+)/))==null?void 0:f[1])===a}));return D.useEffect(()=>{if((o==null?void 0:o.length)>0){const d=o.findIndex(f=>{var p;return((p=f.id.match(/ep=(\d+)/))==null?void 0:p[1])===a});u(d)}},[a,o]),x.jsxs("div",{className:"bg-[#11101A] w-full flex justify-between flex-wrap px-4 pt-4 max-[1200px]:bg-[#14151A] max-[375px]:flex-col max-[375px]:gap-y-2",children:[x.jsxs("div",{className:"flex gap-x-4 flex-wrap",children:[x.jsx(xd,{label:"auto play",isActive:r,onClick:()=>e(d=>!d)}),x.jsx(xd,{label:"auto skip intro",isActive:t,onClick:()=>n(d=>!d)}),x.jsx(xd,{label:"auto next",isActive:s,onClick:()=>i(d=>!d)})]}),x.jsxs("div",{className:"flex gap-x-6 max-[575px]:gap-x-4 max-[375px]:justify-end",children:[x.jsx("button",{onClick:()=>{var d;c>0&&l((d=o[c-1].id.match(/ep=(\d+)/))==null?void 0:d[1])},disabled:c<=0,children:x.jsx(oe,{icon:n3,className:"text-[20px] max-[575px]:text-[16px] text-white"})}),x.jsx("button",{onClick:()=>{var d;c<(o==null?void 0:o.length)-1&&l((d=o[c+1].id.match(/ep=(\d+)/))==null?void 0:d[1])},disabled:c>=(o==null?void 0:o.length)-1,children:x.jsx(oe,{icon:f3,className:"text-[20px] max-[575px]:text-[16px] text-white"})})]})]})}function _O(){const[r,e]=D.useState(()=>JSON.parse(localStorage.getItem("autoPlay"))||!1),[t,n]=D.useState(()=>JSON.parse(localStorage.getItem("autoSkipIntro"))||!1),[s,i]=D.useState(()=>JSON.parse(localStorage.getItem("autoNext"))||!1);return D.useEffect(()=>{localStorage.setItem("autoPlay",JSON.stringify(r))},[r]),D.useEffect(()=>{localStorage.setItem("autoSkipIntro",JSON.stringify(t))},[t]),D.useEffect(()=>{localStorage.setItem("autoNext",JSON.stringify(s))},[s]),{autoPlay:r,setAutoPlay:e,autoSkipIntro:t,setAutoSkipIntro:n,autoNext:s,setAutoNext:i}}function PO({bgColor:r,index:e,icon:t,text:n}){return x.jsxs("div",{className:`flex space-x-1 justify-center items-center px-[4px] py-[1px] text-black font-semibold text-[13px] ${e===0?"rounded-l-[4px]":"rounded-none"}`,style:{backgroundColor:r},children:[t&&x.jsx(oe,{icon:t,className:"text-[12px]"}),x.jsx("p",{className:"text-[12px]",children:n})]})}function DO(){var ee,te,se,we,le,he,De,Qe,$e;const r=Yr(),e=Tt(),{id:t}=Yl();let s=new URLSearchParams(r.search).get("ep");const[i,a]=D.useState([]),{language:o}=dr(),{homeInfo:l}=Ni(),c=D.useRef(!0),[u,d]=D.useState(!0),{buffering:f,streamInfo:p,animeInfo:h,episodes:g,nextEpisodeSchedule:y,animeInfoLoading:b,totalEpisodes:m,isFullOverview:v,setIsFullOverview:S,activeEpisodeNum:E,streamUrl:C,subtitles:L,thumbnail:I,intro:T,outro:w,seasons:R,episodeId:_,setEpisodeId:k,activeServerId:N,setActiveServerId:M,servers:O,serverLoading:j}=Z_(t,s),{autoPlay:P,setAutoPlay:F,autoSkipIntro:B,setAutoSkipIntro:$,autoNext:G,setAutoNext:Y}=_O();return D.useEffect(()=>{var ue;if(!g||g.length===0)return;const ie=g.some(Q=>Q.id.split("ep=")[1]===_);if(!_||!ie){const Q=(ue=g[0].id.match(/ep=(\d+)/))==null?void 0:ue[1];Q&&Q!==_&&k(Q);return}const be=`/watch/${t}?ep=${_}`;c.current?(e(be,{replace:!0}),c.current=!1):e(be)},[_,t,e,g]),D.useEffect(()=>(h&&(document.title=`Watch ${h.title} English Sub/Dub online Free on ${Mt}`),()=>{document.title=`${Mt} | Free anime streaming platform`}),[t]),D.useEffect(()=>{m!==null&&m===0&&e(`/${t}`)},[p,_,t,m,e]),D.useEffect(()=>{let ie=null,be=null;const ue=()=>document.querySelector(".episodes"),Q=()=>document.querySelector(".player"),K=()=>{window.requestAnimationFrame(()=>{const xe=Q(),ce=ue();if(!(!ce||!xe))if(window.innerWidth>1200){const Oe=Math.ceil(xe.getBoundingClientRect().height);ce.style.height=`${Oe}px`,ce.style.minHeight=`${Oe}px`}else ce.style.height="auto",ce.style.minHeight="auto"})},Ne=()=>{if(Q()&&ue())K(),window.ResizeObserver?(ie=new ResizeObserver(K),ie.observe(Q())):(window.addEventListener("resize",K),be=new MutationObserver(K),be.observe(Q(),{attributes:!0,childList:!0,subtree:!0}));else{const xe=setTimeout(()=>{clearTimeout(xe),Q()&&ue()?Ne():K()},120)}};Ne();const Re=()=>K();return window.addEventListener("orientationchange",Re),()=>{window.removeEventListener("orientationchange",Re),ie&&ie.disconnect(),be&&be.disconnect(),window.removeEventListener("resize",K)}},[f,g]),D.useEffect(()=>{var ie,be,ue,Q,K,Ne,Re,xe,ce,Oe,Ae,At,Vt,et,Xr,Ms;a([{condition:(be=(ie=h==null?void 0:h.animeInfo)==null?void 0:ie.tvInfo)==null?void 0:be.rating,bgColor:"#ffffff",text:(Q=(ue=h==null?void 0:h.animeInfo)==null?void 0:ue.tvInfo)==null?void 0:Q.rating},{condition:(Ne=(K=h==null?void 0:h.animeInfo)==null?void 0:K.tvInfo)==null?void 0:Ne.quality,bgColor:"#FFBADE",text:(xe=(Re=h==null?void 0:h.animeInfo)==null?void 0:Re.tvInfo)==null?void 0:xe.quality},{condition:(Oe=(ce=h==null?void 0:h.animeInfo)==null?void 0:ce.tvInfo)==null?void 0:Oe.sub,icon:Kr,bgColor:"#B0E3AF",text:(At=(Ae=h==null?void 0:h.animeInfo)==null?void 0:Ae.tvInfo)==null?void 0:At.sub},{condition:(et=(Vt=h==null?void 0:h.animeInfo)==null?void 0:Vt.tvInfo)==null?void 0:et.dub,icon:Hr,bgColor:"#B9E7FF",text:(Ms=(Xr=h==null?void 0:h.animeInfo)==null?void 0:Xr.tvInfo)==null?void 0:Ms.dub}])},[t,h]),x.jsxs("div",{className:"w-full h-fit flex flex-col justify-center items-center relative",children:[x.jsxs("div",{className:"w-full relative max-[1400px]:px-[30px] max-[1200px]:px-[80px] max-[1024px]:px-0",children:[x.jsx("img",{src:b?"https://i.postimg.cc/rFZnx5tQ/2-Kn-Kzog-md.webp":`${h==null?void 0:h.poster}`,alt:`${h==null?void 0:h.title} Poster`,className:"absolute inset-0 w-full h-full object-cover filter grayscale z-[-900]"}),x.jsx("div",{className:"absolute inset-0 bg-[#3a3948] bg-opacity-80 backdrop-blur-md z-[-800]"}),x.jsxs("div",{className:"relative z-10 px-4 pb-[50px] grid grid-cols-[minmax(0,75%),minmax(0,25%)] w-full h-full mt-[128px] max-[1400px]:flex max-[1400px]:flex-col max-[1200px]:mt-[64px] max-[1024px]:px-0 max-md:mt-[50px]",children:[h&&x.jsxs("ul",{className:"flex absolute left-4 top-[-40px] gap-x-2 items-center w-fit max-[1200px]:hidden",children:[[["Home","home"],[h==null?void 0:h.showType,h==null?void 0:h.showType]].map(([ie,be],ue)=>x.jsxs("li",{className:"flex gap-x-3 items-center",children:[x.jsx(ge,{to:`/${be}`,className:"text-white hover:text-[#FFBADE] text-[15px] font-semibold",children:ie}),x.jsx("div",{className:"dot mt-[1px] bg-white"})]},ue)),x.jsxs("p",{className:"font-light text-[15px] text-gray-300 line-clamp-1 max-[575px]:leading-5",children:["Watching"," ",o==="EN"?h==null?void 0:h.title:h==null?void 0:h.japanese_title]})]}),x.jsxs("div",{className:"flex w-full min-h-fit max-[1200px]:flex-col-reverse",children:[x.jsx("div",{className:"episodes w-[35%] bg-[#191826] flex justify-center items-center max-[1400px]:w-[380px] max-[1200px]:w-full max-[1200px]:h-full max-[1200px]:min-h-[100px]",children:g?x.jsx(CO,{episodes:g,currentEpisode:_,onEpisodeClick:ie=>k(ie),totalEpisodes:m}):x.jsx(Ai,{})}),x.jsxs("div",{className:"player w-full h-fit bg-black flex flex-col",children:[x.jsxs("div",{className:"w-full relative h-[480px] max-[1400px]:h-[40vw] max-[1200px]:h-[48vw] max-[1024px]:h-[58vw] max-[600px]:h-[65vw]",children:[f?x.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-black bg-opacity-50",children:x.jsx(Ai,{})}):x.jsx(LO,{streamUrl:C,subtitles:L,intro:T,outro:w,thumbnail:I,autoSkipIntro:B,autoPlay:P,autoNext:G,episodeId:_,episodes:g,playNext:ie=>k(ie),animeInfo:h,episodeNum:E,streamInfo:p}),x.jsx("p",{className:"text-center underline font-medium text-[15px] absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:!f&&!p?O?x.jsxs(x.Fragment,{children:["Probably this server is down, try other servers",x.jsx("br",{}),"Either reload or try again after sometime"]}):x.jsxs(x.Fragment,{children:["Probably streaming server is down",x.jsx("br",{}),"Either reload or try again after sometime"]}):null})]}),!f&&x.jsx(kO,{autoPlay:P,setAutoPlay:F,autoSkipIntro:B,setAutoSkipIntro:$,autoNext:G,setAutoNext:Y,episodes:g,totalEpisodes:m,episodeId:_,onButtonClick:ie=>k(ie)}),x.jsx(RO,{servers:O,activeEpisodeNum:E,activeServerId:N,setActiveServerId:M,serverLoading:j}),(R==null?void 0:R.length)>0&&x.jsxs("div",{className:"flex flex-col gap-y-2 bg-[#11101A] p-4",children:[x.jsx("h1",{className:"w-fit text-lg max-[478px]:text-[18px] font-semibold",children:"Watch more seasons of this anime"}),x.jsx("div",{className:"flex flex-wrap gap-4 max-[575px]:grid max-[575px]:grid-cols-3 max-[575px]:gap-3 max-[480px]:grid-cols-2",children:R.map((ie,be)=>x.jsxs(ge,{to:`/${ie.id}`,className:`relative w-[20%] h-[60px] rounded-lg overflow-hidden cursor-pointer group ${t===String(ie.id)?"border border-[#ffbade]":""} max-[1200px]:w-[140px] max-[575px]:w-full`,children:[x.jsx("p",{className:`text-[13px] text-center font-bold absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full px-2 z-30 line-clamp-2 group-hover:text-[#ffbade] ${t===String(ie.id)?"text-[#ffbade]":"text-white"}`,children:ie.season}),x.jsx("div",{className:"absolute inset-0 z-10 bg-[url('https://i.postimg.cc/pVGY6RXd/thumb.png')] bg-repeat"}),x.jsx("img",{src:`${ie.season_poster}`,alt:"",className:"w-full h-full object-cover blur-[3px] opacity-50"})]},be))})]}),(y==null?void 0:y.nextEpisodeSchedule)&&u&&x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"w-full px-4 rounded-md bg-[#0088CC] flex items-center justify-between gap-x-2",children:[x.jsxs("div",{className:"w-full h-fit",children:[x.jsx("span",{className:"text-[18px]",children:""})," Estimated the next episode will come at ",x.jsx("span",{className:"text-[13.4px] font-medium",children:new Date(new Date(y.nextEpisodeSchedule).getTime()-new Date().getTimezoneOffset()*6e4).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})})]}),x.jsx("span",{className:"text-[25px] h-fit font-extrabold text-[#80C4E6] mb-1 cursor-pointer",onClick:()=>d(!1),children:""})]})})]})]}),x.jsxs("div",{className:"flex flex-col gap-y-4 items-start ml-8 max-[1400px]:ml-0 max-[1400px]:mt-10 max-[1400px]:flex-row max-[1400px]:gap-x-6 max-[1024px]:px-[30px] max-[1024px]:mt-8 max-[500px]:mt-4 max-[500px]:px-4",children:[h&&(h!=null&&h.poster)?x.jsx("img",{src:`${h==null?void 0:h.poster}`,alt:"",className:"w-[100px] h-[150px] object-cover max-[500px]:w-[70px] max-[500px]:h-[90px]"}):x.jsx(ae,{className:"w-[100px] h-[150px] rounded-none"}),x.jsxs("div",{className:"flex flex-col gap-y-4 justify-start",children:[h&&(h!=null&&h.title)?x.jsx("p",{className:"text-[26px] font-medium leading-6 max-[500px]:text-[18px]",children:o?h==null?void 0:h.title:h==null?void 0:h.japanese_title}):x.jsx(ae,{className:"w-[170px] h-[20px] rounded-xl"}),x.jsxs("div",{className:"flex flex-wrap w-fit gap-x-[2px] gap-y-[3px]",children:[h?i.map(({condition:ie,icon:be,bgColor:ue,text:Q},K)=>ie&&x.jsx(PO,{index:K,bgColor:ue,icon:be,text:Q},K)):x.jsx(ae,{className:"w-[70px] h-[20px] rounded-xl"}),x.jsx("div",{className:"flex w-fit items-center ml-1",children:[(te=(ee=h==null?void 0:h.animeInfo)==null?void 0:ee.tvInfo)==null?void 0:te.showType,(we=(se=h==null?void 0:h.animeInfo)==null?void 0:se.tvInfo)==null?void 0:we.duration].map((ie,be)=>ie&&x.jsxs("div",{className:"px-1 h-fit flex items-center gap-x-2 w-fit",children:[x.jsx("div",{className:"dot mt-[2px]"}),x.jsx("p",{className:"text-[14px]",children:ie})]},be))})]}),h?((le=h==null?void 0:h.animeInfo)==null?void 0:le.Overview)&&x.jsx("div",{className:"max-h-[150px] overflow-hidden",children:x.jsx("div",{className:"max-h-[110px] mt-2 overflow-y-auto",children:x.jsx("p",{className:"text-[14px] font-[400]",children:((he=h==null?void 0:h.animeInfo)==null?void 0:he.Overview.length)>270?x.jsxs(x.Fragment,{children:[v?(De=h==null?void 0:h.animeInfo)==null?void 0:De.Overview:`${(Qe=h==null?void 0:h.animeInfo)==null?void 0:Qe.Overview.slice(0,270)}...`,x.jsx("span",{className:"text-[13px] font-bold hover:cursor-pointer",onClick:()=>S(!v),children:v?"- Less":"+ More"})]}):($e=h==null?void 0:h.animeInfo)==null?void 0:$e.Overview})})}):x.jsxs("div",{className:"flex flex-col gap-y-2",children:[x.jsx(ae,{className:"w-[200px] h-[10px] rounded-xl"}),x.jsx(ae,{className:"w-[160px] h-[10px] rounded-xl"}),x.jsx(ae,{className:"w-[100px] h-[10px] rounded-xl"}),x.jsx(ae,{className:"w-[80px] h-[10px] rounded-xl"})]}),x.jsxs("p",{className:"text-[14px] max-[575px]:hidden",children:[`${Mt} is the best site to watch `,x.jsx("span",{className:"font-bold",children:o?h==null?void 0:h.title:h==null?void 0:h.japanese_title})," SUB online, or you can even watch ",x.jsx("span",{className:"font-bold",children:o?h==null?void 0:h.title:h==null?void 0:h.japanese_title})," DUB in HD quality."]}),x.jsx(ge,{to:`/${t}`,className:"w-fit text-[13px] bg-white rounded-[12px] px-[10px] py-1 text-black",children:"View detail"})]})]})]})]}),x.jsxs("div",{className:"w-full flex gap-x-4 items-center bg-[#191826] p-5 max-[575px]:px-3 max-[320px]:hidden",children:[x.jsx("img",{src:"https://i.postimg.cc/d34WWyNQ/share-icon.gif",alt:"Share Anime",className:"w-[60px] h-auto rounded-full max-[1024px]:w-[40px] max-[575px]:hidden"}),x.jsxs("div",{className:"flex flex-col w-fit",children:[x.jsx("p",{className:"text-[15px] font-bold text-[#FFBADE]",children:"Share Anime"}),x.jsx("p",{className:"text-[16px] text-white",children:"to your friends"})]})]}),x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex flex-col",children:[x.jsxs("div",{className:"mt-[15px] flex flex-col gap-y-7",children:[(h==null?void 0:h.charactersVoiceActors.length)>0&&x.jsx(tS,{animeInfo:h,className:"!mt-0"}),(h==null?void 0:h.recommended_data.length)>0?x.jsx(Gr,{label:"Recommended for you",data:h==null?void 0:h.recommended_data,limit:h==null?void 0:h.recommended_data.length,showViewMore:!1}):x.jsx(Sr,{className:"mt-[15px]"})]}),x.jsxs("div",{children:[h&&h.related_data?x.jsx($a,{label:"Related Anime",data:h.related_data,className:"mt-[15px]"}):x.jsx(gn,{className:"mt-[25px]"}),l&&l.most_popular&&x.jsx($a,{label:"Most Popular",data:l.most_popular.slice(0,10),className:"mt-[15px]",limit:10})]})]})]})}const NO=async(r,e)=>{const t="https://api-orcin-seven-62.vercel.app/api";try{return(await Te.get(`${t}/producer/${r}?page=${e}`)).data.results}catch(n){return console.error("Error fetching genre info:",n),n}};function OO(){const{id:r}=Yl(),[e,t]=Fc(),[n,s]=D.useState(null),[i,a]=D.useState(!0),[o,l]=D.useState(null),[c,u]=D.useState(0),d=parseInt(e.get("page"))||1,{homeInfo:f,homeInfoLoading:p}=Ni(),h=Tt();if(D.useEffect(()=>{(async()=>{a(!0);try{const b=await NO(r,d);s(b.data),u(b.totalPages),a(!1)}catch(b){l(b),console.error("Error fetching category info:",b)}})(),window.scrollTo(0,0)},[r,d]),i)return x.jsx(Jc,{type:"producer"});if(o)return h("/error-page"),x.jsx(Er,{});if(!n)return h("/404-not-found-page"),null;const g=y=>{t({page:y})};return x.jsx("div",{className:"w-full flex flex-col gap-y-4 mt-[100px] max-md:mt-[50px]",children:n?x.jsxs("div",{className:"w-full px-4 grid grid-cols-[minmax(0,75%),minmax(0,25%)] gap-x-6 max-[1200px]:flex max-[1200px]:flex-col max-[1200px]:gap-y-10",children:[d>c?x.jsxs("p",{className:"font-bold text-2xl text-[#ffbade] max-[478px]:text-[18px] max-[300px]:leading-6",children:["You came a long way, go back ",x.jsx("br",{className:"max-[300px]:hidden"}),"nothing is here"]}):x.jsxs("div",{children:[n&&x.jsx(Gr,{label:(r.charAt(0).toUpperCase()+r.slice(1)).split("-").join(" ")+" Anime",data:n,showViewMore:!1,className:"mt-0",categoryPage:!0}),x.jsx(lo,{page:d,totalPages:c,handlePageChange:g})]}),x.jsx("div",{className:"w-full flex flex-col gap-y-10",children:p?x.jsx(gn,{}):x.jsxs(x.Fragment,{children:[f&&f.topten&&x.jsx(Ep,{data:f.topten,className:"mt-0"}),(f==null?void 0:f.genres)&&x.jsx(Zc,{data:f.genres})]})})]}):x.jsx(Er,{})})}const MO=async()=>{try{let r="https://api-orcin-seven-62.vercel.app/api".split(","),e=r!=null&&r.length?r[Math.floor(Math.random()*r.length)]:"https://api-orcin-seven-62.vercel.app/api";const t=localStorage.getItem("topSearch");if(t){const{data:i,timestamp:a}=JSON.parse(t);if(Date.now()-a<=7*24*60*60*1e3)return i}const{data:n}=await Te.get(`${e}/top-search`),s=(n==null?void 0:n.results)||[];return s.length?(localStorage.setItem("topSearch",JSON.stringify({data:s,timestamp:Date.now()})),s):[]}catch(r){return console.error("Error fetching top search data:",r),null}},$x=[{to:"/home",label:"Home"},{to:"/movie",label:"Movies"},{to:"/tv",label:"TV Series"},{to:"/most-popular",label:"Most Popular"},{to:"/top-airing",label:"Top Airing"}],FO=()=>{const[r,e]=D.useState([]);return D.useEffect(()=>{(async()=>{const n=await MO();n&&e(n)})()},[]),r};function jO(){const r=Tt(),[e,t]=D.useState(""),[n,s]=D.useState(!1),i=FO(),a=D.useCallback(()=>{const l=e.trim();if(!l)return;const c=encodeURIComponent(l);r(`/search?keyword=${c}`)},[e,r]),o=D.useCallback(l=>{l.key==="Enter"&&a()},[a]);return x.jsxs("div",{className:"w-full",children:[x.jsxs("div",{className:"w-[1300px] mx-auto pt-12 relative overflow-hidden max-[1350px]:w-full max-[1350px]:px-8 max-[1200px]:pt-8 max-[1200px]:min-h-fit max-[780px]:px-4 max-[520px]:px-0 max-[520px]:pt-6",children:[x.jsxs("nav",{className:"relative w-full",children:[x.jsx("div",{className:"w-fit flex gap-x-12 mx-auto font-semibold max-[780px]:hidden",children:$x.map(l=>x.jsx(ge,{to:l.to,className:"hover:text-[#ffbade]",children:l.label},l.to))}),x.jsx("div",{className:"max-[780px]:block hidden max-[520px]:px-4 max-[520px]:text-sm",children:x.jsxs("button",{onClick:()=>s(!0),className:"p-2 focus:outline-none flex items-center gap-x-2 transition-colors duration-200 group",children:[x.jsx("svg",{className:"w-6 h-6 text-white transition-colors duration-200 max-[520px]:w-5 max-[520px]:h-5 group-hover:text-[#ffbade] group-focus:text-[#ffbade] group-active:text-[#ffbade]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),x.jsx("span",{className:"text-white font-semibold transition-colors duration-200 group-hover:text-[#ffbade] group-focus:text-[#ffbade] group-active:text-[#ffbade]",children:"Menu"})]})}),n&&x.jsx("div",{className:"max-[780px]:block w-full hidden absolute z-50 top-10",children:x.jsxs("div",{className:"bg-[#101010fa] w-full p-6 rounded-2xl flex flex-col gap-y-6 items-center",children:[x.jsx("button",{onClick:()=>s(!1),className:"self-end text-black text-xl absolute top-0 right-0 bg-white px-3 py-1 rounded-tr-xl rounded-bl-xl font-bold",children:""}),$x.map(l=>x.jsx(ge,{to:l.to,onClick:()=>s(!1),className:"hover:text-[#ffbade] text-white text-lg",children:l.label},l.to))]})})]}),x.jsxs("div",{className:"splashscreen min-h-[480px] min-[1200px]:min-h-[520px] bg-[#2B2A3C] rounded-[40px] flex relative mt-7 max-[780px]:w-full items-stretch max-[780px]:rounded-[30px] max-[520px]:rounded-none max-[520px]:min-h-fit max-[520px]:pb-4 max-[520px]:mt-4",children:[x.jsxs("div",{className:"h-auto flex flex-col w-[700px] relative z-40 px-20 py-20 left-0 max-[1200px]:py-12 max-[780px]:px-12 max-[520px]:py-4 max-[520px]:px-8",children:[x.jsxs(ge,{to:"/home",className:"text-[45px] font-extrabold tracking-wide max-[520px]:text-[38px] max-[520px]:text-center",children:[Fn.slice(0,3),x.jsx("span",{className:"text-[#FFBADE]",children:Fn.slice(3,4)}),Fn.slice(4)]}),x.jsxs("div",{className:"w-full flex gap-x-3 mt-6",children:[x.jsx("input",{type:"text",placeholder:"Search anime...",className:"w-full py-3 px-6 rounded-xl bg-white text-[18px] text-black",value:e,onChange:l=>t(l.target.value),onKeyDown:o}),x.jsx("button",{className:"bg-[#FFBADE] text-white py-3 px-4 rounded-xl font-extrabold",onClick:a,children:x.jsx(oe,{icon:Yc,className:"text-lg text-black hover:text-white max-[600px]:mt-[7px]"})})]}),x.jsxs("div",{className:"mt-8 text-[15px] leading-[1.6] max-[520px]:text-[13px] max-[520px]:leading-[1.4]",children:[x.jsx("span",{className:"splashitem font-[600]",children:"Top search: "}),i.map((l,c)=>x.jsxs("span",{className:"splashitem font-[400]",children:[x.jsx(ge,{to:l.link,children:l.title}),c<i.length-1&&x.jsx("span",{children:", "})]},c))]}),x.jsx("div",{className:"mt-8 flex max-[780px]:left-10",children:x.jsx(ge,{to:"/home",className:"max-[520px]:w-full",children:x.jsxs("div",{className:"bg-[#FFBADE] text-black py-4 px-10 rounded-xl font-bold text-[20px] max-[520px]:text-center max-[520px]:font-medium max-[520px]:text-[17px]",children:["Watch anime",x.jsx(oe,{icon:u3,className:"ml-6 text-black"})]})})})]}),x.jsxs("div",{className:"h-full w-[600px] absolute right-0 max-[780px]:hidden",children:[x.jsx("div",{className:"splashoverlay"}),x.jsx("img",{src:"/splash.webp",alt:"Splash",className:"bg-cover rounded-r-[40px] w-full h-full object-cover"})]})]})]}),x.jsxs("div",{className:"mt-10 text-[14px] text-center pb-4",children:[" ",Fn," All rights reserved."]})]})}function $O(){const r=Yr();D.useEffect(()=>{window.scrollTo(0,0)},[r]);const e=r.pathname==="/";return x.jsx(eL,{children:x.jsx("div",{className:"app-container",children:x.jsxs("main",{className:"content",children:[!e&&x.jsx(B_,{}),x.jsxs(fA,{children:[x.jsx(Gt,{path:"/",element:x.jsx(jO,{})}),x.jsx(Gt,{path:"/home",element:x.jsx(C_,{})}),x.jsx(Gt,{path:"/:id",element:x.jsx(v0,{})}),x.jsx(Gt,{path:"/watch/:id",element:x.jsx(DO,{})}),x.jsx(Gt,{path:"/random",element:x.jsx(v0,{random:!0})}),x.jsx(Gt,{path:"/404-not-found-page",element:x.jsx(Er,{error:"404"})}),x.jsx(Gt,{path:"/error-page",element:x.jsx(Er,{})}),G_.map(t=>x.jsx(Gt,{path:`/${t}`,element:x.jsx(z_,{path:t,label:t.split("-").join(" ")})},t)),H_.map(t=>x.jsx(Gt,{path:`/${t}`,element:x.jsx(V_,{path:t})},t)),x.jsx(Gt,{path:"/producer/:id",element:x.jsx(OO,{})}),x.jsx(Gt,{path:"/search",element:x.jsx(W_,{})}),x.jsx(Gt,{path:"*",element:x.jsx(Er,{error:"404"})})]}),!e&&x.jsx(U_,{})]})})})}Jy(document.getElementById("root")).render(x.jsx(gw,{children:x.jsx(bA,{children:x.jsx($O,{})})}))});export default BO();
